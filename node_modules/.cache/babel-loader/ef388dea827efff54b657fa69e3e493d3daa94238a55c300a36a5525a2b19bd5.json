{"ast":null,"code":"'use strict';\n\nvar _classCallCheck = require(\"/Users/yinger/Desktop/algo_evaluator_front/node_modules/@babel/runtime/helpers/classCallCheck.js\")[\"default\"];\nvar _createClass = require(\"/Users/yinger/Desktop/algo_evaluator_front/node_modules/@babel/runtime/helpers/createClass.js\")[\"default\"];\nvar _defineProperty = require(\"/Users/yinger/Desktop/algo_evaluator_front/node_modules/@babel/runtime/helpers/defineProperty.js\")[\"default\"];\nvar _TOKEN_HANDLERS;\nrequire(\"core-js/modules/es.array.push.js\");\nrequire(\"core-js/modules/es.function.name.js\");\nrequire(\"core-js/modules/es.object.to-string.js\");\nrequire(\"core-js/modules/es.regexp.exec.js\");\nrequire(\"core-js/modules/es.string.replace.js\");\nrequire(\"core-js/modules/es.string.substr.js\");\nrequire(\"core-js/modules/web.dom-collections.iterator.js\");\nvar Tokenizer = require('../tokenizer');\nvar OpenElementStack = require('./open-element-stack');\nvar FormattingElementList = require('./formatting-element-list');\nvar LocationInfoParserMixin = require('../extensions/location-info/parser-mixin');\nvar ErrorReportingParserMixin = require('../extensions/error-reporting/parser-mixin');\nvar Mixin = require('../utils/mixin');\nvar defaultTreeAdapter = require('../tree-adapters/default');\nvar mergeOptions = require('../utils/merge-options');\nvar doctype = require('../common/doctype');\nvar foreignContent = require('../common/foreign-content');\nvar ERR = require('../common/error-codes');\nvar unicode = require('../common/unicode');\nvar HTML = require('../common/html');\n\n//Aliases\nvar $ = HTML.TAG_NAMES;\nvar NS = HTML.NAMESPACES;\nvar ATTRS = HTML.ATTRS;\nvar DEFAULT_OPTIONS = {\n  scriptingEnabled: true,\n  sourceCodeLocationInfo: false,\n  onParseError: null,\n  treeAdapter: defaultTreeAdapter\n};\n\n//Misc constants\nvar HIDDEN_INPUT_TYPE = 'hidden';\n\n//Adoption agency loops iteration count\nvar AA_OUTER_LOOP_ITER = 8;\nvar AA_INNER_LOOP_ITER = 3;\n\n//Insertion modes\nvar INITIAL_MODE = 'INITIAL_MODE';\nvar BEFORE_HTML_MODE = 'BEFORE_HTML_MODE';\nvar BEFORE_HEAD_MODE = 'BEFORE_HEAD_MODE';\nvar IN_HEAD_MODE = 'IN_HEAD_MODE';\nvar IN_HEAD_NO_SCRIPT_MODE = 'IN_HEAD_NO_SCRIPT_MODE';\nvar AFTER_HEAD_MODE = 'AFTER_HEAD_MODE';\nvar IN_BODY_MODE = 'IN_BODY_MODE';\nvar TEXT_MODE = 'TEXT_MODE';\nvar IN_TABLE_MODE = 'IN_TABLE_MODE';\nvar IN_TABLE_TEXT_MODE = 'IN_TABLE_TEXT_MODE';\nvar IN_CAPTION_MODE = 'IN_CAPTION_MODE';\nvar IN_COLUMN_GROUP_MODE = 'IN_COLUMN_GROUP_MODE';\nvar IN_TABLE_BODY_MODE = 'IN_TABLE_BODY_MODE';\nvar IN_ROW_MODE = 'IN_ROW_MODE';\nvar IN_CELL_MODE = 'IN_CELL_MODE';\nvar IN_SELECT_MODE = 'IN_SELECT_MODE';\nvar IN_SELECT_IN_TABLE_MODE = 'IN_SELECT_IN_TABLE_MODE';\nvar IN_TEMPLATE_MODE = 'IN_TEMPLATE_MODE';\nvar AFTER_BODY_MODE = 'AFTER_BODY_MODE';\nvar IN_FRAMESET_MODE = 'IN_FRAMESET_MODE';\nvar AFTER_FRAMESET_MODE = 'AFTER_FRAMESET_MODE';\nvar AFTER_AFTER_BODY_MODE = 'AFTER_AFTER_BODY_MODE';\nvar AFTER_AFTER_FRAMESET_MODE = 'AFTER_AFTER_FRAMESET_MODE';\n\n//Insertion mode reset map\nvar INSERTION_MODE_RESET_MAP = _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, $.TR, IN_ROW_MODE), $.TBODY, IN_TABLE_BODY_MODE), $.THEAD, IN_TABLE_BODY_MODE), $.TFOOT, IN_TABLE_BODY_MODE), $.CAPTION, IN_CAPTION_MODE), $.COLGROUP, IN_COLUMN_GROUP_MODE), $.TABLE, IN_TABLE_MODE), $.BODY, IN_BODY_MODE), $.FRAMESET, IN_FRAMESET_MODE);\n\n//Template insertion mode switch map\nvar TEMPLATE_INSERTION_MODE_SWITCH_MAP = _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, $.CAPTION, IN_TABLE_MODE), $.COLGROUP, IN_TABLE_MODE), $.TBODY, IN_TABLE_MODE), $.TFOOT, IN_TABLE_MODE), $.THEAD, IN_TABLE_MODE), $.COL, IN_COLUMN_GROUP_MODE), $.TR, IN_TABLE_BODY_MODE), $.TD, IN_ROW_MODE), $.TH, IN_ROW_MODE);\n\n//Token handlers map for insertion modes\nvar TOKEN_HANDLERS = (_TOKEN_HANDLERS = {}, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_TOKEN_HANDLERS, INITIAL_MODE, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, Tokenizer.CHARACTER_TOKEN, tokenInInitialMode), Tokenizer.NULL_CHARACTER_TOKEN, tokenInInitialMode), Tokenizer.WHITESPACE_CHARACTER_TOKEN, ignoreToken), Tokenizer.COMMENT_TOKEN, appendComment), Tokenizer.DOCTYPE_TOKEN, doctypeInInitialMode), Tokenizer.START_TAG_TOKEN, tokenInInitialMode), Tokenizer.END_TAG_TOKEN, tokenInInitialMode), Tokenizer.EOF_TOKEN, tokenInInitialMode)), BEFORE_HTML_MODE, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, Tokenizer.CHARACTER_TOKEN, tokenBeforeHtml), Tokenizer.NULL_CHARACTER_TOKEN, tokenBeforeHtml), Tokenizer.WHITESPACE_CHARACTER_TOKEN, ignoreToken), Tokenizer.COMMENT_TOKEN, appendComment), Tokenizer.DOCTYPE_TOKEN, ignoreToken), Tokenizer.START_TAG_TOKEN, startTagBeforeHtml), Tokenizer.END_TAG_TOKEN, endTagBeforeHtml), Tokenizer.EOF_TOKEN, tokenBeforeHtml)), BEFORE_HEAD_MODE, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, Tokenizer.CHARACTER_TOKEN, tokenBeforeHead), Tokenizer.NULL_CHARACTER_TOKEN, tokenBeforeHead), Tokenizer.WHITESPACE_CHARACTER_TOKEN, ignoreToken), Tokenizer.COMMENT_TOKEN, appendComment), Tokenizer.DOCTYPE_TOKEN, misplacedDoctype), Tokenizer.START_TAG_TOKEN, startTagBeforeHead), Tokenizer.END_TAG_TOKEN, endTagBeforeHead), Tokenizer.EOF_TOKEN, tokenBeforeHead)), IN_HEAD_MODE, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, Tokenizer.CHARACTER_TOKEN, tokenInHead), Tokenizer.NULL_CHARACTER_TOKEN, tokenInHead), Tokenizer.WHITESPACE_CHARACTER_TOKEN, insertCharacters), Tokenizer.COMMENT_TOKEN, appendComment), Tokenizer.DOCTYPE_TOKEN, misplacedDoctype), Tokenizer.START_TAG_TOKEN, startTagInHead), Tokenizer.END_TAG_TOKEN, endTagInHead), Tokenizer.EOF_TOKEN, tokenInHead)), IN_HEAD_NO_SCRIPT_MODE, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, Tokenizer.CHARACTER_TOKEN, tokenInHeadNoScript), Tokenizer.NULL_CHARACTER_TOKEN, tokenInHeadNoScript), Tokenizer.WHITESPACE_CHARACTER_TOKEN, insertCharacters), Tokenizer.COMMENT_TOKEN, appendComment), Tokenizer.DOCTYPE_TOKEN, misplacedDoctype), Tokenizer.START_TAG_TOKEN, startTagInHeadNoScript), Tokenizer.END_TAG_TOKEN, endTagInHeadNoScript), Tokenizer.EOF_TOKEN, tokenInHeadNoScript)), AFTER_HEAD_MODE, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, Tokenizer.CHARACTER_TOKEN, tokenAfterHead), Tokenizer.NULL_CHARACTER_TOKEN, tokenAfterHead), Tokenizer.WHITESPACE_CHARACTER_TOKEN, insertCharacters), Tokenizer.COMMENT_TOKEN, appendComment), Tokenizer.DOCTYPE_TOKEN, misplacedDoctype), Tokenizer.START_TAG_TOKEN, startTagAfterHead), Tokenizer.END_TAG_TOKEN, endTagAfterHead), Tokenizer.EOF_TOKEN, tokenAfterHead)), IN_BODY_MODE, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, Tokenizer.CHARACTER_TOKEN, characterInBody), Tokenizer.NULL_CHARACTER_TOKEN, ignoreToken), Tokenizer.WHITESPACE_CHARACTER_TOKEN, whitespaceCharacterInBody), Tokenizer.COMMENT_TOKEN, appendComment), Tokenizer.DOCTYPE_TOKEN, ignoreToken), Tokenizer.START_TAG_TOKEN, startTagInBody), Tokenizer.END_TAG_TOKEN, endTagInBody), Tokenizer.EOF_TOKEN, eofInBody)), TEXT_MODE, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, Tokenizer.CHARACTER_TOKEN, insertCharacters), Tokenizer.NULL_CHARACTER_TOKEN, insertCharacters), Tokenizer.WHITESPACE_CHARACTER_TOKEN, insertCharacters), Tokenizer.COMMENT_TOKEN, ignoreToken), Tokenizer.DOCTYPE_TOKEN, ignoreToken), Tokenizer.START_TAG_TOKEN, ignoreToken), Tokenizer.END_TAG_TOKEN, endTagInText), Tokenizer.EOF_TOKEN, eofInText)), IN_TABLE_MODE, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, Tokenizer.CHARACTER_TOKEN, characterInTable), Tokenizer.NULL_CHARACTER_TOKEN, characterInTable), Tokenizer.WHITESPACE_CHARACTER_TOKEN, characterInTable), Tokenizer.COMMENT_TOKEN, appendComment), Tokenizer.DOCTYPE_TOKEN, ignoreToken), Tokenizer.START_TAG_TOKEN, startTagInTable), Tokenizer.END_TAG_TOKEN, endTagInTable), Tokenizer.EOF_TOKEN, eofInBody)), IN_TABLE_TEXT_MODE, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, Tokenizer.CHARACTER_TOKEN, characterInTableText), Tokenizer.NULL_CHARACTER_TOKEN, ignoreToken), Tokenizer.WHITESPACE_CHARACTER_TOKEN, whitespaceCharacterInTableText), Tokenizer.COMMENT_TOKEN, tokenInTableText), Tokenizer.DOCTYPE_TOKEN, tokenInTableText), Tokenizer.START_TAG_TOKEN, tokenInTableText), Tokenizer.END_TAG_TOKEN, tokenInTableText), Tokenizer.EOF_TOKEN, tokenInTableText)), _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_TOKEN_HANDLERS, IN_CAPTION_MODE, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, Tokenizer.CHARACTER_TOKEN, characterInBody), Tokenizer.NULL_CHARACTER_TOKEN, ignoreToken), Tokenizer.WHITESPACE_CHARACTER_TOKEN, whitespaceCharacterInBody), Tokenizer.COMMENT_TOKEN, appendComment), Tokenizer.DOCTYPE_TOKEN, ignoreToken), Tokenizer.START_TAG_TOKEN, startTagInCaption), Tokenizer.END_TAG_TOKEN, endTagInCaption), Tokenizer.EOF_TOKEN, eofInBody)), IN_COLUMN_GROUP_MODE, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, Tokenizer.CHARACTER_TOKEN, tokenInColumnGroup), Tokenizer.NULL_CHARACTER_TOKEN, tokenInColumnGroup), Tokenizer.WHITESPACE_CHARACTER_TOKEN, insertCharacters), Tokenizer.COMMENT_TOKEN, appendComment), Tokenizer.DOCTYPE_TOKEN, ignoreToken), Tokenizer.START_TAG_TOKEN, startTagInColumnGroup), Tokenizer.END_TAG_TOKEN, endTagInColumnGroup), Tokenizer.EOF_TOKEN, eofInBody)), IN_TABLE_BODY_MODE, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, Tokenizer.CHARACTER_TOKEN, characterInTable), Tokenizer.NULL_CHARACTER_TOKEN, characterInTable), Tokenizer.WHITESPACE_CHARACTER_TOKEN, characterInTable), Tokenizer.COMMENT_TOKEN, appendComment), Tokenizer.DOCTYPE_TOKEN, ignoreToken), Tokenizer.START_TAG_TOKEN, startTagInTableBody), Tokenizer.END_TAG_TOKEN, endTagInTableBody), Tokenizer.EOF_TOKEN, eofInBody)), IN_ROW_MODE, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, Tokenizer.CHARACTER_TOKEN, characterInTable), Tokenizer.NULL_CHARACTER_TOKEN, characterInTable), Tokenizer.WHITESPACE_CHARACTER_TOKEN, characterInTable), Tokenizer.COMMENT_TOKEN, appendComment), Tokenizer.DOCTYPE_TOKEN, ignoreToken), Tokenizer.START_TAG_TOKEN, startTagInRow), Tokenizer.END_TAG_TOKEN, endTagInRow), Tokenizer.EOF_TOKEN, eofInBody)), IN_CELL_MODE, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, Tokenizer.CHARACTER_TOKEN, characterInBody), Tokenizer.NULL_CHARACTER_TOKEN, ignoreToken), Tokenizer.WHITESPACE_CHARACTER_TOKEN, whitespaceCharacterInBody), Tokenizer.COMMENT_TOKEN, appendComment), Tokenizer.DOCTYPE_TOKEN, ignoreToken), Tokenizer.START_TAG_TOKEN, startTagInCell), Tokenizer.END_TAG_TOKEN, endTagInCell), Tokenizer.EOF_TOKEN, eofInBody)), IN_SELECT_MODE, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, Tokenizer.CHARACTER_TOKEN, insertCharacters), Tokenizer.NULL_CHARACTER_TOKEN, ignoreToken), Tokenizer.WHITESPACE_CHARACTER_TOKEN, insertCharacters), Tokenizer.COMMENT_TOKEN, appendComment), Tokenizer.DOCTYPE_TOKEN, ignoreToken), Tokenizer.START_TAG_TOKEN, startTagInSelect), Tokenizer.END_TAG_TOKEN, endTagInSelect), Tokenizer.EOF_TOKEN, eofInBody)), IN_SELECT_IN_TABLE_MODE, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, Tokenizer.CHARACTER_TOKEN, insertCharacters), Tokenizer.NULL_CHARACTER_TOKEN, ignoreToken), Tokenizer.WHITESPACE_CHARACTER_TOKEN, insertCharacters), Tokenizer.COMMENT_TOKEN, appendComment), Tokenizer.DOCTYPE_TOKEN, ignoreToken), Tokenizer.START_TAG_TOKEN, startTagInSelectInTable), Tokenizer.END_TAG_TOKEN, endTagInSelectInTable), Tokenizer.EOF_TOKEN, eofInBody)), IN_TEMPLATE_MODE, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, Tokenizer.CHARACTER_TOKEN, characterInBody), Tokenizer.NULL_CHARACTER_TOKEN, ignoreToken), Tokenizer.WHITESPACE_CHARACTER_TOKEN, whitespaceCharacterInBody), Tokenizer.COMMENT_TOKEN, appendComment), Tokenizer.DOCTYPE_TOKEN, ignoreToken), Tokenizer.START_TAG_TOKEN, startTagInTemplate), Tokenizer.END_TAG_TOKEN, endTagInTemplate), Tokenizer.EOF_TOKEN, eofInTemplate)), AFTER_BODY_MODE, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, Tokenizer.CHARACTER_TOKEN, tokenAfterBody), Tokenizer.NULL_CHARACTER_TOKEN, tokenAfterBody), Tokenizer.WHITESPACE_CHARACTER_TOKEN, whitespaceCharacterInBody), Tokenizer.COMMENT_TOKEN, appendCommentToRootHtmlElement), Tokenizer.DOCTYPE_TOKEN, ignoreToken), Tokenizer.START_TAG_TOKEN, startTagAfterBody), Tokenizer.END_TAG_TOKEN, endTagAfterBody), Tokenizer.EOF_TOKEN, stopParsing)), IN_FRAMESET_MODE, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, Tokenizer.CHARACTER_TOKEN, ignoreToken), Tokenizer.NULL_CHARACTER_TOKEN, ignoreToken), Tokenizer.WHITESPACE_CHARACTER_TOKEN, insertCharacters), Tokenizer.COMMENT_TOKEN, appendComment), Tokenizer.DOCTYPE_TOKEN, ignoreToken), Tokenizer.START_TAG_TOKEN, startTagInFrameset), Tokenizer.END_TAG_TOKEN, endTagInFrameset), Tokenizer.EOF_TOKEN, stopParsing)), _defineProperty(_defineProperty(_defineProperty(_TOKEN_HANDLERS, AFTER_FRAMESET_MODE, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, Tokenizer.CHARACTER_TOKEN, ignoreToken), Tokenizer.NULL_CHARACTER_TOKEN, ignoreToken), Tokenizer.WHITESPACE_CHARACTER_TOKEN, insertCharacters), Tokenizer.COMMENT_TOKEN, appendComment), Tokenizer.DOCTYPE_TOKEN, ignoreToken), Tokenizer.START_TAG_TOKEN, startTagAfterFrameset), Tokenizer.END_TAG_TOKEN, endTagAfterFrameset), Tokenizer.EOF_TOKEN, stopParsing)), AFTER_AFTER_BODY_MODE, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, Tokenizer.CHARACTER_TOKEN, tokenAfterAfterBody), Tokenizer.NULL_CHARACTER_TOKEN, tokenAfterAfterBody), Tokenizer.WHITESPACE_CHARACTER_TOKEN, whitespaceCharacterInBody), Tokenizer.COMMENT_TOKEN, appendCommentToDocument), Tokenizer.DOCTYPE_TOKEN, ignoreToken), Tokenizer.START_TAG_TOKEN, startTagAfterAfterBody), Tokenizer.END_TAG_TOKEN, tokenAfterAfterBody), Tokenizer.EOF_TOKEN, stopParsing)), AFTER_AFTER_FRAMESET_MODE, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, Tokenizer.CHARACTER_TOKEN, ignoreToken), Tokenizer.NULL_CHARACTER_TOKEN, ignoreToken), Tokenizer.WHITESPACE_CHARACTER_TOKEN, whitespaceCharacterInBody), Tokenizer.COMMENT_TOKEN, appendCommentToDocument), Tokenizer.DOCTYPE_TOKEN, ignoreToken), Tokenizer.START_TAG_TOKEN, startTagAfterAfterFrameset), Tokenizer.END_TAG_TOKEN, ignoreToken), Tokenizer.EOF_TOKEN, stopParsing)));\n\n//Parser\nvar Parser = /*#__PURE__*/function () {\n  function Parser(options) {\n    _classCallCheck(this, Parser);\n    this.options = mergeOptions(DEFAULT_OPTIONS, options);\n    this.treeAdapter = this.options.treeAdapter;\n    this.pendingScript = null;\n    if (this.options.sourceCodeLocationInfo) {\n      Mixin.install(this, LocationInfoParserMixin);\n    }\n    if (this.options.onParseError) {\n      Mixin.install(this, ErrorReportingParserMixin, {\n        onParseError: this.options.onParseError\n      });\n    }\n  }\n\n  // API\n  return _createClass(Parser, [{\n    key: \"parse\",\n    value: function parse(html) {\n      var document = this.treeAdapter.createDocument();\n      this._bootstrap(document, null);\n      this.tokenizer.write(html, true);\n      this._runParsingLoop(null);\n      return document;\n    }\n  }, {\n    key: \"parseFragment\",\n    value: function parseFragment(html, fragmentContext) {\n      //NOTE: use <template> element as a fragment context if context element was not provided,\n      //so we will parse in \"forgiving\" manner\n      if (!fragmentContext) {\n        fragmentContext = this.treeAdapter.createElement($.TEMPLATE, NS.HTML, []);\n      }\n\n      //NOTE: create fake element which will be used as 'document' for fragment parsing.\n      //This is important for jsdom there 'document' can't be recreated, therefore\n      //fragment parsing causes messing of the main `document`.\n      var documentMock = this.treeAdapter.createElement('documentmock', NS.HTML, []);\n      this._bootstrap(documentMock, fragmentContext);\n      if (this.treeAdapter.getTagName(fragmentContext) === $.TEMPLATE) {\n        this._pushTmplInsertionMode(IN_TEMPLATE_MODE);\n      }\n      this._initTokenizerForFragmentParsing();\n      this._insertFakeRootElement();\n      this._resetInsertionMode();\n      this._findFormInFragmentContext();\n      this.tokenizer.write(html, true);\n      this._runParsingLoop(null);\n      var rootElement = this.treeAdapter.getFirstChild(documentMock);\n      var fragment = this.treeAdapter.createDocumentFragment();\n      this._adoptNodes(rootElement, fragment);\n      return fragment;\n    }\n\n    //Bootstrap parser\n  }, {\n    key: \"_bootstrap\",\n    value: function _bootstrap(document, fragmentContext) {\n      this.tokenizer = new Tokenizer(this.options);\n      this.stopped = false;\n      this.insertionMode = INITIAL_MODE;\n      this.originalInsertionMode = '';\n      this.document = document;\n      this.fragmentContext = fragmentContext;\n      this.headElement = null;\n      this.formElement = null;\n      this.openElements = new OpenElementStack(this.document, this.treeAdapter);\n      this.activeFormattingElements = new FormattingElementList(this.treeAdapter);\n      this.tmplInsertionModeStack = [];\n      this.tmplInsertionModeStackTop = -1;\n      this.currentTmplInsertionMode = null;\n      this.pendingCharacterTokens = [];\n      this.hasNonWhitespacePendingCharacterToken = false;\n      this.framesetOk = true;\n      this.skipNextNewLine = false;\n      this.fosterParentingEnabled = false;\n    }\n\n    //Errors\n  }, {\n    key: \"_err\",\n    value: function _err() {\n      // NOTE: err reporting is noop by default. Enabled by mixin.\n    }\n\n    //Parsing loop\n  }, {\n    key: \"_runParsingLoop\",\n    value: function _runParsingLoop(scriptHandler) {\n      while (!this.stopped) {\n        this._setupTokenizerCDATAMode();\n        var token = this.tokenizer.getNextToken();\n        if (token.type === Tokenizer.HIBERNATION_TOKEN) {\n          break;\n        }\n        if (this.skipNextNewLine) {\n          this.skipNextNewLine = false;\n          if (token.type === Tokenizer.WHITESPACE_CHARACTER_TOKEN && token.chars[0] === '\\n') {\n            if (token.chars.length === 1) {\n              continue;\n            }\n            token.chars = token.chars.substr(1);\n          }\n        }\n        this._processInputToken(token);\n        if (scriptHandler && this.pendingScript) {\n          break;\n        }\n      }\n    }\n  }, {\n    key: \"runParsingLoopForCurrentChunk\",\n    value: function runParsingLoopForCurrentChunk(writeCallback, scriptHandler) {\n      this._runParsingLoop(scriptHandler);\n      if (scriptHandler && this.pendingScript) {\n        var script = this.pendingScript;\n        this.pendingScript = null;\n        scriptHandler(script);\n        return;\n      }\n      if (writeCallback) {\n        writeCallback();\n      }\n    }\n\n    //Text parsing\n  }, {\n    key: \"_setupTokenizerCDATAMode\",\n    value: function _setupTokenizerCDATAMode() {\n      var current = this._getAdjustedCurrentElement();\n      this.tokenizer.allowCDATA = current && current !== this.document && this.treeAdapter.getNamespaceURI(current) !== NS.HTML && !this._isIntegrationPoint(current);\n    }\n  }, {\n    key: \"_switchToTextParsing\",\n    value: function _switchToTextParsing(currentToken, nextTokenizerState) {\n      this._insertElement(currentToken, NS.HTML);\n      this.tokenizer.state = nextTokenizerState;\n      this.originalInsertionMode = this.insertionMode;\n      this.insertionMode = TEXT_MODE;\n    }\n  }, {\n    key: \"switchToPlaintextParsing\",\n    value: function switchToPlaintextParsing() {\n      this.insertionMode = TEXT_MODE;\n      this.originalInsertionMode = IN_BODY_MODE;\n      this.tokenizer.state = Tokenizer.MODE.PLAINTEXT;\n    }\n\n    //Fragment parsing\n  }, {\n    key: \"_getAdjustedCurrentElement\",\n    value: function _getAdjustedCurrentElement() {\n      return this.openElements.stackTop === 0 && this.fragmentContext ? this.fragmentContext : this.openElements.current;\n    }\n  }, {\n    key: \"_findFormInFragmentContext\",\n    value: function _findFormInFragmentContext() {\n      var node = this.fragmentContext;\n      do {\n        if (this.treeAdapter.getTagName(node) === $.FORM) {\n          this.formElement = node;\n          break;\n        }\n        node = this.treeAdapter.getParentNode(node);\n      } while (node);\n    }\n  }, {\n    key: \"_initTokenizerForFragmentParsing\",\n    value: function _initTokenizerForFragmentParsing() {\n      if (this.treeAdapter.getNamespaceURI(this.fragmentContext) === NS.HTML) {\n        var tn = this.treeAdapter.getTagName(this.fragmentContext);\n        if (tn === $.TITLE || tn === $.TEXTAREA) {\n          this.tokenizer.state = Tokenizer.MODE.RCDATA;\n        } else if (tn === $.STYLE || tn === $.XMP || tn === $.IFRAME || tn === $.NOEMBED || tn === $.NOFRAMES || tn === $.NOSCRIPT) {\n          this.tokenizer.state = Tokenizer.MODE.RAWTEXT;\n        } else if (tn === $.SCRIPT) {\n          this.tokenizer.state = Tokenizer.MODE.SCRIPT_DATA;\n        } else if (tn === $.PLAINTEXT) {\n          this.tokenizer.state = Tokenizer.MODE.PLAINTEXT;\n        }\n      }\n    }\n\n    //Tree mutation\n  }, {\n    key: \"_setDocumentType\",\n    value: function _setDocumentType(token) {\n      var name = token.name || '';\n      var publicId = token.publicId || '';\n      var systemId = token.systemId || '';\n      this.treeAdapter.setDocumentType(this.document, name, publicId, systemId);\n    }\n  }, {\n    key: \"_attachElementToTree\",\n    value: function _attachElementToTree(element) {\n      if (this._shouldFosterParentOnInsertion()) {\n        this._fosterParentElement(element);\n      } else {\n        var parent = this.openElements.currentTmplContent || this.openElements.current;\n        this.treeAdapter.appendChild(parent, element);\n      }\n    }\n  }, {\n    key: \"_appendElement\",\n    value: function _appendElement(token, namespaceURI) {\n      var element = this.treeAdapter.createElement(token.tagName, namespaceURI, token.attrs);\n      this._attachElementToTree(element);\n    }\n  }, {\n    key: \"_insertElement\",\n    value: function _insertElement(token, namespaceURI) {\n      var element = this.treeAdapter.createElement(token.tagName, namespaceURI, token.attrs);\n      this._attachElementToTree(element);\n      this.openElements.push(element);\n    }\n  }, {\n    key: \"_insertFakeElement\",\n    value: function _insertFakeElement(tagName) {\n      var element = this.treeAdapter.createElement(tagName, NS.HTML, []);\n      this._attachElementToTree(element);\n      this.openElements.push(element);\n    }\n  }, {\n    key: \"_insertTemplate\",\n    value: function _insertTemplate(token) {\n      var tmpl = this.treeAdapter.createElement(token.tagName, NS.HTML, token.attrs);\n      var content = this.treeAdapter.createDocumentFragment();\n      this.treeAdapter.setTemplateContent(tmpl, content);\n      this._attachElementToTree(tmpl);\n      this.openElements.push(tmpl);\n    }\n  }, {\n    key: \"_insertFakeRootElement\",\n    value: function _insertFakeRootElement() {\n      var element = this.treeAdapter.createElement($.HTML, NS.HTML, []);\n      this.treeAdapter.appendChild(this.openElements.current, element);\n      this.openElements.push(element);\n    }\n  }, {\n    key: \"_appendCommentNode\",\n    value: function _appendCommentNode(token, parent) {\n      var commentNode = this.treeAdapter.createCommentNode(token.data);\n      this.treeAdapter.appendChild(parent, commentNode);\n    }\n  }, {\n    key: \"_insertCharacters\",\n    value: function _insertCharacters(token) {\n      if (this._shouldFosterParentOnInsertion()) {\n        this._fosterParentText(token.chars);\n      } else {\n        var parent = this.openElements.currentTmplContent || this.openElements.current;\n        this.treeAdapter.insertText(parent, token.chars);\n      }\n    }\n  }, {\n    key: \"_adoptNodes\",\n    value: function _adoptNodes(donor, recipient) {\n      for (var child = this.treeAdapter.getFirstChild(donor); child; child = this.treeAdapter.getFirstChild(donor)) {\n        this.treeAdapter.detachNode(child);\n        this.treeAdapter.appendChild(recipient, child);\n      }\n    }\n\n    //Token processing\n  }, {\n    key: \"_shouldProcessTokenInForeignContent\",\n    value: function _shouldProcessTokenInForeignContent(token) {\n      var current = this._getAdjustedCurrentElement();\n      if (!current || current === this.document) {\n        return false;\n      }\n      var ns = this.treeAdapter.getNamespaceURI(current);\n      if (ns === NS.HTML) {\n        return false;\n      }\n      if (this.treeAdapter.getTagName(current) === $.ANNOTATION_XML && ns === NS.MATHML && token.type === Tokenizer.START_TAG_TOKEN && token.tagName === $.SVG) {\n        return false;\n      }\n      var isCharacterToken = token.type === Tokenizer.CHARACTER_TOKEN || token.type === Tokenizer.NULL_CHARACTER_TOKEN || token.type === Tokenizer.WHITESPACE_CHARACTER_TOKEN;\n      var isMathMLTextStartTag = token.type === Tokenizer.START_TAG_TOKEN && token.tagName !== $.MGLYPH && token.tagName !== $.MALIGNMARK;\n      if ((isMathMLTextStartTag || isCharacterToken) && this._isIntegrationPoint(current, NS.MATHML)) {\n        return false;\n      }\n      if ((token.type === Tokenizer.START_TAG_TOKEN || isCharacterToken) && this._isIntegrationPoint(current, NS.HTML)) {\n        return false;\n      }\n      return token.type !== Tokenizer.EOF_TOKEN;\n    }\n  }, {\n    key: \"_processToken\",\n    value: function _processToken(token) {\n      TOKEN_HANDLERS[this.insertionMode][token.type](this, token);\n    }\n  }, {\n    key: \"_processTokenInBodyMode\",\n    value: function _processTokenInBodyMode(token) {\n      TOKEN_HANDLERS[IN_BODY_MODE][token.type](this, token);\n    }\n  }, {\n    key: \"_processTokenInForeignContent\",\n    value: function _processTokenInForeignContent(token) {\n      if (token.type === Tokenizer.CHARACTER_TOKEN) {\n        characterInForeignContent(this, token);\n      } else if (token.type === Tokenizer.NULL_CHARACTER_TOKEN) {\n        nullCharacterInForeignContent(this, token);\n      } else if (token.type === Tokenizer.WHITESPACE_CHARACTER_TOKEN) {\n        insertCharacters(this, token);\n      } else if (token.type === Tokenizer.COMMENT_TOKEN) {\n        appendComment(this, token);\n      } else if (token.type === Tokenizer.START_TAG_TOKEN) {\n        startTagInForeignContent(this, token);\n      } else if (token.type === Tokenizer.END_TAG_TOKEN) {\n        endTagInForeignContent(this, token);\n      }\n    }\n  }, {\n    key: \"_processInputToken\",\n    value: function _processInputToken(token) {\n      if (this._shouldProcessTokenInForeignContent(token)) {\n        this._processTokenInForeignContent(token);\n      } else {\n        this._processToken(token);\n      }\n      if (token.type === Tokenizer.START_TAG_TOKEN && token.selfClosing && !token.ackSelfClosing) {\n        this._err(ERR.nonVoidHtmlElementStartTagWithTrailingSolidus);\n      }\n    }\n\n    //Integration points\n  }, {\n    key: \"_isIntegrationPoint\",\n    value: function _isIntegrationPoint(element, foreignNS) {\n      var tn = this.treeAdapter.getTagName(element);\n      var ns = this.treeAdapter.getNamespaceURI(element);\n      var attrs = this.treeAdapter.getAttrList(element);\n      return foreignContent.isIntegrationPoint(tn, ns, attrs, foreignNS);\n    }\n\n    //Active formatting elements reconstruction\n  }, {\n    key: \"_reconstructActiveFormattingElements\",\n    value: function _reconstructActiveFormattingElements() {\n      var listLength = this.activeFormattingElements.length;\n      if (listLength) {\n        var unopenIdx = listLength;\n        var entry = null;\n        do {\n          unopenIdx--;\n          entry = this.activeFormattingElements.entries[unopenIdx];\n          if (entry.type === FormattingElementList.MARKER_ENTRY || this.openElements.contains(entry.element)) {\n            unopenIdx++;\n            break;\n          }\n        } while (unopenIdx > 0);\n        for (var i = unopenIdx; i < listLength; i++) {\n          entry = this.activeFormattingElements.entries[i];\n          this._insertElement(entry.token, this.treeAdapter.getNamespaceURI(entry.element));\n          entry.element = this.openElements.current;\n        }\n      }\n    }\n\n    //Close elements\n  }, {\n    key: \"_closeTableCell\",\n    value: function _closeTableCell() {\n      this.openElements.generateImpliedEndTags();\n      this.openElements.popUntilTableCellPopped();\n      this.activeFormattingElements.clearToLastMarker();\n      this.insertionMode = IN_ROW_MODE;\n    }\n  }, {\n    key: \"_closePElement\",\n    value: function _closePElement() {\n      this.openElements.generateImpliedEndTagsWithExclusion($.P);\n      this.openElements.popUntilTagNamePopped($.P);\n    }\n\n    //Insertion modes\n  }, {\n    key: \"_resetInsertionMode\",\n    value: function _resetInsertionMode() {\n      for (var i = this.openElements.stackTop, last = false; i >= 0; i--) {\n        var element = this.openElements.items[i];\n        if (i === 0) {\n          last = true;\n          if (this.fragmentContext) {\n            element = this.fragmentContext;\n          }\n        }\n        var tn = this.treeAdapter.getTagName(element);\n        var newInsertionMode = INSERTION_MODE_RESET_MAP[tn];\n        if (newInsertionMode) {\n          this.insertionMode = newInsertionMode;\n          break;\n        } else if (!last && (tn === $.TD || tn === $.TH)) {\n          this.insertionMode = IN_CELL_MODE;\n          break;\n        } else if (!last && tn === $.HEAD) {\n          this.insertionMode = IN_HEAD_MODE;\n          break;\n        } else if (tn === $.SELECT) {\n          this._resetInsertionModeForSelect(i);\n          break;\n        } else if (tn === $.TEMPLATE) {\n          this.insertionMode = this.currentTmplInsertionMode;\n          break;\n        } else if (tn === $.HTML) {\n          this.insertionMode = this.headElement ? AFTER_HEAD_MODE : BEFORE_HEAD_MODE;\n          break;\n        } else if (last) {\n          this.insertionMode = IN_BODY_MODE;\n          break;\n        }\n      }\n    }\n  }, {\n    key: \"_resetInsertionModeForSelect\",\n    value: function _resetInsertionModeForSelect(selectIdx) {\n      if (selectIdx > 0) {\n        for (var i = selectIdx - 1; i > 0; i--) {\n          var ancestor = this.openElements.items[i];\n          var tn = this.treeAdapter.getTagName(ancestor);\n          if (tn === $.TEMPLATE) {\n            break;\n          } else if (tn === $.TABLE) {\n            this.insertionMode = IN_SELECT_IN_TABLE_MODE;\n            return;\n          }\n        }\n      }\n      this.insertionMode = IN_SELECT_MODE;\n    }\n  }, {\n    key: \"_pushTmplInsertionMode\",\n    value: function _pushTmplInsertionMode(mode) {\n      this.tmplInsertionModeStack.push(mode);\n      this.tmplInsertionModeStackTop++;\n      this.currentTmplInsertionMode = mode;\n    }\n  }, {\n    key: \"_popTmplInsertionMode\",\n    value: function _popTmplInsertionMode() {\n      this.tmplInsertionModeStack.pop();\n      this.tmplInsertionModeStackTop--;\n      this.currentTmplInsertionMode = this.tmplInsertionModeStack[this.tmplInsertionModeStackTop];\n    }\n\n    //Foster parenting\n  }, {\n    key: \"_isElementCausesFosterParenting\",\n    value: function _isElementCausesFosterParenting(element) {\n      var tn = this.treeAdapter.getTagName(element);\n      return tn === $.TABLE || tn === $.TBODY || tn === $.TFOOT || tn === $.THEAD || tn === $.TR;\n    }\n  }, {\n    key: \"_shouldFosterParentOnInsertion\",\n    value: function _shouldFosterParentOnInsertion() {\n      return this.fosterParentingEnabled && this._isElementCausesFosterParenting(this.openElements.current);\n    }\n  }, {\n    key: \"_findFosterParentingLocation\",\n    value: function _findFosterParentingLocation() {\n      var location = {\n        parent: null,\n        beforeElement: null\n      };\n      for (var i = this.openElements.stackTop; i >= 0; i--) {\n        var openElement = this.openElements.items[i];\n        var tn = this.treeAdapter.getTagName(openElement);\n        var ns = this.treeAdapter.getNamespaceURI(openElement);\n        if (tn === $.TEMPLATE && ns === NS.HTML) {\n          location.parent = this.treeAdapter.getTemplateContent(openElement);\n          break;\n        } else if (tn === $.TABLE) {\n          location.parent = this.treeAdapter.getParentNode(openElement);\n          if (location.parent) {\n            location.beforeElement = openElement;\n          } else {\n            location.parent = this.openElements.items[i - 1];\n          }\n          break;\n        }\n      }\n      if (!location.parent) {\n        location.parent = this.openElements.items[0];\n      }\n      return location;\n    }\n  }, {\n    key: \"_fosterParentElement\",\n    value: function _fosterParentElement(element) {\n      var location = this._findFosterParentingLocation();\n      if (location.beforeElement) {\n        this.treeAdapter.insertBefore(location.parent, element, location.beforeElement);\n      } else {\n        this.treeAdapter.appendChild(location.parent, element);\n      }\n    }\n  }, {\n    key: \"_fosterParentText\",\n    value: function _fosterParentText(chars) {\n      var location = this._findFosterParentingLocation();\n      if (location.beforeElement) {\n        this.treeAdapter.insertTextBefore(location.parent, chars, location.beforeElement);\n      } else {\n        this.treeAdapter.insertText(location.parent, chars);\n      }\n    }\n\n    //Special elements\n  }, {\n    key: \"_isSpecialElement\",\n    value: function _isSpecialElement(element) {\n      var tn = this.treeAdapter.getTagName(element);\n      var ns = this.treeAdapter.getNamespaceURI(element);\n      return HTML.SPECIAL_ELEMENTS[ns][tn];\n    }\n  }]);\n}();\nmodule.exports = Parser;\n\n//Adoption agency algorithm\n//(see: http://www.whatwg.org/specs/web-apps/current-work/multipage/tree-construction.html#adoptionAgency)\n//------------------------------------------------------------------\n\n//Steps 5-8 of the algorithm\nfunction aaObtainFormattingElementEntry(p, token) {\n  var formattingElementEntry = p.activeFormattingElements.getElementEntryInScopeWithTagName(token.tagName);\n  if (formattingElementEntry) {\n    if (!p.openElements.contains(formattingElementEntry.element)) {\n      p.activeFormattingElements.removeEntry(formattingElementEntry);\n      formattingElementEntry = null;\n    } else if (!p.openElements.hasInScope(token.tagName)) {\n      formattingElementEntry = null;\n    }\n  } else {\n    genericEndTagInBody(p, token);\n  }\n  return formattingElementEntry;\n}\n\n//Steps 9 and 10 of the algorithm\nfunction aaObtainFurthestBlock(p, formattingElementEntry) {\n  var furthestBlock = null;\n  for (var i = p.openElements.stackTop; i >= 0; i--) {\n    var element = p.openElements.items[i];\n    if (element === formattingElementEntry.element) {\n      break;\n    }\n    if (p._isSpecialElement(element)) {\n      furthestBlock = element;\n    }\n  }\n  if (!furthestBlock) {\n    p.openElements.popUntilElementPopped(formattingElementEntry.element);\n    p.activeFormattingElements.removeEntry(formattingElementEntry);\n  }\n  return furthestBlock;\n}\n\n//Step 13 of the algorithm\nfunction aaInnerLoop(p, furthestBlock, formattingElement) {\n  var lastElement = furthestBlock;\n  var nextElement = p.openElements.getCommonAncestor(furthestBlock);\n  for (var i = 0, element = nextElement; element !== formattingElement; i++, element = nextElement) {\n    //NOTE: store next element for the next loop iteration (it may be deleted from the stack by step 9.5)\n    nextElement = p.openElements.getCommonAncestor(element);\n    var elementEntry = p.activeFormattingElements.getElementEntry(element);\n    var counterOverflow = elementEntry && i >= AA_INNER_LOOP_ITER;\n    var shouldRemoveFromOpenElements = !elementEntry || counterOverflow;\n    if (shouldRemoveFromOpenElements) {\n      if (counterOverflow) {\n        p.activeFormattingElements.removeEntry(elementEntry);\n      }\n      p.openElements.remove(element);\n    } else {\n      element = aaRecreateElementFromEntry(p, elementEntry);\n      if (lastElement === furthestBlock) {\n        p.activeFormattingElements.bookmark = elementEntry;\n      }\n      p.treeAdapter.detachNode(lastElement);\n      p.treeAdapter.appendChild(element, lastElement);\n      lastElement = element;\n    }\n  }\n  return lastElement;\n}\n\n//Step 13.7 of the algorithm\nfunction aaRecreateElementFromEntry(p, elementEntry) {\n  var ns = p.treeAdapter.getNamespaceURI(elementEntry.element);\n  var newElement = p.treeAdapter.createElement(elementEntry.token.tagName, ns, elementEntry.token.attrs);\n  p.openElements.replace(elementEntry.element, newElement);\n  elementEntry.element = newElement;\n  return newElement;\n}\n\n//Step 14 of the algorithm\nfunction aaInsertLastNodeInCommonAncestor(p, commonAncestor, lastElement) {\n  if (p._isElementCausesFosterParenting(commonAncestor)) {\n    p._fosterParentElement(lastElement);\n  } else {\n    var tn = p.treeAdapter.getTagName(commonAncestor);\n    var ns = p.treeAdapter.getNamespaceURI(commonAncestor);\n    if (tn === $.TEMPLATE && ns === NS.HTML) {\n      commonAncestor = p.treeAdapter.getTemplateContent(commonAncestor);\n    }\n    p.treeAdapter.appendChild(commonAncestor, lastElement);\n  }\n}\n\n//Steps 15-19 of the algorithm\nfunction aaReplaceFormattingElement(p, furthestBlock, formattingElementEntry) {\n  var ns = p.treeAdapter.getNamespaceURI(formattingElementEntry.element);\n  var token = formattingElementEntry.token;\n  var newElement = p.treeAdapter.createElement(token.tagName, ns, token.attrs);\n  p._adoptNodes(furthestBlock, newElement);\n  p.treeAdapter.appendChild(furthestBlock, newElement);\n  p.activeFormattingElements.insertElementAfterBookmark(newElement, formattingElementEntry.token);\n  p.activeFormattingElements.removeEntry(formattingElementEntry);\n  p.openElements.remove(formattingElementEntry.element);\n  p.openElements.insertAfter(furthestBlock, newElement);\n}\n\n//Algorithm entry point\nfunction callAdoptionAgency(p, token) {\n  var formattingElementEntry;\n  for (var i = 0; i < AA_OUTER_LOOP_ITER; i++) {\n    formattingElementEntry = aaObtainFormattingElementEntry(p, token, formattingElementEntry);\n    if (!formattingElementEntry) {\n      break;\n    }\n    var furthestBlock = aaObtainFurthestBlock(p, formattingElementEntry);\n    if (!furthestBlock) {\n      break;\n    }\n    p.activeFormattingElements.bookmark = formattingElementEntry;\n    var lastElement = aaInnerLoop(p, furthestBlock, formattingElementEntry.element);\n    var commonAncestor = p.openElements.getCommonAncestor(formattingElementEntry.element);\n    p.treeAdapter.detachNode(lastElement);\n    aaInsertLastNodeInCommonAncestor(p, commonAncestor, lastElement);\n    aaReplaceFormattingElement(p, furthestBlock, formattingElementEntry);\n  }\n}\n\n//Generic token handlers\n//------------------------------------------------------------------\nfunction ignoreToken() {\n  //NOTE: do nothing =)\n}\nfunction misplacedDoctype(p) {\n  p._err(ERR.misplacedDoctype);\n}\nfunction appendComment(p, token) {\n  p._appendCommentNode(token, p.openElements.currentTmplContent || p.openElements.current);\n}\nfunction appendCommentToRootHtmlElement(p, token) {\n  p._appendCommentNode(token, p.openElements.items[0]);\n}\nfunction appendCommentToDocument(p, token) {\n  p._appendCommentNode(token, p.document);\n}\nfunction insertCharacters(p, token) {\n  p._insertCharacters(token);\n}\nfunction stopParsing(p) {\n  p.stopped = true;\n}\n\n// The \"initial\" insertion mode\n//------------------------------------------------------------------\nfunction doctypeInInitialMode(p, token) {\n  p._setDocumentType(token);\n  var mode = token.forceQuirks ? HTML.DOCUMENT_MODE.QUIRKS : doctype.getDocumentMode(token);\n  if (!doctype.isConforming(token)) {\n    p._err(ERR.nonConformingDoctype);\n  }\n  p.treeAdapter.setDocumentMode(p.document, mode);\n  p.insertionMode = BEFORE_HTML_MODE;\n}\nfunction tokenInInitialMode(p, token) {\n  p._err(ERR.missingDoctype, {\n    beforeToken: true\n  });\n  p.treeAdapter.setDocumentMode(p.document, HTML.DOCUMENT_MODE.QUIRKS);\n  p.insertionMode = BEFORE_HTML_MODE;\n  p._processToken(token);\n}\n\n// The \"before html\" insertion mode\n//------------------------------------------------------------------\nfunction startTagBeforeHtml(p, token) {\n  if (token.tagName === $.HTML) {\n    p._insertElement(token, NS.HTML);\n    p.insertionMode = BEFORE_HEAD_MODE;\n  } else {\n    tokenBeforeHtml(p, token);\n  }\n}\nfunction endTagBeforeHtml(p, token) {\n  var tn = token.tagName;\n  if (tn === $.HTML || tn === $.HEAD || tn === $.BODY || tn === $.BR) {\n    tokenBeforeHtml(p, token);\n  }\n}\nfunction tokenBeforeHtml(p, token) {\n  p._insertFakeRootElement();\n  p.insertionMode = BEFORE_HEAD_MODE;\n  p._processToken(token);\n}\n\n// The \"before head\" insertion mode\n//------------------------------------------------------------------\nfunction startTagBeforeHead(p, token) {\n  var tn = token.tagName;\n  if (tn === $.HTML) {\n    startTagInBody(p, token);\n  } else if (tn === $.HEAD) {\n    p._insertElement(token, NS.HTML);\n    p.headElement = p.openElements.current;\n    p.insertionMode = IN_HEAD_MODE;\n  } else {\n    tokenBeforeHead(p, token);\n  }\n}\nfunction endTagBeforeHead(p, token) {\n  var tn = token.tagName;\n  if (tn === $.HEAD || tn === $.BODY || tn === $.HTML || tn === $.BR) {\n    tokenBeforeHead(p, token);\n  } else {\n    p._err(ERR.endTagWithoutMatchingOpenElement);\n  }\n}\nfunction tokenBeforeHead(p, token) {\n  p._insertFakeElement($.HEAD);\n  p.headElement = p.openElements.current;\n  p.insertionMode = IN_HEAD_MODE;\n  p._processToken(token);\n}\n\n// The \"in head\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInHead(p, token) {\n  var tn = token.tagName;\n  if (tn === $.HTML) {\n    startTagInBody(p, token);\n  } else if (tn === $.BASE || tn === $.BASEFONT || tn === $.BGSOUND || tn === $.LINK || tn === $.META) {\n    p._appendElement(token, NS.HTML);\n    token.ackSelfClosing = true;\n  } else if (tn === $.TITLE) {\n    p._switchToTextParsing(token, Tokenizer.MODE.RCDATA);\n  } else if (tn === $.NOSCRIPT) {\n    if (p.options.scriptingEnabled) {\n      p._switchToTextParsing(token, Tokenizer.MODE.RAWTEXT);\n    } else {\n      p._insertElement(token, NS.HTML);\n      p.insertionMode = IN_HEAD_NO_SCRIPT_MODE;\n    }\n  } else if (tn === $.NOFRAMES || tn === $.STYLE) {\n    p._switchToTextParsing(token, Tokenizer.MODE.RAWTEXT);\n  } else if (tn === $.SCRIPT) {\n    p._switchToTextParsing(token, Tokenizer.MODE.SCRIPT_DATA);\n  } else if (tn === $.TEMPLATE) {\n    p._insertTemplate(token, NS.HTML);\n    p.activeFormattingElements.insertMarker();\n    p.framesetOk = false;\n    p.insertionMode = IN_TEMPLATE_MODE;\n    p._pushTmplInsertionMode(IN_TEMPLATE_MODE);\n  } else if (tn === $.HEAD) {\n    p._err(ERR.misplacedStartTagForHeadElement);\n  } else {\n    tokenInHead(p, token);\n  }\n}\nfunction endTagInHead(p, token) {\n  var tn = token.tagName;\n  if (tn === $.HEAD) {\n    p.openElements.pop();\n    p.insertionMode = AFTER_HEAD_MODE;\n  } else if (tn === $.BODY || tn === $.BR || tn === $.HTML) {\n    tokenInHead(p, token);\n  } else if (tn === $.TEMPLATE) {\n    if (p.openElements.tmplCount > 0) {\n      p.openElements.generateImpliedEndTagsThoroughly();\n      if (p.openElements.currentTagName !== $.TEMPLATE) {\n        p._err(ERR.closingOfElementWithOpenChildElements);\n      }\n      p.openElements.popUntilTagNamePopped($.TEMPLATE);\n      p.activeFormattingElements.clearToLastMarker();\n      p._popTmplInsertionMode();\n      p._resetInsertionMode();\n    } else {\n      p._err(ERR.endTagWithoutMatchingOpenElement);\n    }\n  } else {\n    p._err(ERR.endTagWithoutMatchingOpenElement);\n  }\n}\nfunction tokenInHead(p, token) {\n  p.openElements.pop();\n  p.insertionMode = AFTER_HEAD_MODE;\n  p._processToken(token);\n}\n\n// The \"in head no script\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInHeadNoScript(p, token) {\n  var tn = token.tagName;\n  if (tn === $.HTML) {\n    startTagInBody(p, token);\n  } else if (tn === $.BASEFONT || tn === $.BGSOUND || tn === $.HEAD || tn === $.LINK || tn === $.META || tn === $.NOFRAMES || tn === $.STYLE) {\n    startTagInHead(p, token);\n  } else if (tn === $.NOSCRIPT) {\n    p._err(ERR.nestedNoscriptInHead);\n  } else {\n    tokenInHeadNoScript(p, token);\n  }\n}\nfunction endTagInHeadNoScript(p, token) {\n  var tn = token.tagName;\n  if (tn === $.NOSCRIPT) {\n    p.openElements.pop();\n    p.insertionMode = IN_HEAD_MODE;\n  } else if (tn === $.BR) {\n    tokenInHeadNoScript(p, token);\n  } else {\n    p._err(ERR.endTagWithoutMatchingOpenElement);\n  }\n}\nfunction tokenInHeadNoScript(p, token) {\n  var errCode = token.type === Tokenizer.EOF_TOKEN ? ERR.openElementsLeftAfterEof : ERR.disallowedContentInNoscriptInHead;\n  p._err(errCode);\n  p.openElements.pop();\n  p.insertionMode = IN_HEAD_MODE;\n  p._processToken(token);\n}\n\n// The \"after head\" insertion mode\n//------------------------------------------------------------------\nfunction startTagAfterHead(p, token) {\n  var tn = token.tagName;\n  if (tn === $.HTML) {\n    startTagInBody(p, token);\n  } else if (tn === $.BODY) {\n    p._insertElement(token, NS.HTML);\n    p.framesetOk = false;\n    p.insertionMode = IN_BODY_MODE;\n  } else if (tn === $.FRAMESET) {\n    p._insertElement(token, NS.HTML);\n    p.insertionMode = IN_FRAMESET_MODE;\n  } else if (tn === $.BASE || tn === $.BASEFONT || tn === $.BGSOUND || tn === $.LINK || tn === $.META || tn === $.NOFRAMES || tn === $.SCRIPT || tn === $.STYLE || tn === $.TEMPLATE || tn === $.TITLE) {\n    p._err(ERR.abandonedHeadElementChild);\n    p.openElements.push(p.headElement);\n    startTagInHead(p, token);\n    p.openElements.remove(p.headElement);\n  } else if (tn === $.HEAD) {\n    p._err(ERR.misplacedStartTagForHeadElement);\n  } else {\n    tokenAfterHead(p, token);\n  }\n}\nfunction endTagAfterHead(p, token) {\n  var tn = token.tagName;\n  if (tn === $.BODY || tn === $.HTML || tn === $.BR) {\n    tokenAfterHead(p, token);\n  } else if (tn === $.TEMPLATE) {\n    endTagInHead(p, token);\n  } else {\n    p._err(ERR.endTagWithoutMatchingOpenElement);\n  }\n}\nfunction tokenAfterHead(p, token) {\n  p._insertFakeElement($.BODY);\n  p.insertionMode = IN_BODY_MODE;\n  p._processToken(token);\n}\n\n// The \"in body\" insertion mode\n//------------------------------------------------------------------\nfunction whitespaceCharacterInBody(p, token) {\n  p._reconstructActiveFormattingElements();\n  p._insertCharacters(token);\n}\nfunction characterInBody(p, token) {\n  p._reconstructActiveFormattingElements();\n  p._insertCharacters(token);\n  p.framesetOk = false;\n}\nfunction htmlStartTagInBody(p, token) {\n  if (p.openElements.tmplCount === 0) {\n    p.treeAdapter.adoptAttributes(p.openElements.items[0], token.attrs);\n  }\n}\nfunction bodyStartTagInBody(p, token) {\n  var bodyElement = p.openElements.tryPeekProperlyNestedBodyElement();\n  if (bodyElement && p.openElements.tmplCount === 0) {\n    p.framesetOk = false;\n    p.treeAdapter.adoptAttributes(bodyElement, token.attrs);\n  }\n}\nfunction framesetStartTagInBody(p, token) {\n  var bodyElement = p.openElements.tryPeekProperlyNestedBodyElement();\n  if (p.framesetOk && bodyElement) {\n    p.treeAdapter.detachNode(bodyElement);\n    p.openElements.popAllUpToHtmlElement();\n    p._insertElement(token, NS.HTML);\n    p.insertionMode = IN_FRAMESET_MODE;\n  }\n}\nfunction addressStartTagInBody(p, token) {\n  if (p.openElements.hasInButtonScope($.P)) {\n    p._closePElement();\n  }\n  p._insertElement(token, NS.HTML);\n}\nfunction numberedHeaderStartTagInBody(p, token) {\n  if (p.openElements.hasInButtonScope($.P)) {\n    p._closePElement();\n  }\n  var tn = p.openElements.currentTagName;\n  if (tn === $.H1 || tn === $.H2 || tn === $.H3 || tn === $.H4 || tn === $.H5 || tn === $.H6) {\n    p.openElements.pop();\n  }\n  p._insertElement(token, NS.HTML);\n}\nfunction preStartTagInBody(p, token) {\n  if (p.openElements.hasInButtonScope($.P)) {\n    p._closePElement();\n  }\n  p._insertElement(token, NS.HTML);\n  //NOTE: If the next token is a U+000A LINE FEED (LF) character token, then ignore that token and move\n  //on to the next one. (Newlines at the start of pre blocks are ignored as an authoring convenience.)\n  p.skipNextNewLine = true;\n  p.framesetOk = false;\n}\nfunction formStartTagInBody(p, token) {\n  var inTemplate = p.openElements.tmplCount > 0;\n  if (!p.formElement || inTemplate) {\n    if (p.openElements.hasInButtonScope($.P)) {\n      p._closePElement();\n    }\n    p._insertElement(token, NS.HTML);\n    if (!inTemplate) {\n      p.formElement = p.openElements.current;\n    }\n  }\n}\nfunction listItemStartTagInBody(p, token) {\n  p.framesetOk = false;\n  var tn = token.tagName;\n  for (var i = p.openElements.stackTop; i >= 0; i--) {\n    var element = p.openElements.items[i];\n    var elementTn = p.treeAdapter.getTagName(element);\n    var closeTn = null;\n    if (tn === $.LI && elementTn === $.LI) {\n      closeTn = $.LI;\n    } else if ((tn === $.DD || tn === $.DT) && (elementTn === $.DD || elementTn === $.DT)) {\n      closeTn = elementTn;\n    }\n    if (closeTn) {\n      p.openElements.generateImpliedEndTagsWithExclusion(closeTn);\n      p.openElements.popUntilTagNamePopped(closeTn);\n      break;\n    }\n    if (elementTn !== $.ADDRESS && elementTn !== $.DIV && elementTn !== $.P && p._isSpecialElement(element)) {\n      break;\n    }\n  }\n  if (p.openElements.hasInButtonScope($.P)) {\n    p._closePElement();\n  }\n  p._insertElement(token, NS.HTML);\n}\nfunction plaintextStartTagInBody(p, token) {\n  if (p.openElements.hasInButtonScope($.P)) {\n    p._closePElement();\n  }\n  p._insertElement(token, NS.HTML);\n  p.tokenizer.state = Tokenizer.MODE.PLAINTEXT;\n}\nfunction buttonStartTagInBody(p, token) {\n  if (p.openElements.hasInScope($.BUTTON)) {\n    p.openElements.generateImpliedEndTags();\n    p.openElements.popUntilTagNamePopped($.BUTTON);\n  }\n  p._reconstructActiveFormattingElements();\n  p._insertElement(token, NS.HTML);\n  p.framesetOk = false;\n}\nfunction aStartTagInBody(p, token) {\n  var activeElementEntry = p.activeFormattingElements.getElementEntryInScopeWithTagName($.A);\n  if (activeElementEntry) {\n    callAdoptionAgency(p, token);\n    p.openElements.remove(activeElementEntry.element);\n    p.activeFormattingElements.removeEntry(activeElementEntry);\n  }\n  p._reconstructActiveFormattingElements();\n  p._insertElement(token, NS.HTML);\n  p.activeFormattingElements.pushElement(p.openElements.current, token);\n}\nfunction bStartTagInBody(p, token) {\n  p._reconstructActiveFormattingElements();\n  p._insertElement(token, NS.HTML);\n  p.activeFormattingElements.pushElement(p.openElements.current, token);\n}\nfunction nobrStartTagInBody(p, token) {\n  p._reconstructActiveFormattingElements();\n  if (p.openElements.hasInScope($.NOBR)) {\n    callAdoptionAgency(p, token);\n    p._reconstructActiveFormattingElements();\n  }\n  p._insertElement(token, NS.HTML);\n  p.activeFormattingElements.pushElement(p.openElements.current, token);\n}\nfunction appletStartTagInBody(p, token) {\n  p._reconstructActiveFormattingElements();\n  p._insertElement(token, NS.HTML);\n  p.activeFormattingElements.insertMarker();\n  p.framesetOk = false;\n}\nfunction tableStartTagInBody(p, token) {\n  if (p.treeAdapter.getDocumentMode(p.document) !== HTML.DOCUMENT_MODE.QUIRKS && p.openElements.hasInButtonScope($.P)) {\n    p._closePElement();\n  }\n  p._insertElement(token, NS.HTML);\n  p.framesetOk = false;\n  p.insertionMode = IN_TABLE_MODE;\n}\nfunction areaStartTagInBody(p, token) {\n  p._reconstructActiveFormattingElements();\n  p._appendElement(token, NS.HTML);\n  p.framesetOk = false;\n  token.ackSelfClosing = true;\n}\nfunction inputStartTagInBody(p, token) {\n  p._reconstructActiveFormattingElements();\n  p._appendElement(token, NS.HTML);\n  var inputType = Tokenizer.getTokenAttr(token, ATTRS.TYPE);\n  if (!inputType || inputType.toLowerCase() !== HIDDEN_INPUT_TYPE) {\n    p.framesetOk = false;\n  }\n  token.ackSelfClosing = true;\n}\nfunction paramStartTagInBody(p, token) {\n  p._appendElement(token, NS.HTML);\n  token.ackSelfClosing = true;\n}\nfunction hrStartTagInBody(p, token) {\n  if (p.openElements.hasInButtonScope($.P)) {\n    p._closePElement();\n  }\n  p._appendElement(token, NS.HTML);\n  p.framesetOk = false;\n  token.ackSelfClosing = true;\n}\nfunction imageStartTagInBody(p, token) {\n  token.tagName = $.IMG;\n  areaStartTagInBody(p, token);\n}\nfunction textareaStartTagInBody(p, token) {\n  p._insertElement(token, NS.HTML);\n  //NOTE: If the next token is a U+000A LINE FEED (LF) character token, then ignore that token and move\n  //on to the next one. (Newlines at the start of textarea elements are ignored as an authoring convenience.)\n  p.skipNextNewLine = true;\n  p.tokenizer.state = Tokenizer.MODE.RCDATA;\n  p.originalInsertionMode = p.insertionMode;\n  p.framesetOk = false;\n  p.insertionMode = TEXT_MODE;\n}\nfunction xmpStartTagInBody(p, token) {\n  if (p.openElements.hasInButtonScope($.P)) {\n    p._closePElement();\n  }\n  p._reconstructActiveFormattingElements();\n  p.framesetOk = false;\n  p._switchToTextParsing(token, Tokenizer.MODE.RAWTEXT);\n}\nfunction iframeStartTagInBody(p, token) {\n  p.framesetOk = false;\n  p._switchToTextParsing(token, Tokenizer.MODE.RAWTEXT);\n}\n\n//NOTE: here we assume that we always act as an user agent with enabled plugins, so we parse\n//<noembed> as a rawtext.\nfunction noembedStartTagInBody(p, token) {\n  p._switchToTextParsing(token, Tokenizer.MODE.RAWTEXT);\n}\nfunction selectStartTagInBody(p, token) {\n  p._reconstructActiveFormattingElements();\n  p._insertElement(token, NS.HTML);\n  p.framesetOk = false;\n  if (p.insertionMode === IN_TABLE_MODE || p.insertionMode === IN_CAPTION_MODE || p.insertionMode === IN_TABLE_BODY_MODE || p.insertionMode === IN_ROW_MODE || p.insertionMode === IN_CELL_MODE) {\n    p.insertionMode = IN_SELECT_IN_TABLE_MODE;\n  } else {\n    p.insertionMode = IN_SELECT_MODE;\n  }\n}\nfunction optgroupStartTagInBody(p, token) {\n  if (p.openElements.currentTagName === $.OPTION) {\n    p.openElements.pop();\n  }\n  p._reconstructActiveFormattingElements();\n  p._insertElement(token, NS.HTML);\n}\nfunction rbStartTagInBody(p, token) {\n  if (p.openElements.hasInScope($.RUBY)) {\n    p.openElements.generateImpliedEndTags();\n  }\n  p._insertElement(token, NS.HTML);\n}\nfunction rtStartTagInBody(p, token) {\n  if (p.openElements.hasInScope($.RUBY)) {\n    p.openElements.generateImpliedEndTagsWithExclusion($.RTC);\n  }\n  p._insertElement(token, NS.HTML);\n}\nfunction menuStartTagInBody(p, token) {\n  if (p.openElements.hasInButtonScope($.P)) {\n    p._closePElement();\n  }\n  p._insertElement(token, NS.HTML);\n}\nfunction mathStartTagInBody(p, token) {\n  p._reconstructActiveFormattingElements();\n  foreignContent.adjustTokenMathMLAttrs(token);\n  foreignContent.adjustTokenXMLAttrs(token);\n  if (token.selfClosing) {\n    p._appendElement(token, NS.MATHML);\n  } else {\n    p._insertElement(token, NS.MATHML);\n  }\n  token.ackSelfClosing = true;\n}\nfunction svgStartTagInBody(p, token) {\n  p._reconstructActiveFormattingElements();\n  foreignContent.adjustTokenSVGAttrs(token);\n  foreignContent.adjustTokenXMLAttrs(token);\n  if (token.selfClosing) {\n    p._appendElement(token, NS.SVG);\n  } else {\n    p._insertElement(token, NS.SVG);\n  }\n  token.ackSelfClosing = true;\n}\nfunction genericStartTagInBody(p, token) {\n  p._reconstructActiveFormattingElements();\n  p._insertElement(token, NS.HTML);\n}\n\n//OPTIMIZATION: Integer comparisons are low-cost, so we can use very fast tag name length filters here.\n//It's faster than using dictionary.\nfunction startTagInBody(p, token) {\n  var tn = token.tagName;\n  switch (tn.length) {\n    case 1:\n      if (tn === $.I || tn === $.S || tn === $.B || tn === $.U) {\n        bStartTagInBody(p, token);\n      } else if (tn === $.P) {\n        addressStartTagInBody(p, token);\n      } else if (tn === $.A) {\n        aStartTagInBody(p, token);\n      } else {\n        genericStartTagInBody(p, token);\n      }\n      break;\n    case 2:\n      if (tn === $.DL || tn === $.OL || tn === $.UL) {\n        addressStartTagInBody(p, token);\n      } else if (tn === $.H1 || tn === $.H2 || tn === $.H3 || tn === $.H4 || tn === $.H5 || tn === $.H6) {\n        numberedHeaderStartTagInBody(p, token);\n      } else if (tn === $.LI || tn === $.DD || tn === $.DT) {\n        listItemStartTagInBody(p, token);\n      } else if (tn === $.EM || tn === $.TT) {\n        bStartTagInBody(p, token);\n      } else if (tn === $.BR) {\n        areaStartTagInBody(p, token);\n      } else if (tn === $.HR) {\n        hrStartTagInBody(p, token);\n      } else if (tn === $.RB) {\n        rbStartTagInBody(p, token);\n      } else if (tn === $.RT || tn === $.RP) {\n        rtStartTagInBody(p, token);\n      } else if (tn !== $.TH && tn !== $.TD && tn !== $.TR) {\n        genericStartTagInBody(p, token);\n      }\n      break;\n    case 3:\n      if (tn === $.DIV || tn === $.DIR || tn === $.NAV) {\n        addressStartTagInBody(p, token);\n      } else if (tn === $.PRE) {\n        preStartTagInBody(p, token);\n      } else if (tn === $.BIG) {\n        bStartTagInBody(p, token);\n      } else if (tn === $.IMG || tn === $.WBR) {\n        areaStartTagInBody(p, token);\n      } else if (tn === $.XMP) {\n        xmpStartTagInBody(p, token);\n      } else if (tn === $.SVG) {\n        svgStartTagInBody(p, token);\n      } else if (tn === $.RTC) {\n        rbStartTagInBody(p, token);\n      } else if (tn !== $.COL) {\n        genericStartTagInBody(p, token);\n      }\n      break;\n    case 4:\n      if (tn === $.HTML) {\n        htmlStartTagInBody(p, token);\n      } else if (tn === $.BASE || tn === $.LINK || tn === $.META) {\n        startTagInHead(p, token);\n      } else if (tn === $.BODY) {\n        bodyStartTagInBody(p, token);\n      } else if (tn === $.MAIN || tn === $.MENU) {\n        addressStartTagInBody(p, token);\n      } else if (tn === $.FORM) {\n        formStartTagInBody(p, token);\n      } else if (tn === $.CODE || tn === $.FONT) {\n        bStartTagInBody(p, token);\n      } else if (tn === $.NOBR) {\n        nobrStartTagInBody(p, token);\n      } else if (tn === $.AREA) {\n        areaStartTagInBody(p, token);\n      } else if (tn === $.MATH) {\n        mathStartTagInBody(p, token);\n      } else if (tn === $.MENU) {\n        menuStartTagInBody(p, token);\n      } else if (tn !== $.HEAD) {\n        genericStartTagInBody(p, token);\n      }\n      break;\n    case 5:\n      if (tn === $.STYLE || tn === $.TITLE) {\n        startTagInHead(p, token);\n      } else if (tn === $.ASIDE) {\n        addressStartTagInBody(p, token);\n      } else if (tn === $.SMALL) {\n        bStartTagInBody(p, token);\n      } else if (tn === $.TABLE) {\n        tableStartTagInBody(p, token);\n      } else if (tn === $.EMBED) {\n        areaStartTagInBody(p, token);\n      } else if (tn === $.INPUT) {\n        inputStartTagInBody(p, token);\n      } else if (tn === $.PARAM || tn === $.TRACK) {\n        paramStartTagInBody(p, token);\n      } else if (tn === $.IMAGE) {\n        imageStartTagInBody(p, token);\n      } else if (tn !== $.FRAME && tn !== $.TBODY && tn !== $.TFOOT && tn !== $.THEAD) {\n        genericStartTagInBody(p, token);\n      }\n      break;\n    case 6:\n      if (tn === $.SCRIPT) {\n        startTagInHead(p, token);\n      } else if (tn === $.CENTER || tn === $.FIGURE || tn === $.FOOTER || tn === $.HEADER || tn === $.HGROUP || tn === $.DIALOG) {\n        addressStartTagInBody(p, token);\n      } else if (tn === $.BUTTON) {\n        buttonStartTagInBody(p, token);\n      } else if (tn === $.STRIKE || tn === $.STRONG) {\n        bStartTagInBody(p, token);\n      } else if (tn === $.APPLET || tn === $.OBJECT) {\n        appletStartTagInBody(p, token);\n      } else if (tn === $.KEYGEN) {\n        areaStartTagInBody(p, token);\n      } else if (tn === $.SOURCE) {\n        paramStartTagInBody(p, token);\n      } else if (tn === $.IFRAME) {\n        iframeStartTagInBody(p, token);\n      } else if (tn === $.SELECT) {\n        selectStartTagInBody(p, token);\n      } else if (tn === $.OPTION) {\n        optgroupStartTagInBody(p, token);\n      } else {\n        genericStartTagInBody(p, token);\n      }\n      break;\n    case 7:\n      if (tn === $.BGSOUND) {\n        startTagInHead(p, token);\n      } else if (tn === $.DETAILS || tn === $.ADDRESS || tn === $.ARTICLE || tn === $.SECTION || tn === $.SUMMARY) {\n        addressStartTagInBody(p, token);\n      } else if (tn === $.LISTING) {\n        preStartTagInBody(p, token);\n      } else if (tn === $.MARQUEE) {\n        appletStartTagInBody(p, token);\n      } else if (tn === $.NOEMBED) {\n        noembedStartTagInBody(p, token);\n      } else if (tn !== $.CAPTION) {\n        genericStartTagInBody(p, token);\n      }\n      break;\n    case 8:\n      if (tn === $.BASEFONT) {\n        startTagInHead(p, token);\n      } else if (tn === $.FRAMESET) {\n        framesetStartTagInBody(p, token);\n      } else if (tn === $.FIELDSET) {\n        addressStartTagInBody(p, token);\n      } else if (tn === $.TEXTAREA) {\n        textareaStartTagInBody(p, token);\n      } else if (tn === $.TEMPLATE) {\n        startTagInHead(p, token);\n      } else if (tn === $.NOSCRIPT) {\n        if (p.options.scriptingEnabled) {\n          noembedStartTagInBody(p, token);\n        } else {\n          genericStartTagInBody(p, token);\n        }\n      } else if (tn === $.OPTGROUP) {\n        optgroupStartTagInBody(p, token);\n      } else if (tn !== $.COLGROUP) {\n        genericStartTagInBody(p, token);\n      }\n      break;\n    case 9:\n      if (tn === $.PLAINTEXT) {\n        plaintextStartTagInBody(p, token);\n      } else {\n        genericStartTagInBody(p, token);\n      }\n      break;\n    case 10:\n      if (tn === $.BLOCKQUOTE || tn === $.FIGCAPTION) {\n        addressStartTagInBody(p, token);\n      } else {\n        genericStartTagInBody(p, token);\n      }\n      break;\n    default:\n      genericStartTagInBody(p, token);\n  }\n}\nfunction bodyEndTagInBody(p) {\n  if (p.openElements.hasInScope($.BODY)) {\n    p.insertionMode = AFTER_BODY_MODE;\n  }\n}\nfunction htmlEndTagInBody(p, token) {\n  if (p.openElements.hasInScope($.BODY)) {\n    p.insertionMode = AFTER_BODY_MODE;\n    p._processToken(token);\n  }\n}\nfunction addressEndTagInBody(p, token) {\n  var tn = token.tagName;\n  if (p.openElements.hasInScope(tn)) {\n    p.openElements.generateImpliedEndTags();\n    p.openElements.popUntilTagNamePopped(tn);\n  }\n}\nfunction formEndTagInBody(p) {\n  var inTemplate = p.openElements.tmplCount > 0;\n  var formElement = p.formElement;\n  if (!inTemplate) {\n    p.formElement = null;\n  }\n  if ((formElement || inTemplate) && p.openElements.hasInScope($.FORM)) {\n    p.openElements.generateImpliedEndTags();\n    if (inTemplate) {\n      p.openElements.popUntilTagNamePopped($.FORM);\n    } else {\n      p.openElements.remove(formElement);\n    }\n  }\n}\nfunction pEndTagInBody(p) {\n  if (!p.openElements.hasInButtonScope($.P)) {\n    p._insertFakeElement($.P);\n  }\n  p._closePElement();\n}\nfunction liEndTagInBody(p) {\n  if (p.openElements.hasInListItemScope($.LI)) {\n    p.openElements.generateImpliedEndTagsWithExclusion($.LI);\n    p.openElements.popUntilTagNamePopped($.LI);\n  }\n}\nfunction ddEndTagInBody(p, token) {\n  var tn = token.tagName;\n  if (p.openElements.hasInScope(tn)) {\n    p.openElements.generateImpliedEndTagsWithExclusion(tn);\n    p.openElements.popUntilTagNamePopped(tn);\n  }\n}\nfunction numberedHeaderEndTagInBody(p) {\n  if (p.openElements.hasNumberedHeaderInScope()) {\n    p.openElements.generateImpliedEndTags();\n    p.openElements.popUntilNumberedHeaderPopped();\n  }\n}\nfunction appletEndTagInBody(p, token) {\n  var tn = token.tagName;\n  if (p.openElements.hasInScope(tn)) {\n    p.openElements.generateImpliedEndTags();\n    p.openElements.popUntilTagNamePopped(tn);\n    p.activeFormattingElements.clearToLastMarker();\n  }\n}\nfunction brEndTagInBody(p) {\n  p._reconstructActiveFormattingElements();\n  p._insertFakeElement($.BR);\n  p.openElements.pop();\n  p.framesetOk = false;\n}\nfunction genericEndTagInBody(p, token) {\n  var tn = token.tagName;\n  for (var i = p.openElements.stackTop; i > 0; i--) {\n    var element = p.openElements.items[i];\n    if (p.treeAdapter.getTagName(element) === tn) {\n      p.openElements.generateImpliedEndTagsWithExclusion(tn);\n      p.openElements.popUntilElementPopped(element);\n      break;\n    }\n    if (p._isSpecialElement(element)) {\n      break;\n    }\n  }\n}\n\n//OPTIMIZATION: Integer comparisons are low-cost, so we can use very fast tag name length filters here.\n//It's faster than using dictionary.\nfunction endTagInBody(p, token) {\n  var tn = token.tagName;\n  switch (tn.length) {\n    case 1:\n      if (tn === $.A || tn === $.B || tn === $.I || tn === $.S || tn === $.U) {\n        callAdoptionAgency(p, token);\n      } else if (tn === $.P) {\n        pEndTagInBody(p, token);\n      } else {\n        genericEndTagInBody(p, token);\n      }\n      break;\n    case 2:\n      if (tn === $.DL || tn === $.UL || tn === $.OL) {\n        addressEndTagInBody(p, token);\n      } else if (tn === $.LI) {\n        liEndTagInBody(p, token);\n      } else if (tn === $.DD || tn === $.DT) {\n        ddEndTagInBody(p, token);\n      } else if (tn === $.H1 || tn === $.H2 || tn === $.H3 || tn === $.H4 || tn === $.H5 || tn === $.H6) {\n        numberedHeaderEndTagInBody(p, token);\n      } else if (tn === $.BR) {\n        brEndTagInBody(p, token);\n      } else if (tn === $.EM || tn === $.TT) {\n        callAdoptionAgency(p, token);\n      } else {\n        genericEndTagInBody(p, token);\n      }\n      break;\n    case 3:\n      if (tn === $.BIG) {\n        callAdoptionAgency(p, token);\n      } else if (tn === $.DIR || tn === $.DIV || tn === $.NAV || tn === $.PRE) {\n        addressEndTagInBody(p, token);\n      } else {\n        genericEndTagInBody(p, token);\n      }\n      break;\n    case 4:\n      if (tn === $.BODY) {\n        bodyEndTagInBody(p, token);\n      } else if (tn === $.HTML) {\n        htmlEndTagInBody(p, token);\n      } else if (tn === $.FORM) {\n        formEndTagInBody(p, token);\n      } else if (tn === $.CODE || tn === $.FONT || tn === $.NOBR) {\n        callAdoptionAgency(p, token);\n      } else if (tn === $.MAIN || tn === $.MENU) {\n        addressEndTagInBody(p, token);\n      } else {\n        genericEndTagInBody(p, token);\n      }\n      break;\n    case 5:\n      if (tn === $.ASIDE) {\n        addressEndTagInBody(p, token);\n      } else if (tn === $.SMALL) {\n        callAdoptionAgency(p, token);\n      } else {\n        genericEndTagInBody(p, token);\n      }\n      break;\n    case 6:\n      if (tn === $.CENTER || tn === $.FIGURE || tn === $.FOOTER || tn === $.HEADER || tn === $.HGROUP || tn === $.DIALOG) {\n        addressEndTagInBody(p, token);\n      } else if (tn === $.APPLET || tn === $.OBJECT) {\n        appletEndTagInBody(p, token);\n      } else if (tn === $.STRIKE || tn === $.STRONG) {\n        callAdoptionAgency(p, token);\n      } else {\n        genericEndTagInBody(p, token);\n      }\n      break;\n    case 7:\n      if (tn === $.ADDRESS || tn === $.ARTICLE || tn === $.DETAILS || tn === $.SECTION || tn === $.SUMMARY || tn === $.LISTING) {\n        addressEndTagInBody(p, token);\n      } else if (tn === $.MARQUEE) {\n        appletEndTagInBody(p, token);\n      } else {\n        genericEndTagInBody(p, token);\n      }\n      break;\n    case 8:\n      if (tn === $.FIELDSET) {\n        addressEndTagInBody(p, token);\n      } else if (tn === $.TEMPLATE) {\n        endTagInHead(p, token);\n      } else {\n        genericEndTagInBody(p, token);\n      }\n      break;\n    case 10:\n      if (tn === $.BLOCKQUOTE || tn === $.FIGCAPTION) {\n        addressEndTagInBody(p, token);\n      } else {\n        genericEndTagInBody(p, token);\n      }\n      break;\n    default:\n      genericEndTagInBody(p, token);\n  }\n}\nfunction eofInBody(p, token) {\n  if (p.tmplInsertionModeStackTop > -1) {\n    eofInTemplate(p, token);\n  } else {\n    p.stopped = true;\n  }\n}\n\n// The \"text\" insertion mode\n//------------------------------------------------------------------\nfunction endTagInText(p, token) {\n  if (token.tagName === $.SCRIPT) {\n    p.pendingScript = p.openElements.current;\n  }\n  p.openElements.pop();\n  p.insertionMode = p.originalInsertionMode;\n}\nfunction eofInText(p, token) {\n  p._err(ERR.eofInElementThatCanContainOnlyText);\n  p.openElements.pop();\n  p.insertionMode = p.originalInsertionMode;\n  p._processToken(token);\n}\n\n// The \"in table\" insertion mode\n//------------------------------------------------------------------\nfunction characterInTable(p, token) {\n  var curTn = p.openElements.currentTagName;\n  if (curTn === $.TABLE || curTn === $.TBODY || curTn === $.TFOOT || curTn === $.THEAD || curTn === $.TR) {\n    p.pendingCharacterTokens = [];\n    p.hasNonWhitespacePendingCharacterToken = false;\n    p.originalInsertionMode = p.insertionMode;\n    p.insertionMode = IN_TABLE_TEXT_MODE;\n    p._processToken(token);\n  } else {\n    tokenInTable(p, token);\n  }\n}\nfunction captionStartTagInTable(p, token) {\n  p.openElements.clearBackToTableContext();\n  p.activeFormattingElements.insertMarker();\n  p._insertElement(token, NS.HTML);\n  p.insertionMode = IN_CAPTION_MODE;\n}\nfunction colgroupStartTagInTable(p, token) {\n  p.openElements.clearBackToTableContext();\n  p._insertElement(token, NS.HTML);\n  p.insertionMode = IN_COLUMN_GROUP_MODE;\n}\nfunction colStartTagInTable(p, token) {\n  p.openElements.clearBackToTableContext();\n  p._insertFakeElement($.COLGROUP);\n  p.insertionMode = IN_COLUMN_GROUP_MODE;\n  p._processToken(token);\n}\nfunction tbodyStartTagInTable(p, token) {\n  p.openElements.clearBackToTableContext();\n  p._insertElement(token, NS.HTML);\n  p.insertionMode = IN_TABLE_BODY_MODE;\n}\nfunction tdStartTagInTable(p, token) {\n  p.openElements.clearBackToTableContext();\n  p._insertFakeElement($.TBODY);\n  p.insertionMode = IN_TABLE_BODY_MODE;\n  p._processToken(token);\n}\nfunction tableStartTagInTable(p, token) {\n  if (p.openElements.hasInTableScope($.TABLE)) {\n    p.openElements.popUntilTagNamePopped($.TABLE);\n    p._resetInsertionMode();\n    p._processToken(token);\n  }\n}\nfunction inputStartTagInTable(p, token) {\n  var inputType = Tokenizer.getTokenAttr(token, ATTRS.TYPE);\n  if (inputType && inputType.toLowerCase() === HIDDEN_INPUT_TYPE) {\n    p._appendElement(token, NS.HTML);\n  } else {\n    tokenInTable(p, token);\n  }\n  token.ackSelfClosing = true;\n}\nfunction formStartTagInTable(p, token) {\n  if (!p.formElement && p.openElements.tmplCount === 0) {\n    p._insertElement(token, NS.HTML);\n    p.formElement = p.openElements.current;\n    p.openElements.pop();\n  }\n}\nfunction startTagInTable(p, token) {\n  var tn = token.tagName;\n  switch (tn.length) {\n    case 2:\n      if (tn === $.TD || tn === $.TH || tn === $.TR) {\n        tdStartTagInTable(p, token);\n      } else {\n        tokenInTable(p, token);\n      }\n      break;\n    case 3:\n      if (tn === $.COL) {\n        colStartTagInTable(p, token);\n      } else {\n        tokenInTable(p, token);\n      }\n      break;\n    case 4:\n      if (tn === $.FORM) {\n        formStartTagInTable(p, token);\n      } else {\n        tokenInTable(p, token);\n      }\n      break;\n    case 5:\n      if (tn === $.TABLE) {\n        tableStartTagInTable(p, token);\n      } else if (tn === $.STYLE) {\n        startTagInHead(p, token);\n      } else if (tn === $.TBODY || tn === $.TFOOT || tn === $.THEAD) {\n        tbodyStartTagInTable(p, token);\n      } else if (tn === $.INPUT) {\n        inputStartTagInTable(p, token);\n      } else {\n        tokenInTable(p, token);\n      }\n      break;\n    case 6:\n      if (tn === $.SCRIPT) {\n        startTagInHead(p, token);\n      } else {\n        tokenInTable(p, token);\n      }\n      break;\n    case 7:\n      if (tn === $.CAPTION) {\n        captionStartTagInTable(p, token);\n      } else {\n        tokenInTable(p, token);\n      }\n      break;\n    case 8:\n      if (tn === $.COLGROUP) {\n        colgroupStartTagInTable(p, token);\n      } else if (tn === $.TEMPLATE) {\n        startTagInHead(p, token);\n      } else {\n        tokenInTable(p, token);\n      }\n      break;\n    default:\n      tokenInTable(p, token);\n  }\n}\nfunction endTagInTable(p, token) {\n  var tn = token.tagName;\n  if (tn === $.TABLE) {\n    if (p.openElements.hasInTableScope($.TABLE)) {\n      p.openElements.popUntilTagNamePopped($.TABLE);\n      p._resetInsertionMode();\n    }\n  } else if (tn === $.TEMPLATE) {\n    endTagInHead(p, token);\n  } else if (tn !== $.BODY && tn !== $.CAPTION && tn !== $.COL && tn !== $.COLGROUP && tn !== $.HTML && tn !== $.TBODY && tn !== $.TD && tn !== $.TFOOT && tn !== $.TH && tn !== $.THEAD && tn !== $.TR) {\n    tokenInTable(p, token);\n  }\n}\nfunction tokenInTable(p, token) {\n  var savedFosterParentingState = p.fosterParentingEnabled;\n  p.fosterParentingEnabled = true;\n  p._processTokenInBodyMode(token);\n  p.fosterParentingEnabled = savedFosterParentingState;\n}\n\n// The \"in table text\" insertion mode\n//------------------------------------------------------------------\nfunction whitespaceCharacterInTableText(p, token) {\n  p.pendingCharacterTokens.push(token);\n}\nfunction characterInTableText(p, token) {\n  p.pendingCharacterTokens.push(token);\n  p.hasNonWhitespacePendingCharacterToken = true;\n}\nfunction tokenInTableText(p, token) {\n  var i = 0;\n  if (p.hasNonWhitespacePendingCharacterToken) {\n    for (; i < p.pendingCharacterTokens.length; i++) {\n      tokenInTable(p, p.pendingCharacterTokens[i]);\n    }\n  } else {\n    for (; i < p.pendingCharacterTokens.length; i++) {\n      p._insertCharacters(p.pendingCharacterTokens[i]);\n    }\n  }\n  p.insertionMode = p.originalInsertionMode;\n  p._processToken(token);\n}\n\n// The \"in caption\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInCaption(p, token) {\n  var tn = token.tagName;\n  if (tn === $.CAPTION || tn === $.COL || tn === $.COLGROUP || tn === $.TBODY || tn === $.TD || tn === $.TFOOT || tn === $.TH || tn === $.THEAD || tn === $.TR) {\n    if (p.openElements.hasInTableScope($.CAPTION)) {\n      p.openElements.generateImpliedEndTags();\n      p.openElements.popUntilTagNamePopped($.CAPTION);\n      p.activeFormattingElements.clearToLastMarker();\n      p.insertionMode = IN_TABLE_MODE;\n      p._processToken(token);\n    }\n  } else {\n    startTagInBody(p, token);\n  }\n}\nfunction endTagInCaption(p, token) {\n  var tn = token.tagName;\n  if (tn === $.CAPTION || tn === $.TABLE) {\n    if (p.openElements.hasInTableScope($.CAPTION)) {\n      p.openElements.generateImpliedEndTags();\n      p.openElements.popUntilTagNamePopped($.CAPTION);\n      p.activeFormattingElements.clearToLastMarker();\n      p.insertionMode = IN_TABLE_MODE;\n      if (tn === $.TABLE) {\n        p._processToken(token);\n      }\n    }\n  } else if (tn !== $.BODY && tn !== $.COL && tn !== $.COLGROUP && tn !== $.HTML && tn !== $.TBODY && tn !== $.TD && tn !== $.TFOOT && tn !== $.TH && tn !== $.THEAD && tn !== $.TR) {\n    endTagInBody(p, token);\n  }\n}\n\n// The \"in column group\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInColumnGroup(p, token) {\n  var tn = token.tagName;\n  if (tn === $.HTML) {\n    startTagInBody(p, token);\n  } else if (tn === $.COL) {\n    p._appendElement(token, NS.HTML);\n    token.ackSelfClosing = true;\n  } else if (tn === $.TEMPLATE) {\n    startTagInHead(p, token);\n  } else {\n    tokenInColumnGroup(p, token);\n  }\n}\nfunction endTagInColumnGroup(p, token) {\n  var tn = token.tagName;\n  if (tn === $.COLGROUP) {\n    if (p.openElements.currentTagName === $.COLGROUP) {\n      p.openElements.pop();\n      p.insertionMode = IN_TABLE_MODE;\n    }\n  } else if (tn === $.TEMPLATE) {\n    endTagInHead(p, token);\n  } else if (tn !== $.COL) {\n    tokenInColumnGroup(p, token);\n  }\n}\nfunction tokenInColumnGroup(p, token) {\n  if (p.openElements.currentTagName === $.COLGROUP) {\n    p.openElements.pop();\n    p.insertionMode = IN_TABLE_MODE;\n    p._processToken(token);\n  }\n}\n\n// The \"in table body\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInTableBody(p, token) {\n  var tn = token.tagName;\n  if (tn === $.TR) {\n    p.openElements.clearBackToTableBodyContext();\n    p._insertElement(token, NS.HTML);\n    p.insertionMode = IN_ROW_MODE;\n  } else if (tn === $.TH || tn === $.TD) {\n    p.openElements.clearBackToTableBodyContext();\n    p._insertFakeElement($.TR);\n    p.insertionMode = IN_ROW_MODE;\n    p._processToken(token);\n  } else if (tn === $.CAPTION || tn === $.COL || tn === $.COLGROUP || tn === $.TBODY || tn === $.TFOOT || tn === $.THEAD) {\n    if (p.openElements.hasTableBodyContextInTableScope()) {\n      p.openElements.clearBackToTableBodyContext();\n      p.openElements.pop();\n      p.insertionMode = IN_TABLE_MODE;\n      p._processToken(token);\n    }\n  } else {\n    startTagInTable(p, token);\n  }\n}\nfunction endTagInTableBody(p, token) {\n  var tn = token.tagName;\n  if (tn === $.TBODY || tn === $.TFOOT || tn === $.THEAD) {\n    if (p.openElements.hasInTableScope(tn)) {\n      p.openElements.clearBackToTableBodyContext();\n      p.openElements.pop();\n      p.insertionMode = IN_TABLE_MODE;\n    }\n  } else if (tn === $.TABLE) {\n    if (p.openElements.hasTableBodyContextInTableScope()) {\n      p.openElements.clearBackToTableBodyContext();\n      p.openElements.pop();\n      p.insertionMode = IN_TABLE_MODE;\n      p._processToken(token);\n    }\n  } else if (tn !== $.BODY && tn !== $.CAPTION && tn !== $.COL && tn !== $.COLGROUP || tn !== $.HTML && tn !== $.TD && tn !== $.TH && tn !== $.TR) {\n    endTagInTable(p, token);\n  }\n}\n\n// The \"in row\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInRow(p, token) {\n  var tn = token.tagName;\n  if (tn === $.TH || tn === $.TD) {\n    p.openElements.clearBackToTableRowContext();\n    p._insertElement(token, NS.HTML);\n    p.insertionMode = IN_CELL_MODE;\n    p.activeFormattingElements.insertMarker();\n  } else if (tn === $.CAPTION || tn === $.COL || tn === $.COLGROUP || tn === $.TBODY || tn === $.TFOOT || tn === $.THEAD || tn === $.TR) {\n    if (p.openElements.hasInTableScope($.TR)) {\n      p.openElements.clearBackToTableRowContext();\n      p.openElements.pop();\n      p.insertionMode = IN_TABLE_BODY_MODE;\n      p._processToken(token);\n    }\n  } else {\n    startTagInTable(p, token);\n  }\n}\nfunction endTagInRow(p, token) {\n  var tn = token.tagName;\n  if (tn === $.TR) {\n    if (p.openElements.hasInTableScope($.TR)) {\n      p.openElements.clearBackToTableRowContext();\n      p.openElements.pop();\n      p.insertionMode = IN_TABLE_BODY_MODE;\n    }\n  } else if (tn === $.TABLE) {\n    if (p.openElements.hasInTableScope($.TR)) {\n      p.openElements.clearBackToTableRowContext();\n      p.openElements.pop();\n      p.insertionMode = IN_TABLE_BODY_MODE;\n      p._processToken(token);\n    }\n  } else if (tn === $.TBODY || tn === $.TFOOT || tn === $.THEAD) {\n    if (p.openElements.hasInTableScope(tn) || p.openElements.hasInTableScope($.TR)) {\n      p.openElements.clearBackToTableRowContext();\n      p.openElements.pop();\n      p.insertionMode = IN_TABLE_BODY_MODE;\n      p._processToken(token);\n    }\n  } else if (tn !== $.BODY && tn !== $.CAPTION && tn !== $.COL && tn !== $.COLGROUP || tn !== $.HTML && tn !== $.TD && tn !== $.TH) {\n    endTagInTable(p, token);\n  }\n}\n\n// The \"in cell\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInCell(p, token) {\n  var tn = token.tagName;\n  if (tn === $.CAPTION || tn === $.COL || tn === $.COLGROUP || tn === $.TBODY || tn === $.TD || tn === $.TFOOT || tn === $.TH || tn === $.THEAD || tn === $.TR) {\n    if (p.openElements.hasInTableScope($.TD) || p.openElements.hasInTableScope($.TH)) {\n      p._closeTableCell();\n      p._processToken(token);\n    }\n  } else {\n    startTagInBody(p, token);\n  }\n}\nfunction endTagInCell(p, token) {\n  var tn = token.tagName;\n  if (tn === $.TD || tn === $.TH) {\n    if (p.openElements.hasInTableScope(tn)) {\n      p.openElements.generateImpliedEndTags();\n      p.openElements.popUntilTagNamePopped(tn);\n      p.activeFormattingElements.clearToLastMarker();\n      p.insertionMode = IN_ROW_MODE;\n    }\n  } else if (tn === $.TABLE || tn === $.TBODY || tn === $.TFOOT || tn === $.THEAD || tn === $.TR) {\n    if (p.openElements.hasInTableScope(tn)) {\n      p._closeTableCell();\n      p._processToken(token);\n    }\n  } else if (tn !== $.BODY && tn !== $.CAPTION && tn !== $.COL && tn !== $.COLGROUP && tn !== $.HTML) {\n    endTagInBody(p, token);\n  }\n}\n\n// The \"in select\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInSelect(p, token) {\n  var tn = token.tagName;\n  if (tn === $.HTML) {\n    startTagInBody(p, token);\n  } else if (tn === $.OPTION) {\n    if (p.openElements.currentTagName === $.OPTION) {\n      p.openElements.pop();\n    }\n    p._insertElement(token, NS.HTML);\n  } else if (tn === $.OPTGROUP) {\n    if (p.openElements.currentTagName === $.OPTION) {\n      p.openElements.pop();\n    }\n    if (p.openElements.currentTagName === $.OPTGROUP) {\n      p.openElements.pop();\n    }\n    p._insertElement(token, NS.HTML);\n  } else if (tn === $.INPUT || tn === $.KEYGEN || tn === $.TEXTAREA || tn === $.SELECT) {\n    if (p.openElements.hasInSelectScope($.SELECT)) {\n      p.openElements.popUntilTagNamePopped($.SELECT);\n      p._resetInsertionMode();\n      if (tn !== $.SELECT) {\n        p._processToken(token);\n      }\n    }\n  } else if (tn === $.SCRIPT || tn === $.TEMPLATE) {\n    startTagInHead(p, token);\n  }\n}\nfunction endTagInSelect(p, token) {\n  var tn = token.tagName;\n  if (tn === $.OPTGROUP) {\n    var prevOpenElement = p.openElements.items[p.openElements.stackTop - 1];\n    var prevOpenElementTn = prevOpenElement && p.treeAdapter.getTagName(prevOpenElement);\n    if (p.openElements.currentTagName === $.OPTION && prevOpenElementTn === $.OPTGROUP) {\n      p.openElements.pop();\n    }\n    if (p.openElements.currentTagName === $.OPTGROUP) {\n      p.openElements.pop();\n    }\n  } else if (tn === $.OPTION) {\n    if (p.openElements.currentTagName === $.OPTION) {\n      p.openElements.pop();\n    }\n  } else if (tn === $.SELECT && p.openElements.hasInSelectScope($.SELECT)) {\n    p.openElements.popUntilTagNamePopped($.SELECT);\n    p._resetInsertionMode();\n  } else if (tn === $.TEMPLATE) {\n    endTagInHead(p, token);\n  }\n}\n\n//12.2.5.4.17 The \"in select in table\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInSelectInTable(p, token) {\n  var tn = token.tagName;\n  if (tn === $.CAPTION || tn === $.TABLE || tn === $.TBODY || tn === $.TFOOT || tn === $.THEAD || tn === $.TR || tn === $.TD || tn === $.TH) {\n    p.openElements.popUntilTagNamePopped($.SELECT);\n    p._resetInsertionMode();\n    p._processToken(token);\n  } else {\n    startTagInSelect(p, token);\n  }\n}\nfunction endTagInSelectInTable(p, token) {\n  var tn = token.tagName;\n  if (tn === $.CAPTION || tn === $.TABLE || tn === $.TBODY || tn === $.TFOOT || tn === $.THEAD || tn === $.TR || tn === $.TD || tn === $.TH) {\n    if (p.openElements.hasInTableScope(tn)) {\n      p.openElements.popUntilTagNamePopped($.SELECT);\n      p._resetInsertionMode();\n      p._processToken(token);\n    }\n  } else {\n    endTagInSelect(p, token);\n  }\n}\n\n// The \"in template\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInTemplate(p, token) {\n  var tn = token.tagName;\n  if (tn === $.BASE || tn === $.BASEFONT || tn === $.BGSOUND || tn === $.LINK || tn === $.META || tn === $.NOFRAMES || tn === $.SCRIPT || tn === $.STYLE || tn === $.TEMPLATE || tn === $.TITLE) {\n    startTagInHead(p, token);\n  } else {\n    var newInsertionMode = TEMPLATE_INSERTION_MODE_SWITCH_MAP[tn] || IN_BODY_MODE;\n    p._popTmplInsertionMode();\n    p._pushTmplInsertionMode(newInsertionMode);\n    p.insertionMode = newInsertionMode;\n    p._processToken(token);\n  }\n}\nfunction endTagInTemplate(p, token) {\n  if (token.tagName === $.TEMPLATE) {\n    endTagInHead(p, token);\n  }\n}\nfunction eofInTemplate(p, token) {\n  if (p.openElements.tmplCount > 0) {\n    p.openElements.popUntilTagNamePopped($.TEMPLATE);\n    p.activeFormattingElements.clearToLastMarker();\n    p._popTmplInsertionMode();\n    p._resetInsertionMode();\n    p._processToken(token);\n  } else {\n    p.stopped = true;\n  }\n}\n\n// The \"after body\" insertion mode\n//------------------------------------------------------------------\nfunction startTagAfterBody(p, token) {\n  if (token.tagName === $.HTML) {\n    startTagInBody(p, token);\n  } else {\n    tokenAfterBody(p, token);\n  }\n}\nfunction endTagAfterBody(p, token) {\n  if (token.tagName === $.HTML) {\n    if (!p.fragmentContext) {\n      p.insertionMode = AFTER_AFTER_BODY_MODE;\n    }\n  } else {\n    tokenAfterBody(p, token);\n  }\n}\nfunction tokenAfterBody(p, token) {\n  p.insertionMode = IN_BODY_MODE;\n  p._processToken(token);\n}\n\n// The \"in frameset\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInFrameset(p, token) {\n  var tn = token.tagName;\n  if (tn === $.HTML) {\n    startTagInBody(p, token);\n  } else if (tn === $.FRAMESET) {\n    p._insertElement(token, NS.HTML);\n  } else if (tn === $.FRAME) {\n    p._appendElement(token, NS.HTML);\n    token.ackSelfClosing = true;\n  } else if (tn === $.NOFRAMES) {\n    startTagInHead(p, token);\n  }\n}\nfunction endTagInFrameset(p, token) {\n  if (token.tagName === $.FRAMESET && !p.openElements.isRootHtmlElementCurrent()) {\n    p.openElements.pop();\n    if (!p.fragmentContext && p.openElements.currentTagName !== $.FRAMESET) {\n      p.insertionMode = AFTER_FRAMESET_MODE;\n    }\n  }\n}\n\n// The \"after frameset\" insertion mode\n//------------------------------------------------------------------\nfunction startTagAfterFrameset(p, token) {\n  var tn = token.tagName;\n  if (tn === $.HTML) {\n    startTagInBody(p, token);\n  } else if (tn === $.NOFRAMES) {\n    startTagInHead(p, token);\n  }\n}\nfunction endTagAfterFrameset(p, token) {\n  if (token.tagName === $.HTML) {\n    p.insertionMode = AFTER_AFTER_FRAMESET_MODE;\n  }\n}\n\n// The \"after after body\" insertion mode\n//------------------------------------------------------------------\nfunction startTagAfterAfterBody(p, token) {\n  if (token.tagName === $.HTML) {\n    startTagInBody(p, token);\n  } else {\n    tokenAfterAfterBody(p, token);\n  }\n}\nfunction tokenAfterAfterBody(p, token) {\n  p.insertionMode = IN_BODY_MODE;\n  p._processToken(token);\n}\n\n// The \"after after frameset\" insertion mode\n//------------------------------------------------------------------\nfunction startTagAfterAfterFrameset(p, token) {\n  var tn = token.tagName;\n  if (tn === $.HTML) {\n    startTagInBody(p, token);\n  } else if (tn === $.NOFRAMES) {\n    startTagInHead(p, token);\n  }\n}\n\n// The rules for parsing tokens in foreign content\n//------------------------------------------------------------------\nfunction nullCharacterInForeignContent(p, token) {\n  token.chars = unicode.REPLACEMENT_CHARACTER;\n  p._insertCharacters(token);\n}\nfunction characterInForeignContent(p, token) {\n  p._insertCharacters(token);\n  p.framesetOk = false;\n}\nfunction startTagInForeignContent(p, token) {\n  if (foreignContent.causesExit(token) && !p.fragmentContext) {\n    while (p.treeAdapter.getNamespaceURI(p.openElements.current) !== NS.HTML && !p._isIntegrationPoint(p.openElements.current)) {\n      p.openElements.pop();\n    }\n    p._processToken(token);\n  } else {\n    var current = p._getAdjustedCurrentElement();\n    var currentNs = p.treeAdapter.getNamespaceURI(current);\n    if (currentNs === NS.MATHML) {\n      foreignContent.adjustTokenMathMLAttrs(token);\n    } else if (currentNs === NS.SVG) {\n      foreignContent.adjustTokenSVGTagName(token);\n      foreignContent.adjustTokenSVGAttrs(token);\n    }\n    foreignContent.adjustTokenXMLAttrs(token);\n    if (token.selfClosing) {\n      p._appendElement(token, currentNs);\n    } else {\n      p._insertElement(token, currentNs);\n    }\n    token.ackSelfClosing = true;\n  }\n}\nfunction endTagInForeignContent(p, token) {\n  for (var i = p.openElements.stackTop; i > 0; i--) {\n    var element = p.openElements.items[i];\n    if (p.treeAdapter.getNamespaceURI(element) === NS.HTML) {\n      p._processToken(token);\n      break;\n    }\n    if (p.treeAdapter.getTagName(element).toLowerCase() === token.tagName) {\n      p.openElements.popUntilElementPopped(element);\n      break;\n    }\n  }\n}","map":{"version":3,"names":["_classCallCheck","require","_createClass","_defineProperty","_TOKEN_HANDLERS","Tokenizer","OpenElementStack","FormattingElementList","LocationInfoParserMixin","ErrorReportingParserMixin","Mixin","defaultTreeAdapter","mergeOptions","doctype","foreignContent","ERR","unicode","HTML","$","TAG_NAMES","NS","NAMESPACES","ATTRS","DEFAULT_OPTIONS","scriptingEnabled","sourceCodeLocationInfo","onParseError","treeAdapter","HIDDEN_INPUT_TYPE","AA_OUTER_LOOP_ITER","AA_INNER_LOOP_ITER","INITIAL_MODE","BEFORE_HTML_MODE","BEFORE_HEAD_MODE","IN_HEAD_MODE","IN_HEAD_NO_SCRIPT_MODE","AFTER_HEAD_MODE","IN_BODY_MODE","TEXT_MODE","IN_TABLE_MODE","IN_TABLE_TEXT_MODE","IN_CAPTION_MODE","IN_COLUMN_GROUP_MODE","IN_TABLE_BODY_MODE","IN_ROW_MODE","IN_CELL_MODE","IN_SELECT_MODE","IN_SELECT_IN_TABLE_MODE","IN_TEMPLATE_MODE","AFTER_BODY_MODE","IN_FRAMESET_MODE","AFTER_FRAMESET_MODE","AFTER_AFTER_BODY_MODE","AFTER_AFTER_FRAMESET_MODE","INSERTION_MODE_RESET_MAP","TR","TBODY","THEAD","TFOOT","CAPTION","COLGROUP","TABLE","BODY","FRAMESET","TEMPLATE_INSERTION_MODE_SWITCH_MAP","COL","TD","TH","TOKEN_HANDLERS","CHARACTER_TOKEN","tokenInInitialMode","NULL_CHARACTER_TOKEN","WHITESPACE_CHARACTER_TOKEN","ignoreToken","COMMENT_TOKEN","appendComment","DOCTYPE_TOKEN","doctypeInInitialMode","START_TAG_TOKEN","END_TAG_TOKEN","EOF_TOKEN","tokenBeforeHtml","startTagBeforeHtml","endTagBeforeHtml","tokenBeforeHead","misplacedDoctype","startTagBeforeHead","endTagBeforeHead","tokenInHead","insertCharacters","startTagInHead","endTagInHead","tokenInHeadNoScript","startTagInHeadNoScript","endTagInHeadNoScript","tokenAfterHead","startTagAfterHead","endTagAfterHead","characterInBody","whitespaceCharacterInBody","startTagInBody","endTagInBody","eofInBody","endTagInText","eofInText","characterInTable","startTagInTable","endTagInTable","characterInTableText","whitespaceCharacterInTableText","tokenInTableText","startTagInCaption","endTagInCaption","tokenInColumnGroup","startTagInColumnGroup","endTagInColumnGroup","startTagInTableBody","endTagInTableBody","startTagInRow","endTagInRow","startTagInCell","endTagInCell","startTagInSelect","endTagInSelect","startTagInSelectInTable","endTagInSelectInTable","startTagInTemplate","endTagInTemplate","eofInTemplate","tokenAfterBody","appendCommentToRootHtmlElement","startTagAfterBody","endTagAfterBody","stopParsing","startTagInFrameset","endTagInFrameset","startTagAfterFrameset","endTagAfterFrameset","tokenAfterAfterBody","appendCommentToDocument","startTagAfterAfterBody","startTagAfterAfterFrameset","Parser","options","pendingScript","install","key","value","parse","html","document","createDocument","_bootstrap","tokenizer","write","_runParsingLoop","parseFragment","fragmentContext","createElement","TEMPLATE","documentMock","getTagName","_pushTmplInsertionMode","_initTokenizerForFragmentParsing","_insertFakeRootElement","_resetInsertionMode","_findFormInFragmentContext","rootElement","getFirstChild","fragment","createDocumentFragment","_adoptNodes","stopped","insertionMode","originalInsertionMode","headElement","formElement","openElements","activeFormattingElements","tmplInsertionModeStack","tmplInsertionModeStackTop","currentTmplInsertionMode","pendingCharacterTokens","hasNonWhitespacePendingCharacterToken","framesetOk","skipNextNewLine","fosterParentingEnabled","_err","scriptHandler","_setupTokenizerCDATAMode","token","getNextToken","type","HIBERNATION_TOKEN","chars","length","substr","_processInputToken","runParsingLoopForCurrentChunk","writeCallback","script","current","_getAdjustedCurrentElement","allowCDATA","getNamespaceURI","_isIntegrationPoint","_switchToTextParsing","currentToken","nextTokenizerState","_insertElement","state","switchToPlaintextParsing","MODE","PLAINTEXT","stackTop","node","FORM","getParentNode","tn","TITLE","TEXTAREA","RCDATA","STYLE","XMP","IFRAME","NOEMBED","NOFRAMES","NOSCRIPT","RAWTEXT","SCRIPT","SCRIPT_DATA","_setDocumentType","name","publicId","systemId","setDocumentType","_attachElementToTree","element","_shouldFosterParentOnInsertion","_fosterParentElement","parent","currentTmplContent","appendChild","_appendElement","namespaceURI","tagName","attrs","push","_insertFakeElement","_insertTemplate","tmpl","content","setTemplateContent","_appendCommentNode","commentNode","createCommentNode","data","_insertCharacters","_fosterParentText","insertText","donor","recipient","child","detachNode","_shouldProcessTokenInForeignContent","ns","ANNOTATION_XML","MATHML","SVG","isCharacterToken","isMathMLTextStartTag","MGLYPH","MALIGNMARK","_processToken","_processTokenInBodyMode","_processTokenInForeignContent","characterInForeignContent","nullCharacterInForeignContent","startTagInForeignContent","endTagInForeignContent","selfClosing","ackSelfClosing","nonVoidHtmlElementStartTagWithTrailingSolidus","foreignNS","getAttrList","isIntegrationPoint","_reconstructActiveFormattingElements","listLength","unopenIdx","entry","entries","MARKER_ENTRY","contains","i","_closeTableCell","generateImpliedEndTags","popUntilTableCellPopped","clearToLastMarker","_closePElement","generateImpliedEndTagsWithExclusion","P","popUntilTagNamePopped","last","items","newInsertionMode","HEAD","SELECT","_resetInsertionModeForSelect","selectIdx","ancestor","mode","_popTmplInsertionMode","pop","_isElementCausesFosterParenting","_findFosterParentingLocation","location","beforeElement","openElement","getTemplateContent","insertBefore","insertTextBefore","_isSpecialElement","SPECIAL_ELEMENTS","module","exports","aaObtainFormattingElementEntry","p","formattingElementEntry","getElementEntryInScopeWithTagName","removeEntry","hasInScope","genericEndTagInBody","aaObtainFurthestBlock","furthestBlock","popUntilElementPopped","aaInnerLoop","formattingElement","lastElement","nextElement","getCommonAncestor","elementEntry","getElementEntry","counterOverflow","shouldRemoveFromOpenElements","remove","aaRecreateElementFromEntry","bookmark","newElement","replace","aaInsertLastNodeInCommonAncestor","commonAncestor","aaReplaceFormattingElement","insertElementAfterBookmark","insertAfter","callAdoptionAgency","forceQuirks","DOCUMENT_MODE","QUIRKS","getDocumentMode","isConforming","nonConformingDoctype","setDocumentMode","missingDoctype","beforeToken","BR","endTagWithoutMatchingOpenElement","BASE","BASEFONT","BGSOUND","LINK","META","insertMarker","misplacedStartTagForHeadElement","tmplCount","generateImpliedEndTagsThoroughly","currentTagName","closingOfElementWithOpenChildElements","nestedNoscriptInHead","errCode","openElementsLeftAfterEof","disallowedContentInNoscriptInHead","abandonedHeadElementChild","htmlStartTagInBody","adoptAttributes","bodyStartTagInBody","bodyElement","tryPeekProperlyNestedBodyElement","framesetStartTagInBody","popAllUpToHtmlElement","addressStartTagInBody","hasInButtonScope","numberedHeaderStartTagInBody","H1","H2","H3","H4","H5","H6","preStartTagInBody","formStartTagInBody","inTemplate","listItemStartTagInBody","elementTn","closeTn","LI","DD","DT","ADDRESS","DIV","plaintextStartTagInBody","buttonStartTagInBody","BUTTON","aStartTagInBody","activeElementEntry","A","pushElement","bStartTagInBody","nobrStartTagInBody","NOBR","appletStartTagInBody","tableStartTagInBody","areaStartTagInBody","inputStartTagInBody","inputType","getTokenAttr","TYPE","toLowerCase","paramStartTagInBody","hrStartTagInBody","imageStartTagInBody","IMG","textareaStartTagInBody","xmpStartTagInBody","iframeStartTagInBody","noembedStartTagInBody","selectStartTagInBody","optgroupStartTagInBody","OPTION","rbStartTagInBody","RUBY","rtStartTagInBody","RTC","menuStartTagInBody","mathStartTagInBody","adjustTokenMathMLAttrs","adjustTokenXMLAttrs","svgStartTagInBody","adjustTokenSVGAttrs","genericStartTagInBody","I","S","B","U","DL","OL","UL","EM","TT","HR","RB","RT","RP","DIR","NAV","PRE","BIG","WBR","MAIN","MENU","CODE","FONT","AREA","MATH","ASIDE","SMALL","EMBED","INPUT","PARAM","TRACK","IMAGE","FRAME","CENTER","FIGURE","FOOTER","HEADER","HGROUP","DIALOG","STRIKE","STRONG","APPLET","OBJECT","KEYGEN","SOURCE","DETAILS","ARTICLE","SECTION","SUMMARY","LISTING","MARQUEE","FIELDSET","OPTGROUP","BLOCKQUOTE","FIGCAPTION","bodyEndTagInBody","htmlEndTagInBody","addressEndTagInBody","formEndTagInBody","pEndTagInBody","liEndTagInBody","hasInListItemScope","ddEndTagInBody","numberedHeaderEndTagInBody","hasNumberedHeaderInScope","popUntilNumberedHeaderPopped","appletEndTagInBody","brEndTagInBody","eofInElementThatCanContainOnlyText","curTn","tokenInTable","captionStartTagInTable","clearBackToTableContext","colgroupStartTagInTable","colStartTagInTable","tbodyStartTagInTable","tdStartTagInTable","tableStartTagInTable","hasInTableScope","inputStartTagInTable","formStartTagInTable","savedFosterParentingState","clearBackToTableBodyContext","hasTableBodyContextInTableScope","clearBackToTableRowContext","hasInSelectScope","prevOpenElement","prevOpenElementTn","isRootHtmlElementCurrent","REPLACEMENT_CHARACTER","causesExit","currentNs","adjustTokenSVGTagName"],"sources":["/Users/yinger/Desktop/algo_evaluator_front/node_modules/hast-util-raw/node_modules/parse5/lib/parser/index.js"],"sourcesContent":["'use strict';\n\nconst Tokenizer = require('../tokenizer');\nconst OpenElementStack = require('./open-element-stack');\nconst FormattingElementList = require('./formatting-element-list');\nconst LocationInfoParserMixin = require('../extensions/location-info/parser-mixin');\nconst ErrorReportingParserMixin = require('../extensions/error-reporting/parser-mixin');\nconst Mixin = require('../utils/mixin');\nconst defaultTreeAdapter = require('../tree-adapters/default');\nconst mergeOptions = require('../utils/merge-options');\nconst doctype = require('../common/doctype');\nconst foreignContent = require('../common/foreign-content');\nconst ERR = require('../common/error-codes');\nconst unicode = require('../common/unicode');\nconst HTML = require('../common/html');\n\n//Aliases\nconst $ = HTML.TAG_NAMES;\nconst NS = HTML.NAMESPACES;\nconst ATTRS = HTML.ATTRS;\n\nconst DEFAULT_OPTIONS = {\n    scriptingEnabled: true,\n    sourceCodeLocationInfo: false,\n    onParseError: null,\n    treeAdapter: defaultTreeAdapter\n};\n\n//Misc constants\nconst HIDDEN_INPUT_TYPE = 'hidden';\n\n//Adoption agency loops iteration count\nconst AA_OUTER_LOOP_ITER = 8;\nconst AA_INNER_LOOP_ITER = 3;\n\n//Insertion modes\nconst INITIAL_MODE = 'INITIAL_MODE';\nconst BEFORE_HTML_MODE = 'BEFORE_HTML_MODE';\nconst BEFORE_HEAD_MODE = 'BEFORE_HEAD_MODE';\nconst IN_HEAD_MODE = 'IN_HEAD_MODE';\nconst IN_HEAD_NO_SCRIPT_MODE = 'IN_HEAD_NO_SCRIPT_MODE';\nconst AFTER_HEAD_MODE = 'AFTER_HEAD_MODE';\nconst IN_BODY_MODE = 'IN_BODY_MODE';\nconst TEXT_MODE = 'TEXT_MODE';\nconst IN_TABLE_MODE = 'IN_TABLE_MODE';\nconst IN_TABLE_TEXT_MODE = 'IN_TABLE_TEXT_MODE';\nconst IN_CAPTION_MODE = 'IN_CAPTION_MODE';\nconst IN_COLUMN_GROUP_MODE = 'IN_COLUMN_GROUP_MODE';\nconst IN_TABLE_BODY_MODE = 'IN_TABLE_BODY_MODE';\nconst IN_ROW_MODE = 'IN_ROW_MODE';\nconst IN_CELL_MODE = 'IN_CELL_MODE';\nconst IN_SELECT_MODE = 'IN_SELECT_MODE';\nconst IN_SELECT_IN_TABLE_MODE = 'IN_SELECT_IN_TABLE_MODE';\nconst IN_TEMPLATE_MODE = 'IN_TEMPLATE_MODE';\nconst AFTER_BODY_MODE = 'AFTER_BODY_MODE';\nconst IN_FRAMESET_MODE = 'IN_FRAMESET_MODE';\nconst AFTER_FRAMESET_MODE = 'AFTER_FRAMESET_MODE';\nconst AFTER_AFTER_BODY_MODE = 'AFTER_AFTER_BODY_MODE';\nconst AFTER_AFTER_FRAMESET_MODE = 'AFTER_AFTER_FRAMESET_MODE';\n\n//Insertion mode reset map\nconst INSERTION_MODE_RESET_MAP = {\n    [$.TR]: IN_ROW_MODE,\n    [$.TBODY]: IN_TABLE_BODY_MODE,\n    [$.THEAD]: IN_TABLE_BODY_MODE,\n    [$.TFOOT]: IN_TABLE_BODY_MODE,\n    [$.CAPTION]: IN_CAPTION_MODE,\n    [$.COLGROUP]: IN_COLUMN_GROUP_MODE,\n    [$.TABLE]: IN_TABLE_MODE,\n    [$.BODY]: IN_BODY_MODE,\n    [$.FRAMESET]: IN_FRAMESET_MODE\n};\n\n//Template insertion mode switch map\nconst TEMPLATE_INSERTION_MODE_SWITCH_MAP = {\n    [$.CAPTION]: IN_TABLE_MODE,\n    [$.COLGROUP]: IN_TABLE_MODE,\n    [$.TBODY]: IN_TABLE_MODE,\n    [$.TFOOT]: IN_TABLE_MODE,\n    [$.THEAD]: IN_TABLE_MODE,\n    [$.COL]: IN_COLUMN_GROUP_MODE,\n    [$.TR]: IN_TABLE_BODY_MODE,\n    [$.TD]: IN_ROW_MODE,\n    [$.TH]: IN_ROW_MODE\n};\n\n//Token handlers map for insertion modes\nconst TOKEN_HANDLERS = {\n    [INITIAL_MODE]: {\n        [Tokenizer.CHARACTER_TOKEN]: tokenInInitialMode,\n        [Tokenizer.NULL_CHARACTER_TOKEN]: tokenInInitialMode,\n        [Tokenizer.WHITESPACE_CHARACTER_TOKEN]: ignoreToken,\n        [Tokenizer.COMMENT_TOKEN]: appendComment,\n        [Tokenizer.DOCTYPE_TOKEN]: doctypeInInitialMode,\n        [Tokenizer.START_TAG_TOKEN]: tokenInInitialMode,\n        [Tokenizer.END_TAG_TOKEN]: tokenInInitialMode,\n        [Tokenizer.EOF_TOKEN]: tokenInInitialMode\n    },\n    [BEFORE_HTML_MODE]: {\n        [Tokenizer.CHARACTER_TOKEN]: tokenBeforeHtml,\n        [Tokenizer.NULL_CHARACTER_TOKEN]: tokenBeforeHtml,\n        [Tokenizer.WHITESPACE_CHARACTER_TOKEN]: ignoreToken,\n        [Tokenizer.COMMENT_TOKEN]: appendComment,\n        [Tokenizer.DOCTYPE_TOKEN]: ignoreToken,\n        [Tokenizer.START_TAG_TOKEN]: startTagBeforeHtml,\n        [Tokenizer.END_TAG_TOKEN]: endTagBeforeHtml,\n        [Tokenizer.EOF_TOKEN]: tokenBeforeHtml\n    },\n    [BEFORE_HEAD_MODE]: {\n        [Tokenizer.CHARACTER_TOKEN]: tokenBeforeHead,\n        [Tokenizer.NULL_CHARACTER_TOKEN]: tokenBeforeHead,\n        [Tokenizer.WHITESPACE_CHARACTER_TOKEN]: ignoreToken,\n        [Tokenizer.COMMENT_TOKEN]: appendComment,\n        [Tokenizer.DOCTYPE_TOKEN]: misplacedDoctype,\n        [Tokenizer.START_TAG_TOKEN]: startTagBeforeHead,\n        [Tokenizer.END_TAG_TOKEN]: endTagBeforeHead,\n        [Tokenizer.EOF_TOKEN]: tokenBeforeHead\n    },\n    [IN_HEAD_MODE]: {\n        [Tokenizer.CHARACTER_TOKEN]: tokenInHead,\n        [Tokenizer.NULL_CHARACTER_TOKEN]: tokenInHead,\n        [Tokenizer.WHITESPACE_CHARACTER_TOKEN]: insertCharacters,\n        [Tokenizer.COMMENT_TOKEN]: appendComment,\n        [Tokenizer.DOCTYPE_TOKEN]: misplacedDoctype,\n        [Tokenizer.START_TAG_TOKEN]: startTagInHead,\n        [Tokenizer.END_TAG_TOKEN]: endTagInHead,\n        [Tokenizer.EOF_TOKEN]: tokenInHead\n    },\n    [IN_HEAD_NO_SCRIPT_MODE]: {\n        [Tokenizer.CHARACTER_TOKEN]: tokenInHeadNoScript,\n        [Tokenizer.NULL_CHARACTER_TOKEN]: tokenInHeadNoScript,\n        [Tokenizer.WHITESPACE_CHARACTER_TOKEN]: insertCharacters,\n        [Tokenizer.COMMENT_TOKEN]: appendComment,\n        [Tokenizer.DOCTYPE_TOKEN]: misplacedDoctype,\n        [Tokenizer.START_TAG_TOKEN]: startTagInHeadNoScript,\n        [Tokenizer.END_TAG_TOKEN]: endTagInHeadNoScript,\n        [Tokenizer.EOF_TOKEN]: tokenInHeadNoScript\n    },\n    [AFTER_HEAD_MODE]: {\n        [Tokenizer.CHARACTER_TOKEN]: tokenAfterHead,\n        [Tokenizer.NULL_CHARACTER_TOKEN]: tokenAfterHead,\n        [Tokenizer.WHITESPACE_CHARACTER_TOKEN]: insertCharacters,\n        [Tokenizer.COMMENT_TOKEN]: appendComment,\n        [Tokenizer.DOCTYPE_TOKEN]: misplacedDoctype,\n        [Tokenizer.START_TAG_TOKEN]: startTagAfterHead,\n        [Tokenizer.END_TAG_TOKEN]: endTagAfterHead,\n        [Tokenizer.EOF_TOKEN]: tokenAfterHead\n    },\n    [IN_BODY_MODE]: {\n        [Tokenizer.CHARACTER_TOKEN]: characterInBody,\n        [Tokenizer.NULL_CHARACTER_TOKEN]: ignoreToken,\n        [Tokenizer.WHITESPACE_CHARACTER_TOKEN]: whitespaceCharacterInBody,\n        [Tokenizer.COMMENT_TOKEN]: appendComment,\n        [Tokenizer.DOCTYPE_TOKEN]: ignoreToken,\n        [Tokenizer.START_TAG_TOKEN]: startTagInBody,\n        [Tokenizer.END_TAG_TOKEN]: endTagInBody,\n        [Tokenizer.EOF_TOKEN]: eofInBody\n    },\n    [TEXT_MODE]: {\n        [Tokenizer.CHARACTER_TOKEN]: insertCharacters,\n        [Tokenizer.NULL_CHARACTER_TOKEN]: insertCharacters,\n        [Tokenizer.WHITESPACE_CHARACTER_TOKEN]: insertCharacters,\n        [Tokenizer.COMMENT_TOKEN]: ignoreToken,\n        [Tokenizer.DOCTYPE_TOKEN]: ignoreToken,\n        [Tokenizer.START_TAG_TOKEN]: ignoreToken,\n        [Tokenizer.END_TAG_TOKEN]: endTagInText,\n        [Tokenizer.EOF_TOKEN]: eofInText\n    },\n    [IN_TABLE_MODE]: {\n        [Tokenizer.CHARACTER_TOKEN]: characterInTable,\n        [Tokenizer.NULL_CHARACTER_TOKEN]: characterInTable,\n        [Tokenizer.WHITESPACE_CHARACTER_TOKEN]: characterInTable,\n        [Tokenizer.COMMENT_TOKEN]: appendComment,\n        [Tokenizer.DOCTYPE_TOKEN]: ignoreToken,\n        [Tokenizer.START_TAG_TOKEN]: startTagInTable,\n        [Tokenizer.END_TAG_TOKEN]: endTagInTable,\n        [Tokenizer.EOF_TOKEN]: eofInBody\n    },\n    [IN_TABLE_TEXT_MODE]: {\n        [Tokenizer.CHARACTER_TOKEN]: characterInTableText,\n        [Tokenizer.NULL_CHARACTER_TOKEN]: ignoreToken,\n        [Tokenizer.WHITESPACE_CHARACTER_TOKEN]: whitespaceCharacterInTableText,\n        [Tokenizer.COMMENT_TOKEN]: tokenInTableText,\n        [Tokenizer.DOCTYPE_TOKEN]: tokenInTableText,\n        [Tokenizer.START_TAG_TOKEN]: tokenInTableText,\n        [Tokenizer.END_TAG_TOKEN]: tokenInTableText,\n        [Tokenizer.EOF_TOKEN]: tokenInTableText\n    },\n    [IN_CAPTION_MODE]: {\n        [Tokenizer.CHARACTER_TOKEN]: characterInBody,\n        [Tokenizer.NULL_CHARACTER_TOKEN]: ignoreToken,\n        [Tokenizer.WHITESPACE_CHARACTER_TOKEN]: whitespaceCharacterInBody,\n        [Tokenizer.COMMENT_TOKEN]: appendComment,\n        [Tokenizer.DOCTYPE_TOKEN]: ignoreToken,\n        [Tokenizer.START_TAG_TOKEN]: startTagInCaption,\n        [Tokenizer.END_TAG_TOKEN]: endTagInCaption,\n        [Tokenizer.EOF_TOKEN]: eofInBody\n    },\n    [IN_COLUMN_GROUP_MODE]: {\n        [Tokenizer.CHARACTER_TOKEN]: tokenInColumnGroup,\n        [Tokenizer.NULL_CHARACTER_TOKEN]: tokenInColumnGroup,\n        [Tokenizer.WHITESPACE_CHARACTER_TOKEN]: insertCharacters,\n        [Tokenizer.COMMENT_TOKEN]: appendComment,\n        [Tokenizer.DOCTYPE_TOKEN]: ignoreToken,\n        [Tokenizer.START_TAG_TOKEN]: startTagInColumnGroup,\n        [Tokenizer.END_TAG_TOKEN]: endTagInColumnGroup,\n        [Tokenizer.EOF_TOKEN]: eofInBody\n    },\n    [IN_TABLE_BODY_MODE]: {\n        [Tokenizer.CHARACTER_TOKEN]: characterInTable,\n        [Tokenizer.NULL_CHARACTER_TOKEN]: characterInTable,\n        [Tokenizer.WHITESPACE_CHARACTER_TOKEN]: characterInTable,\n        [Tokenizer.COMMENT_TOKEN]: appendComment,\n        [Tokenizer.DOCTYPE_TOKEN]: ignoreToken,\n        [Tokenizer.START_TAG_TOKEN]: startTagInTableBody,\n        [Tokenizer.END_TAG_TOKEN]: endTagInTableBody,\n        [Tokenizer.EOF_TOKEN]: eofInBody\n    },\n    [IN_ROW_MODE]: {\n        [Tokenizer.CHARACTER_TOKEN]: characterInTable,\n        [Tokenizer.NULL_CHARACTER_TOKEN]: characterInTable,\n        [Tokenizer.WHITESPACE_CHARACTER_TOKEN]: characterInTable,\n        [Tokenizer.COMMENT_TOKEN]: appendComment,\n        [Tokenizer.DOCTYPE_TOKEN]: ignoreToken,\n        [Tokenizer.START_TAG_TOKEN]: startTagInRow,\n        [Tokenizer.END_TAG_TOKEN]: endTagInRow,\n        [Tokenizer.EOF_TOKEN]: eofInBody\n    },\n    [IN_CELL_MODE]: {\n        [Tokenizer.CHARACTER_TOKEN]: characterInBody,\n        [Tokenizer.NULL_CHARACTER_TOKEN]: ignoreToken,\n        [Tokenizer.WHITESPACE_CHARACTER_TOKEN]: whitespaceCharacterInBody,\n        [Tokenizer.COMMENT_TOKEN]: appendComment,\n        [Tokenizer.DOCTYPE_TOKEN]: ignoreToken,\n        [Tokenizer.START_TAG_TOKEN]: startTagInCell,\n        [Tokenizer.END_TAG_TOKEN]: endTagInCell,\n        [Tokenizer.EOF_TOKEN]: eofInBody\n    },\n    [IN_SELECT_MODE]: {\n        [Tokenizer.CHARACTER_TOKEN]: insertCharacters,\n        [Tokenizer.NULL_CHARACTER_TOKEN]: ignoreToken,\n        [Tokenizer.WHITESPACE_CHARACTER_TOKEN]: insertCharacters,\n        [Tokenizer.COMMENT_TOKEN]: appendComment,\n        [Tokenizer.DOCTYPE_TOKEN]: ignoreToken,\n        [Tokenizer.START_TAG_TOKEN]: startTagInSelect,\n        [Tokenizer.END_TAG_TOKEN]: endTagInSelect,\n        [Tokenizer.EOF_TOKEN]: eofInBody\n    },\n    [IN_SELECT_IN_TABLE_MODE]: {\n        [Tokenizer.CHARACTER_TOKEN]: insertCharacters,\n        [Tokenizer.NULL_CHARACTER_TOKEN]: ignoreToken,\n        [Tokenizer.WHITESPACE_CHARACTER_TOKEN]: insertCharacters,\n        [Tokenizer.COMMENT_TOKEN]: appendComment,\n        [Tokenizer.DOCTYPE_TOKEN]: ignoreToken,\n        [Tokenizer.START_TAG_TOKEN]: startTagInSelectInTable,\n        [Tokenizer.END_TAG_TOKEN]: endTagInSelectInTable,\n        [Tokenizer.EOF_TOKEN]: eofInBody\n    },\n    [IN_TEMPLATE_MODE]: {\n        [Tokenizer.CHARACTER_TOKEN]: characterInBody,\n        [Tokenizer.NULL_CHARACTER_TOKEN]: ignoreToken,\n        [Tokenizer.WHITESPACE_CHARACTER_TOKEN]: whitespaceCharacterInBody,\n        [Tokenizer.COMMENT_TOKEN]: appendComment,\n        [Tokenizer.DOCTYPE_TOKEN]: ignoreToken,\n        [Tokenizer.START_TAG_TOKEN]: startTagInTemplate,\n        [Tokenizer.END_TAG_TOKEN]: endTagInTemplate,\n        [Tokenizer.EOF_TOKEN]: eofInTemplate\n    },\n    [AFTER_BODY_MODE]: {\n        [Tokenizer.CHARACTER_TOKEN]: tokenAfterBody,\n        [Tokenizer.NULL_CHARACTER_TOKEN]: tokenAfterBody,\n        [Tokenizer.WHITESPACE_CHARACTER_TOKEN]: whitespaceCharacterInBody,\n        [Tokenizer.COMMENT_TOKEN]: appendCommentToRootHtmlElement,\n        [Tokenizer.DOCTYPE_TOKEN]: ignoreToken,\n        [Tokenizer.START_TAG_TOKEN]: startTagAfterBody,\n        [Tokenizer.END_TAG_TOKEN]: endTagAfterBody,\n        [Tokenizer.EOF_TOKEN]: stopParsing\n    },\n    [IN_FRAMESET_MODE]: {\n        [Tokenizer.CHARACTER_TOKEN]: ignoreToken,\n        [Tokenizer.NULL_CHARACTER_TOKEN]: ignoreToken,\n        [Tokenizer.WHITESPACE_CHARACTER_TOKEN]: insertCharacters,\n        [Tokenizer.COMMENT_TOKEN]: appendComment,\n        [Tokenizer.DOCTYPE_TOKEN]: ignoreToken,\n        [Tokenizer.START_TAG_TOKEN]: startTagInFrameset,\n        [Tokenizer.END_TAG_TOKEN]: endTagInFrameset,\n        [Tokenizer.EOF_TOKEN]: stopParsing\n    },\n    [AFTER_FRAMESET_MODE]: {\n        [Tokenizer.CHARACTER_TOKEN]: ignoreToken,\n        [Tokenizer.NULL_CHARACTER_TOKEN]: ignoreToken,\n        [Tokenizer.WHITESPACE_CHARACTER_TOKEN]: insertCharacters,\n        [Tokenizer.COMMENT_TOKEN]: appendComment,\n        [Tokenizer.DOCTYPE_TOKEN]: ignoreToken,\n        [Tokenizer.START_TAG_TOKEN]: startTagAfterFrameset,\n        [Tokenizer.END_TAG_TOKEN]: endTagAfterFrameset,\n        [Tokenizer.EOF_TOKEN]: stopParsing\n    },\n    [AFTER_AFTER_BODY_MODE]: {\n        [Tokenizer.CHARACTER_TOKEN]: tokenAfterAfterBody,\n        [Tokenizer.NULL_CHARACTER_TOKEN]: tokenAfterAfterBody,\n        [Tokenizer.WHITESPACE_CHARACTER_TOKEN]: whitespaceCharacterInBody,\n        [Tokenizer.COMMENT_TOKEN]: appendCommentToDocument,\n        [Tokenizer.DOCTYPE_TOKEN]: ignoreToken,\n        [Tokenizer.START_TAG_TOKEN]: startTagAfterAfterBody,\n        [Tokenizer.END_TAG_TOKEN]: tokenAfterAfterBody,\n        [Tokenizer.EOF_TOKEN]: stopParsing\n    },\n    [AFTER_AFTER_FRAMESET_MODE]: {\n        [Tokenizer.CHARACTER_TOKEN]: ignoreToken,\n        [Tokenizer.NULL_CHARACTER_TOKEN]: ignoreToken,\n        [Tokenizer.WHITESPACE_CHARACTER_TOKEN]: whitespaceCharacterInBody,\n        [Tokenizer.COMMENT_TOKEN]: appendCommentToDocument,\n        [Tokenizer.DOCTYPE_TOKEN]: ignoreToken,\n        [Tokenizer.START_TAG_TOKEN]: startTagAfterAfterFrameset,\n        [Tokenizer.END_TAG_TOKEN]: ignoreToken,\n        [Tokenizer.EOF_TOKEN]: stopParsing\n    }\n};\n\n//Parser\nclass Parser {\n    constructor(options) {\n        this.options = mergeOptions(DEFAULT_OPTIONS, options);\n\n        this.treeAdapter = this.options.treeAdapter;\n        this.pendingScript = null;\n\n        if (this.options.sourceCodeLocationInfo) {\n            Mixin.install(this, LocationInfoParserMixin);\n        }\n\n        if (this.options.onParseError) {\n            Mixin.install(this, ErrorReportingParserMixin, { onParseError: this.options.onParseError });\n        }\n    }\n\n    // API\n    parse(html) {\n        const document = this.treeAdapter.createDocument();\n\n        this._bootstrap(document, null);\n        this.tokenizer.write(html, true);\n        this._runParsingLoop(null);\n\n        return document;\n    }\n\n    parseFragment(html, fragmentContext) {\n        //NOTE: use <template> element as a fragment context if context element was not provided,\n        //so we will parse in \"forgiving\" manner\n        if (!fragmentContext) {\n            fragmentContext = this.treeAdapter.createElement($.TEMPLATE, NS.HTML, []);\n        }\n\n        //NOTE: create fake element which will be used as 'document' for fragment parsing.\n        //This is important for jsdom there 'document' can't be recreated, therefore\n        //fragment parsing causes messing of the main `document`.\n        const documentMock = this.treeAdapter.createElement('documentmock', NS.HTML, []);\n\n        this._bootstrap(documentMock, fragmentContext);\n\n        if (this.treeAdapter.getTagName(fragmentContext) === $.TEMPLATE) {\n            this._pushTmplInsertionMode(IN_TEMPLATE_MODE);\n        }\n\n        this._initTokenizerForFragmentParsing();\n        this._insertFakeRootElement();\n        this._resetInsertionMode();\n        this._findFormInFragmentContext();\n        this.tokenizer.write(html, true);\n        this._runParsingLoop(null);\n\n        const rootElement = this.treeAdapter.getFirstChild(documentMock);\n        const fragment = this.treeAdapter.createDocumentFragment();\n\n        this._adoptNodes(rootElement, fragment);\n\n        return fragment;\n    }\n\n    //Bootstrap parser\n    _bootstrap(document, fragmentContext) {\n        this.tokenizer = new Tokenizer(this.options);\n\n        this.stopped = false;\n\n        this.insertionMode = INITIAL_MODE;\n        this.originalInsertionMode = '';\n\n        this.document = document;\n        this.fragmentContext = fragmentContext;\n\n        this.headElement = null;\n        this.formElement = null;\n\n        this.openElements = new OpenElementStack(this.document, this.treeAdapter);\n        this.activeFormattingElements = new FormattingElementList(this.treeAdapter);\n\n        this.tmplInsertionModeStack = [];\n        this.tmplInsertionModeStackTop = -1;\n        this.currentTmplInsertionMode = null;\n\n        this.pendingCharacterTokens = [];\n        this.hasNonWhitespacePendingCharacterToken = false;\n\n        this.framesetOk = true;\n        this.skipNextNewLine = false;\n        this.fosterParentingEnabled = false;\n    }\n\n    //Errors\n    _err() {\n        // NOTE: err reporting is noop by default. Enabled by mixin.\n    }\n\n    //Parsing loop\n    _runParsingLoop(scriptHandler) {\n        while (!this.stopped) {\n            this._setupTokenizerCDATAMode();\n\n            const token = this.tokenizer.getNextToken();\n\n            if (token.type === Tokenizer.HIBERNATION_TOKEN) {\n                break;\n            }\n\n            if (this.skipNextNewLine) {\n                this.skipNextNewLine = false;\n\n                if (token.type === Tokenizer.WHITESPACE_CHARACTER_TOKEN && token.chars[0] === '\\n') {\n                    if (token.chars.length === 1) {\n                        continue;\n                    }\n\n                    token.chars = token.chars.substr(1);\n                }\n            }\n\n            this._processInputToken(token);\n\n            if (scriptHandler && this.pendingScript) {\n                break;\n            }\n        }\n    }\n\n    runParsingLoopForCurrentChunk(writeCallback, scriptHandler) {\n        this._runParsingLoop(scriptHandler);\n\n        if (scriptHandler && this.pendingScript) {\n            const script = this.pendingScript;\n\n            this.pendingScript = null;\n\n            scriptHandler(script);\n\n            return;\n        }\n\n        if (writeCallback) {\n            writeCallback();\n        }\n    }\n\n    //Text parsing\n    _setupTokenizerCDATAMode() {\n        const current = this._getAdjustedCurrentElement();\n\n        this.tokenizer.allowCDATA =\n            current &&\n            current !== this.document &&\n            this.treeAdapter.getNamespaceURI(current) !== NS.HTML &&\n            !this._isIntegrationPoint(current);\n    }\n\n    _switchToTextParsing(currentToken, nextTokenizerState) {\n        this._insertElement(currentToken, NS.HTML);\n        this.tokenizer.state = nextTokenizerState;\n        this.originalInsertionMode = this.insertionMode;\n        this.insertionMode = TEXT_MODE;\n    }\n\n    switchToPlaintextParsing() {\n        this.insertionMode = TEXT_MODE;\n        this.originalInsertionMode = IN_BODY_MODE;\n        this.tokenizer.state = Tokenizer.MODE.PLAINTEXT;\n    }\n\n    //Fragment parsing\n    _getAdjustedCurrentElement() {\n        return this.openElements.stackTop === 0 && this.fragmentContext\n            ? this.fragmentContext\n            : this.openElements.current;\n    }\n\n    _findFormInFragmentContext() {\n        let node = this.fragmentContext;\n\n        do {\n            if (this.treeAdapter.getTagName(node) === $.FORM) {\n                this.formElement = node;\n                break;\n            }\n\n            node = this.treeAdapter.getParentNode(node);\n        } while (node);\n    }\n\n    _initTokenizerForFragmentParsing() {\n        if (this.treeAdapter.getNamespaceURI(this.fragmentContext) === NS.HTML) {\n            const tn = this.treeAdapter.getTagName(this.fragmentContext);\n\n            if (tn === $.TITLE || tn === $.TEXTAREA) {\n                this.tokenizer.state = Tokenizer.MODE.RCDATA;\n            } else if (\n                tn === $.STYLE ||\n                tn === $.XMP ||\n                tn === $.IFRAME ||\n                tn === $.NOEMBED ||\n                tn === $.NOFRAMES ||\n                tn === $.NOSCRIPT\n            ) {\n                this.tokenizer.state = Tokenizer.MODE.RAWTEXT;\n            } else if (tn === $.SCRIPT) {\n                this.tokenizer.state = Tokenizer.MODE.SCRIPT_DATA;\n            } else if (tn === $.PLAINTEXT) {\n                this.tokenizer.state = Tokenizer.MODE.PLAINTEXT;\n            }\n        }\n    }\n\n    //Tree mutation\n    _setDocumentType(token) {\n        const name = token.name || '';\n        const publicId = token.publicId || '';\n        const systemId = token.systemId || '';\n\n        this.treeAdapter.setDocumentType(this.document, name, publicId, systemId);\n    }\n\n    _attachElementToTree(element) {\n        if (this._shouldFosterParentOnInsertion()) {\n            this._fosterParentElement(element);\n        } else {\n            const parent = this.openElements.currentTmplContent || this.openElements.current;\n\n            this.treeAdapter.appendChild(parent, element);\n        }\n    }\n\n    _appendElement(token, namespaceURI) {\n        const element = this.treeAdapter.createElement(token.tagName, namespaceURI, token.attrs);\n\n        this._attachElementToTree(element);\n    }\n\n    _insertElement(token, namespaceURI) {\n        const element = this.treeAdapter.createElement(token.tagName, namespaceURI, token.attrs);\n\n        this._attachElementToTree(element);\n        this.openElements.push(element);\n    }\n\n    _insertFakeElement(tagName) {\n        const element = this.treeAdapter.createElement(tagName, NS.HTML, []);\n\n        this._attachElementToTree(element);\n        this.openElements.push(element);\n    }\n\n    _insertTemplate(token) {\n        const tmpl = this.treeAdapter.createElement(token.tagName, NS.HTML, token.attrs);\n        const content = this.treeAdapter.createDocumentFragment();\n\n        this.treeAdapter.setTemplateContent(tmpl, content);\n        this._attachElementToTree(tmpl);\n        this.openElements.push(tmpl);\n    }\n\n    _insertFakeRootElement() {\n        const element = this.treeAdapter.createElement($.HTML, NS.HTML, []);\n\n        this.treeAdapter.appendChild(this.openElements.current, element);\n        this.openElements.push(element);\n    }\n\n    _appendCommentNode(token, parent) {\n        const commentNode = this.treeAdapter.createCommentNode(token.data);\n\n        this.treeAdapter.appendChild(parent, commentNode);\n    }\n\n    _insertCharacters(token) {\n        if (this._shouldFosterParentOnInsertion()) {\n            this._fosterParentText(token.chars);\n        } else {\n            const parent = this.openElements.currentTmplContent || this.openElements.current;\n\n            this.treeAdapter.insertText(parent, token.chars);\n        }\n    }\n\n    _adoptNodes(donor, recipient) {\n        for (let child = this.treeAdapter.getFirstChild(donor); child; child = this.treeAdapter.getFirstChild(donor)) {\n            this.treeAdapter.detachNode(child);\n            this.treeAdapter.appendChild(recipient, child);\n        }\n    }\n\n    //Token processing\n    _shouldProcessTokenInForeignContent(token) {\n        const current = this._getAdjustedCurrentElement();\n\n        if (!current || current === this.document) {\n            return false;\n        }\n\n        const ns = this.treeAdapter.getNamespaceURI(current);\n\n        if (ns === NS.HTML) {\n            return false;\n        }\n\n        if (\n            this.treeAdapter.getTagName(current) === $.ANNOTATION_XML &&\n            ns === NS.MATHML &&\n            token.type === Tokenizer.START_TAG_TOKEN &&\n            token.tagName === $.SVG\n        ) {\n            return false;\n        }\n\n        const isCharacterToken =\n            token.type === Tokenizer.CHARACTER_TOKEN ||\n            token.type === Tokenizer.NULL_CHARACTER_TOKEN ||\n            token.type === Tokenizer.WHITESPACE_CHARACTER_TOKEN;\n\n        const isMathMLTextStartTag =\n            token.type === Tokenizer.START_TAG_TOKEN && token.tagName !== $.MGLYPH && token.tagName !== $.MALIGNMARK;\n\n        if ((isMathMLTextStartTag || isCharacterToken) && this._isIntegrationPoint(current, NS.MATHML)) {\n            return false;\n        }\n\n        if (\n            (token.type === Tokenizer.START_TAG_TOKEN || isCharacterToken) &&\n            this._isIntegrationPoint(current, NS.HTML)\n        ) {\n            return false;\n        }\n\n        return token.type !== Tokenizer.EOF_TOKEN;\n    }\n\n    _processToken(token) {\n        TOKEN_HANDLERS[this.insertionMode][token.type](this, token);\n    }\n\n    _processTokenInBodyMode(token) {\n        TOKEN_HANDLERS[IN_BODY_MODE][token.type](this, token);\n    }\n\n    _processTokenInForeignContent(token) {\n        if (token.type === Tokenizer.CHARACTER_TOKEN) {\n            characterInForeignContent(this, token);\n        } else if (token.type === Tokenizer.NULL_CHARACTER_TOKEN) {\n            nullCharacterInForeignContent(this, token);\n        } else if (token.type === Tokenizer.WHITESPACE_CHARACTER_TOKEN) {\n            insertCharacters(this, token);\n        } else if (token.type === Tokenizer.COMMENT_TOKEN) {\n            appendComment(this, token);\n        } else if (token.type === Tokenizer.START_TAG_TOKEN) {\n            startTagInForeignContent(this, token);\n        } else if (token.type === Tokenizer.END_TAG_TOKEN) {\n            endTagInForeignContent(this, token);\n        }\n    }\n\n    _processInputToken(token) {\n        if (this._shouldProcessTokenInForeignContent(token)) {\n            this._processTokenInForeignContent(token);\n        } else {\n            this._processToken(token);\n        }\n\n        if (token.type === Tokenizer.START_TAG_TOKEN && token.selfClosing && !token.ackSelfClosing) {\n            this._err(ERR.nonVoidHtmlElementStartTagWithTrailingSolidus);\n        }\n    }\n\n    //Integration points\n    _isIntegrationPoint(element, foreignNS) {\n        const tn = this.treeAdapter.getTagName(element);\n        const ns = this.treeAdapter.getNamespaceURI(element);\n        const attrs = this.treeAdapter.getAttrList(element);\n\n        return foreignContent.isIntegrationPoint(tn, ns, attrs, foreignNS);\n    }\n\n    //Active formatting elements reconstruction\n    _reconstructActiveFormattingElements() {\n        const listLength = this.activeFormattingElements.length;\n\n        if (listLength) {\n            let unopenIdx = listLength;\n            let entry = null;\n\n            do {\n                unopenIdx--;\n                entry = this.activeFormattingElements.entries[unopenIdx];\n\n                if (entry.type === FormattingElementList.MARKER_ENTRY || this.openElements.contains(entry.element)) {\n                    unopenIdx++;\n                    break;\n                }\n            } while (unopenIdx > 0);\n\n            for (let i = unopenIdx; i < listLength; i++) {\n                entry = this.activeFormattingElements.entries[i];\n                this._insertElement(entry.token, this.treeAdapter.getNamespaceURI(entry.element));\n                entry.element = this.openElements.current;\n            }\n        }\n    }\n\n    //Close elements\n    _closeTableCell() {\n        this.openElements.generateImpliedEndTags();\n        this.openElements.popUntilTableCellPopped();\n        this.activeFormattingElements.clearToLastMarker();\n        this.insertionMode = IN_ROW_MODE;\n    }\n\n    _closePElement() {\n        this.openElements.generateImpliedEndTagsWithExclusion($.P);\n        this.openElements.popUntilTagNamePopped($.P);\n    }\n\n    //Insertion modes\n    _resetInsertionMode() {\n        for (let i = this.openElements.stackTop, last = false; i >= 0; i--) {\n            let element = this.openElements.items[i];\n\n            if (i === 0) {\n                last = true;\n\n                if (this.fragmentContext) {\n                    element = this.fragmentContext;\n                }\n            }\n\n            const tn = this.treeAdapter.getTagName(element);\n            const newInsertionMode = INSERTION_MODE_RESET_MAP[tn];\n\n            if (newInsertionMode) {\n                this.insertionMode = newInsertionMode;\n                break;\n            } else if (!last && (tn === $.TD || tn === $.TH)) {\n                this.insertionMode = IN_CELL_MODE;\n                break;\n            } else if (!last && tn === $.HEAD) {\n                this.insertionMode = IN_HEAD_MODE;\n                break;\n            } else if (tn === $.SELECT) {\n                this._resetInsertionModeForSelect(i);\n                break;\n            } else if (tn === $.TEMPLATE) {\n                this.insertionMode = this.currentTmplInsertionMode;\n                break;\n            } else if (tn === $.HTML) {\n                this.insertionMode = this.headElement ? AFTER_HEAD_MODE : BEFORE_HEAD_MODE;\n                break;\n            } else if (last) {\n                this.insertionMode = IN_BODY_MODE;\n                break;\n            }\n        }\n    }\n\n    _resetInsertionModeForSelect(selectIdx) {\n        if (selectIdx > 0) {\n            for (let i = selectIdx - 1; i > 0; i--) {\n                const ancestor = this.openElements.items[i];\n                const tn = this.treeAdapter.getTagName(ancestor);\n\n                if (tn === $.TEMPLATE) {\n                    break;\n                } else if (tn === $.TABLE) {\n                    this.insertionMode = IN_SELECT_IN_TABLE_MODE;\n                    return;\n                }\n            }\n        }\n\n        this.insertionMode = IN_SELECT_MODE;\n    }\n\n    _pushTmplInsertionMode(mode) {\n        this.tmplInsertionModeStack.push(mode);\n        this.tmplInsertionModeStackTop++;\n        this.currentTmplInsertionMode = mode;\n    }\n\n    _popTmplInsertionMode() {\n        this.tmplInsertionModeStack.pop();\n        this.tmplInsertionModeStackTop--;\n        this.currentTmplInsertionMode = this.tmplInsertionModeStack[this.tmplInsertionModeStackTop];\n    }\n\n    //Foster parenting\n    _isElementCausesFosterParenting(element) {\n        const tn = this.treeAdapter.getTagName(element);\n\n        return tn === $.TABLE || tn === $.TBODY || tn === $.TFOOT || tn === $.THEAD || tn === $.TR;\n    }\n\n    _shouldFosterParentOnInsertion() {\n        return this.fosterParentingEnabled && this._isElementCausesFosterParenting(this.openElements.current);\n    }\n\n    _findFosterParentingLocation() {\n        const location = {\n            parent: null,\n            beforeElement: null\n        };\n\n        for (let i = this.openElements.stackTop; i >= 0; i--) {\n            const openElement = this.openElements.items[i];\n            const tn = this.treeAdapter.getTagName(openElement);\n            const ns = this.treeAdapter.getNamespaceURI(openElement);\n\n            if (tn === $.TEMPLATE && ns === NS.HTML) {\n                location.parent = this.treeAdapter.getTemplateContent(openElement);\n                break;\n            } else if (tn === $.TABLE) {\n                location.parent = this.treeAdapter.getParentNode(openElement);\n\n                if (location.parent) {\n                    location.beforeElement = openElement;\n                } else {\n                    location.parent = this.openElements.items[i - 1];\n                }\n\n                break;\n            }\n        }\n\n        if (!location.parent) {\n            location.parent = this.openElements.items[0];\n        }\n\n        return location;\n    }\n\n    _fosterParentElement(element) {\n        const location = this._findFosterParentingLocation();\n\n        if (location.beforeElement) {\n            this.treeAdapter.insertBefore(location.parent, element, location.beforeElement);\n        } else {\n            this.treeAdapter.appendChild(location.parent, element);\n        }\n    }\n\n    _fosterParentText(chars) {\n        const location = this._findFosterParentingLocation();\n\n        if (location.beforeElement) {\n            this.treeAdapter.insertTextBefore(location.parent, chars, location.beforeElement);\n        } else {\n            this.treeAdapter.insertText(location.parent, chars);\n        }\n    }\n\n    //Special elements\n    _isSpecialElement(element) {\n        const tn = this.treeAdapter.getTagName(element);\n        const ns = this.treeAdapter.getNamespaceURI(element);\n\n        return HTML.SPECIAL_ELEMENTS[ns][tn];\n    }\n}\n\nmodule.exports = Parser;\n\n//Adoption agency algorithm\n//(see: http://www.whatwg.org/specs/web-apps/current-work/multipage/tree-construction.html#adoptionAgency)\n//------------------------------------------------------------------\n\n//Steps 5-8 of the algorithm\nfunction aaObtainFormattingElementEntry(p, token) {\n    let formattingElementEntry = p.activeFormattingElements.getElementEntryInScopeWithTagName(token.tagName);\n\n    if (formattingElementEntry) {\n        if (!p.openElements.contains(formattingElementEntry.element)) {\n            p.activeFormattingElements.removeEntry(formattingElementEntry);\n            formattingElementEntry = null;\n        } else if (!p.openElements.hasInScope(token.tagName)) {\n            formattingElementEntry = null;\n        }\n    } else {\n        genericEndTagInBody(p, token);\n    }\n\n    return formattingElementEntry;\n}\n\n//Steps 9 and 10 of the algorithm\nfunction aaObtainFurthestBlock(p, formattingElementEntry) {\n    let furthestBlock = null;\n\n    for (let i = p.openElements.stackTop; i >= 0; i--) {\n        const element = p.openElements.items[i];\n\n        if (element === formattingElementEntry.element) {\n            break;\n        }\n\n        if (p._isSpecialElement(element)) {\n            furthestBlock = element;\n        }\n    }\n\n    if (!furthestBlock) {\n        p.openElements.popUntilElementPopped(formattingElementEntry.element);\n        p.activeFormattingElements.removeEntry(formattingElementEntry);\n    }\n\n    return furthestBlock;\n}\n\n//Step 13 of the algorithm\nfunction aaInnerLoop(p, furthestBlock, formattingElement) {\n    let lastElement = furthestBlock;\n    let nextElement = p.openElements.getCommonAncestor(furthestBlock);\n\n    for (let i = 0, element = nextElement; element !== formattingElement; i++, element = nextElement) {\n        //NOTE: store next element for the next loop iteration (it may be deleted from the stack by step 9.5)\n        nextElement = p.openElements.getCommonAncestor(element);\n\n        const elementEntry = p.activeFormattingElements.getElementEntry(element);\n        const counterOverflow = elementEntry && i >= AA_INNER_LOOP_ITER;\n        const shouldRemoveFromOpenElements = !elementEntry || counterOverflow;\n\n        if (shouldRemoveFromOpenElements) {\n            if (counterOverflow) {\n                p.activeFormattingElements.removeEntry(elementEntry);\n            }\n\n            p.openElements.remove(element);\n        } else {\n            element = aaRecreateElementFromEntry(p, elementEntry);\n\n            if (lastElement === furthestBlock) {\n                p.activeFormattingElements.bookmark = elementEntry;\n            }\n\n            p.treeAdapter.detachNode(lastElement);\n            p.treeAdapter.appendChild(element, lastElement);\n            lastElement = element;\n        }\n    }\n\n    return lastElement;\n}\n\n//Step 13.7 of the algorithm\nfunction aaRecreateElementFromEntry(p, elementEntry) {\n    const ns = p.treeAdapter.getNamespaceURI(elementEntry.element);\n    const newElement = p.treeAdapter.createElement(elementEntry.token.tagName, ns, elementEntry.token.attrs);\n\n    p.openElements.replace(elementEntry.element, newElement);\n    elementEntry.element = newElement;\n\n    return newElement;\n}\n\n//Step 14 of the algorithm\nfunction aaInsertLastNodeInCommonAncestor(p, commonAncestor, lastElement) {\n    if (p._isElementCausesFosterParenting(commonAncestor)) {\n        p._fosterParentElement(lastElement);\n    } else {\n        const tn = p.treeAdapter.getTagName(commonAncestor);\n        const ns = p.treeAdapter.getNamespaceURI(commonAncestor);\n\n        if (tn === $.TEMPLATE && ns === NS.HTML) {\n            commonAncestor = p.treeAdapter.getTemplateContent(commonAncestor);\n        }\n\n        p.treeAdapter.appendChild(commonAncestor, lastElement);\n    }\n}\n\n//Steps 15-19 of the algorithm\nfunction aaReplaceFormattingElement(p, furthestBlock, formattingElementEntry) {\n    const ns = p.treeAdapter.getNamespaceURI(formattingElementEntry.element);\n    const token = formattingElementEntry.token;\n    const newElement = p.treeAdapter.createElement(token.tagName, ns, token.attrs);\n\n    p._adoptNodes(furthestBlock, newElement);\n    p.treeAdapter.appendChild(furthestBlock, newElement);\n\n    p.activeFormattingElements.insertElementAfterBookmark(newElement, formattingElementEntry.token);\n    p.activeFormattingElements.removeEntry(formattingElementEntry);\n\n    p.openElements.remove(formattingElementEntry.element);\n    p.openElements.insertAfter(furthestBlock, newElement);\n}\n\n//Algorithm entry point\nfunction callAdoptionAgency(p, token) {\n    let formattingElementEntry;\n\n    for (let i = 0; i < AA_OUTER_LOOP_ITER; i++) {\n        formattingElementEntry = aaObtainFormattingElementEntry(p, token, formattingElementEntry);\n\n        if (!formattingElementEntry) {\n            break;\n        }\n\n        const furthestBlock = aaObtainFurthestBlock(p, formattingElementEntry);\n\n        if (!furthestBlock) {\n            break;\n        }\n\n        p.activeFormattingElements.bookmark = formattingElementEntry;\n\n        const lastElement = aaInnerLoop(p, furthestBlock, formattingElementEntry.element);\n        const commonAncestor = p.openElements.getCommonAncestor(formattingElementEntry.element);\n\n        p.treeAdapter.detachNode(lastElement);\n        aaInsertLastNodeInCommonAncestor(p, commonAncestor, lastElement);\n        aaReplaceFormattingElement(p, furthestBlock, formattingElementEntry);\n    }\n}\n\n//Generic token handlers\n//------------------------------------------------------------------\nfunction ignoreToken() {\n    //NOTE: do nothing =)\n}\n\nfunction misplacedDoctype(p) {\n    p._err(ERR.misplacedDoctype);\n}\n\nfunction appendComment(p, token) {\n    p._appendCommentNode(token, p.openElements.currentTmplContent || p.openElements.current);\n}\n\nfunction appendCommentToRootHtmlElement(p, token) {\n    p._appendCommentNode(token, p.openElements.items[0]);\n}\n\nfunction appendCommentToDocument(p, token) {\n    p._appendCommentNode(token, p.document);\n}\n\nfunction insertCharacters(p, token) {\n    p._insertCharacters(token);\n}\n\nfunction stopParsing(p) {\n    p.stopped = true;\n}\n\n// The \"initial\" insertion mode\n//------------------------------------------------------------------\nfunction doctypeInInitialMode(p, token) {\n    p._setDocumentType(token);\n\n    const mode = token.forceQuirks ? HTML.DOCUMENT_MODE.QUIRKS : doctype.getDocumentMode(token);\n\n    if (!doctype.isConforming(token)) {\n        p._err(ERR.nonConformingDoctype);\n    }\n\n    p.treeAdapter.setDocumentMode(p.document, mode);\n\n    p.insertionMode = BEFORE_HTML_MODE;\n}\n\nfunction tokenInInitialMode(p, token) {\n    p._err(ERR.missingDoctype, { beforeToken: true });\n    p.treeAdapter.setDocumentMode(p.document, HTML.DOCUMENT_MODE.QUIRKS);\n    p.insertionMode = BEFORE_HTML_MODE;\n    p._processToken(token);\n}\n\n// The \"before html\" insertion mode\n//------------------------------------------------------------------\nfunction startTagBeforeHtml(p, token) {\n    if (token.tagName === $.HTML) {\n        p._insertElement(token, NS.HTML);\n        p.insertionMode = BEFORE_HEAD_MODE;\n    } else {\n        tokenBeforeHtml(p, token);\n    }\n}\n\nfunction endTagBeforeHtml(p, token) {\n    const tn = token.tagName;\n\n    if (tn === $.HTML || tn === $.HEAD || tn === $.BODY || tn === $.BR) {\n        tokenBeforeHtml(p, token);\n    }\n}\n\nfunction tokenBeforeHtml(p, token) {\n    p._insertFakeRootElement();\n    p.insertionMode = BEFORE_HEAD_MODE;\n    p._processToken(token);\n}\n\n// The \"before head\" insertion mode\n//------------------------------------------------------------------\nfunction startTagBeforeHead(p, token) {\n    const tn = token.tagName;\n\n    if (tn === $.HTML) {\n        startTagInBody(p, token);\n    } else if (tn === $.HEAD) {\n        p._insertElement(token, NS.HTML);\n        p.headElement = p.openElements.current;\n        p.insertionMode = IN_HEAD_MODE;\n    } else {\n        tokenBeforeHead(p, token);\n    }\n}\n\nfunction endTagBeforeHead(p, token) {\n    const tn = token.tagName;\n\n    if (tn === $.HEAD || tn === $.BODY || tn === $.HTML || tn === $.BR) {\n        tokenBeforeHead(p, token);\n    } else {\n        p._err(ERR.endTagWithoutMatchingOpenElement);\n    }\n}\n\nfunction tokenBeforeHead(p, token) {\n    p._insertFakeElement($.HEAD);\n    p.headElement = p.openElements.current;\n    p.insertionMode = IN_HEAD_MODE;\n    p._processToken(token);\n}\n\n// The \"in head\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInHead(p, token) {\n    const tn = token.tagName;\n\n    if (tn === $.HTML) {\n        startTagInBody(p, token);\n    } else if (tn === $.BASE || tn === $.BASEFONT || tn === $.BGSOUND || tn === $.LINK || tn === $.META) {\n        p._appendElement(token, NS.HTML);\n        token.ackSelfClosing = true;\n    } else if (tn === $.TITLE) {\n        p._switchToTextParsing(token, Tokenizer.MODE.RCDATA);\n    } else if (tn === $.NOSCRIPT) {\n        if (p.options.scriptingEnabled) {\n            p._switchToTextParsing(token, Tokenizer.MODE.RAWTEXT);\n        } else {\n            p._insertElement(token, NS.HTML);\n            p.insertionMode = IN_HEAD_NO_SCRIPT_MODE;\n        }\n    } else if (tn === $.NOFRAMES || tn === $.STYLE) {\n        p._switchToTextParsing(token, Tokenizer.MODE.RAWTEXT);\n    } else if (tn === $.SCRIPT) {\n        p._switchToTextParsing(token, Tokenizer.MODE.SCRIPT_DATA);\n    } else if (tn === $.TEMPLATE) {\n        p._insertTemplate(token, NS.HTML);\n        p.activeFormattingElements.insertMarker();\n        p.framesetOk = false;\n        p.insertionMode = IN_TEMPLATE_MODE;\n        p._pushTmplInsertionMode(IN_TEMPLATE_MODE);\n    } else if (tn === $.HEAD) {\n        p._err(ERR.misplacedStartTagForHeadElement);\n    } else {\n        tokenInHead(p, token);\n    }\n}\n\nfunction endTagInHead(p, token) {\n    const tn = token.tagName;\n\n    if (tn === $.HEAD) {\n        p.openElements.pop();\n        p.insertionMode = AFTER_HEAD_MODE;\n    } else if (tn === $.BODY || tn === $.BR || tn === $.HTML) {\n        tokenInHead(p, token);\n    } else if (tn === $.TEMPLATE) {\n        if (p.openElements.tmplCount > 0) {\n            p.openElements.generateImpliedEndTagsThoroughly();\n\n            if (p.openElements.currentTagName !== $.TEMPLATE) {\n                p._err(ERR.closingOfElementWithOpenChildElements);\n            }\n\n            p.openElements.popUntilTagNamePopped($.TEMPLATE);\n            p.activeFormattingElements.clearToLastMarker();\n            p._popTmplInsertionMode();\n            p._resetInsertionMode();\n        } else {\n            p._err(ERR.endTagWithoutMatchingOpenElement);\n        }\n    } else {\n        p._err(ERR.endTagWithoutMatchingOpenElement);\n    }\n}\n\nfunction tokenInHead(p, token) {\n    p.openElements.pop();\n    p.insertionMode = AFTER_HEAD_MODE;\n    p._processToken(token);\n}\n\n// The \"in head no script\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInHeadNoScript(p, token) {\n    const tn = token.tagName;\n\n    if (tn === $.HTML) {\n        startTagInBody(p, token);\n    } else if (\n        tn === $.BASEFONT ||\n        tn === $.BGSOUND ||\n        tn === $.HEAD ||\n        tn === $.LINK ||\n        tn === $.META ||\n        tn === $.NOFRAMES ||\n        tn === $.STYLE\n    ) {\n        startTagInHead(p, token);\n    } else if (tn === $.NOSCRIPT) {\n        p._err(ERR.nestedNoscriptInHead);\n    } else {\n        tokenInHeadNoScript(p, token);\n    }\n}\n\nfunction endTagInHeadNoScript(p, token) {\n    const tn = token.tagName;\n\n    if (tn === $.NOSCRIPT) {\n        p.openElements.pop();\n        p.insertionMode = IN_HEAD_MODE;\n    } else if (tn === $.BR) {\n        tokenInHeadNoScript(p, token);\n    } else {\n        p._err(ERR.endTagWithoutMatchingOpenElement);\n    }\n}\n\nfunction tokenInHeadNoScript(p, token) {\n    const errCode =\n        token.type === Tokenizer.EOF_TOKEN ? ERR.openElementsLeftAfterEof : ERR.disallowedContentInNoscriptInHead;\n\n    p._err(errCode);\n    p.openElements.pop();\n    p.insertionMode = IN_HEAD_MODE;\n    p._processToken(token);\n}\n\n// The \"after head\" insertion mode\n//------------------------------------------------------------------\nfunction startTagAfterHead(p, token) {\n    const tn = token.tagName;\n\n    if (tn === $.HTML) {\n        startTagInBody(p, token);\n    } else if (tn === $.BODY) {\n        p._insertElement(token, NS.HTML);\n        p.framesetOk = false;\n        p.insertionMode = IN_BODY_MODE;\n    } else if (tn === $.FRAMESET) {\n        p._insertElement(token, NS.HTML);\n        p.insertionMode = IN_FRAMESET_MODE;\n    } else if (\n        tn === $.BASE ||\n        tn === $.BASEFONT ||\n        tn === $.BGSOUND ||\n        tn === $.LINK ||\n        tn === $.META ||\n        tn === $.NOFRAMES ||\n        tn === $.SCRIPT ||\n        tn === $.STYLE ||\n        tn === $.TEMPLATE ||\n        tn === $.TITLE\n    ) {\n        p._err(ERR.abandonedHeadElementChild);\n        p.openElements.push(p.headElement);\n        startTagInHead(p, token);\n        p.openElements.remove(p.headElement);\n    } else if (tn === $.HEAD) {\n        p._err(ERR.misplacedStartTagForHeadElement);\n    } else {\n        tokenAfterHead(p, token);\n    }\n}\n\nfunction endTagAfterHead(p, token) {\n    const tn = token.tagName;\n\n    if (tn === $.BODY || tn === $.HTML || tn === $.BR) {\n        tokenAfterHead(p, token);\n    } else if (tn === $.TEMPLATE) {\n        endTagInHead(p, token);\n    } else {\n        p._err(ERR.endTagWithoutMatchingOpenElement);\n    }\n}\n\nfunction tokenAfterHead(p, token) {\n    p._insertFakeElement($.BODY);\n    p.insertionMode = IN_BODY_MODE;\n    p._processToken(token);\n}\n\n// The \"in body\" insertion mode\n//------------------------------------------------------------------\nfunction whitespaceCharacterInBody(p, token) {\n    p._reconstructActiveFormattingElements();\n    p._insertCharacters(token);\n}\n\nfunction characterInBody(p, token) {\n    p._reconstructActiveFormattingElements();\n    p._insertCharacters(token);\n    p.framesetOk = false;\n}\n\nfunction htmlStartTagInBody(p, token) {\n    if (p.openElements.tmplCount === 0) {\n        p.treeAdapter.adoptAttributes(p.openElements.items[0], token.attrs);\n    }\n}\n\nfunction bodyStartTagInBody(p, token) {\n    const bodyElement = p.openElements.tryPeekProperlyNestedBodyElement();\n\n    if (bodyElement && p.openElements.tmplCount === 0) {\n        p.framesetOk = false;\n        p.treeAdapter.adoptAttributes(bodyElement, token.attrs);\n    }\n}\n\nfunction framesetStartTagInBody(p, token) {\n    const bodyElement = p.openElements.tryPeekProperlyNestedBodyElement();\n\n    if (p.framesetOk && bodyElement) {\n        p.treeAdapter.detachNode(bodyElement);\n        p.openElements.popAllUpToHtmlElement();\n        p._insertElement(token, NS.HTML);\n        p.insertionMode = IN_FRAMESET_MODE;\n    }\n}\n\nfunction addressStartTagInBody(p, token) {\n    if (p.openElements.hasInButtonScope($.P)) {\n        p._closePElement();\n    }\n\n    p._insertElement(token, NS.HTML);\n}\n\nfunction numberedHeaderStartTagInBody(p, token) {\n    if (p.openElements.hasInButtonScope($.P)) {\n        p._closePElement();\n    }\n\n    const tn = p.openElements.currentTagName;\n\n    if (tn === $.H1 || tn === $.H2 || tn === $.H3 || tn === $.H4 || tn === $.H5 || tn === $.H6) {\n        p.openElements.pop();\n    }\n\n    p._insertElement(token, NS.HTML);\n}\n\nfunction preStartTagInBody(p, token) {\n    if (p.openElements.hasInButtonScope($.P)) {\n        p._closePElement();\n    }\n\n    p._insertElement(token, NS.HTML);\n    //NOTE: If the next token is a U+000A LINE FEED (LF) character token, then ignore that token and move\n    //on to the next one. (Newlines at the start of pre blocks are ignored as an authoring convenience.)\n    p.skipNextNewLine = true;\n    p.framesetOk = false;\n}\n\nfunction formStartTagInBody(p, token) {\n    const inTemplate = p.openElements.tmplCount > 0;\n\n    if (!p.formElement || inTemplate) {\n        if (p.openElements.hasInButtonScope($.P)) {\n            p._closePElement();\n        }\n\n        p._insertElement(token, NS.HTML);\n\n        if (!inTemplate) {\n            p.formElement = p.openElements.current;\n        }\n    }\n}\n\nfunction listItemStartTagInBody(p, token) {\n    p.framesetOk = false;\n\n    const tn = token.tagName;\n\n    for (let i = p.openElements.stackTop; i >= 0; i--) {\n        const element = p.openElements.items[i];\n        const elementTn = p.treeAdapter.getTagName(element);\n        let closeTn = null;\n\n        if (tn === $.LI && elementTn === $.LI) {\n            closeTn = $.LI;\n        } else if ((tn === $.DD || tn === $.DT) && (elementTn === $.DD || elementTn === $.DT)) {\n            closeTn = elementTn;\n        }\n\n        if (closeTn) {\n            p.openElements.generateImpliedEndTagsWithExclusion(closeTn);\n            p.openElements.popUntilTagNamePopped(closeTn);\n            break;\n        }\n\n        if (elementTn !== $.ADDRESS && elementTn !== $.DIV && elementTn !== $.P && p._isSpecialElement(element)) {\n            break;\n        }\n    }\n\n    if (p.openElements.hasInButtonScope($.P)) {\n        p._closePElement();\n    }\n\n    p._insertElement(token, NS.HTML);\n}\n\nfunction plaintextStartTagInBody(p, token) {\n    if (p.openElements.hasInButtonScope($.P)) {\n        p._closePElement();\n    }\n\n    p._insertElement(token, NS.HTML);\n    p.tokenizer.state = Tokenizer.MODE.PLAINTEXT;\n}\n\nfunction buttonStartTagInBody(p, token) {\n    if (p.openElements.hasInScope($.BUTTON)) {\n        p.openElements.generateImpliedEndTags();\n        p.openElements.popUntilTagNamePopped($.BUTTON);\n    }\n\n    p._reconstructActiveFormattingElements();\n    p._insertElement(token, NS.HTML);\n    p.framesetOk = false;\n}\n\nfunction aStartTagInBody(p, token) {\n    const activeElementEntry = p.activeFormattingElements.getElementEntryInScopeWithTagName($.A);\n\n    if (activeElementEntry) {\n        callAdoptionAgency(p, token);\n        p.openElements.remove(activeElementEntry.element);\n        p.activeFormattingElements.removeEntry(activeElementEntry);\n    }\n\n    p._reconstructActiveFormattingElements();\n    p._insertElement(token, NS.HTML);\n    p.activeFormattingElements.pushElement(p.openElements.current, token);\n}\n\nfunction bStartTagInBody(p, token) {\n    p._reconstructActiveFormattingElements();\n    p._insertElement(token, NS.HTML);\n    p.activeFormattingElements.pushElement(p.openElements.current, token);\n}\n\nfunction nobrStartTagInBody(p, token) {\n    p._reconstructActiveFormattingElements();\n\n    if (p.openElements.hasInScope($.NOBR)) {\n        callAdoptionAgency(p, token);\n        p._reconstructActiveFormattingElements();\n    }\n\n    p._insertElement(token, NS.HTML);\n    p.activeFormattingElements.pushElement(p.openElements.current, token);\n}\n\nfunction appletStartTagInBody(p, token) {\n    p._reconstructActiveFormattingElements();\n    p._insertElement(token, NS.HTML);\n    p.activeFormattingElements.insertMarker();\n    p.framesetOk = false;\n}\n\nfunction tableStartTagInBody(p, token) {\n    if (\n        p.treeAdapter.getDocumentMode(p.document) !== HTML.DOCUMENT_MODE.QUIRKS &&\n        p.openElements.hasInButtonScope($.P)\n    ) {\n        p._closePElement();\n    }\n\n    p._insertElement(token, NS.HTML);\n    p.framesetOk = false;\n    p.insertionMode = IN_TABLE_MODE;\n}\n\nfunction areaStartTagInBody(p, token) {\n    p._reconstructActiveFormattingElements();\n    p._appendElement(token, NS.HTML);\n    p.framesetOk = false;\n    token.ackSelfClosing = true;\n}\n\nfunction inputStartTagInBody(p, token) {\n    p._reconstructActiveFormattingElements();\n    p._appendElement(token, NS.HTML);\n\n    const inputType = Tokenizer.getTokenAttr(token, ATTRS.TYPE);\n\n    if (!inputType || inputType.toLowerCase() !== HIDDEN_INPUT_TYPE) {\n        p.framesetOk = false;\n    }\n\n    token.ackSelfClosing = true;\n}\n\nfunction paramStartTagInBody(p, token) {\n    p._appendElement(token, NS.HTML);\n    token.ackSelfClosing = true;\n}\n\nfunction hrStartTagInBody(p, token) {\n    if (p.openElements.hasInButtonScope($.P)) {\n        p._closePElement();\n    }\n\n    p._appendElement(token, NS.HTML);\n    p.framesetOk = false;\n    token.ackSelfClosing = true;\n}\n\nfunction imageStartTagInBody(p, token) {\n    token.tagName = $.IMG;\n    areaStartTagInBody(p, token);\n}\n\nfunction textareaStartTagInBody(p, token) {\n    p._insertElement(token, NS.HTML);\n    //NOTE: If the next token is a U+000A LINE FEED (LF) character token, then ignore that token and move\n    //on to the next one. (Newlines at the start of textarea elements are ignored as an authoring convenience.)\n    p.skipNextNewLine = true;\n    p.tokenizer.state = Tokenizer.MODE.RCDATA;\n    p.originalInsertionMode = p.insertionMode;\n    p.framesetOk = false;\n    p.insertionMode = TEXT_MODE;\n}\n\nfunction xmpStartTagInBody(p, token) {\n    if (p.openElements.hasInButtonScope($.P)) {\n        p._closePElement();\n    }\n\n    p._reconstructActiveFormattingElements();\n    p.framesetOk = false;\n    p._switchToTextParsing(token, Tokenizer.MODE.RAWTEXT);\n}\n\nfunction iframeStartTagInBody(p, token) {\n    p.framesetOk = false;\n    p._switchToTextParsing(token, Tokenizer.MODE.RAWTEXT);\n}\n\n//NOTE: here we assume that we always act as an user agent with enabled plugins, so we parse\n//<noembed> as a rawtext.\nfunction noembedStartTagInBody(p, token) {\n    p._switchToTextParsing(token, Tokenizer.MODE.RAWTEXT);\n}\n\nfunction selectStartTagInBody(p, token) {\n    p._reconstructActiveFormattingElements();\n    p._insertElement(token, NS.HTML);\n    p.framesetOk = false;\n\n    if (\n        p.insertionMode === IN_TABLE_MODE ||\n        p.insertionMode === IN_CAPTION_MODE ||\n        p.insertionMode === IN_TABLE_BODY_MODE ||\n        p.insertionMode === IN_ROW_MODE ||\n        p.insertionMode === IN_CELL_MODE\n    ) {\n        p.insertionMode = IN_SELECT_IN_TABLE_MODE;\n    } else {\n        p.insertionMode = IN_SELECT_MODE;\n    }\n}\n\nfunction optgroupStartTagInBody(p, token) {\n    if (p.openElements.currentTagName === $.OPTION) {\n        p.openElements.pop();\n    }\n\n    p._reconstructActiveFormattingElements();\n    p._insertElement(token, NS.HTML);\n}\n\nfunction rbStartTagInBody(p, token) {\n    if (p.openElements.hasInScope($.RUBY)) {\n        p.openElements.generateImpliedEndTags();\n    }\n\n    p._insertElement(token, NS.HTML);\n}\n\nfunction rtStartTagInBody(p, token) {\n    if (p.openElements.hasInScope($.RUBY)) {\n        p.openElements.generateImpliedEndTagsWithExclusion($.RTC);\n    }\n\n    p._insertElement(token, NS.HTML);\n}\n\nfunction menuStartTagInBody(p, token) {\n    if (p.openElements.hasInButtonScope($.P)) {\n        p._closePElement();\n    }\n\n    p._insertElement(token, NS.HTML);\n}\n\nfunction mathStartTagInBody(p, token) {\n    p._reconstructActiveFormattingElements();\n\n    foreignContent.adjustTokenMathMLAttrs(token);\n    foreignContent.adjustTokenXMLAttrs(token);\n\n    if (token.selfClosing) {\n        p._appendElement(token, NS.MATHML);\n    } else {\n        p._insertElement(token, NS.MATHML);\n    }\n\n    token.ackSelfClosing = true;\n}\n\nfunction svgStartTagInBody(p, token) {\n    p._reconstructActiveFormattingElements();\n\n    foreignContent.adjustTokenSVGAttrs(token);\n    foreignContent.adjustTokenXMLAttrs(token);\n\n    if (token.selfClosing) {\n        p._appendElement(token, NS.SVG);\n    } else {\n        p._insertElement(token, NS.SVG);\n    }\n\n    token.ackSelfClosing = true;\n}\n\nfunction genericStartTagInBody(p, token) {\n    p._reconstructActiveFormattingElements();\n    p._insertElement(token, NS.HTML);\n}\n\n//OPTIMIZATION: Integer comparisons are low-cost, so we can use very fast tag name length filters here.\n//It's faster than using dictionary.\nfunction startTagInBody(p, token) {\n    const tn = token.tagName;\n\n    switch (tn.length) {\n        case 1:\n            if (tn === $.I || tn === $.S || tn === $.B || tn === $.U) {\n                bStartTagInBody(p, token);\n            } else if (tn === $.P) {\n                addressStartTagInBody(p, token);\n            } else if (tn === $.A) {\n                aStartTagInBody(p, token);\n            } else {\n                genericStartTagInBody(p, token);\n            }\n\n            break;\n\n        case 2:\n            if (tn === $.DL || tn === $.OL || tn === $.UL) {\n                addressStartTagInBody(p, token);\n            } else if (tn === $.H1 || tn === $.H2 || tn === $.H3 || tn === $.H4 || tn === $.H5 || tn === $.H6) {\n                numberedHeaderStartTagInBody(p, token);\n            } else if (tn === $.LI || tn === $.DD || tn === $.DT) {\n                listItemStartTagInBody(p, token);\n            } else if (tn === $.EM || tn === $.TT) {\n                bStartTagInBody(p, token);\n            } else if (tn === $.BR) {\n                areaStartTagInBody(p, token);\n            } else if (tn === $.HR) {\n                hrStartTagInBody(p, token);\n            } else if (tn === $.RB) {\n                rbStartTagInBody(p, token);\n            } else if (tn === $.RT || tn === $.RP) {\n                rtStartTagInBody(p, token);\n            } else if (tn !== $.TH && tn !== $.TD && tn !== $.TR) {\n                genericStartTagInBody(p, token);\n            }\n\n            break;\n\n        case 3:\n            if (tn === $.DIV || tn === $.DIR || tn === $.NAV) {\n                addressStartTagInBody(p, token);\n            } else if (tn === $.PRE) {\n                preStartTagInBody(p, token);\n            } else if (tn === $.BIG) {\n                bStartTagInBody(p, token);\n            } else if (tn === $.IMG || tn === $.WBR) {\n                areaStartTagInBody(p, token);\n            } else if (tn === $.XMP) {\n                xmpStartTagInBody(p, token);\n            } else if (tn === $.SVG) {\n                svgStartTagInBody(p, token);\n            } else if (tn === $.RTC) {\n                rbStartTagInBody(p, token);\n            } else if (tn !== $.COL) {\n                genericStartTagInBody(p, token);\n            }\n\n            break;\n\n        case 4:\n            if (tn === $.HTML) {\n                htmlStartTagInBody(p, token);\n            } else if (tn === $.BASE || tn === $.LINK || tn === $.META) {\n                startTagInHead(p, token);\n            } else if (tn === $.BODY) {\n                bodyStartTagInBody(p, token);\n            } else if (tn === $.MAIN || tn === $.MENU) {\n                addressStartTagInBody(p, token);\n            } else if (tn === $.FORM) {\n                formStartTagInBody(p, token);\n            } else if (tn === $.CODE || tn === $.FONT) {\n                bStartTagInBody(p, token);\n            } else if (tn === $.NOBR) {\n                nobrStartTagInBody(p, token);\n            } else if (tn === $.AREA) {\n                areaStartTagInBody(p, token);\n            } else if (tn === $.MATH) {\n                mathStartTagInBody(p, token);\n            } else if (tn === $.MENU) {\n                menuStartTagInBody(p, token);\n            } else if (tn !== $.HEAD) {\n                genericStartTagInBody(p, token);\n            }\n\n            break;\n\n        case 5:\n            if (tn === $.STYLE || tn === $.TITLE) {\n                startTagInHead(p, token);\n            } else if (tn === $.ASIDE) {\n                addressStartTagInBody(p, token);\n            } else if (tn === $.SMALL) {\n                bStartTagInBody(p, token);\n            } else if (tn === $.TABLE) {\n                tableStartTagInBody(p, token);\n            } else if (tn === $.EMBED) {\n                areaStartTagInBody(p, token);\n            } else if (tn === $.INPUT) {\n                inputStartTagInBody(p, token);\n            } else if (tn === $.PARAM || tn === $.TRACK) {\n                paramStartTagInBody(p, token);\n            } else if (tn === $.IMAGE) {\n                imageStartTagInBody(p, token);\n            } else if (tn !== $.FRAME && tn !== $.TBODY && tn !== $.TFOOT && tn !== $.THEAD) {\n                genericStartTagInBody(p, token);\n            }\n\n            break;\n\n        case 6:\n            if (tn === $.SCRIPT) {\n                startTagInHead(p, token);\n            } else if (\n                tn === $.CENTER ||\n                tn === $.FIGURE ||\n                tn === $.FOOTER ||\n                tn === $.HEADER ||\n                tn === $.HGROUP ||\n                tn === $.DIALOG\n            ) {\n                addressStartTagInBody(p, token);\n            } else if (tn === $.BUTTON) {\n                buttonStartTagInBody(p, token);\n            } else if (tn === $.STRIKE || tn === $.STRONG) {\n                bStartTagInBody(p, token);\n            } else if (tn === $.APPLET || tn === $.OBJECT) {\n                appletStartTagInBody(p, token);\n            } else if (tn === $.KEYGEN) {\n                areaStartTagInBody(p, token);\n            } else if (tn === $.SOURCE) {\n                paramStartTagInBody(p, token);\n            } else if (tn === $.IFRAME) {\n                iframeStartTagInBody(p, token);\n            } else if (tn === $.SELECT) {\n                selectStartTagInBody(p, token);\n            } else if (tn === $.OPTION) {\n                optgroupStartTagInBody(p, token);\n            } else {\n                genericStartTagInBody(p, token);\n            }\n\n            break;\n\n        case 7:\n            if (tn === $.BGSOUND) {\n                startTagInHead(p, token);\n            } else if (\n                tn === $.DETAILS ||\n                tn === $.ADDRESS ||\n                tn === $.ARTICLE ||\n                tn === $.SECTION ||\n                tn === $.SUMMARY\n            ) {\n                addressStartTagInBody(p, token);\n            } else if (tn === $.LISTING) {\n                preStartTagInBody(p, token);\n            } else if (tn === $.MARQUEE) {\n                appletStartTagInBody(p, token);\n            } else if (tn === $.NOEMBED) {\n                noembedStartTagInBody(p, token);\n            } else if (tn !== $.CAPTION) {\n                genericStartTagInBody(p, token);\n            }\n\n            break;\n\n        case 8:\n            if (tn === $.BASEFONT) {\n                startTagInHead(p, token);\n            } else if (tn === $.FRAMESET) {\n                framesetStartTagInBody(p, token);\n            } else if (tn === $.FIELDSET) {\n                addressStartTagInBody(p, token);\n            } else if (tn === $.TEXTAREA) {\n                textareaStartTagInBody(p, token);\n            } else if (tn === $.TEMPLATE) {\n                startTagInHead(p, token);\n            } else if (tn === $.NOSCRIPT) {\n                if (p.options.scriptingEnabled) {\n                    noembedStartTagInBody(p, token);\n                } else {\n                    genericStartTagInBody(p, token);\n                }\n            } else if (tn === $.OPTGROUP) {\n                optgroupStartTagInBody(p, token);\n            } else if (tn !== $.COLGROUP) {\n                genericStartTagInBody(p, token);\n            }\n\n            break;\n\n        case 9:\n            if (tn === $.PLAINTEXT) {\n                plaintextStartTagInBody(p, token);\n            } else {\n                genericStartTagInBody(p, token);\n            }\n\n            break;\n\n        case 10:\n            if (tn === $.BLOCKQUOTE || tn === $.FIGCAPTION) {\n                addressStartTagInBody(p, token);\n            } else {\n                genericStartTagInBody(p, token);\n            }\n\n            break;\n\n        default:\n            genericStartTagInBody(p, token);\n    }\n}\n\nfunction bodyEndTagInBody(p) {\n    if (p.openElements.hasInScope($.BODY)) {\n        p.insertionMode = AFTER_BODY_MODE;\n    }\n}\n\nfunction htmlEndTagInBody(p, token) {\n    if (p.openElements.hasInScope($.BODY)) {\n        p.insertionMode = AFTER_BODY_MODE;\n        p._processToken(token);\n    }\n}\n\nfunction addressEndTagInBody(p, token) {\n    const tn = token.tagName;\n\n    if (p.openElements.hasInScope(tn)) {\n        p.openElements.generateImpliedEndTags();\n        p.openElements.popUntilTagNamePopped(tn);\n    }\n}\n\nfunction formEndTagInBody(p) {\n    const inTemplate = p.openElements.tmplCount > 0;\n    const formElement = p.formElement;\n\n    if (!inTemplate) {\n        p.formElement = null;\n    }\n\n    if ((formElement || inTemplate) && p.openElements.hasInScope($.FORM)) {\n        p.openElements.generateImpliedEndTags();\n\n        if (inTemplate) {\n            p.openElements.popUntilTagNamePopped($.FORM);\n        } else {\n            p.openElements.remove(formElement);\n        }\n    }\n}\n\nfunction pEndTagInBody(p) {\n    if (!p.openElements.hasInButtonScope($.P)) {\n        p._insertFakeElement($.P);\n    }\n\n    p._closePElement();\n}\n\nfunction liEndTagInBody(p) {\n    if (p.openElements.hasInListItemScope($.LI)) {\n        p.openElements.generateImpliedEndTagsWithExclusion($.LI);\n        p.openElements.popUntilTagNamePopped($.LI);\n    }\n}\n\nfunction ddEndTagInBody(p, token) {\n    const tn = token.tagName;\n\n    if (p.openElements.hasInScope(tn)) {\n        p.openElements.generateImpliedEndTagsWithExclusion(tn);\n        p.openElements.popUntilTagNamePopped(tn);\n    }\n}\n\nfunction numberedHeaderEndTagInBody(p) {\n    if (p.openElements.hasNumberedHeaderInScope()) {\n        p.openElements.generateImpliedEndTags();\n        p.openElements.popUntilNumberedHeaderPopped();\n    }\n}\n\nfunction appletEndTagInBody(p, token) {\n    const tn = token.tagName;\n\n    if (p.openElements.hasInScope(tn)) {\n        p.openElements.generateImpliedEndTags();\n        p.openElements.popUntilTagNamePopped(tn);\n        p.activeFormattingElements.clearToLastMarker();\n    }\n}\n\nfunction brEndTagInBody(p) {\n    p._reconstructActiveFormattingElements();\n    p._insertFakeElement($.BR);\n    p.openElements.pop();\n    p.framesetOk = false;\n}\n\nfunction genericEndTagInBody(p, token) {\n    const tn = token.tagName;\n\n    for (let i = p.openElements.stackTop; i > 0; i--) {\n        const element = p.openElements.items[i];\n\n        if (p.treeAdapter.getTagName(element) === tn) {\n            p.openElements.generateImpliedEndTagsWithExclusion(tn);\n            p.openElements.popUntilElementPopped(element);\n            break;\n        }\n\n        if (p._isSpecialElement(element)) {\n            break;\n        }\n    }\n}\n\n//OPTIMIZATION: Integer comparisons are low-cost, so we can use very fast tag name length filters here.\n//It's faster than using dictionary.\nfunction endTagInBody(p, token) {\n    const tn = token.tagName;\n\n    switch (tn.length) {\n        case 1:\n            if (tn === $.A || tn === $.B || tn === $.I || tn === $.S || tn === $.U) {\n                callAdoptionAgency(p, token);\n            } else if (tn === $.P) {\n                pEndTagInBody(p, token);\n            } else {\n                genericEndTagInBody(p, token);\n            }\n\n            break;\n\n        case 2:\n            if (tn === $.DL || tn === $.UL || tn === $.OL) {\n                addressEndTagInBody(p, token);\n            } else if (tn === $.LI) {\n                liEndTagInBody(p, token);\n            } else if (tn === $.DD || tn === $.DT) {\n                ddEndTagInBody(p, token);\n            } else if (tn === $.H1 || tn === $.H2 || tn === $.H3 || tn === $.H4 || tn === $.H5 || tn === $.H6) {\n                numberedHeaderEndTagInBody(p, token);\n            } else if (tn === $.BR) {\n                brEndTagInBody(p, token);\n            } else if (tn === $.EM || tn === $.TT) {\n                callAdoptionAgency(p, token);\n            } else {\n                genericEndTagInBody(p, token);\n            }\n\n            break;\n\n        case 3:\n            if (tn === $.BIG) {\n                callAdoptionAgency(p, token);\n            } else if (tn === $.DIR || tn === $.DIV || tn === $.NAV || tn === $.PRE) {\n                addressEndTagInBody(p, token);\n            } else {\n                genericEndTagInBody(p, token);\n            }\n\n            break;\n\n        case 4:\n            if (tn === $.BODY) {\n                bodyEndTagInBody(p, token);\n            } else if (tn === $.HTML) {\n                htmlEndTagInBody(p, token);\n            } else if (tn === $.FORM) {\n                formEndTagInBody(p, token);\n            } else if (tn === $.CODE || tn === $.FONT || tn === $.NOBR) {\n                callAdoptionAgency(p, token);\n            } else if (tn === $.MAIN || tn === $.MENU) {\n                addressEndTagInBody(p, token);\n            } else {\n                genericEndTagInBody(p, token);\n            }\n\n            break;\n\n        case 5:\n            if (tn === $.ASIDE) {\n                addressEndTagInBody(p, token);\n            } else if (tn === $.SMALL) {\n                callAdoptionAgency(p, token);\n            } else {\n                genericEndTagInBody(p, token);\n            }\n\n            break;\n\n        case 6:\n            if (\n                tn === $.CENTER ||\n                tn === $.FIGURE ||\n                tn === $.FOOTER ||\n                tn === $.HEADER ||\n                tn === $.HGROUP ||\n                tn === $.DIALOG\n            ) {\n                addressEndTagInBody(p, token);\n            } else if (tn === $.APPLET || tn === $.OBJECT) {\n                appletEndTagInBody(p, token);\n            } else if (tn === $.STRIKE || tn === $.STRONG) {\n                callAdoptionAgency(p, token);\n            } else {\n                genericEndTagInBody(p, token);\n            }\n\n            break;\n\n        case 7:\n            if (\n                tn === $.ADDRESS ||\n                tn === $.ARTICLE ||\n                tn === $.DETAILS ||\n                tn === $.SECTION ||\n                tn === $.SUMMARY ||\n                tn === $.LISTING\n            ) {\n                addressEndTagInBody(p, token);\n            } else if (tn === $.MARQUEE) {\n                appletEndTagInBody(p, token);\n            } else {\n                genericEndTagInBody(p, token);\n            }\n\n            break;\n\n        case 8:\n            if (tn === $.FIELDSET) {\n                addressEndTagInBody(p, token);\n            } else if (tn === $.TEMPLATE) {\n                endTagInHead(p, token);\n            } else {\n                genericEndTagInBody(p, token);\n            }\n\n            break;\n\n        case 10:\n            if (tn === $.BLOCKQUOTE || tn === $.FIGCAPTION) {\n                addressEndTagInBody(p, token);\n            } else {\n                genericEndTagInBody(p, token);\n            }\n\n            break;\n\n        default:\n            genericEndTagInBody(p, token);\n    }\n}\n\nfunction eofInBody(p, token) {\n    if (p.tmplInsertionModeStackTop > -1) {\n        eofInTemplate(p, token);\n    } else {\n        p.stopped = true;\n    }\n}\n\n// The \"text\" insertion mode\n//------------------------------------------------------------------\nfunction endTagInText(p, token) {\n    if (token.tagName === $.SCRIPT) {\n        p.pendingScript = p.openElements.current;\n    }\n\n    p.openElements.pop();\n    p.insertionMode = p.originalInsertionMode;\n}\n\nfunction eofInText(p, token) {\n    p._err(ERR.eofInElementThatCanContainOnlyText);\n    p.openElements.pop();\n    p.insertionMode = p.originalInsertionMode;\n    p._processToken(token);\n}\n\n// The \"in table\" insertion mode\n//------------------------------------------------------------------\nfunction characterInTable(p, token) {\n    const curTn = p.openElements.currentTagName;\n\n    if (curTn === $.TABLE || curTn === $.TBODY || curTn === $.TFOOT || curTn === $.THEAD || curTn === $.TR) {\n        p.pendingCharacterTokens = [];\n        p.hasNonWhitespacePendingCharacterToken = false;\n        p.originalInsertionMode = p.insertionMode;\n        p.insertionMode = IN_TABLE_TEXT_MODE;\n        p._processToken(token);\n    } else {\n        tokenInTable(p, token);\n    }\n}\n\nfunction captionStartTagInTable(p, token) {\n    p.openElements.clearBackToTableContext();\n    p.activeFormattingElements.insertMarker();\n    p._insertElement(token, NS.HTML);\n    p.insertionMode = IN_CAPTION_MODE;\n}\n\nfunction colgroupStartTagInTable(p, token) {\n    p.openElements.clearBackToTableContext();\n    p._insertElement(token, NS.HTML);\n    p.insertionMode = IN_COLUMN_GROUP_MODE;\n}\n\nfunction colStartTagInTable(p, token) {\n    p.openElements.clearBackToTableContext();\n    p._insertFakeElement($.COLGROUP);\n    p.insertionMode = IN_COLUMN_GROUP_MODE;\n    p._processToken(token);\n}\n\nfunction tbodyStartTagInTable(p, token) {\n    p.openElements.clearBackToTableContext();\n    p._insertElement(token, NS.HTML);\n    p.insertionMode = IN_TABLE_BODY_MODE;\n}\n\nfunction tdStartTagInTable(p, token) {\n    p.openElements.clearBackToTableContext();\n    p._insertFakeElement($.TBODY);\n    p.insertionMode = IN_TABLE_BODY_MODE;\n    p._processToken(token);\n}\n\nfunction tableStartTagInTable(p, token) {\n    if (p.openElements.hasInTableScope($.TABLE)) {\n        p.openElements.popUntilTagNamePopped($.TABLE);\n        p._resetInsertionMode();\n        p._processToken(token);\n    }\n}\n\nfunction inputStartTagInTable(p, token) {\n    const inputType = Tokenizer.getTokenAttr(token, ATTRS.TYPE);\n\n    if (inputType && inputType.toLowerCase() === HIDDEN_INPUT_TYPE) {\n        p._appendElement(token, NS.HTML);\n    } else {\n        tokenInTable(p, token);\n    }\n\n    token.ackSelfClosing = true;\n}\n\nfunction formStartTagInTable(p, token) {\n    if (!p.formElement && p.openElements.tmplCount === 0) {\n        p._insertElement(token, NS.HTML);\n        p.formElement = p.openElements.current;\n        p.openElements.pop();\n    }\n}\n\nfunction startTagInTable(p, token) {\n    const tn = token.tagName;\n\n    switch (tn.length) {\n        case 2:\n            if (tn === $.TD || tn === $.TH || tn === $.TR) {\n                tdStartTagInTable(p, token);\n            } else {\n                tokenInTable(p, token);\n            }\n\n            break;\n\n        case 3:\n            if (tn === $.COL) {\n                colStartTagInTable(p, token);\n            } else {\n                tokenInTable(p, token);\n            }\n\n            break;\n\n        case 4:\n            if (tn === $.FORM) {\n                formStartTagInTable(p, token);\n            } else {\n                tokenInTable(p, token);\n            }\n\n            break;\n\n        case 5:\n            if (tn === $.TABLE) {\n                tableStartTagInTable(p, token);\n            } else if (tn === $.STYLE) {\n                startTagInHead(p, token);\n            } else if (tn === $.TBODY || tn === $.TFOOT || tn === $.THEAD) {\n                tbodyStartTagInTable(p, token);\n            } else if (tn === $.INPUT) {\n                inputStartTagInTable(p, token);\n            } else {\n                tokenInTable(p, token);\n            }\n\n            break;\n\n        case 6:\n            if (tn === $.SCRIPT) {\n                startTagInHead(p, token);\n            } else {\n                tokenInTable(p, token);\n            }\n\n            break;\n\n        case 7:\n            if (tn === $.CAPTION) {\n                captionStartTagInTable(p, token);\n            } else {\n                tokenInTable(p, token);\n            }\n\n            break;\n\n        case 8:\n            if (tn === $.COLGROUP) {\n                colgroupStartTagInTable(p, token);\n            } else if (tn === $.TEMPLATE) {\n                startTagInHead(p, token);\n            } else {\n                tokenInTable(p, token);\n            }\n\n            break;\n\n        default:\n            tokenInTable(p, token);\n    }\n}\n\nfunction endTagInTable(p, token) {\n    const tn = token.tagName;\n\n    if (tn === $.TABLE) {\n        if (p.openElements.hasInTableScope($.TABLE)) {\n            p.openElements.popUntilTagNamePopped($.TABLE);\n            p._resetInsertionMode();\n        }\n    } else if (tn === $.TEMPLATE) {\n        endTagInHead(p, token);\n    } else if (\n        tn !== $.BODY &&\n        tn !== $.CAPTION &&\n        tn !== $.COL &&\n        tn !== $.COLGROUP &&\n        tn !== $.HTML &&\n        tn !== $.TBODY &&\n        tn !== $.TD &&\n        tn !== $.TFOOT &&\n        tn !== $.TH &&\n        tn !== $.THEAD &&\n        tn !== $.TR\n    ) {\n        tokenInTable(p, token);\n    }\n}\n\nfunction tokenInTable(p, token) {\n    const savedFosterParentingState = p.fosterParentingEnabled;\n\n    p.fosterParentingEnabled = true;\n    p._processTokenInBodyMode(token);\n    p.fosterParentingEnabled = savedFosterParentingState;\n}\n\n// The \"in table text\" insertion mode\n//------------------------------------------------------------------\nfunction whitespaceCharacterInTableText(p, token) {\n    p.pendingCharacterTokens.push(token);\n}\n\nfunction characterInTableText(p, token) {\n    p.pendingCharacterTokens.push(token);\n    p.hasNonWhitespacePendingCharacterToken = true;\n}\n\nfunction tokenInTableText(p, token) {\n    let i = 0;\n\n    if (p.hasNonWhitespacePendingCharacterToken) {\n        for (; i < p.pendingCharacterTokens.length; i++) {\n            tokenInTable(p, p.pendingCharacterTokens[i]);\n        }\n    } else {\n        for (; i < p.pendingCharacterTokens.length; i++) {\n            p._insertCharacters(p.pendingCharacterTokens[i]);\n        }\n    }\n\n    p.insertionMode = p.originalInsertionMode;\n    p._processToken(token);\n}\n\n// The \"in caption\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInCaption(p, token) {\n    const tn = token.tagName;\n\n    if (\n        tn === $.CAPTION ||\n        tn === $.COL ||\n        tn === $.COLGROUP ||\n        tn === $.TBODY ||\n        tn === $.TD ||\n        tn === $.TFOOT ||\n        tn === $.TH ||\n        tn === $.THEAD ||\n        tn === $.TR\n    ) {\n        if (p.openElements.hasInTableScope($.CAPTION)) {\n            p.openElements.generateImpliedEndTags();\n            p.openElements.popUntilTagNamePopped($.CAPTION);\n            p.activeFormattingElements.clearToLastMarker();\n            p.insertionMode = IN_TABLE_MODE;\n            p._processToken(token);\n        }\n    } else {\n        startTagInBody(p, token);\n    }\n}\n\nfunction endTagInCaption(p, token) {\n    const tn = token.tagName;\n\n    if (tn === $.CAPTION || tn === $.TABLE) {\n        if (p.openElements.hasInTableScope($.CAPTION)) {\n            p.openElements.generateImpliedEndTags();\n            p.openElements.popUntilTagNamePopped($.CAPTION);\n            p.activeFormattingElements.clearToLastMarker();\n            p.insertionMode = IN_TABLE_MODE;\n\n            if (tn === $.TABLE) {\n                p._processToken(token);\n            }\n        }\n    } else if (\n        tn !== $.BODY &&\n        tn !== $.COL &&\n        tn !== $.COLGROUP &&\n        tn !== $.HTML &&\n        tn !== $.TBODY &&\n        tn !== $.TD &&\n        tn !== $.TFOOT &&\n        tn !== $.TH &&\n        tn !== $.THEAD &&\n        tn !== $.TR\n    ) {\n        endTagInBody(p, token);\n    }\n}\n\n// The \"in column group\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInColumnGroup(p, token) {\n    const tn = token.tagName;\n\n    if (tn === $.HTML) {\n        startTagInBody(p, token);\n    } else if (tn === $.COL) {\n        p._appendElement(token, NS.HTML);\n        token.ackSelfClosing = true;\n    } else if (tn === $.TEMPLATE) {\n        startTagInHead(p, token);\n    } else {\n        tokenInColumnGroup(p, token);\n    }\n}\n\nfunction endTagInColumnGroup(p, token) {\n    const tn = token.tagName;\n\n    if (tn === $.COLGROUP) {\n        if (p.openElements.currentTagName === $.COLGROUP) {\n            p.openElements.pop();\n            p.insertionMode = IN_TABLE_MODE;\n        }\n    } else if (tn === $.TEMPLATE) {\n        endTagInHead(p, token);\n    } else if (tn !== $.COL) {\n        tokenInColumnGroup(p, token);\n    }\n}\n\nfunction tokenInColumnGroup(p, token) {\n    if (p.openElements.currentTagName === $.COLGROUP) {\n        p.openElements.pop();\n        p.insertionMode = IN_TABLE_MODE;\n        p._processToken(token);\n    }\n}\n\n// The \"in table body\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInTableBody(p, token) {\n    const tn = token.tagName;\n\n    if (tn === $.TR) {\n        p.openElements.clearBackToTableBodyContext();\n        p._insertElement(token, NS.HTML);\n        p.insertionMode = IN_ROW_MODE;\n    } else if (tn === $.TH || tn === $.TD) {\n        p.openElements.clearBackToTableBodyContext();\n        p._insertFakeElement($.TR);\n        p.insertionMode = IN_ROW_MODE;\n        p._processToken(token);\n    } else if (\n        tn === $.CAPTION ||\n        tn === $.COL ||\n        tn === $.COLGROUP ||\n        tn === $.TBODY ||\n        tn === $.TFOOT ||\n        tn === $.THEAD\n    ) {\n        if (p.openElements.hasTableBodyContextInTableScope()) {\n            p.openElements.clearBackToTableBodyContext();\n            p.openElements.pop();\n            p.insertionMode = IN_TABLE_MODE;\n            p._processToken(token);\n        }\n    } else {\n        startTagInTable(p, token);\n    }\n}\n\nfunction endTagInTableBody(p, token) {\n    const tn = token.tagName;\n\n    if (tn === $.TBODY || tn === $.TFOOT || tn === $.THEAD) {\n        if (p.openElements.hasInTableScope(tn)) {\n            p.openElements.clearBackToTableBodyContext();\n            p.openElements.pop();\n            p.insertionMode = IN_TABLE_MODE;\n        }\n    } else if (tn === $.TABLE) {\n        if (p.openElements.hasTableBodyContextInTableScope()) {\n            p.openElements.clearBackToTableBodyContext();\n            p.openElements.pop();\n            p.insertionMode = IN_TABLE_MODE;\n            p._processToken(token);\n        }\n    } else if (\n        (tn !== $.BODY && tn !== $.CAPTION && tn !== $.COL && tn !== $.COLGROUP) ||\n        (tn !== $.HTML && tn !== $.TD && tn !== $.TH && tn !== $.TR)\n    ) {\n        endTagInTable(p, token);\n    }\n}\n\n// The \"in row\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInRow(p, token) {\n    const tn = token.tagName;\n\n    if (tn === $.TH || tn === $.TD) {\n        p.openElements.clearBackToTableRowContext();\n        p._insertElement(token, NS.HTML);\n        p.insertionMode = IN_CELL_MODE;\n        p.activeFormattingElements.insertMarker();\n    } else if (\n        tn === $.CAPTION ||\n        tn === $.COL ||\n        tn === $.COLGROUP ||\n        tn === $.TBODY ||\n        tn === $.TFOOT ||\n        tn === $.THEAD ||\n        tn === $.TR\n    ) {\n        if (p.openElements.hasInTableScope($.TR)) {\n            p.openElements.clearBackToTableRowContext();\n            p.openElements.pop();\n            p.insertionMode = IN_TABLE_BODY_MODE;\n            p._processToken(token);\n        }\n    } else {\n        startTagInTable(p, token);\n    }\n}\n\nfunction endTagInRow(p, token) {\n    const tn = token.tagName;\n\n    if (tn === $.TR) {\n        if (p.openElements.hasInTableScope($.TR)) {\n            p.openElements.clearBackToTableRowContext();\n            p.openElements.pop();\n            p.insertionMode = IN_TABLE_BODY_MODE;\n        }\n    } else if (tn === $.TABLE) {\n        if (p.openElements.hasInTableScope($.TR)) {\n            p.openElements.clearBackToTableRowContext();\n            p.openElements.pop();\n            p.insertionMode = IN_TABLE_BODY_MODE;\n            p._processToken(token);\n        }\n    } else if (tn === $.TBODY || tn === $.TFOOT || tn === $.THEAD) {\n        if (p.openElements.hasInTableScope(tn) || p.openElements.hasInTableScope($.TR)) {\n            p.openElements.clearBackToTableRowContext();\n            p.openElements.pop();\n            p.insertionMode = IN_TABLE_BODY_MODE;\n            p._processToken(token);\n        }\n    } else if (\n        (tn !== $.BODY && tn !== $.CAPTION && tn !== $.COL && tn !== $.COLGROUP) ||\n        (tn !== $.HTML && tn !== $.TD && tn !== $.TH)\n    ) {\n        endTagInTable(p, token);\n    }\n}\n\n// The \"in cell\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInCell(p, token) {\n    const tn = token.tagName;\n\n    if (\n        tn === $.CAPTION ||\n        tn === $.COL ||\n        tn === $.COLGROUP ||\n        tn === $.TBODY ||\n        tn === $.TD ||\n        tn === $.TFOOT ||\n        tn === $.TH ||\n        tn === $.THEAD ||\n        tn === $.TR\n    ) {\n        if (p.openElements.hasInTableScope($.TD) || p.openElements.hasInTableScope($.TH)) {\n            p._closeTableCell();\n            p._processToken(token);\n        }\n    } else {\n        startTagInBody(p, token);\n    }\n}\n\nfunction endTagInCell(p, token) {\n    const tn = token.tagName;\n\n    if (tn === $.TD || tn === $.TH) {\n        if (p.openElements.hasInTableScope(tn)) {\n            p.openElements.generateImpliedEndTags();\n            p.openElements.popUntilTagNamePopped(tn);\n            p.activeFormattingElements.clearToLastMarker();\n            p.insertionMode = IN_ROW_MODE;\n        }\n    } else if (tn === $.TABLE || tn === $.TBODY || tn === $.TFOOT || tn === $.THEAD || tn === $.TR) {\n        if (p.openElements.hasInTableScope(tn)) {\n            p._closeTableCell();\n            p._processToken(token);\n        }\n    } else if (tn !== $.BODY && tn !== $.CAPTION && tn !== $.COL && tn !== $.COLGROUP && tn !== $.HTML) {\n        endTagInBody(p, token);\n    }\n}\n\n// The \"in select\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInSelect(p, token) {\n    const tn = token.tagName;\n\n    if (tn === $.HTML) {\n        startTagInBody(p, token);\n    } else if (tn === $.OPTION) {\n        if (p.openElements.currentTagName === $.OPTION) {\n            p.openElements.pop();\n        }\n\n        p._insertElement(token, NS.HTML);\n    } else if (tn === $.OPTGROUP) {\n        if (p.openElements.currentTagName === $.OPTION) {\n            p.openElements.pop();\n        }\n\n        if (p.openElements.currentTagName === $.OPTGROUP) {\n            p.openElements.pop();\n        }\n\n        p._insertElement(token, NS.HTML);\n    } else if (tn === $.INPUT || tn === $.KEYGEN || tn === $.TEXTAREA || tn === $.SELECT) {\n        if (p.openElements.hasInSelectScope($.SELECT)) {\n            p.openElements.popUntilTagNamePopped($.SELECT);\n            p._resetInsertionMode();\n\n            if (tn !== $.SELECT) {\n                p._processToken(token);\n            }\n        }\n    } else if (tn === $.SCRIPT || tn === $.TEMPLATE) {\n        startTagInHead(p, token);\n    }\n}\n\nfunction endTagInSelect(p, token) {\n    const tn = token.tagName;\n\n    if (tn === $.OPTGROUP) {\n        const prevOpenElement = p.openElements.items[p.openElements.stackTop - 1];\n        const prevOpenElementTn = prevOpenElement && p.treeAdapter.getTagName(prevOpenElement);\n\n        if (p.openElements.currentTagName === $.OPTION && prevOpenElementTn === $.OPTGROUP) {\n            p.openElements.pop();\n        }\n\n        if (p.openElements.currentTagName === $.OPTGROUP) {\n            p.openElements.pop();\n        }\n    } else if (tn === $.OPTION) {\n        if (p.openElements.currentTagName === $.OPTION) {\n            p.openElements.pop();\n        }\n    } else if (tn === $.SELECT && p.openElements.hasInSelectScope($.SELECT)) {\n        p.openElements.popUntilTagNamePopped($.SELECT);\n        p._resetInsertionMode();\n    } else if (tn === $.TEMPLATE) {\n        endTagInHead(p, token);\n    }\n}\n\n//12.2.5.4.17 The \"in select in table\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInSelectInTable(p, token) {\n    const tn = token.tagName;\n\n    if (\n        tn === $.CAPTION ||\n        tn === $.TABLE ||\n        tn === $.TBODY ||\n        tn === $.TFOOT ||\n        tn === $.THEAD ||\n        tn === $.TR ||\n        tn === $.TD ||\n        tn === $.TH\n    ) {\n        p.openElements.popUntilTagNamePopped($.SELECT);\n        p._resetInsertionMode();\n        p._processToken(token);\n    } else {\n        startTagInSelect(p, token);\n    }\n}\n\nfunction endTagInSelectInTable(p, token) {\n    const tn = token.tagName;\n\n    if (\n        tn === $.CAPTION ||\n        tn === $.TABLE ||\n        tn === $.TBODY ||\n        tn === $.TFOOT ||\n        tn === $.THEAD ||\n        tn === $.TR ||\n        tn === $.TD ||\n        tn === $.TH\n    ) {\n        if (p.openElements.hasInTableScope(tn)) {\n            p.openElements.popUntilTagNamePopped($.SELECT);\n            p._resetInsertionMode();\n            p._processToken(token);\n        }\n    } else {\n        endTagInSelect(p, token);\n    }\n}\n\n// The \"in template\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInTemplate(p, token) {\n    const tn = token.tagName;\n\n    if (\n        tn === $.BASE ||\n        tn === $.BASEFONT ||\n        tn === $.BGSOUND ||\n        tn === $.LINK ||\n        tn === $.META ||\n        tn === $.NOFRAMES ||\n        tn === $.SCRIPT ||\n        tn === $.STYLE ||\n        tn === $.TEMPLATE ||\n        tn === $.TITLE\n    ) {\n        startTagInHead(p, token);\n    } else {\n        const newInsertionMode = TEMPLATE_INSERTION_MODE_SWITCH_MAP[tn] || IN_BODY_MODE;\n\n        p._popTmplInsertionMode();\n        p._pushTmplInsertionMode(newInsertionMode);\n        p.insertionMode = newInsertionMode;\n        p._processToken(token);\n    }\n}\n\nfunction endTagInTemplate(p, token) {\n    if (token.tagName === $.TEMPLATE) {\n        endTagInHead(p, token);\n    }\n}\n\nfunction eofInTemplate(p, token) {\n    if (p.openElements.tmplCount > 0) {\n        p.openElements.popUntilTagNamePopped($.TEMPLATE);\n        p.activeFormattingElements.clearToLastMarker();\n        p._popTmplInsertionMode();\n        p._resetInsertionMode();\n        p._processToken(token);\n    } else {\n        p.stopped = true;\n    }\n}\n\n// The \"after body\" insertion mode\n//------------------------------------------------------------------\nfunction startTagAfterBody(p, token) {\n    if (token.tagName === $.HTML) {\n        startTagInBody(p, token);\n    } else {\n        tokenAfterBody(p, token);\n    }\n}\n\nfunction endTagAfterBody(p, token) {\n    if (token.tagName === $.HTML) {\n        if (!p.fragmentContext) {\n            p.insertionMode = AFTER_AFTER_BODY_MODE;\n        }\n    } else {\n        tokenAfterBody(p, token);\n    }\n}\n\nfunction tokenAfterBody(p, token) {\n    p.insertionMode = IN_BODY_MODE;\n    p._processToken(token);\n}\n\n// The \"in frameset\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInFrameset(p, token) {\n    const tn = token.tagName;\n\n    if (tn === $.HTML) {\n        startTagInBody(p, token);\n    } else if (tn === $.FRAMESET) {\n        p._insertElement(token, NS.HTML);\n    } else if (tn === $.FRAME) {\n        p._appendElement(token, NS.HTML);\n        token.ackSelfClosing = true;\n    } else if (tn === $.NOFRAMES) {\n        startTagInHead(p, token);\n    }\n}\n\nfunction endTagInFrameset(p, token) {\n    if (token.tagName === $.FRAMESET && !p.openElements.isRootHtmlElementCurrent()) {\n        p.openElements.pop();\n\n        if (!p.fragmentContext && p.openElements.currentTagName !== $.FRAMESET) {\n            p.insertionMode = AFTER_FRAMESET_MODE;\n        }\n    }\n}\n\n// The \"after frameset\" insertion mode\n//------------------------------------------------------------------\nfunction startTagAfterFrameset(p, token) {\n    const tn = token.tagName;\n\n    if (tn === $.HTML) {\n        startTagInBody(p, token);\n    } else if (tn === $.NOFRAMES) {\n        startTagInHead(p, token);\n    }\n}\n\nfunction endTagAfterFrameset(p, token) {\n    if (token.tagName === $.HTML) {\n        p.insertionMode = AFTER_AFTER_FRAMESET_MODE;\n    }\n}\n\n// The \"after after body\" insertion mode\n//------------------------------------------------------------------\nfunction startTagAfterAfterBody(p, token) {\n    if (token.tagName === $.HTML) {\n        startTagInBody(p, token);\n    } else {\n        tokenAfterAfterBody(p, token);\n    }\n}\n\nfunction tokenAfterAfterBody(p, token) {\n    p.insertionMode = IN_BODY_MODE;\n    p._processToken(token);\n}\n\n// The \"after after frameset\" insertion mode\n//------------------------------------------------------------------\nfunction startTagAfterAfterFrameset(p, token) {\n    const tn = token.tagName;\n\n    if (tn === $.HTML) {\n        startTagInBody(p, token);\n    } else if (tn === $.NOFRAMES) {\n        startTagInHead(p, token);\n    }\n}\n\n// The rules for parsing tokens in foreign content\n//------------------------------------------------------------------\nfunction nullCharacterInForeignContent(p, token) {\n    token.chars = unicode.REPLACEMENT_CHARACTER;\n    p._insertCharacters(token);\n}\n\nfunction characterInForeignContent(p, token) {\n    p._insertCharacters(token);\n    p.framesetOk = false;\n}\n\nfunction startTagInForeignContent(p, token) {\n    if (foreignContent.causesExit(token) && !p.fragmentContext) {\n        while (\n            p.treeAdapter.getNamespaceURI(p.openElements.current) !== NS.HTML &&\n            !p._isIntegrationPoint(p.openElements.current)\n        ) {\n            p.openElements.pop();\n        }\n\n        p._processToken(token);\n    } else {\n        const current = p._getAdjustedCurrentElement();\n        const currentNs = p.treeAdapter.getNamespaceURI(current);\n\n        if (currentNs === NS.MATHML) {\n            foreignContent.adjustTokenMathMLAttrs(token);\n        } else if (currentNs === NS.SVG) {\n            foreignContent.adjustTokenSVGTagName(token);\n            foreignContent.adjustTokenSVGAttrs(token);\n        }\n\n        foreignContent.adjustTokenXMLAttrs(token);\n\n        if (token.selfClosing) {\n            p._appendElement(token, currentNs);\n        } else {\n            p._insertElement(token, currentNs);\n        }\n\n        token.ackSelfClosing = true;\n    }\n}\n\nfunction endTagInForeignContent(p, token) {\n    for (let i = p.openElements.stackTop; i > 0; i--) {\n        const element = p.openElements.items[i];\n\n        if (p.treeAdapter.getNamespaceURI(element) === NS.HTML) {\n            p._processToken(token);\n            break;\n        }\n\n        if (p.treeAdapter.getTagName(element).toLowerCase() === token.tagName) {\n            p.openElements.popUntilElementPopped(element);\n            break;\n        }\n    }\n}\n"],"mappings":"AAAA,YAAY;;AAAC,IAAAA,eAAA,GAAAC,OAAA;AAAA,IAAAC,YAAA,GAAAD,OAAA;AAAA,IAAAE,eAAA,GAAAF,OAAA;AAAA,IAAAG,eAAA;AAAAH,OAAA;AAAAA,OAAA;AAAAA,OAAA;AAAAA,OAAA;AAAAA,OAAA;AAAAA,OAAA;AAAAA,OAAA;AAEb,IAAMI,SAAS,GAAGJ,OAAO,CAAC,cAAc,CAAC;AACzC,IAAMK,gBAAgB,GAAGL,OAAO,CAAC,sBAAsB,CAAC;AACxD,IAAMM,qBAAqB,GAAGN,OAAO,CAAC,2BAA2B,CAAC;AAClE,IAAMO,uBAAuB,GAAGP,OAAO,CAAC,0CAA0C,CAAC;AACnF,IAAMQ,yBAAyB,GAAGR,OAAO,CAAC,4CAA4C,CAAC;AACvF,IAAMS,KAAK,GAAGT,OAAO,CAAC,gBAAgB,CAAC;AACvC,IAAMU,kBAAkB,GAAGV,OAAO,CAAC,0BAA0B,CAAC;AAC9D,IAAMW,YAAY,GAAGX,OAAO,CAAC,wBAAwB,CAAC;AACtD,IAAMY,OAAO,GAAGZ,OAAO,CAAC,mBAAmB,CAAC;AAC5C,IAAMa,cAAc,GAAGb,OAAO,CAAC,2BAA2B,CAAC;AAC3D,IAAMc,GAAG,GAAGd,OAAO,CAAC,uBAAuB,CAAC;AAC5C,IAAMe,OAAO,GAAGf,OAAO,CAAC,mBAAmB,CAAC;AAC5C,IAAMgB,IAAI,GAAGhB,OAAO,CAAC,gBAAgB,CAAC;;AAEtC;AACA,IAAMiB,CAAC,GAAGD,IAAI,CAACE,SAAS;AACxB,IAAMC,EAAE,GAAGH,IAAI,CAACI,UAAU;AAC1B,IAAMC,KAAK,GAAGL,IAAI,CAACK,KAAK;AAExB,IAAMC,eAAe,GAAG;EACpBC,gBAAgB,EAAE,IAAI;EACtBC,sBAAsB,EAAE,KAAK;EAC7BC,YAAY,EAAE,IAAI;EAClBC,WAAW,EAAEhB;AACjB,CAAC;;AAED;AACA,IAAMiB,iBAAiB,GAAG,QAAQ;;AAElC;AACA,IAAMC,kBAAkB,GAAG,CAAC;AAC5B,IAAMC,kBAAkB,GAAG,CAAC;;AAE5B;AACA,IAAMC,YAAY,GAAG,cAAc;AACnC,IAAMC,gBAAgB,GAAG,kBAAkB;AAC3C,IAAMC,gBAAgB,GAAG,kBAAkB;AAC3C,IAAMC,YAAY,GAAG,cAAc;AACnC,IAAMC,sBAAsB,GAAG,wBAAwB;AACvD,IAAMC,eAAe,GAAG,iBAAiB;AACzC,IAAMC,YAAY,GAAG,cAAc;AACnC,IAAMC,SAAS,GAAG,WAAW;AAC7B,IAAMC,aAAa,GAAG,eAAe;AACrC,IAAMC,kBAAkB,GAAG,oBAAoB;AAC/C,IAAMC,eAAe,GAAG,iBAAiB;AACzC,IAAMC,oBAAoB,GAAG,sBAAsB;AACnD,IAAMC,kBAAkB,GAAG,oBAAoB;AAC/C,IAAMC,WAAW,GAAG,aAAa;AACjC,IAAMC,YAAY,GAAG,cAAc;AACnC,IAAMC,cAAc,GAAG,gBAAgB;AACvC,IAAMC,uBAAuB,GAAG,yBAAyB;AACzD,IAAMC,gBAAgB,GAAG,kBAAkB;AAC3C,IAAMC,eAAe,GAAG,iBAAiB;AACzC,IAAMC,gBAAgB,GAAG,kBAAkB;AAC3C,IAAMC,mBAAmB,GAAG,qBAAqB;AACjD,IAAMC,qBAAqB,GAAG,uBAAuB;AACrD,IAAMC,yBAAyB,GAAG,2BAA2B;;AAE7D;AACA,IAAMC,wBAAwB,GAAAnD,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,KACzBe,CAAC,CAACqC,EAAE,EAAGX,WAAW,GAClB1B,CAAC,CAACsC,KAAK,EAAGb,kBAAkB,GAC5BzB,CAAC,CAACuC,KAAK,EAAGd,kBAAkB,GAC5BzB,CAAC,CAACwC,KAAK,EAAGf,kBAAkB,GAC5BzB,CAAC,CAACyC,OAAO,EAAGlB,eAAe,GAC3BvB,CAAC,CAAC0C,QAAQ,EAAGlB,oBAAoB,GACjCxB,CAAC,CAAC2C,KAAK,EAAGtB,aAAa,GACvBrB,CAAC,CAAC4C,IAAI,EAAGzB,YAAY,GACrBnB,CAAC,CAAC6C,QAAQ,EAAGb,gBAAgB,CACjC;;AAED;AACA,IAAMc,kCAAkC,GAAA7D,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,KACnCe,CAAC,CAACyC,OAAO,EAAGpB,aAAa,GACzBrB,CAAC,CAAC0C,QAAQ,EAAGrB,aAAa,GAC1BrB,CAAC,CAACsC,KAAK,EAAGjB,aAAa,GACvBrB,CAAC,CAACwC,KAAK,EAAGnB,aAAa,GACvBrB,CAAC,CAACuC,KAAK,EAAGlB,aAAa,GACvBrB,CAAC,CAAC+C,GAAG,EAAGvB,oBAAoB,GAC5BxB,CAAC,CAACqC,EAAE,EAAGZ,kBAAkB,GACzBzB,CAAC,CAACgD,EAAE,EAAGtB,WAAW,GAClB1B,CAAC,CAACiD,EAAE,EAAGvB,WAAW,CACtB;;AAED;AACA,IAAMwB,cAAc,IAAAhE,eAAA,OAAAD,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAC,eAAA,EACf2B,YAAY,EAAA5B,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,KACRE,SAAS,CAACgE,eAAe,EAAGC,kBAAkB,GAC9CjE,SAAS,CAACkE,oBAAoB,EAAGD,kBAAkB,GACnDjE,SAAS,CAACmE,0BAA0B,EAAGC,WAAW,GAClDpE,SAAS,CAACqE,aAAa,EAAGC,aAAa,GACvCtE,SAAS,CAACuE,aAAa,EAAGC,oBAAoB,GAC9CxE,SAAS,CAACyE,eAAe,EAAGR,kBAAkB,GAC9CjE,SAAS,CAAC0E,aAAa,EAAGT,kBAAkB,GAC5CjE,SAAS,CAAC2E,SAAS,EAAGV,kBAAkB,IAE5CtC,gBAAgB,EAAA7B,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,KACZE,SAAS,CAACgE,eAAe,EAAGY,eAAe,GAC3C5E,SAAS,CAACkE,oBAAoB,EAAGU,eAAe,GAChD5E,SAAS,CAACmE,0BAA0B,EAAGC,WAAW,GAClDpE,SAAS,CAACqE,aAAa,EAAGC,aAAa,GACvCtE,SAAS,CAACuE,aAAa,EAAGH,WAAW,GACrCpE,SAAS,CAACyE,eAAe,EAAGI,kBAAkB,GAC9C7E,SAAS,CAAC0E,aAAa,EAAGI,gBAAgB,GAC1C9E,SAAS,CAAC2E,SAAS,EAAGC,eAAe,IAEzChD,gBAAgB,EAAA9B,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,KACZE,SAAS,CAACgE,eAAe,EAAGe,eAAe,GAC3C/E,SAAS,CAACkE,oBAAoB,EAAGa,eAAe,GAChD/E,SAAS,CAACmE,0BAA0B,EAAGC,WAAW,GAClDpE,SAAS,CAACqE,aAAa,EAAGC,aAAa,GACvCtE,SAAS,CAACuE,aAAa,EAAGS,gBAAgB,GAC1ChF,SAAS,CAACyE,eAAe,EAAGQ,kBAAkB,GAC9CjF,SAAS,CAAC0E,aAAa,EAAGQ,gBAAgB,GAC1ClF,SAAS,CAAC2E,SAAS,EAAGI,eAAe,IAEzClD,YAAY,EAAA/B,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,KACRE,SAAS,CAACgE,eAAe,EAAGmB,WAAW,GACvCnF,SAAS,CAACkE,oBAAoB,EAAGiB,WAAW,GAC5CnF,SAAS,CAACmE,0BAA0B,EAAGiB,gBAAgB,GACvDpF,SAAS,CAACqE,aAAa,EAAGC,aAAa,GACvCtE,SAAS,CAACuE,aAAa,EAAGS,gBAAgB,GAC1ChF,SAAS,CAACyE,eAAe,EAAGY,cAAc,GAC1CrF,SAAS,CAAC0E,aAAa,EAAGY,YAAY,GACtCtF,SAAS,CAAC2E,SAAS,EAAGQ,WAAW,IAErCrD,sBAAsB,EAAAhC,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,KAClBE,SAAS,CAACgE,eAAe,EAAGuB,mBAAmB,GAC/CvF,SAAS,CAACkE,oBAAoB,EAAGqB,mBAAmB,GACpDvF,SAAS,CAACmE,0BAA0B,EAAGiB,gBAAgB,GACvDpF,SAAS,CAACqE,aAAa,EAAGC,aAAa,GACvCtE,SAAS,CAACuE,aAAa,EAAGS,gBAAgB,GAC1ChF,SAAS,CAACyE,eAAe,EAAGe,sBAAsB,GAClDxF,SAAS,CAAC0E,aAAa,EAAGe,oBAAoB,GAC9CzF,SAAS,CAAC2E,SAAS,EAAGY,mBAAmB,IAE7CxD,eAAe,EAAAjC,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,KACXE,SAAS,CAACgE,eAAe,EAAG0B,cAAc,GAC1C1F,SAAS,CAACkE,oBAAoB,EAAGwB,cAAc,GAC/C1F,SAAS,CAACmE,0BAA0B,EAAGiB,gBAAgB,GACvDpF,SAAS,CAACqE,aAAa,EAAGC,aAAa,GACvCtE,SAAS,CAACuE,aAAa,EAAGS,gBAAgB,GAC1ChF,SAAS,CAACyE,eAAe,EAAGkB,iBAAiB,GAC7C3F,SAAS,CAAC0E,aAAa,EAAGkB,eAAe,GACzC5F,SAAS,CAAC2E,SAAS,EAAGe,cAAc,IAExC1D,YAAY,EAAAlC,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,KACRE,SAAS,CAACgE,eAAe,EAAG6B,eAAe,GAC3C7F,SAAS,CAACkE,oBAAoB,EAAGE,WAAW,GAC5CpE,SAAS,CAACmE,0BAA0B,EAAG2B,yBAAyB,GAChE9F,SAAS,CAACqE,aAAa,EAAGC,aAAa,GACvCtE,SAAS,CAACuE,aAAa,EAAGH,WAAW,GACrCpE,SAAS,CAACyE,eAAe,EAAGsB,cAAc,GAC1C/F,SAAS,CAAC0E,aAAa,EAAGsB,YAAY,GACtChG,SAAS,CAAC2E,SAAS,EAAGsB,SAAS,IAEnChE,SAAS,EAAAnC,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,KACLE,SAAS,CAACgE,eAAe,EAAGoB,gBAAgB,GAC5CpF,SAAS,CAACkE,oBAAoB,EAAGkB,gBAAgB,GACjDpF,SAAS,CAACmE,0BAA0B,EAAGiB,gBAAgB,GACvDpF,SAAS,CAACqE,aAAa,EAAGD,WAAW,GACrCpE,SAAS,CAACuE,aAAa,EAAGH,WAAW,GACrCpE,SAAS,CAACyE,eAAe,EAAGL,WAAW,GACvCpE,SAAS,CAAC0E,aAAa,EAAGwB,YAAY,GACtClG,SAAS,CAAC2E,SAAS,EAAGwB,SAAS,IAEnCjE,aAAa,EAAApC,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,KACTE,SAAS,CAACgE,eAAe,EAAGoC,gBAAgB,GAC5CpG,SAAS,CAACkE,oBAAoB,EAAGkC,gBAAgB,GACjDpG,SAAS,CAACmE,0BAA0B,EAAGiC,gBAAgB,GACvDpG,SAAS,CAACqE,aAAa,EAAGC,aAAa,GACvCtE,SAAS,CAACuE,aAAa,EAAGH,WAAW,GACrCpE,SAAS,CAACyE,eAAe,EAAG4B,eAAe,GAC3CrG,SAAS,CAAC0E,aAAa,EAAG4B,aAAa,GACvCtG,SAAS,CAAC2E,SAAS,EAAGsB,SAAS,IAEnC9D,kBAAkB,EAAArC,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,KACdE,SAAS,CAACgE,eAAe,EAAGuC,oBAAoB,GAChDvG,SAAS,CAACkE,oBAAoB,EAAGE,WAAW,GAC5CpE,SAAS,CAACmE,0BAA0B,EAAGqC,8BAA8B,GACrExG,SAAS,CAACqE,aAAa,EAAGoC,gBAAgB,GAC1CzG,SAAS,CAACuE,aAAa,EAAGkC,gBAAgB,GAC1CzG,SAAS,CAACyE,eAAe,EAAGgC,gBAAgB,GAC5CzG,SAAS,CAAC0E,aAAa,EAAG+B,gBAAgB,GAC1CzG,SAAS,CAAC2E,SAAS,EAAG8B,gBAAgB,IAAA3G,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAC,eAAA,EAE1CqC,eAAe,EAAAtC,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,KACXE,SAAS,CAACgE,eAAe,EAAG6B,eAAe,GAC3C7F,SAAS,CAACkE,oBAAoB,EAAGE,WAAW,GAC5CpE,SAAS,CAACmE,0BAA0B,EAAG2B,yBAAyB,GAChE9F,SAAS,CAACqE,aAAa,EAAGC,aAAa,GACvCtE,SAAS,CAACuE,aAAa,EAAGH,WAAW,GACrCpE,SAAS,CAACyE,eAAe,EAAGiC,iBAAiB,GAC7C1G,SAAS,CAAC0E,aAAa,EAAGiC,eAAe,GACzC3G,SAAS,CAAC2E,SAAS,EAAGsB,SAAS,IAEnC5D,oBAAoB,EAAAvC,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,KAChBE,SAAS,CAACgE,eAAe,EAAG4C,kBAAkB,GAC9C5G,SAAS,CAACkE,oBAAoB,EAAG0C,kBAAkB,GACnD5G,SAAS,CAACmE,0BAA0B,EAAGiB,gBAAgB,GACvDpF,SAAS,CAACqE,aAAa,EAAGC,aAAa,GACvCtE,SAAS,CAACuE,aAAa,EAAGH,WAAW,GACrCpE,SAAS,CAACyE,eAAe,EAAGoC,qBAAqB,GACjD7G,SAAS,CAAC0E,aAAa,EAAGoC,mBAAmB,GAC7C9G,SAAS,CAAC2E,SAAS,EAAGsB,SAAS,IAEnC3D,kBAAkB,EAAAxC,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,KACdE,SAAS,CAACgE,eAAe,EAAGoC,gBAAgB,GAC5CpG,SAAS,CAACkE,oBAAoB,EAAGkC,gBAAgB,GACjDpG,SAAS,CAACmE,0BAA0B,EAAGiC,gBAAgB,GACvDpG,SAAS,CAACqE,aAAa,EAAGC,aAAa,GACvCtE,SAAS,CAACuE,aAAa,EAAGH,WAAW,GACrCpE,SAAS,CAACyE,eAAe,EAAGsC,mBAAmB,GAC/C/G,SAAS,CAAC0E,aAAa,EAAGsC,iBAAiB,GAC3ChH,SAAS,CAAC2E,SAAS,EAAGsB,SAAS,IAEnC1D,WAAW,EAAAzC,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,KACPE,SAAS,CAACgE,eAAe,EAAGoC,gBAAgB,GAC5CpG,SAAS,CAACkE,oBAAoB,EAAGkC,gBAAgB,GACjDpG,SAAS,CAACmE,0BAA0B,EAAGiC,gBAAgB,GACvDpG,SAAS,CAACqE,aAAa,EAAGC,aAAa,GACvCtE,SAAS,CAACuE,aAAa,EAAGH,WAAW,GACrCpE,SAAS,CAACyE,eAAe,EAAGwC,aAAa,GACzCjH,SAAS,CAAC0E,aAAa,EAAGwC,WAAW,GACrClH,SAAS,CAAC2E,SAAS,EAAGsB,SAAS,IAEnCzD,YAAY,EAAA1C,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,KACRE,SAAS,CAACgE,eAAe,EAAG6B,eAAe,GAC3C7F,SAAS,CAACkE,oBAAoB,EAAGE,WAAW,GAC5CpE,SAAS,CAACmE,0BAA0B,EAAG2B,yBAAyB,GAChE9F,SAAS,CAACqE,aAAa,EAAGC,aAAa,GACvCtE,SAAS,CAACuE,aAAa,EAAGH,WAAW,GACrCpE,SAAS,CAACyE,eAAe,EAAG0C,cAAc,GAC1CnH,SAAS,CAAC0E,aAAa,EAAG0C,YAAY,GACtCpH,SAAS,CAAC2E,SAAS,EAAGsB,SAAS,IAEnCxD,cAAc,EAAA3C,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,KACVE,SAAS,CAACgE,eAAe,EAAGoB,gBAAgB,GAC5CpF,SAAS,CAACkE,oBAAoB,EAAGE,WAAW,GAC5CpE,SAAS,CAACmE,0BAA0B,EAAGiB,gBAAgB,GACvDpF,SAAS,CAACqE,aAAa,EAAGC,aAAa,GACvCtE,SAAS,CAACuE,aAAa,EAAGH,WAAW,GACrCpE,SAAS,CAACyE,eAAe,EAAG4C,gBAAgB,GAC5CrH,SAAS,CAAC0E,aAAa,EAAG4C,cAAc,GACxCtH,SAAS,CAAC2E,SAAS,EAAGsB,SAAS,IAEnCvD,uBAAuB,EAAA5C,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,KACnBE,SAAS,CAACgE,eAAe,EAAGoB,gBAAgB,GAC5CpF,SAAS,CAACkE,oBAAoB,EAAGE,WAAW,GAC5CpE,SAAS,CAACmE,0BAA0B,EAAGiB,gBAAgB,GACvDpF,SAAS,CAACqE,aAAa,EAAGC,aAAa,GACvCtE,SAAS,CAACuE,aAAa,EAAGH,WAAW,GACrCpE,SAAS,CAACyE,eAAe,EAAG8C,uBAAuB,GACnDvH,SAAS,CAAC0E,aAAa,EAAG8C,qBAAqB,GAC/CxH,SAAS,CAAC2E,SAAS,EAAGsB,SAAS,IAEnCtD,gBAAgB,EAAA7C,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,KACZE,SAAS,CAACgE,eAAe,EAAG6B,eAAe,GAC3C7F,SAAS,CAACkE,oBAAoB,EAAGE,WAAW,GAC5CpE,SAAS,CAACmE,0BAA0B,EAAG2B,yBAAyB,GAChE9F,SAAS,CAACqE,aAAa,EAAGC,aAAa,GACvCtE,SAAS,CAACuE,aAAa,EAAGH,WAAW,GACrCpE,SAAS,CAACyE,eAAe,EAAGgD,kBAAkB,GAC9CzH,SAAS,CAAC0E,aAAa,EAAGgD,gBAAgB,GAC1C1H,SAAS,CAAC2E,SAAS,EAAGgD,aAAa,IAEvC/E,eAAe,EAAA9C,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,KACXE,SAAS,CAACgE,eAAe,EAAG4D,cAAc,GAC1C5H,SAAS,CAACkE,oBAAoB,EAAG0D,cAAc,GAC/C5H,SAAS,CAACmE,0BAA0B,EAAG2B,yBAAyB,GAChE9F,SAAS,CAACqE,aAAa,EAAGwD,8BAA8B,GACxD7H,SAAS,CAACuE,aAAa,EAAGH,WAAW,GACrCpE,SAAS,CAACyE,eAAe,EAAGqD,iBAAiB,GAC7C9H,SAAS,CAAC0E,aAAa,EAAGqD,eAAe,GACzC/H,SAAS,CAAC2E,SAAS,EAAGqD,WAAW,IAErCnF,gBAAgB,EAAA/C,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,KACZE,SAAS,CAACgE,eAAe,EAAGI,WAAW,GACvCpE,SAAS,CAACkE,oBAAoB,EAAGE,WAAW,GAC5CpE,SAAS,CAACmE,0BAA0B,EAAGiB,gBAAgB,GACvDpF,SAAS,CAACqE,aAAa,EAAGC,aAAa,GACvCtE,SAAS,CAACuE,aAAa,EAAGH,WAAW,GACrCpE,SAAS,CAACyE,eAAe,EAAGwD,kBAAkB,GAC9CjI,SAAS,CAAC0E,aAAa,EAAGwD,gBAAgB,GAC1ClI,SAAS,CAAC2E,SAAS,EAAGqD,WAAW,IAAAlI,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAC,eAAA,EAErC+C,mBAAmB,EAAAhD,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,KACfE,SAAS,CAACgE,eAAe,EAAGI,WAAW,GACvCpE,SAAS,CAACkE,oBAAoB,EAAGE,WAAW,GAC5CpE,SAAS,CAACmE,0BAA0B,EAAGiB,gBAAgB,GACvDpF,SAAS,CAACqE,aAAa,EAAGC,aAAa,GACvCtE,SAAS,CAACuE,aAAa,EAAGH,WAAW,GACrCpE,SAAS,CAACyE,eAAe,EAAG0D,qBAAqB,GACjDnI,SAAS,CAAC0E,aAAa,EAAG0D,mBAAmB,GAC7CpI,SAAS,CAAC2E,SAAS,EAAGqD,WAAW,IAErCjF,qBAAqB,EAAAjD,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,KACjBE,SAAS,CAACgE,eAAe,EAAGqE,mBAAmB,GAC/CrI,SAAS,CAACkE,oBAAoB,EAAGmE,mBAAmB,GACpDrI,SAAS,CAACmE,0BAA0B,EAAG2B,yBAAyB,GAChE9F,SAAS,CAACqE,aAAa,EAAGiE,uBAAuB,GACjDtI,SAAS,CAACuE,aAAa,EAAGH,WAAW,GACrCpE,SAAS,CAACyE,eAAe,EAAG8D,sBAAsB,GAClDvI,SAAS,CAAC0E,aAAa,EAAG2D,mBAAmB,GAC7CrI,SAAS,CAAC2E,SAAS,EAAGqD,WAAW,IAErChF,yBAAyB,EAAAlD,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,CAAAA,eAAA,KACrBE,SAAS,CAACgE,eAAe,EAAGI,WAAW,GACvCpE,SAAS,CAACkE,oBAAoB,EAAGE,WAAW,GAC5CpE,SAAS,CAACmE,0BAA0B,EAAG2B,yBAAyB,GAChE9F,SAAS,CAACqE,aAAa,EAAGiE,uBAAuB,GACjDtI,SAAS,CAACuE,aAAa,EAAGH,WAAW,GACrCpE,SAAS,CAACyE,eAAe,EAAG+D,0BAA0B,GACtDxI,SAAS,CAAC0E,aAAa,EAAGN,WAAW,GACrCpE,SAAS,CAAC2E,SAAS,EAAGqD,WAAW,GAEzC;;AAED;AAAA,IACMS,MAAM;EACR,SAAAA,OAAYC,OAAO,EAAE;IAAA/I,eAAA,OAAA8I,MAAA;IACjB,IAAI,CAACC,OAAO,GAAGnI,YAAY,CAACW,eAAe,EAAEwH,OAAO,CAAC;IAErD,IAAI,CAACpH,WAAW,GAAG,IAAI,CAACoH,OAAO,CAACpH,WAAW;IAC3C,IAAI,CAACqH,aAAa,GAAG,IAAI;IAEzB,IAAI,IAAI,CAACD,OAAO,CAACtH,sBAAsB,EAAE;MACrCf,KAAK,CAACuI,OAAO,CAAC,IAAI,EAAEzI,uBAAuB,CAAC;IAChD;IAEA,IAAI,IAAI,CAACuI,OAAO,CAACrH,YAAY,EAAE;MAC3BhB,KAAK,CAACuI,OAAO,CAAC,IAAI,EAAExI,yBAAyB,EAAE;QAAEiB,YAAY,EAAE,IAAI,CAACqH,OAAO,CAACrH;MAAa,CAAC,CAAC;IAC/F;EACJ;;EAEA;EAAA,OAAAxB,YAAA,CAAA4I,MAAA;IAAAI,GAAA;IAAAC,KAAA,EACA,SAAAC,MAAMC,IAAI,EAAE;MACR,IAAMC,QAAQ,GAAG,IAAI,CAAC3H,WAAW,CAAC4H,cAAc,CAAC,CAAC;MAElD,IAAI,CAACC,UAAU,CAACF,QAAQ,EAAE,IAAI,CAAC;MAC/B,IAAI,CAACG,SAAS,CAACC,KAAK,CAACL,IAAI,EAAE,IAAI,CAAC;MAChC,IAAI,CAACM,eAAe,CAAC,IAAI,CAAC;MAE1B,OAAOL,QAAQ;IACnB;EAAC;IAAAJ,GAAA;IAAAC,KAAA,EAED,SAAAS,cAAcP,IAAI,EAAEQ,eAAe,EAAE;MACjC;MACA;MACA,IAAI,CAACA,eAAe,EAAE;QAClBA,eAAe,GAAG,IAAI,CAAClI,WAAW,CAACmI,aAAa,CAAC5I,CAAC,CAAC6I,QAAQ,EAAE3I,EAAE,CAACH,IAAI,EAAE,EAAE,CAAC;MAC7E;;MAEA;MACA;MACA;MACA,IAAM+I,YAAY,GAAG,IAAI,CAACrI,WAAW,CAACmI,aAAa,CAAC,cAAc,EAAE1I,EAAE,CAACH,IAAI,EAAE,EAAE,CAAC;MAEhF,IAAI,CAACuI,UAAU,CAACQ,YAAY,EAAEH,eAAe,CAAC;MAE9C,IAAI,IAAI,CAAClI,WAAW,CAACsI,UAAU,CAACJ,eAAe,CAAC,KAAK3I,CAAC,CAAC6I,QAAQ,EAAE;QAC7D,IAAI,CAACG,sBAAsB,CAAClH,gBAAgB,CAAC;MACjD;MAEA,IAAI,CAACmH,gCAAgC,CAAC,CAAC;MACvC,IAAI,CAACC,sBAAsB,CAAC,CAAC;MAC7B,IAAI,CAACC,mBAAmB,CAAC,CAAC;MAC1B,IAAI,CAACC,0BAA0B,CAAC,CAAC;MACjC,IAAI,CAACb,SAAS,CAACC,KAAK,CAACL,IAAI,EAAE,IAAI,CAAC;MAChC,IAAI,CAACM,eAAe,CAAC,IAAI,CAAC;MAE1B,IAAMY,WAAW,GAAG,IAAI,CAAC5I,WAAW,CAAC6I,aAAa,CAACR,YAAY,CAAC;MAChE,IAAMS,QAAQ,GAAG,IAAI,CAAC9I,WAAW,CAAC+I,sBAAsB,CAAC,CAAC;MAE1D,IAAI,CAACC,WAAW,CAACJ,WAAW,EAAEE,QAAQ,CAAC;MAEvC,OAAOA,QAAQ;IACnB;;IAEA;EAAA;IAAAvB,GAAA;IAAAC,KAAA,EACA,SAAAK,WAAWF,QAAQ,EAAEO,eAAe,EAAE;MAClC,IAAI,CAACJ,SAAS,GAAG,IAAIpJ,SAAS,CAAC,IAAI,CAAC0I,OAAO,CAAC;MAE5C,IAAI,CAAC6B,OAAO,GAAG,KAAK;MAEpB,IAAI,CAACC,aAAa,GAAG9I,YAAY;MACjC,IAAI,CAAC+I,qBAAqB,GAAG,EAAE;MAE/B,IAAI,CAACxB,QAAQ,GAAGA,QAAQ;MACxB,IAAI,CAACO,eAAe,GAAGA,eAAe;MAEtC,IAAI,CAACkB,WAAW,GAAG,IAAI;MACvB,IAAI,CAACC,WAAW,GAAG,IAAI;MAEvB,IAAI,CAACC,YAAY,GAAG,IAAI3K,gBAAgB,CAAC,IAAI,CAACgJ,QAAQ,EAAE,IAAI,CAAC3H,WAAW,CAAC;MACzE,IAAI,CAACuJ,wBAAwB,GAAG,IAAI3K,qBAAqB,CAAC,IAAI,CAACoB,WAAW,CAAC;MAE3E,IAAI,CAACwJ,sBAAsB,GAAG,EAAE;MAChC,IAAI,CAACC,yBAAyB,GAAG,CAAC,CAAC;MACnC,IAAI,CAACC,wBAAwB,GAAG,IAAI;MAEpC,IAAI,CAACC,sBAAsB,GAAG,EAAE;MAChC,IAAI,CAACC,qCAAqC,GAAG,KAAK;MAElD,IAAI,CAACC,UAAU,GAAG,IAAI;MACtB,IAAI,CAACC,eAAe,GAAG,KAAK;MAC5B,IAAI,CAACC,sBAAsB,GAAG,KAAK;IACvC;;IAEA;EAAA;IAAAxC,GAAA;IAAAC,KAAA,EACA,SAAAwC,KAAA,EAAO;MACH;IAAA;;IAGJ;EAAA;IAAAzC,GAAA;IAAAC,KAAA,EACA,SAAAQ,gBAAgBiC,aAAa,EAAE;MAC3B,OAAO,CAAC,IAAI,CAAChB,OAAO,EAAE;QAClB,IAAI,CAACiB,wBAAwB,CAAC,CAAC;QAE/B,IAAMC,KAAK,GAAG,IAAI,CAACrC,SAAS,CAACsC,YAAY,CAAC,CAAC;QAE3C,IAAID,KAAK,CAACE,IAAI,KAAK3L,SAAS,CAAC4L,iBAAiB,EAAE;UAC5C;QACJ;QAEA,IAAI,IAAI,CAACR,eAAe,EAAE;UACtB,IAAI,CAACA,eAAe,GAAG,KAAK;UAE5B,IAAIK,KAAK,CAACE,IAAI,KAAK3L,SAAS,CAACmE,0BAA0B,IAAIsH,KAAK,CAACI,KAAK,CAAC,CAAC,CAAC,KAAK,IAAI,EAAE;YAChF,IAAIJ,KAAK,CAACI,KAAK,CAACC,MAAM,KAAK,CAAC,EAAE;cAC1B;YACJ;YAEAL,KAAK,CAACI,KAAK,GAAGJ,KAAK,CAACI,KAAK,CAACE,MAAM,CAAC,CAAC,CAAC;UACvC;QACJ;QAEA,IAAI,CAACC,kBAAkB,CAACP,KAAK,CAAC;QAE9B,IAAIF,aAAa,IAAI,IAAI,CAAC5C,aAAa,EAAE;UACrC;QACJ;MACJ;IACJ;EAAC;IAAAE,GAAA;IAAAC,KAAA,EAED,SAAAmD,8BAA8BC,aAAa,EAAEX,aAAa,EAAE;MACxD,IAAI,CAACjC,eAAe,CAACiC,aAAa,CAAC;MAEnC,IAAIA,aAAa,IAAI,IAAI,CAAC5C,aAAa,EAAE;QACrC,IAAMwD,MAAM,GAAG,IAAI,CAACxD,aAAa;QAEjC,IAAI,CAACA,aAAa,GAAG,IAAI;QAEzB4C,aAAa,CAACY,MAAM,CAAC;QAErB;MACJ;MAEA,IAAID,aAAa,EAAE;QACfA,aAAa,CAAC,CAAC;MACnB;IACJ;;IAEA;EAAA;IAAArD,GAAA;IAAAC,KAAA,EACA,SAAA0C,yBAAA,EAA2B;MACvB,IAAMY,OAAO,GAAG,IAAI,CAACC,0BAA0B,CAAC,CAAC;MAEjD,IAAI,CAACjD,SAAS,CAACkD,UAAU,GACrBF,OAAO,IACPA,OAAO,KAAK,IAAI,CAACnD,QAAQ,IACzB,IAAI,CAAC3H,WAAW,CAACiL,eAAe,CAACH,OAAO,CAAC,KAAKrL,EAAE,CAACH,IAAI,IACrD,CAAC,IAAI,CAAC4L,mBAAmB,CAACJ,OAAO,CAAC;IAC1C;EAAC;IAAAvD,GAAA;IAAAC,KAAA,EAED,SAAA2D,qBAAqBC,YAAY,EAAEC,kBAAkB,EAAE;MACnD,IAAI,CAACC,cAAc,CAACF,YAAY,EAAE3L,EAAE,CAACH,IAAI,CAAC;MAC1C,IAAI,CAACwI,SAAS,CAACyD,KAAK,GAAGF,kBAAkB;MACzC,IAAI,CAAClC,qBAAqB,GAAG,IAAI,CAACD,aAAa;MAC/C,IAAI,CAACA,aAAa,GAAGvI,SAAS;IAClC;EAAC;IAAA4G,GAAA;IAAAC,KAAA,EAED,SAAAgE,yBAAA,EAA2B;MACvB,IAAI,CAACtC,aAAa,GAAGvI,SAAS;MAC9B,IAAI,CAACwI,qBAAqB,GAAGzI,YAAY;MACzC,IAAI,CAACoH,SAAS,CAACyD,KAAK,GAAG7M,SAAS,CAAC+M,IAAI,CAACC,SAAS;IACnD;;IAEA;EAAA;IAAAnE,GAAA;IAAAC,KAAA,EACA,SAAAuD,2BAAA,EAA6B;MACzB,OAAO,IAAI,CAACzB,YAAY,CAACqC,QAAQ,KAAK,CAAC,IAAI,IAAI,CAACzD,eAAe,GACzD,IAAI,CAACA,eAAe,GACpB,IAAI,CAACoB,YAAY,CAACwB,OAAO;IACnC;EAAC;IAAAvD,GAAA;IAAAC,KAAA,EAED,SAAAmB,2BAAA,EAA6B;MACzB,IAAIiD,IAAI,GAAG,IAAI,CAAC1D,eAAe;MAE/B,GAAG;QACC,IAAI,IAAI,CAAClI,WAAW,CAACsI,UAAU,CAACsD,IAAI,CAAC,KAAKrM,CAAC,CAACsM,IAAI,EAAE;UAC9C,IAAI,CAACxC,WAAW,GAAGuC,IAAI;UACvB;QACJ;QAEAA,IAAI,GAAG,IAAI,CAAC5L,WAAW,CAAC8L,aAAa,CAACF,IAAI,CAAC;MAC/C,CAAC,QAAQA,IAAI;IACjB;EAAC;IAAArE,GAAA;IAAAC,KAAA,EAED,SAAAgB,iCAAA,EAAmC;MAC/B,IAAI,IAAI,CAACxI,WAAW,CAACiL,eAAe,CAAC,IAAI,CAAC/C,eAAe,CAAC,KAAKzI,EAAE,CAACH,IAAI,EAAE;QACpE,IAAMyM,EAAE,GAAG,IAAI,CAAC/L,WAAW,CAACsI,UAAU,CAAC,IAAI,CAACJ,eAAe,CAAC;QAE5D,IAAI6D,EAAE,KAAKxM,CAAC,CAACyM,KAAK,IAAID,EAAE,KAAKxM,CAAC,CAAC0M,QAAQ,EAAE;UACrC,IAAI,CAACnE,SAAS,CAACyD,KAAK,GAAG7M,SAAS,CAAC+M,IAAI,CAACS,MAAM;QAChD,CAAC,MAAM,IACHH,EAAE,KAAKxM,CAAC,CAAC4M,KAAK,IACdJ,EAAE,KAAKxM,CAAC,CAAC6M,GAAG,IACZL,EAAE,KAAKxM,CAAC,CAAC8M,MAAM,IACfN,EAAE,KAAKxM,CAAC,CAAC+M,OAAO,IAChBP,EAAE,KAAKxM,CAAC,CAACgN,QAAQ,IACjBR,EAAE,KAAKxM,CAAC,CAACiN,QAAQ,EACnB;UACE,IAAI,CAAC1E,SAAS,CAACyD,KAAK,GAAG7M,SAAS,CAAC+M,IAAI,CAACgB,OAAO;QACjD,CAAC,MAAM,IAAIV,EAAE,KAAKxM,CAAC,CAACmN,MAAM,EAAE;UACxB,IAAI,CAAC5E,SAAS,CAACyD,KAAK,GAAG7M,SAAS,CAAC+M,IAAI,CAACkB,WAAW;QACrD,CAAC,MAAM,IAAIZ,EAAE,KAAKxM,CAAC,CAACmM,SAAS,EAAE;UAC3B,IAAI,CAAC5D,SAAS,CAACyD,KAAK,GAAG7M,SAAS,CAAC+M,IAAI,CAACC,SAAS;QACnD;MACJ;IACJ;;IAEA;EAAA;IAAAnE,GAAA;IAAAC,KAAA,EACA,SAAAoF,iBAAiBzC,KAAK,EAAE;MACpB,IAAM0C,IAAI,GAAG1C,KAAK,CAAC0C,IAAI,IAAI,EAAE;MAC7B,IAAMC,QAAQ,GAAG3C,KAAK,CAAC2C,QAAQ,IAAI,EAAE;MACrC,IAAMC,QAAQ,GAAG5C,KAAK,CAAC4C,QAAQ,IAAI,EAAE;MAErC,IAAI,CAAC/M,WAAW,CAACgN,eAAe,CAAC,IAAI,CAACrF,QAAQ,EAAEkF,IAAI,EAAEC,QAAQ,EAAEC,QAAQ,CAAC;IAC7E;EAAC;IAAAxF,GAAA;IAAAC,KAAA,EAED,SAAAyF,qBAAqBC,OAAO,EAAE;MAC1B,IAAI,IAAI,CAACC,8BAA8B,CAAC,CAAC,EAAE;QACvC,IAAI,CAACC,oBAAoB,CAACF,OAAO,CAAC;MACtC,CAAC,MAAM;QACH,IAAMG,MAAM,GAAG,IAAI,CAAC/D,YAAY,CAACgE,kBAAkB,IAAI,IAAI,CAAChE,YAAY,CAACwB,OAAO;QAEhF,IAAI,CAAC9K,WAAW,CAACuN,WAAW,CAACF,MAAM,EAAEH,OAAO,CAAC;MACjD;IACJ;EAAC;IAAA3F,GAAA;IAAAC,KAAA,EAED,SAAAgG,eAAerD,KAAK,EAAEsD,YAAY,EAAE;MAChC,IAAMP,OAAO,GAAG,IAAI,CAAClN,WAAW,CAACmI,aAAa,CAACgC,KAAK,CAACuD,OAAO,EAAED,YAAY,EAAEtD,KAAK,CAACwD,KAAK,CAAC;MAExF,IAAI,CAACV,oBAAoB,CAACC,OAAO,CAAC;IACtC;EAAC;IAAA3F,GAAA;IAAAC,KAAA,EAED,SAAA8D,eAAenB,KAAK,EAAEsD,YAAY,EAAE;MAChC,IAAMP,OAAO,GAAG,IAAI,CAAClN,WAAW,CAACmI,aAAa,CAACgC,KAAK,CAACuD,OAAO,EAAED,YAAY,EAAEtD,KAAK,CAACwD,KAAK,CAAC;MAExF,IAAI,CAACV,oBAAoB,CAACC,OAAO,CAAC;MAClC,IAAI,CAAC5D,YAAY,CAACsE,IAAI,CAACV,OAAO,CAAC;IACnC;EAAC;IAAA3F,GAAA;IAAAC,KAAA,EAED,SAAAqG,mBAAmBH,OAAO,EAAE;MACxB,IAAMR,OAAO,GAAG,IAAI,CAAClN,WAAW,CAACmI,aAAa,CAACuF,OAAO,EAAEjO,EAAE,CAACH,IAAI,EAAE,EAAE,CAAC;MAEpE,IAAI,CAAC2N,oBAAoB,CAACC,OAAO,CAAC;MAClC,IAAI,CAAC5D,YAAY,CAACsE,IAAI,CAACV,OAAO,CAAC;IACnC;EAAC;IAAA3F,GAAA;IAAAC,KAAA,EAED,SAAAsG,gBAAgB3D,KAAK,EAAE;MACnB,IAAM4D,IAAI,GAAG,IAAI,CAAC/N,WAAW,CAACmI,aAAa,CAACgC,KAAK,CAACuD,OAAO,EAAEjO,EAAE,CAACH,IAAI,EAAE6K,KAAK,CAACwD,KAAK,CAAC;MAChF,IAAMK,OAAO,GAAG,IAAI,CAAChO,WAAW,CAAC+I,sBAAsB,CAAC,CAAC;MAEzD,IAAI,CAAC/I,WAAW,CAACiO,kBAAkB,CAACF,IAAI,EAAEC,OAAO,CAAC;MAClD,IAAI,CAACf,oBAAoB,CAACc,IAAI,CAAC;MAC/B,IAAI,CAACzE,YAAY,CAACsE,IAAI,CAACG,IAAI,CAAC;IAChC;EAAC;IAAAxG,GAAA;IAAAC,KAAA,EAED,SAAAiB,uBAAA,EAAyB;MACrB,IAAMyE,OAAO,GAAG,IAAI,CAAClN,WAAW,CAACmI,aAAa,CAAC5I,CAAC,CAACD,IAAI,EAAEG,EAAE,CAACH,IAAI,EAAE,EAAE,CAAC;MAEnE,IAAI,CAACU,WAAW,CAACuN,WAAW,CAAC,IAAI,CAACjE,YAAY,CAACwB,OAAO,EAAEoC,OAAO,CAAC;MAChE,IAAI,CAAC5D,YAAY,CAACsE,IAAI,CAACV,OAAO,CAAC;IACnC;EAAC;IAAA3F,GAAA;IAAAC,KAAA,EAED,SAAA0G,mBAAmB/D,KAAK,EAAEkD,MAAM,EAAE;MAC9B,IAAMc,WAAW,GAAG,IAAI,CAACnO,WAAW,CAACoO,iBAAiB,CAACjE,KAAK,CAACkE,IAAI,CAAC;MAElE,IAAI,CAACrO,WAAW,CAACuN,WAAW,CAACF,MAAM,EAAEc,WAAW,CAAC;IACrD;EAAC;IAAA5G,GAAA;IAAAC,KAAA,EAED,SAAA8G,kBAAkBnE,KAAK,EAAE;MACrB,IAAI,IAAI,CAACgD,8BAA8B,CAAC,CAAC,EAAE;QACvC,IAAI,CAACoB,iBAAiB,CAACpE,KAAK,CAACI,KAAK,CAAC;MACvC,CAAC,MAAM;QACH,IAAM8C,MAAM,GAAG,IAAI,CAAC/D,YAAY,CAACgE,kBAAkB,IAAI,IAAI,CAAChE,YAAY,CAACwB,OAAO;QAEhF,IAAI,CAAC9K,WAAW,CAACwO,UAAU,CAACnB,MAAM,EAAElD,KAAK,CAACI,KAAK,CAAC;MACpD;IACJ;EAAC;IAAAhD,GAAA;IAAAC,KAAA,EAED,SAAAwB,YAAYyF,KAAK,EAAEC,SAAS,EAAE;MAC1B,KAAK,IAAIC,KAAK,GAAG,IAAI,CAAC3O,WAAW,CAAC6I,aAAa,CAAC4F,KAAK,CAAC,EAAEE,KAAK,EAAEA,KAAK,GAAG,IAAI,CAAC3O,WAAW,CAAC6I,aAAa,CAAC4F,KAAK,CAAC,EAAE;QAC1G,IAAI,CAACzO,WAAW,CAAC4O,UAAU,CAACD,KAAK,CAAC;QAClC,IAAI,CAAC3O,WAAW,CAACuN,WAAW,CAACmB,SAAS,EAAEC,KAAK,CAAC;MAClD;IACJ;;IAEA;EAAA;IAAApH,GAAA;IAAAC,KAAA,EACA,SAAAqH,oCAAoC1E,KAAK,EAAE;MACvC,IAAMW,OAAO,GAAG,IAAI,CAACC,0BAA0B,CAAC,CAAC;MAEjD,IAAI,CAACD,OAAO,IAAIA,OAAO,KAAK,IAAI,CAACnD,QAAQ,EAAE;QACvC,OAAO,KAAK;MAChB;MAEA,IAAMmH,EAAE,GAAG,IAAI,CAAC9O,WAAW,CAACiL,eAAe,CAACH,OAAO,CAAC;MAEpD,IAAIgE,EAAE,KAAKrP,EAAE,CAACH,IAAI,EAAE;QAChB,OAAO,KAAK;MAChB;MAEA,IACI,IAAI,CAACU,WAAW,CAACsI,UAAU,CAACwC,OAAO,CAAC,KAAKvL,CAAC,CAACwP,cAAc,IACzDD,EAAE,KAAKrP,EAAE,CAACuP,MAAM,IAChB7E,KAAK,CAACE,IAAI,KAAK3L,SAAS,CAACyE,eAAe,IACxCgH,KAAK,CAACuD,OAAO,KAAKnO,CAAC,CAAC0P,GAAG,EACzB;QACE,OAAO,KAAK;MAChB;MAEA,IAAMC,gBAAgB,GAClB/E,KAAK,CAACE,IAAI,KAAK3L,SAAS,CAACgE,eAAe,IACxCyH,KAAK,CAACE,IAAI,KAAK3L,SAAS,CAACkE,oBAAoB,IAC7CuH,KAAK,CAACE,IAAI,KAAK3L,SAAS,CAACmE,0BAA0B;MAEvD,IAAMsM,oBAAoB,GACtBhF,KAAK,CAACE,IAAI,KAAK3L,SAAS,CAACyE,eAAe,IAAIgH,KAAK,CAACuD,OAAO,KAAKnO,CAAC,CAAC6P,MAAM,IAAIjF,KAAK,CAACuD,OAAO,KAAKnO,CAAC,CAAC8P,UAAU;MAE5G,IAAI,CAACF,oBAAoB,IAAID,gBAAgB,KAAK,IAAI,CAAChE,mBAAmB,CAACJ,OAAO,EAAErL,EAAE,CAACuP,MAAM,CAAC,EAAE;QAC5F,OAAO,KAAK;MAChB;MAEA,IACI,CAAC7E,KAAK,CAACE,IAAI,KAAK3L,SAAS,CAACyE,eAAe,IAAI+L,gBAAgB,KAC7D,IAAI,CAAChE,mBAAmB,CAACJ,OAAO,EAAErL,EAAE,CAACH,IAAI,CAAC,EAC5C;QACE,OAAO,KAAK;MAChB;MAEA,OAAO6K,KAAK,CAACE,IAAI,KAAK3L,SAAS,CAAC2E,SAAS;IAC7C;EAAC;IAAAkE,GAAA;IAAAC,KAAA,EAED,SAAA8H,cAAcnF,KAAK,EAAE;MACjB1H,cAAc,CAAC,IAAI,CAACyG,aAAa,CAAC,CAACiB,KAAK,CAACE,IAAI,CAAC,CAAC,IAAI,EAAEF,KAAK,CAAC;IAC/D;EAAC;IAAA5C,GAAA;IAAAC,KAAA,EAED,SAAA+H,wBAAwBpF,KAAK,EAAE;MAC3B1H,cAAc,CAAC/B,YAAY,CAAC,CAACyJ,KAAK,CAACE,IAAI,CAAC,CAAC,IAAI,EAAEF,KAAK,CAAC;IACzD;EAAC;IAAA5C,GAAA;IAAAC,KAAA,EAED,SAAAgI,8BAA8BrF,KAAK,EAAE;MACjC,IAAIA,KAAK,CAACE,IAAI,KAAK3L,SAAS,CAACgE,eAAe,EAAE;QAC1C+M,yBAAyB,CAAC,IAAI,EAAEtF,KAAK,CAAC;MAC1C,CAAC,MAAM,IAAIA,KAAK,CAACE,IAAI,KAAK3L,SAAS,CAACkE,oBAAoB,EAAE;QACtD8M,6BAA6B,CAAC,IAAI,EAAEvF,KAAK,CAAC;MAC9C,CAAC,MAAM,IAAIA,KAAK,CAACE,IAAI,KAAK3L,SAAS,CAACmE,0BAA0B,EAAE;QAC5DiB,gBAAgB,CAAC,IAAI,EAAEqG,KAAK,CAAC;MACjC,CAAC,MAAM,IAAIA,KAAK,CAACE,IAAI,KAAK3L,SAAS,CAACqE,aAAa,EAAE;QAC/CC,aAAa,CAAC,IAAI,EAAEmH,KAAK,CAAC;MAC9B,CAAC,MAAM,IAAIA,KAAK,CAACE,IAAI,KAAK3L,SAAS,CAACyE,eAAe,EAAE;QACjDwM,wBAAwB,CAAC,IAAI,EAAExF,KAAK,CAAC;MACzC,CAAC,MAAM,IAAIA,KAAK,CAACE,IAAI,KAAK3L,SAAS,CAAC0E,aAAa,EAAE;QAC/CwM,sBAAsB,CAAC,IAAI,EAAEzF,KAAK,CAAC;MACvC;IACJ;EAAC;IAAA5C,GAAA;IAAAC,KAAA,EAED,SAAAkD,mBAAmBP,KAAK,EAAE;MACtB,IAAI,IAAI,CAAC0E,mCAAmC,CAAC1E,KAAK,CAAC,EAAE;QACjD,IAAI,CAACqF,6BAA6B,CAACrF,KAAK,CAAC;MAC7C,CAAC,MAAM;QACH,IAAI,CAACmF,aAAa,CAACnF,KAAK,CAAC;MAC7B;MAEA,IAAIA,KAAK,CAACE,IAAI,KAAK3L,SAAS,CAACyE,eAAe,IAAIgH,KAAK,CAAC0F,WAAW,IAAI,CAAC1F,KAAK,CAAC2F,cAAc,EAAE;QACxF,IAAI,CAAC9F,IAAI,CAAC5K,GAAG,CAAC2Q,6CAA6C,CAAC;MAChE;IACJ;;IAEA;EAAA;IAAAxI,GAAA;IAAAC,KAAA,EACA,SAAA0D,oBAAoBgC,OAAO,EAAE8C,SAAS,EAAE;MACpC,IAAMjE,EAAE,GAAG,IAAI,CAAC/L,WAAW,CAACsI,UAAU,CAAC4E,OAAO,CAAC;MAC/C,IAAM4B,EAAE,GAAG,IAAI,CAAC9O,WAAW,CAACiL,eAAe,CAACiC,OAAO,CAAC;MACpD,IAAMS,KAAK,GAAG,IAAI,CAAC3N,WAAW,CAACiQ,WAAW,CAAC/C,OAAO,CAAC;MAEnD,OAAO/N,cAAc,CAAC+Q,kBAAkB,CAACnE,EAAE,EAAE+C,EAAE,EAAEnB,KAAK,EAAEqC,SAAS,CAAC;IACtE;;IAEA;EAAA;IAAAzI,GAAA;IAAAC,KAAA,EACA,SAAA2I,qCAAA,EAAuC;MACnC,IAAMC,UAAU,GAAG,IAAI,CAAC7G,wBAAwB,CAACiB,MAAM;MAEvD,IAAI4F,UAAU,EAAE;QACZ,IAAIC,SAAS,GAAGD,UAAU;QAC1B,IAAIE,KAAK,GAAG,IAAI;QAEhB,GAAG;UACCD,SAAS,EAAE;UACXC,KAAK,GAAG,IAAI,CAAC/G,wBAAwB,CAACgH,OAAO,CAACF,SAAS,CAAC;UAExD,IAAIC,KAAK,CAACjG,IAAI,KAAKzL,qBAAqB,CAAC4R,YAAY,IAAI,IAAI,CAAClH,YAAY,CAACmH,QAAQ,CAACH,KAAK,CAACpD,OAAO,CAAC,EAAE;YAChGmD,SAAS,EAAE;YACX;UACJ;QACJ,CAAC,QAAQA,SAAS,GAAG,CAAC;QAEtB,KAAK,IAAIK,CAAC,GAAGL,SAAS,EAAEK,CAAC,GAAGN,UAAU,EAAEM,CAAC,EAAE,EAAE;UACzCJ,KAAK,GAAG,IAAI,CAAC/G,wBAAwB,CAACgH,OAAO,CAACG,CAAC,CAAC;UAChD,IAAI,CAACpF,cAAc,CAACgF,KAAK,CAACnG,KAAK,EAAE,IAAI,CAACnK,WAAW,CAACiL,eAAe,CAACqF,KAAK,CAACpD,OAAO,CAAC,CAAC;UACjFoD,KAAK,CAACpD,OAAO,GAAG,IAAI,CAAC5D,YAAY,CAACwB,OAAO;QAC7C;MACJ;IACJ;;IAEA;EAAA;IAAAvD,GAAA;IAAAC,KAAA,EACA,SAAAmJ,gBAAA,EAAkB;MACd,IAAI,CAACrH,YAAY,CAACsH,sBAAsB,CAAC,CAAC;MAC1C,IAAI,CAACtH,YAAY,CAACuH,uBAAuB,CAAC,CAAC;MAC3C,IAAI,CAACtH,wBAAwB,CAACuH,iBAAiB,CAAC,CAAC;MACjD,IAAI,CAAC5H,aAAa,GAAGjI,WAAW;IACpC;EAAC;IAAAsG,GAAA;IAAAC,KAAA,EAED,SAAAuJ,eAAA,EAAiB;MACb,IAAI,CAACzH,YAAY,CAAC0H,mCAAmC,CAACzR,CAAC,CAAC0R,CAAC,CAAC;MAC1D,IAAI,CAAC3H,YAAY,CAAC4H,qBAAqB,CAAC3R,CAAC,CAAC0R,CAAC,CAAC;IAChD;;IAEA;EAAA;IAAA1J,GAAA;IAAAC,KAAA,EACA,SAAAkB,oBAAA,EAAsB;MAClB,KAAK,IAAIgI,CAAC,GAAG,IAAI,CAACpH,YAAY,CAACqC,QAAQ,EAAEwF,IAAI,GAAG,KAAK,EAAET,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE;QAChE,IAAIxD,OAAO,GAAG,IAAI,CAAC5D,YAAY,CAAC8H,KAAK,CAACV,CAAC,CAAC;QAExC,IAAIA,CAAC,KAAK,CAAC,EAAE;UACTS,IAAI,GAAG,IAAI;UAEX,IAAI,IAAI,CAACjJ,eAAe,EAAE;YACtBgF,OAAO,GAAG,IAAI,CAAChF,eAAe;UAClC;QACJ;QAEA,IAAM6D,EAAE,GAAG,IAAI,CAAC/L,WAAW,CAACsI,UAAU,CAAC4E,OAAO,CAAC;QAC/C,IAAMmE,gBAAgB,GAAG1P,wBAAwB,CAACoK,EAAE,CAAC;QAErD,IAAIsF,gBAAgB,EAAE;UAClB,IAAI,CAACnI,aAAa,GAAGmI,gBAAgB;UACrC;QACJ,CAAC,MAAM,IAAI,CAACF,IAAI,KAAKpF,EAAE,KAAKxM,CAAC,CAACgD,EAAE,IAAIwJ,EAAE,KAAKxM,CAAC,CAACiD,EAAE,CAAC,EAAE;UAC9C,IAAI,CAAC0G,aAAa,GAAGhI,YAAY;UACjC;QACJ,CAAC,MAAM,IAAI,CAACiQ,IAAI,IAAIpF,EAAE,KAAKxM,CAAC,CAAC+R,IAAI,EAAE;UAC/B,IAAI,CAACpI,aAAa,GAAG3I,YAAY;UACjC;QACJ,CAAC,MAAM,IAAIwL,EAAE,KAAKxM,CAAC,CAACgS,MAAM,EAAE;UACxB,IAAI,CAACC,4BAA4B,CAACd,CAAC,CAAC;UACpC;QACJ,CAAC,MAAM,IAAI3E,EAAE,KAAKxM,CAAC,CAAC6I,QAAQ,EAAE;UAC1B,IAAI,CAACc,aAAa,GAAG,IAAI,CAACQ,wBAAwB;UAClD;QACJ,CAAC,MAAM,IAAIqC,EAAE,KAAKxM,CAAC,CAACD,IAAI,EAAE;UACtB,IAAI,CAAC4J,aAAa,GAAG,IAAI,CAACE,WAAW,GAAG3I,eAAe,GAAGH,gBAAgB;UAC1E;QACJ,CAAC,MAAM,IAAI6Q,IAAI,EAAE;UACb,IAAI,CAACjI,aAAa,GAAGxI,YAAY;UACjC;QACJ;MACJ;IACJ;EAAC;IAAA6G,GAAA;IAAAC,KAAA,EAED,SAAAgK,6BAA6BC,SAAS,EAAE;MACpC,IAAIA,SAAS,GAAG,CAAC,EAAE;QACf,KAAK,IAAIf,CAAC,GAAGe,SAAS,GAAG,CAAC,EAAEf,CAAC,GAAG,CAAC,EAAEA,CAAC,EAAE,EAAE;UACpC,IAAMgB,QAAQ,GAAG,IAAI,CAACpI,YAAY,CAAC8H,KAAK,CAACV,CAAC,CAAC;UAC3C,IAAM3E,EAAE,GAAG,IAAI,CAAC/L,WAAW,CAACsI,UAAU,CAACoJ,QAAQ,CAAC;UAEhD,IAAI3F,EAAE,KAAKxM,CAAC,CAAC6I,QAAQ,EAAE;YACnB;UACJ,CAAC,MAAM,IAAI2D,EAAE,KAAKxM,CAAC,CAAC2C,KAAK,EAAE;YACvB,IAAI,CAACgH,aAAa,GAAG9H,uBAAuB;YAC5C;UACJ;QACJ;MACJ;MAEA,IAAI,CAAC8H,aAAa,GAAG/H,cAAc;IACvC;EAAC;IAAAoG,GAAA;IAAAC,KAAA,EAED,SAAAe,uBAAuBoJ,IAAI,EAAE;MACzB,IAAI,CAACnI,sBAAsB,CAACoE,IAAI,CAAC+D,IAAI,CAAC;MACtC,IAAI,CAAClI,yBAAyB,EAAE;MAChC,IAAI,CAACC,wBAAwB,GAAGiI,IAAI;IACxC;EAAC;IAAApK,GAAA;IAAAC,KAAA,EAED,SAAAoK,sBAAA,EAAwB;MACpB,IAAI,CAACpI,sBAAsB,CAACqI,GAAG,CAAC,CAAC;MACjC,IAAI,CAACpI,yBAAyB,EAAE;MAChC,IAAI,CAACC,wBAAwB,GAAG,IAAI,CAACF,sBAAsB,CAAC,IAAI,CAACC,yBAAyB,CAAC;IAC/F;;IAEA;EAAA;IAAAlC,GAAA;IAAAC,KAAA,EACA,SAAAsK,gCAAgC5E,OAAO,EAAE;MACrC,IAAMnB,EAAE,GAAG,IAAI,CAAC/L,WAAW,CAACsI,UAAU,CAAC4E,OAAO,CAAC;MAE/C,OAAOnB,EAAE,KAAKxM,CAAC,CAAC2C,KAAK,IAAI6J,EAAE,KAAKxM,CAAC,CAACsC,KAAK,IAAIkK,EAAE,KAAKxM,CAAC,CAACwC,KAAK,IAAIgK,EAAE,KAAKxM,CAAC,CAACuC,KAAK,IAAIiK,EAAE,KAAKxM,CAAC,CAACqC,EAAE;IAC9F;EAAC;IAAA2F,GAAA;IAAAC,KAAA,EAED,SAAA2F,+BAAA,EAAiC;MAC7B,OAAO,IAAI,CAACpD,sBAAsB,IAAI,IAAI,CAAC+H,+BAA+B,CAAC,IAAI,CAACxI,YAAY,CAACwB,OAAO,CAAC;IACzG;EAAC;IAAAvD,GAAA;IAAAC,KAAA,EAED,SAAAuK,6BAAA,EAA+B;MAC3B,IAAMC,QAAQ,GAAG;QACb3E,MAAM,EAAE,IAAI;QACZ4E,aAAa,EAAE;MACnB,CAAC;MAED,KAAK,IAAIvB,CAAC,GAAG,IAAI,CAACpH,YAAY,CAACqC,QAAQ,EAAE+E,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE;QAClD,IAAMwB,WAAW,GAAG,IAAI,CAAC5I,YAAY,CAAC8H,KAAK,CAACV,CAAC,CAAC;QAC9C,IAAM3E,EAAE,GAAG,IAAI,CAAC/L,WAAW,CAACsI,UAAU,CAAC4J,WAAW,CAAC;QACnD,IAAMpD,EAAE,GAAG,IAAI,CAAC9O,WAAW,CAACiL,eAAe,CAACiH,WAAW,CAAC;QAExD,IAAInG,EAAE,KAAKxM,CAAC,CAAC6I,QAAQ,IAAI0G,EAAE,KAAKrP,EAAE,CAACH,IAAI,EAAE;UACrC0S,QAAQ,CAAC3E,MAAM,GAAG,IAAI,CAACrN,WAAW,CAACmS,kBAAkB,CAACD,WAAW,CAAC;UAClE;QACJ,CAAC,MAAM,IAAInG,EAAE,KAAKxM,CAAC,CAAC2C,KAAK,EAAE;UACvB8P,QAAQ,CAAC3E,MAAM,GAAG,IAAI,CAACrN,WAAW,CAAC8L,aAAa,CAACoG,WAAW,CAAC;UAE7D,IAAIF,QAAQ,CAAC3E,MAAM,EAAE;YACjB2E,QAAQ,CAACC,aAAa,GAAGC,WAAW;UACxC,CAAC,MAAM;YACHF,QAAQ,CAAC3E,MAAM,GAAG,IAAI,CAAC/D,YAAY,CAAC8H,KAAK,CAACV,CAAC,GAAG,CAAC,CAAC;UACpD;UAEA;QACJ;MACJ;MAEA,IAAI,CAACsB,QAAQ,CAAC3E,MAAM,EAAE;QAClB2E,QAAQ,CAAC3E,MAAM,GAAG,IAAI,CAAC/D,YAAY,CAAC8H,KAAK,CAAC,CAAC,CAAC;MAChD;MAEA,OAAOY,QAAQ;IACnB;EAAC;IAAAzK,GAAA;IAAAC,KAAA,EAED,SAAA4F,qBAAqBF,OAAO,EAAE;MAC1B,IAAM8E,QAAQ,GAAG,IAAI,CAACD,4BAA4B,CAAC,CAAC;MAEpD,IAAIC,QAAQ,CAACC,aAAa,EAAE;QACxB,IAAI,CAACjS,WAAW,CAACoS,YAAY,CAACJ,QAAQ,CAAC3E,MAAM,EAAEH,OAAO,EAAE8E,QAAQ,CAACC,aAAa,CAAC;MACnF,CAAC,MAAM;QACH,IAAI,CAACjS,WAAW,CAACuN,WAAW,CAACyE,QAAQ,CAAC3E,MAAM,EAAEH,OAAO,CAAC;MAC1D;IACJ;EAAC;IAAA3F,GAAA;IAAAC,KAAA,EAED,SAAA+G,kBAAkBhE,KAAK,EAAE;MACrB,IAAMyH,QAAQ,GAAG,IAAI,CAACD,4BAA4B,CAAC,CAAC;MAEpD,IAAIC,QAAQ,CAACC,aAAa,EAAE;QACxB,IAAI,CAACjS,WAAW,CAACqS,gBAAgB,CAACL,QAAQ,CAAC3E,MAAM,EAAE9C,KAAK,EAAEyH,QAAQ,CAACC,aAAa,CAAC;MACrF,CAAC,MAAM;QACH,IAAI,CAACjS,WAAW,CAACwO,UAAU,CAACwD,QAAQ,CAAC3E,MAAM,EAAE9C,KAAK,CAAC;MACvD;IACJ;;IAEA;EAAA;IAAAhD,GAAA;IAAAC,KAAA,EACA,SAAA8K,kBAAkBpF,OAAO,EAAE;MACvB,IAAMnB,EAAE,GAAG,IAAI,CAAC/L,WAAW,CAACsI,UAAU,CAAC4E,OAAO,CAAC;MAC/C,IAAM4B,EAAE,GAAG,IAAI,CAAC9O,WAAW,CAACiL,eAAe,CAACiC,OAAO,CAAC;MAEpD,OAAO5N,IAAI,CAACiT,gBAAgB,CAACzD,EAAE,CAAC,CAAC/C,EAAE,CAAC;IACxC;EAAC;AAAA;AAGLyG,MAAM,CAACC,OAAO,GAAGtL,MAAM;;AAEvB;AACA;AACA;;AAEA;AACA,SAASuL,8BAA8BA,CAACC,CAAC,EAAExI,KAAK,EAAE;EAC9C,IAAIyI,sBAAsB,GAAGD,CAAC,CAACpJ,wBAAwB,CAACsJ,iCAAiC,CAAC1I,KAAK,CAACuD,OAAO,CAAC;EAExG,IAAIkF,sBAAsB,EAAE;IACxB,IAAI,CAACD,CAAC,CAACrJ,YAAY,CAACmH,QAAQ,CAACmC,sBAAsB,CAAC1F,OAAO,CAAC,EAAE;MAC1DyF,CAAC,CAACpJ,wBAAwB,CAACuJ,WAAW,CAACF,sBAAsB,CAAC;MAC9DA,sBAAsB,GAAG,IAAI;IACjC,CAAC,MAAM,IAAI,CAACD,CAAC,CAACrJ,YAAY,CAACyJ,UAAU,CAAC5I,KAAK,CAACuD,OAAO,CAAC,EAAE;MAClDkF,sBAAsB,GAAG,IAAI;IACjC;EACJ,CAAC,MAAM;IACHI,mBAAmB,CAACL,CAAC,EAAExI,KAAK,CAAC;EACjC;EAEA,OAAOyI,sBAAsB;AACjC;;AAEA;AACA,SAASK,qBAAqBA,CAACN,CAAC,EAAEC,sBAAsB,EAAE;EACtD,IAAIM,aAAa,GAAG,IAAI;EAExB,KAAK,IAAIxC,CAAC,GAAGiC,CAAC,CAACrJ,YAAY,CAACqC,QAAQ,EAAE+E,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE;IAC/C,IAAMxD,OAAO,GAAGyF,CAAC,CAACrJ,YAAY,CAAC8H,KAAK,CAACV,CAAC,CAAC;IAEvC,IAAIxD,OAAO,KAAK0F,sBAAsB,CAAC1F,OAAO,EAAE;MAC5C;IACJ;IAEA,IAAIyF,CAAC,CAACL,iBAAiB,CAACpF,OAAO,CAAC,EAAE;MAC9BgG,aAAa,GAAGhG,OAAO;IAC3B;EACJ;EAEA,IAAI,CAACgG,aAAa,EAAE;IAChBP,CAAC,CAACrJ,YAAY,CAAC6J,qBAAqB,CAACP,sBAAsB,CAAC1F,OAAO,CAAC;IACpEyF,CAAC,CAACpJ,wBAAwB,CAACuJ,WAAW,CAACF,sBAAsB,CAAC;EAClE;EAEA,OAAOM,aAAa;AACxB;;AAEA;AACA,SAASE,WAAWA,CAACT,CAAC,EAAEO,aAAa,EAAEG,iBAAiB,EAAE;EACtD,IAAIC,WAAW,GAAGJ,aAAa;EAC/B,IAAIK,WAAW,GAAGZ,CAAC,CAACrJ,YAAY,CAACkK,iBAAiB,CAACN,aAAa,CAAC;EAEjE,KAAK,IAAIxC,CAAC,GAAG,CAAC,EAAExD,OAAO,GAAGqG,WAAW,EAAErG,OAAO,KAAKmG,iBAAiB,EAAE3C,CAAC,EAAE,EAAExD,OAAO,GAAGqG,WAAW,EAAE;IAC9F;IACAA,WAAW,GAAGZ,CAAC,CAACrJ,YAAY,CAACkK,iBAAiB,CAACtG,OAAO,CAAC;IAEvD,IAAMuG,YAAY,GAAGd,CAAC,CAACpJ,wBAAwB,CAACmK,eAAe,CAACxG,OAAO,CAAC;IACxE,IAAMyG,eAAe,GAAGF,YAAY,IAAI/C,CAAC,IAAIvQ,kBAAkB;IAC/D,IAAMyT,4BAA4B,GAAG,CAACH,YAAY,IAAIE,eAAe;IAErE,IAAIC,4BAA4B,EAAE;MAC9B,IAAID,eAAe,EAAE;QACjBhB,CAAC,CAACpJ,wBAAwB,CAACuJ,WAAW,CAACW,YAAY,CAAC;MACxD;MAEAd,CAAC,CAACrJ,YAAY,CAACuK,MAAM,CAAC3G,OAAO,CAAC;IAClC,CAAC,MAAM;MACHA,OAAO,GAAG4G,0BAA0B,CAACnB,CAAC,EAAEc,YAAY,CAAC;MAErD,IAAIH,WAAW,KAAKJ,aAAa,EAAE;QAC/BP,CAAC,CAACpJ,wBAAwB,CAACwK,QAAQ,GAAGN,YAAY;MACtD;MAEAd,CAAC,CAAC3S,WAAW,CAAC4O,UAAU,CAAC0E,WAAW,CAAC;MACrCX,CAAC,CAAC3S,WAAW,CAACuN,WAAW,CAACL,OAAO,EAAEoG,WAAW,CAAC;MAC/CA,WAAW,GAAGpG,OAAO;IACzB;EACJ;EAEA,OAAOoG,WAAW;AACtB;;AAEA;AACA,SAASQ,0BAA0BA,CAACnB,CAAC,EAAEc,YAAY,EAAE;EACjD,IAAM3E,EAAE,GAAG6D,CAAC,CAAC3S,WAAW,CAACiL,eAAe,CAACwI,YAAY,CAACvG,OAAO,CAAC;EAC9D,IAAM8G,UAAU,GAAGrB,CAAC,CAAC3S,WAAW,CAACmI,aAAa,CAACsL,YAAY,CAACtJ,KAAK,CAACuD,OAAO,EAAEoB,EAAE,EAAE2E,YAAY,CAACtJ,KAAK,CAACwD,KAAK,CAAC;EAExGgF,CAAC,CAACrJ,YAAY,CAAC2K,OAAO,CAACR,YAAY,CAACvG,OAAO,EAAE8G,UAAU,CAAC;EACxDP,YAAY,CAACvG,OAAO,GAAG8G,UAAU;EAEjC,OAAOA,UAAU;AACrB;;AAEA;AACA,SAASE,gCAAgCA,CAACvB,CAAC,EAAEwB,cAAc,EAAEb,WAAW,EAAE;EACtE,IAAIX,CAAC,CAACb,+BAA+B,CAACqC,cAAc,CAAC,EAAE;IACnDxB,CAAC,CAACvF,oBAAoB,CAACkG,WAAW,CAAC;EACvC,CAAC,MAAM;IACH,IAAMvH,EAAE,GAAG4G,CAAC,CAAC3S,WAAW,CAACsI,UAAU,CAAC6L,cAAc,CAAC;IACnD,IAAMrF,EAAE,GAAG6D,CAAC,CAAC3S,WAAW,CAACiL,eAAe,CAACkJ,cAAc,CAAC;IAExD,IAAIpI,EAAE,KAAKxM,CAAC,CAAC6I,QAAQ,IAAI0G,EAAE,KAAKrP,EAAE,CAACH,IAAI,EAAE;MACrC6U,cAAc,GAAGxB,CAAC,CAAC3S,WAAW,CAACmS,kBAAkB,CAACgC,cAAc,CAAC;IACrE;IAEAxB,CAAC,CAAC3S,WAAW,CAACuN,WAAW,CAAC4G,cAAc,EAAEb,WAAW,CAAC;EAC1D;AACJ;;AAEA;AACA,SAASc,0BAA0BA,CAACzB,CAAC,EAAEO,aAAa,EAAEN,sBAAsB,EAAE;EAC1E,IAAM9D,EAAE,GAAG6D,CAAC,CAAC3S,WAAW,CAACiL,eAAe,CAAC2H,sBAAsB,CAAC1F,OAAO,CAAC;EACxE,IAAM/C,KAAK,GAAGyI,sBAAsB,CAACzI,KAAK;EAC1C,IAAM6J,UAAU,GAAGrB,CAAC,CAAC3S,WAAW,CAACmI,aAAa,CAACgC,KAAK,CAACuD,OAAO,EAAEoB,EAAE,EAAE3E,KAAK,CAACwD,KAAK,CAAC;EAE9EgF,CAAC,CAAC3J,WAAW,CAACkK,aAAa,EAAEc,UAAU,CAAC;EACxCrB,CAAC,CAAC3S,WAAW,CAACuN,WAAW,CAAC2F,aAAa,EAAEc,UAAU,CAAC;EAEpDrB,CAAC,CAACpJ,wBAAwB,CAAC8K,0BAA0B,CAACL,UAAU,EAAEpB,sBAAsB,CAACzI,KAAK,CAAC;EAC/FwI,CAAC,CAACpJ,wBAAwB,CAACuJ,WAAW,CAACF,sBAAsB,CAAC;EAE9DD,CAAC,CAACrJ,YAAY,CAACuK,MAAM,CAACjB,sBAAsB,CAAC1F,OAAO,CAAC;EACrDyF,CAAC,CAACrJ,YAAY,CAACgL,WAAW,CAACpB,aAAa,EAAEc,UAAU,CAAC;AACzD;;AAEA;AACA,SAASO,kBAAkBA,CAAC5B,CAAC,EAAExI,KAAK,EAAE;EAClC,IAAIyI,sBAAsB;EAE1B,KAAK,IAAIlC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGxQ,kBAAkB,EAAEwQ,CAAC,EAAE,EAAE;IACzCkC,sBAAsB,GAAGF,8BAA8B,CAACC,CAAC,EAAExI,KAAK,EAAEyI,sBAAsB,CAAC;IAEzF,IAAI,CAACA,sBAAsB,EAAE;MACzB;IACJ;IAEA,IAAMM,aAAa,GAAGD,qBAAqB,CAACN,CAAC,EAAEC,sBAAsB,CAAC;IAEtE,IAAI,CAACM,aAAa,EAAE;MAChB;IACJ;IAEAP,CAAC,CAACpJ,wBAAwB,CAACwK,QAAQ,GAAGnB,sBAAsB;IAE5D,IAAMU,WAAW,GAAGF,WAAW,CAACT,CAAC,EAAEO,aAAa,EAAEN,sBAAsB,CAAC1F,OAAO,CAAC;IACjF,IAAMiH,cAAc,GAAGxB,CAAC,CAACrJ,YAAY,CAACkK,iBAAiB,CAACZ,sBAAsB,CAAC1F,OAAO,CAAC;IAEvFyF,CAAC,CAAC3S,WAAW,CAAC4O,UAAU,CAAC0E,WAAW,CAAC;IACrCY,gCAAgC,CAACvB,CAAC,EAAEwB,cAAc,EAAEb,WAAW,CAAC;IAChEc,0BAA0B,CAACzB,CAAC,EAAEO,aAAa,EAAEN,sBAAsB,CAAC;EACxE;AACJ;;AAEA;AACA;AACA,SAAS9P,WAAWA,CAAA,EAAG;EACnB;AAAA;AAGJ,SAASY,gBAAgBA,CAACiP,CAAC,EAAE;EACzBA,CAAC,CAAC3I,IAAI,CAAC5K,GAAG,CAACsE,gBAAgB,CAAC;AAChC;AAEA,SAASV,aAAaA,CAAC2P,CAAC,EAAExI,KAAK,EAAE;EAC7BwI,CAAC,CAACzE,kBAAkB,CAAC/D,KAAK,EAAEwI,CAAC,CAACrJ,YAAY,CAACgE,kBAAkB,IAAIqF,CAAC,CAACrJ,YAAY,CAACwB,OAAO,CAAC;AAC5F;AAEA,SAASvE,8BAA8BA,CAACoM,CAAC,EAAExI,KAAK,EAAE;EAC9CwI,CAAC,CAACzE,kBAAkB,CAAC/D,KAAK,EAAEwI,CAAC,CAACrJ,YAAY,CAAC8H,KAAK,CAAC,CAAC,CAAC,CAAC;AACxD;AAEA,SAASpK,uBAAuBA,CAAC2L,CAAC,EAAExI,KAAK,EAAE;EACvCwI,CAAC,CAACzE,kBAAkB,CAAC/D,KAAK,EAAEwI,CAAC,CAAChL,QAAQ,CAAC;AAC3C;AAEA,SAAS7D,gBAAgBA,CAAC6O,CAAC,EAAExI,KAAK,EAAE;EAChCwI,CAAC,CAACrE,iBAAiB,CAACnE,KAAK,CAAC;AAC9B;AAEA,SAASzD,WAAWA,CAACiM,CAAC,EAAE;EACpBA,CAAC,CAAC1J,OAAO,GAAG,IAAI;AACpB;;AAEA;AACA;AACA,SAAS/F,oBAAoBA,CAACyP,CAAC,EAAExI,KAAK,EAAE;EACpCwI,CAAC,CAAC/F,gBAAgB,CAACzC,KAAK,CAAC;EAEzB,IAAMwH,IAAI,GAAGxH,KAAK,CAACqK,WAAW,GAAGlV,IAAI,CAACmV,aAAa,CAACC,MAAM,GAAGxV,OAAO,CAACyV,eAAe,CAACxK,KAAK,CAAC;EAE3F,IAAI,CAACjL,OAAO,CAAC0V,YAAY,CAACzK,KAAK,CAAC,EAAE;IAC9BwI,CAAC,CAAC3I,IAAI,CAAC5K,GAAG,CAACyV,oBAAoB,CAAC;EACpC;EAEAlC,CAAC,CAAC3S,WAAW,CAAC8U,eAAe,CAACnC,CAAC,CAAChL,QAAQ,EAAEgK,IAAI,CAAC;EAE/CgB,CAAC,CAACzJ,aAAa,GAAG7I,gBAAgB;AACtC;AAEA,SAASsC,kBAAkBA,CAACgQ,CAAC,EAAExI,KAAK,EAAE;EAClCwI,CAAC,CAAC3I,IAAI,CAAC5K,GAAG,CAAC2V,cAAc,EAAE;IAAEC,WAAW,EAAE;EAAK,CAAC,CAAC;EACjDrC,CAAC,CAAC3S,WAAW,CAAC8U,eAAe,CAACnC,CAAC,CAAChL,QAAQ,EAAErI,IAAI,CAACmV,aAAa,CAACC,MAAM,CAAC;EACpE/B,CAAC,CAACzJ,aAAa,GAAG7I,gBAAgB;EAClCsS,CAAC,CAACrD,aAAa,CAACnF,KAAK,CAAC;AAC1B;;AAEA;AACA;AACA,SAAS5G,kBAAkBA,CAACoP,CAAC,EAAExI,KAAK,EAAE;EAClC,IAAIA,KAAK,CAACuD,OAAO,KAAKnO,CAAC,CAACD,IAAI,EAAE;IAC1BqT,CAAC,CAACrH,cAAc,CAACnB,KAAK,EAAE1K,EAAE,CAACH,IAAI,CAAC;IAChCqT,CAAC,CAACzJ,aAAa,GAAG5I,gBAAgB;EACtC,CAAC,MAAM;IACHgD,eAAe,CAACqP,CAAC,EAAExI,KAAK,CAAC;EAC7B;AACJ;AAEA,SAAS3G,gBAAgBA,CAACmP,CAAC,EAAExI,KAAK,EAAE;EAChC,IAAM4B,EAAE,GAAG5B,KAAK,CAACuD,OAAO;EAExB,IAAI3B,EAAE,KAAKxM,CAAC,CAACD,IAAI,IAAIyM,EAAE,KAAKxM,CAAC,CAAC+R,IAAI,IAAIvF,EAAE,KAAKxM,CAAC,CAAC4C,IAAI,IAAI4J,EAAE,KAAKxM,CAAC,CAAC0V,EAAE,EAAE;IAChE3R,eAAe,CAACqP,CAAC,EAAExI,KAAK,CAAC;EAC7B;AACJ;AAEA,SAAS7G,eAAeA,CAACqP,CAAC,EAAExI,KAAK,EAAE;EAC/BwI,CAAC,CAAClK,sBAAsB,CAAC,CAAC;EAC1BkK,CAAC,CAACzJ,aAAa,GAAG5I,gBAAgB;EAClCqS,CAAC,CAACrD,aAAa,CAACnF,KAAK,CAAC;AAC1B;;AAEA;AACA;AACA,SAASxG,kBAAkBA,CAACgP,CAAC,EAAExI,KAAK,EAAE;EAClC,IAAM4B,EAAE,GAAG5B,KAAK,CAACuD,OAAO;EAExB,IAAI3B,EAAE,KAAKxM,CAAC,CAACD,IAAI,EAAE;IACfmF,cAAc,CAACkO,CAAC,EAAExI,KAAK,CAAC;EAC5B,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAAC+R,IAAI,EAAE;IACtBqB,CAAC,CAACrH,cAAc,CAACnB,KAAK,EAAE1K,EAAE,CAACH,IAAI,CAAC;IAChCqT,CAAC,CAACvJ,WAAW,GAAGuJ,CAAC,CAACrJ,YAAY,CAACwB,OAAO;IACtC6H,CAAC,CAACzJ,aAAa,GAAG3I,YAAY;EAClC,CAAC,MAAM;IACHkD,eAAe,CAACkP,CAAC,EAAExI,KAAK,CAAC;EAC7B;AACJ;AAEA,SAASvG,gBAAgBA,CAAC+O,CAAC,EAAExI,KAAK,EAAE;EAChC,IAAM4B,EAAE,GAAG5B,KAAK,CAACuD,OAAO;EAExB,IAAI3B,EAAE,KAAKxM,CAAC,CAAC+R,IAAI,IAAIvF,EAAE,KAAKxM,CAAC,CAAC4C,IAAI,IAAI4J,EAAE,KAAKxM,CAAC,CAACD,IAAI,IAAIyM,EAAE,KAAKxM,CAAC,CAAC0V,EAAE,EAAE;IAChExR,eAAe,CAACkP,CAAC,EAAExI,KAAK,CAAC;EAC7B,CAAC,MAAM;IACHwI,CAAC,CAAC3I,IAAI,CAAC5K,GAAG,CAAC8V,gCAAgC,CAAC;EAChD;AACJ;AAEA,SAASzR,eAAeA,CAACkP,CAAC,EAAExI,KAAK,EAAE;EAC/BwI,CAAC,CAAC9E,kBAAkB,CAACtO,CAAC,CAAC+R,IAAI,CAAC;EAC5BqB,CAAC,CAACvJ,WAAW,GAAGuJ,CAAC,CAACrJ,YAAY,CAACwB,OAAO;EACtC6H,CAAC,CAACzJ,aAAa,GAAG3I,YAAY;EAC9BoS,CAAC,CAACrD,aAAa,CAACnF,KAAK,CAAC;AAC1B;;AAEA;AACA;AACA,SAASpG,cAAcA,CAAC4O,CAAC,EAAExI,KAAK,EAAE;EAC9B,IAAM4B,EAAE,GAAG5B,KAAK,CAACuD,OAAO;EAExB,IAAI3B,EAAE,KAAKxM,CAAC,CAACD,IAAI,EAAE;IACfmF,cAAc,CAACkO,CAAC,EAAExI,KAAK,CAAC;EAC5B,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAAC4V,IAAI,IAAIpJ,EAAE,KAAKxM,CAAC,CAAC6V,QAAQ,IAAIrJ,EAAE,KAAKxM,CAAC,CAAC8V,OAAO,IAAItJ,EAAE,KAAKxM,CAAC,CAAC+V,IAAI,IAAIvJ,EAAE,KAAKxM,CAAC,CAACgW,IAAI,EAAE;IACjG5C,CAAC,CAACnF,cAAc,CAACrD,KAAK,EAAE1K,EAAE,CAACH,IAAI,CAAC;IAChC6K,KAAK,CAAC2F,cAAc,GAAG,IAAI;EAC/B,CAAC,MAAM,IAAI/D,EAAE,KAAKxM,CAAC,CAACyM,KAAK,EAAE;IACvB2G,CAAC,CAACxH,oBAAoB,CAAChB,KAAK,EAAEzL,SAAS,CAAC+M,IAAI,CAACS,MAAM,CAAC;EACxD,CAAC,MAAM,IAAIH,EAAE,KAAKxM,CAAC,CAACiN,QAAQ,EAAE;IAC1B,IAAImG,CAAC,CAACvL,OAAO,CAACvH,gBAAgB,EAAE;MAC5B8S,CAAC,CAACxH,oBAAoB,CAAChB,KAAK,EAAEzL,SAAS,CAAC+M,IAAI,CAACgB,OAAO,CAAC;IACzD,CAAC,MAAM;MACHkG,CAAC,CAACrH,cAAc,CAACnB,KAAK,EAAE1K,EAAE,CAACH,IAAI,CAAC;MAChCqT,CAAC,CAACzJ,aAAa,GAAG1I,sBAAsB;IAC5C;EACJ,CAAC,MAAM,IAAIuL,EAAE,KAAKxM,CAAC,CAACgN,QAAQ,IAAIR,EAAE,KAAKxM,CAAC,CAAC4M,KAAK,EAAE;IAC5CwG,CAAC,CAACxH,oBAAoB,CAAChB,KAAK,EAAEzL,SAAS,CAAC+M,IAAI,CAACgB,OAAO,CAAC;EACzD,CAAC,MAAM,IAAIV,EAAE,KAAKxM,CAAC,CAACmN,MAAM,EAAE;IACxBiG,CAAC,CAACxH,oBAAoB,CAAChB,KAAK,EAAEzL,SAAS,CAAC+M,IAAI,CAACkB,WAAW,CAAC;EAC7D,CAAC,MAAM,IAAIZ,EAAE,KAAKxM,CAAC,CAAC6I,QAAQ,EAAE;IAC1BuK,CAAC,CAAC7E,eAAe,CAAC3D,KAAK,EAAE1K,EAAE,CAACH,IAAI,CAAC;IACjCqT,CAAC,CAACpJ,wBAAwB,CAACiM,YAAY,CAAC,CAAC;IACzC7C,CAAC,CAAC9I,UAAU,GAAG,KAAK;IACpB8I,CAAC,CAACzJ,aAAa,GAAG7H,gBAAgB;IAClCsR,CAAC,CAACpK,sBAAsB,CAAClH,gBAAgB,CAAC;EAC9C,CAAC,MAAM,IAAI0K,EAAE,KAAKxM,CAAC,CAAC+R,IAAI,EAAE;IACtBqB,CAAC,CAAC3I,IAAI,CAAC5K,GAAG,CAACqW,+BAA+B,CAAC;EAC/C,CAAC,MAAM;IACH5R,WAAW,CAAC8O,CAAC,EAAExI,KAAK,CAAC;EACzB;AACJ;AAEA,SAASnG,YAAYA,CAAC2O,CAAC,EAAExI,KAAK,EAAE;EAC5B,IAAM4B,EAAE,GAAG5B,KAAK,CAACuD,OAAO;EAExB,IAAI3B,EAAE,KAAKxM,CAAC,CAAC+R,IAAI,EAAE;IACfqB,CAAC,CAACrJ,YAAY,CAACuI,GAAG,CAAC,CAAC;IACpBc,CAAC,CAACzJ,aAAa,GAAGzI,eAAe;EACrC,CAAC,MAAM,IAAIsL,EAAE,KAAKxM,CAAC,CAAC4C,IAAI,IAAI4J,EAAE,KAAKxM,CAAC,CAAC0V,EAAE,IAAIlJ,EAAE,KAAKxM,CAAC,CAACD,IAAI,EAAE;IACtDuE,WAAW,CAAC8O,CAAC,EAAExI,KAAK,CAAC;EACzB,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAAC6I,QAAQ,EAAE;IAC1B,IAAIuK,CAAC,CAACrJ,YAAY,CAACoM,SAAS,GAAG,CAAC,EAAE;MAC9B/C,CAAC,CAACrJ,YAAY,CAACqM,gCAAgC,CAAC,CAAC;MAEjD,IAAIhD,CAAC,CAACrJ,YAAY,CAACsM,cAAc,KAAKrW,CAAC,CAAC6I,QAAQ,EAAE;QAC9CuK,CAAC,CAAC3I,IAAI,CAAC5K,GAAG,CAACyW,qCAAqC,CAAC;MACrD;MAEAlD,CAAC,CAACrJ,YAAY,CAAC4H,qBAAqB,CAAC3R,CAAC,CAAC6I,QAAQ,CAAC;MAChDuK,CAAC,CAACpJ,wBAAwB,CAACuH,iBAAiB,CAAC,CAAC;MAC9C6B,CAAC,CAACf,qBAAqB,CAAC,CAAC;MACzBe,CAAC,CAACjK,mBAAmB,CAAC,CAAC;IAC3B,CAAC,MAAM;MACHiK,CAAC,CAAC3I,IAAI,CAAC5K,GAAG,CAAC8V,gCAAgC,CAAC;IAChD;EACJ,CAAC,MAAM;IACHvC,CAAC,CAAC3I,IAAI,CAAC5K,GAAG,CAAC8V,gCAAgC,CAAC;EAChD;AACJ;AAEA,SAASrR,WAAWA,CAAC8O,CAAC,EAAExI,KAAK,EAAE;EAC3BwI,CAAC,CAACrJ,YAAY,CAACuI,GAAG,CAAC,CAAC;EACpBc,CAAC,CAACzJ,aAAa,GAAGzI,eAAe;EACjCkS,CAAC,CAACrD,aAAa,CAACnF,KAAK,CAAC;AAC1B;;AAEA;AACA;AACA,SAASjG,sBAAsBA,CAACyO,CAAC,EAAExI,KAAK,EAAE;EACtC,IAAM4B,EAAE,GAAG5B,KAAK,CAACuD,OAAO;EAExB,IAAI3B,EAAE,KAAKxM,CAAC,CAACD,IAAI,EAAE;IACfmF,cAAc,CAACkO,CAAC,EAAExI,KAAK,CAAC;EAC5B,CAAC,MAAM,IACH4B,EAAE,KAAKxM,CAAC,CAAC6V,QAAQ,IACjBrJ,EAAE,KAAKxM,CAAC,CAAC8V,OAAO,IAChBtJ,EAAE,KAAKxM,CAAC,CAAC+R,IAAI,IACbvF,EAAE,KAAKxM,CAAC,CAAC+V,IAAI,IACbvJ,EAAE,KAAKxM,CAAC,CAACgW,IAAI,IACbxJ,EAAE,KAAKxM,CAAC,CAACgN,QAAQ,IACjBR,EAAE,KAAKxM,CAAC,CAAC4M,KAAK,EAChB;IACEpI,cAAc,CAAC4O,CAAC,EAAExI,KAAK,CAAC;EAC5B,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAACiN,QAAQ,EAAE;IAC1BmG,CAAC,CAAC3I,IAAI,CAAC5K,GAAG,CAAC0W,oBAAoB,CAAC;EACpC,CAAC,MAAM;IACH7R,mBAAmB,CAAC0O,CAAC,EAAExI,KAAK,CAAC;EACjC;AACJ;AAEA,SAAShG,oBAAoBA,CAACwO,CAAC,EAAExI,KAAK,EAAE;EACpC,IAAM4B,EAAE,GAAG5B,KAAK,CAACuD,OAAO;EAExB,IAAI3B,EAAE,KAAKxM,CAAC,CAACiN,QAAQ,EAAE;IACnBmG,CAAC,CAACrJ,YAAY,CAACuI,GAAG,CAAC,CAAC;IACpBc,CAAC,CAACzJ,aAAa,GAAG3I,YAAY;EAClC,CAAC,MAAM,IAAIwL,EAAE,KAAKxM,CAAC,CAAC0V,EAAE,EAAE;IACpBhR,mBAAmB,CAAC0O,CAAC,EAAExI,KAAK,CAAC;EACjC,CAAC,MAAM;IACHwI,CAAC,CAAC3I,IAAI,CAAC5K,GAAG,CAAC8V,gCAAgC,CAAC;EAChD;AACJ;AAEA,SAASjR,mBAAmBA,CAAC0O,CAAC,EAAExI,KAAK,EAAE;EACnC,IAAM4L,OAAO,GACT5L,KAAK,CAACE,IAAI,KAAK3L,SAAS,CAAC2E,SAAS,GAAGjE,GAAG,CAAC4W,wBAAwB,GAAG5W,GAAG,CAAC6W,iCAAiC;EAE7GtD,CAAC,CAAC3I,IAAI,CAAC+L,OAAO,CAAC;EACfpD,CAAC,CAACrJ,YAAY,CAACuI,GAAG,CAAC,CAAC;EACpBc,CAAC,CAACzJ,aAAa,GAAG3I,YAAY;EAC9BoS,CAAC,CAACrD,aAAa,CAACnF,KAAK,CAAC;AAC1B;;AAEA;AACA;AACA,SAAS9F,iBAAiBA,CAACsO,CAAC,EAAExI,KAAK,EAAE;EACjC,IAAM4B,EAAE,GAAG5B,KAAK,CAACuD,OAAO;EAExB,IAAI3B,EAAE,KAAKxM,CAAC,CAACD,IAAI,EAAE;IACfmF,cAAc,CAACkO,CAAC,EAAExI,KAAK,CAAC;EAC5B,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAAC4C,IAAI,EAAE;IACtBwQ,CAAC,CAACrH,cAAc,CAACnB,KAAK,EAAE1K,EAAE,CAACH,IAAI,CAAC;IAChCqT,CAAC,CAAC9I,UAAU,GAAG,KAAK;IACpB8I,CAAC,CAACzJ,aAAa,GAAGxI,YAAY;EAClC,CAAC,MAAM,IAAIqL,EAAE,KAAKxM,CAAC,CAAC6C,QAAQ,EAAE;IAC1BuQ,CAAC,CAACrH,cAAc,CAACnB,KAAK,EAAE1K,EAAE,CAACH,IAAI,CAAC;IAChCqT,CAAC,CAACzJ,aAAa,GAAG3H,gBAAgB;EACtC,CAAC,MAAM,IACHwK,EAAE,KAAKxM,CAAC,CAAC4V,IAAI,IACbpJ,EAAE,KAAKxM,CAAC,CAAC6V,QAAQ,IACjBrJ,EAAE,KAAKxM,CAAC,CAAC8V,OAAO,IAChBtJ,EAAE,KAAKxM,CAAC,CAAC+V,IAAI,IACbvJ,EAAE,KAAKxM,CAAC,CAACgW,IAAI,IACbxJ,EAAE,KAAKxM,CAAC,CAACgN,QAAQ,IACjBR,EAAE,KAAKxM,CAAC,CAACmN,MAAM,IACfX,EAAE,KAAKxM,CAAC,CAAC4M,KAAK,IACdJ,EAAE,KAAKxM,CAAC,CAAC6I,QAAQ,IACjB2D,EAAE,KAAKxM,CAAC,CAACyM,KAAK,EAChB;IACE2G,CAAC,CAAC3I,IAAI,CAAC5K,GAAG,CAAC8W,yBAAyB,CAAC;IACrCvD,CAAC,CAACrJ,YAAY,CAACsE,IAAI,CAAC+E,CAAC,CAACvJ,WAAW,CAAC;IAClCrF,cAAc,CAAC4O,CAAC,EAAExI,KAAK,CAAC;IACxBwI,CAAC,CAACrJ,YAAY,CAACuK,MAAM,CAAClB,CAAC,CAACvJ,WAAW,CAAC;EACxC,CAAC,MAAM,IAAI2C,EAAE,KAAKxM,CAAC,CAAC+R,IAAI,EAAE;IACtBqB,CAAC,CAAC3I,IAAI,CAAC5K,GAAG,CAACqW,+BAA+B,CAAC;EAC/C,CAAC,MAAM;IACHrR,cAAc,CAACuO,CAAC,EAAExI,KAAK,CAAC;EAC5B;AACJ;AAEA,SAAS7F,eAAeA,CAACqO,CAAC,EAAExI,KAAK,EAAE;EAC/B,IAAM4B,EAAE,GAAG5B,KAAK,CAACuD,OAAO;EAExB,IAAI3B,EAAE,KAAKxM,CAAC,CAAC4C,IAAI,IAAI4J,EAAE,KAAKxM,CAAC,CAACD,IAAI,IAAIyM,EAAE,KAAKxM,CAAC,CAAC0V,EAAE,EAAE;IAC/C7Q,cAAc,CAACuO,CAAC,EAAExI,KAAK,CAAC;EAC5B,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAAC6I,QAAQ,EAAE;IAC1BpE,YAAY,CAAC2O,CAAC,EAAExI,KAAK,CAAC;EAC1B,CAAC,MAAM;IACHwI,CAAC,CAAC3I,IAAI,CAAC5K,GAAG,CAAC8V,gCAAgC,CAAC;EAChD;AACJ;AAEA,SAAS9Q,cAAcA,CAACuO,CAAC,EAAExI,KAAK,EAAE;EAC9BwI,CAAC,CAAC9E,kBAAkB,CAACtO,CAAC,CAAC4C,IAAI,CAAC;EAC5BwQ,CAAC,CAACzJ,aAAa,GAAGxI,YAAY;EAC9BiS,CAAC,CAACrD,aAAa,CAACnF,KAAK,CAAC;AAC1B;;AAEA;AACA;AACA,SAAS3F,yBAAyBA,CAACmO,CAAC,EAAExI,KAAK,EAAE;EACzCwI,CAAC,CAACxC,oCAAoC,CAAC,CAAC;EACxCwC,CAAC,CAACrE,iBAAiB,CAACnE,KAAK,CAAC;AAC9B;AAEA,SAAS5F,eAAeA,CAACoO,CAAC,EAAExI,KAAK,EAAE;EAC/BwI,CAAC,CAACxC,oCAAoC,CAAC,CAAC;EACxCwC,CAAC,CAACrE,iBAAiB,CAACnE,KAAK,CAAC;EAC1BwI,CAAC,CAAC9I,UAAU,GAAG,KAAK;AACxB;AAEA,SAASsM,kBAAkBA,CAACxD,CAAC,EAAExI,KAAK,EAAE;EAClC,IAAIwI,CAAC,CAACrJ,YAAY,CAACoM,SAAS,KAAK,CAAC,EAAE;IAChC/C,CAAC,CAAC3S,WAAW,CAACoW,eAAe,CAACzD,CAAC,CAACrJ,YAAY,CAAC8H,KAAK,CAAC,CAAC,CAAC,EAAEjH,KAAK,CAACwD,KAAK,CAAC;EACvE;AACJ;AAEA,SAAS0I,kBAAkBA,CAAC1D,CAAC,EAAExI,KAAK,EAAE;EAClC,IAAMmM,WAAW,GAAG3D,CAAC,CAACrJ,YAAY,CAACiN,gCAAgC,CAAC,CAAC;EAErE,IAAID,WAAW,IAAI3D,CAAC,CAACrJ,YAAY,CAACoM,SAAS,KAAK,CAAC,EAAE;IAC/C/C,CAAC,CAAC9I,UAAU,GAAG,KAAK;IACpB8I,CAAC,CAAC3S,WAAW,CAACoW,eAAe,CAACE,WAAW,EAAEnM,KAAK,CAACwD,KAAK,CAAC;EAC3D;AACJ;AAEA,SAAS6I,sBAAsBA,CAAC7D,CAAC,EAAExI,KAAK,EAAE;EACtC,IAAMmM,WAAW,GAAG3D,CAAC,CAACrJ,YAAY,CAACiN,gCAAgC,CAAC,CAAC;EAErE,IAAI5D,CAAC,CAAC9I,UAAU,IAAIyM,WAAW,EAAE;IAC7B3D,CAAC,CAAC3S,WAAW,CAAC4O,UAAU,CAAC0H,WAAW,CAAC;IACrC3D,CAAC,CAACrJ,YAAY,CAACmN,qBAAqB,CAAC,CAAC;IACtC9D,CAAC,CAACrH,cAAc,CAACnB,KAAK,EAAE1K,EAAE,CAACH,IAAI,CAAC;IAChCqT,CAAC,CAACzJ,aAAa,GAAG3H,gBAAgB;EACtC;AACJ;AAEA,SAASmV,qBAAqBA,CAAC/D,CAAC,EAAExI,KAAK,EAAE;EACrC,IAAIwI,CAAC,CAACrJ,YAAY,CAACqN,gBAAgB,CAACpX,CAAC,CAAC0R,CAAC,CAAC,EAAE;IACtC0B,CAAC,CAAC5B,cAAc,CAAC,CAAC;EACtB;EAEA4B,CAAC,CAACrH,cAAc,CAACnB,KAAK,EAAE1K,EAAE,CAACH,IAAI,CAAC;AACpC;AAEA,SAASsX,4BAA4BA,CAACjE,CAAC,EAAExI,KAAK,EAAE;EAC5C,IAAIwI,CAAC,CAACrJ,YAAY,CAACqN,gBAAgB,CAACpX,CAAC,CAAC0R,CAAC,CAAC,EAAE;IACtC0B,CAAC,CAAC5B,cAAc,CAAC,CAAC;EACtB;EAEA,IAAMhF,EAAE,GAAG4G,CAAC,CAACrJ,YAAY,CAACsM,cAAc;EAExC,IAAI7J,EAAE,KAAKxM,CAAC,CAACsX,EAAE,IAAI9K,EAAE,KAAKxM,CAAC,CAACuX,EAAE,IAAI/K,EAAE,KAAKxM,CAAC,CAACwX,EAAE,IAAIhL,EAAE,KAAKxM,CAAC,CAACyX,EAAE,IAAIjL,EAAE,KAAKxM,CAAC,CAAC0X,EAAE,IAAIlL,EAAE,KAAKxM,CAAC,CAAC2X,EAAE,EAAE;IACxFvE,CAAC,CAACrJ,YAAY,CAACuI,GAAG,CAAC,CAAC;EACxB;EAEAc,CAAC,CAACrH,cAAc,CAACnB,KAAK,EAAE1K,EAAE,CAACH,IAAI,CAAC;AACpC;AAEA,SAAS6X,iBAAiBA,CAACxE,CAAC,EAAExI,KAAK,EAAE;EACjC,IAAIwI,CAAC,CAACrJ,YAAY,CAACqN,gBAAgB,CAACpX,CAAC,CAAC0R,CAAC,CAAC,EAAE;IACtC0B,CAAC,CAAC5B,cAAc,CAAC,CAAC;EACtB;EAEA4B,CAAC,CAACrH,cAAc,CAACnB,KAAK,EAAE1K,EAAE,CAACH,IAAI,CAAC;EAChC;EACA;EACAqT,CAAC,CAAC7I,eAAe,GAAG,IAAI;EACxB6I,CAAC,CAAC9I,UAAU,GAAG,KAAK;AACxB;AAEA,SAASuN,kBAAkBA,CAACzE,CAAC,EAAExI,KAAK,EAAE;EAClC,IAAMkN,UAAU,GAAG1E,CAAC,CAACrJ,YAAY,CAACoM,SAAS,GAAG,CAAC;EAE/C,IAAI,CAAC/C,CAAC,CAACtJ,WAAW,IAAIgO,UAAU,EAAE;IAC9B,IAAI1E,CAAC,CAACrJ,YAAY,CAACqN,gBAAgB,CAACpX,CAAC,CAAC0R,CAAC,CAAC,EAAE;MACtC0B,CAAC,CAAC5B,cAAc,CAAC,CAAC;IACtB;IAEA4B,CAAC,CAACrH,cAAc,CAACnB,KAAK,EAAE1K,EAAE,CAACH,IAAI,CAAC;IAEhC,IAAI,CAAC+X,UAAU,EAAE;MACb1E,CAAC,CAACtJ,WAAW,GAAGsJ,CAAC,CAACrJ,YAAY,CAACwB,OAAO;IAC1C;EACJ;AACJ;AAEA,SAASwM,sBAAsBA,CAAC3E,CAAC,EAAExI,KAAK,EAAE;EACtCwI,CAAC,CAAC9I,UAAU,GAAG,KAAK;EAEpB,IAAMkC,EAAE,GAAG5B,KAAK,CAACuD,OAAO;EAExB,KAAK,IAAIgD,CAAC,GAAGiC,CAAC,CAACrJ,YAAY,CAACqC,QAAQ,EAAE+E,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE;IAC/C,IAAMxD,OAAO,GAAGyF,CAAC,CAACrJ,YAAY,CAAC8H,KAAK,CAACV,CAAC,CAAC;IACvC,IAAM6G,SAAS,GAAG5E,CAAC,CAAC3S,WAAW,CAACsI,UAAU,CAAC4E,OAAO,CAAC;IACnD,IAAIsK,OAAO,GAAG,IAAI;IAElB,IAAIzL,EAAE,KAAKxM,CAAC,CAACkY,EAAE,IAAIF,SAAS,KAAKhY,CAAC,CAACkY,EAAE,EAAE;MACnCD,OAAO,GAAGjY,CAAC,CAACkY,EAAE;IAClB,CAAC,MAAM,IAAI,CAAC1L,EAAE,KAAKxM,CAAC,CAACmY,EAAE,IAAI3L,EAAE,KAAKxM,CAAC,CAACoY,EAAE,MAAMJ,SAAS,KAAKhY,CAAC,CAACmY,EAAE,IAAIH,SAAS,KAAKhY,CAAC,CAACoY,EAAE,CAAC,EAAE;MACnFH,OAAO,GAAGD,SAAS;IACvB;IAEA,IAAIC,OAAO,EAAE;MACT7E,CAAC,CAACrJ,YAAY,CAAC0H,mCAAmC,CAACwG,OAAO,CAAC;MAC3D7E,CAAC,CAACrJ,YAAY,CAAC4H,qBAAqB,CAACsG,OAAO,CAAC;MAC7C;IACJ;IAEA,IAAID,SAAS,KAAKhY,CAAC,CAACqY,OAAO,IAAIL,SAAS,KAAKhY,CAAC,CAACsY,GAAG,IAAIN,SAAS,KAAKhY,CAAC,CAAC0R,CAAC,IAAI0B,CAAC,CAACL,iBAAiB,CAACpF,OAAO,CAAC,EAAE;MACrG;IACJ;EACJ;EAEA,IAAIyF,CAAC,CAACrJ,YAAY,CAACqN,gBAAgB,CAACpX,CAAC,CAAC0R,CAAC,CAAC,EAAE;IACtC0B,CAAC,CAAC5B,cAAc,CAAC,CAAC;EACtB;EAEA4B,CAAC,CAACrH,cAAc,CAACnB,KAAK,EAAE1K,EAAE,CAACH,IAAI,CAAC;AACpC;AAEA,SAASwY,uBAAuBA,CAACnF,CAAC,EAAExI,KAAK,EAAE;EACvC,IAAIwI,CAAC,CAACrJ,YAAY,CAACqN,gBAAgB,CAACpX,CAAC,CAAC0R,CAAC,CAAC,EAAE;IACtC0B,CAAC,CAAC5B,cAAc,CAAC,CAAC;EACtB;EAEA4B,CAAC,CAACrH,cAAc,CAACnB,KAAK,EAAE1K,EAAE,CAACH,IAAI,CAAC;EAChCqT,CAAC,CAAC7K,SAAS,CAACyD,KAAK,GAAG7M,SAAS,CAAC+M,IAAI,CAACC,SAAS;AAChD;AAEA,SAASqM,oBAAoBA,CAACpF,CAAC,EAAExI,KAAK,EAAE;EACpC,IAAIwI,CAAC,CAACrJ,YAAY,CAACyJ,UAAU,CAACxT,CAAC,CAACyY,MAAM,CAAC,EAAE;IACrCrF,CAAC,CAACrJ,YAAY,CAACsH,sBAAsB,CAAC,CAAC;IACvC+B,CAAC,CAACrJ,YAAY,CAAC4H,qBAAqB,CAAC3R,CAAC,CAACyY,MAAM,CAAC;EAClD;EAEArF,CAAC,CAACxC,oCAAoC,CAAC,CAAC;EACxCwC,CAAC,CAACrH,cAAc,CAACnB,KAAK,EAAE1K,EAAE,CAACH,IAAI,CAAC;EAChCqT,CAAC,CAAC9I,UAAU,GAAG,KAAK;AACxB;AAEA,SAASoO,eAAeA,CAACtF,CAAC,EAAExI,KAAK,EAAE;EAC/B,IAAM+N,kBAAkB,GAAGvF,CAAC,CAACpJ,wBAAwB,CAACsJ,iCAAiC,CAACtT,CAAC,CAAC4Y,CAAC,CAAC;EAE5F,IAAID,kBAAkB,EAAE;IACpB3D,kBAAkB,CAAC5B,CAAC,EAAExI,KAAK,CAAC;IAC5BwI,CAAC,CAACrJ,YAAY,CAACuK,MAAM,CAACqE,kBAAkB,CAAChL,OAAO,CAAC;IACjDyF,CAAC,CAACpJ,wBAAwB,CAACuJ,WAAW,CAACoF,kBAAkB,CAAC;EAC9D;EAEAvF,CAAC,CAACxC,oCAAoC,CAAC,CAAC;EACxCwC,CAAC,CAACrH,cAAc,CAACnB,KAAK,EAAE1K,EAAE,CAACH,IAAI,CAAC;EAChCqT,CAAC,CAACpJ,wBAAwB,CAAC6O,WAAW,CAACzF,CAAC,CAACrJ,YAAY,CAACwB,OAAO,EAAEX,KAAK,CAAC;AACzE;AAEA,SAASkO,eAAeA,CAAC1F,CAAC,EAAExI,KAAK,EAAE;EAC/BwI,CAAC,CAACxC,oCAAoC,CAAC,CAAC;EACxCwC,CAAC,CAACrH,cAAc,CAACnB,KAAK,EAAE1K,EAAE,CAACH,IAAI,CAAC;EAChCqT,CAAC,CAACpJ,wBAAwB,CAAC6O,WAAW,CAACzF,CAAC,CAACrJ,YAAY,CAACwB,OAAO,EAAEX,KAAK,CAAC;AACzE;AAEA,SAASmO,kBAAkBA,CAAC3F,CAAC,EAAExI,KAAK,EAAE;EAClCwI,CAAC,CAACxC,oCAAoC,CAAC,CAAC;EAExC,IAAIwC,CAAC,CAACrJ,YAAY,CAACyJ,UAAU,CAACxT,CAAC,CAACgZ,IAAI,CAAC,EAAE;IACnChE,kBAAkB,CAAC5B,CAAC,EAAExI,KAAK,CAAC;IAC5BwI,CAAC,CAACxC,oCAAoC,CAAC,CAAC;EAC5C;EAEAwC,CAAC,CAACrH,cAAc,CAACnB,KAAK,EAAE1K,EAAE,CAACH,IAAI,CAAC;EAChCqT,CAAC,CAACpJ,wBAAwB,CAAC6O,WAAW,CAACzF,CAAC,CAACrJ,YAAY,CAACwB,OAAO,EAAEX,KAAK,CAAC;AACzE;AAEA,SAASqO,oBAAoBA,CAAC7F,CAAC,EAAExI,KAAK,EAAE;EACpCwI,CAAC,CAACxC,oCAAoC,CAAC,CAAC;EACxCwC,CAAC,CAACrH,cAAc,CAACnB,KAAK,EAAE1K,EAAE,CAACH,IAAI,CAAC;EAChCqT,CAAC,CAACpJ,wBAAwB,CAACiM,YAAY,CAAC,CAAC;EACzC7C,CAAC,CAAC9I,UAAU,GAAG,KAAK;AACxB;AAEA,SAAS4O,mBAAmBA,CAAC9F,CAAC,EAAExI,KAAK,EAAE;EACnC,IACIwI,CAAC,CAAC3S,WAAW,CAAC2U,eAAe,CAAChC,CAAC,CAAChL,QAAQ,CAAC,KAAKrI,IAAI,CAACmV,aAAa,CAACC,MAAM,IACvE/B,CAAC,CAACrJ,YAAY,CAACqN,gBAAgB,CAACpX,CAAC,CAAC0R,CAAC,CAAC,EACtC;IACE0B,CAAC,CAAC5B,cAAc,CAAC,CAAC;EACtB;EAEA4B,CAAC,CAACrH,cAAc,CAACnB,KAAK,EAAE1K,EAAE,CAACH,IAAI,CAAC;EAChCqT,CAAC,CAAC9I,UAAU,GAAG,KAAK;EACpB8I,CAAC,CAACzJ,aAAa,GAAGtI,aAAa;AACnC;AAEA,SAAS8X,kBAAkBA,CAAC/F,CAAC,EAAExI,KAAK,EAAE;EAClCwI,CAAC,CAACxC,oCAAoC,CAAC,CAAC;EACxCwC,CAAC,CAACnF,cAAc,CAACrD,KAAK,EAAE1K,EAAE,CAACH,IAAI,CAAC;EAChCqT,CAAC,CAAC9I,UAAU,GAAG,KAAK;EACpBM,KAAK,CAAC2F,cAAc,GAAG,IAAI;AAC/B;AAEA,SAAS6I,mBAAmBA,CAAChG,CAAC,EAAExI,KAAK,EAAE;EACnCwI,CAAC,CAACxC,oCAAoC,CAAC,CAAC;EACxCwC,CAAC,CAACnF,cAAc,CAACrD,KAAK,EAAE1K,EAAE,CAACH,IAAI,CAAC;EAEhC,IAAMsZ,SAAS,GAAGla,SAAS,CAACma,YAAY,CAAC1O,KAAK,EAAExK,KAAK,CAACmZ,IAAI,CAAC;EAE3D,IAAI,CAACF,SAAS,IAAIA,SAAS,CAACG,WAAW,CAAC,CAAC,KAAK9Y,iBAAiB,EAAE;IAC7D0S,CAAC,CAAC9I,UAAU,GAAG,KAAK;EACxB;EAEAM,KAAK,CAAC2F,cAAc,GAAG,IAAI;AAC/B;AAEA,SAASkJ,mBAAmBA,CAACrG,CAAC,EAAExI,KAAK,EAAE;EACnCwI,CAAC,CAACnF,cAAc,CAACrD,KAAK,EAAE1K,EAAE,CAACH,IAAI,CAAC;EAChC6K,KAAK,CAAC2F,cAAc,GAAG,IAAI;AAC/B;AAEA,SAASmJ,gBAAgBA,CAACtG,CAAC,EAAExI,KAAK,EAAE;EAChC,IAAIwI,CAAC,CAACrJ,YAAY,CAACqN,gBAAgB,CAACpX,CAAC,CAAC0R,CAAC,CAAC,EAAE;IACtC0B,CAAC,CAAC5B,cAAc,CAAC,CAAC;EACtB;EAEA4B,CAAC,CAACnF,cAAc,CAACrD,KAAK,EAAE1K,EAAE,CAACH,IAAI,CAAC;EAChCqT,CAAC,CAAC9I,UAAU,GAAG,KAAK;EACpBM,KAAK,CAAC2F,cAAc,GAAG,IAAI;AAC/B;AAEA,SAASoJ,mBAAmBA,CAACvG,CAAC,EAAExI,KAAK,EAAE;EACnCA,KAAK,CAACuD,OAAO,GAAGnO,CAAC,CAAC4Z,GAAG;EACrBT,kBAAkB,CAAC/F,CAAC,EAAExI,KAAK,CAAC;AAChC;AAEA,SAASiP,sBAAsBA,CAACzG,CAAC,EAAExI,KAAK,EAAE;EACtCwI,CAAC,CAACrH,cAAc,CAACnB,KAAK,EAAE1K,EAAE,CAACH,IAAI,CAAC;EAChC;EACA;EACAqT,CAAC,CAAC7I,eAAe,GAAG,IAAI;EACxB6I,CAAC,CAAC7K,SAAS,CAACyD,KAAK,GAAG7M,SAAS,CAAC+M,IAAI,CAACS,MAAM;EACzCyG,CAAC,CAACxJ,qBAAqB,GAAGwJ,CAAC,CAACzJ,aAAa;EACzCyJ,CAAC,CAAC9I,UAAU,GAAG,KAAK;EACpB8I,CAAC,CAACzJ,aAAa,GAAGvI,SAAS;AAC/B;AAEA,SAAS0Y,iBAAiBA,CAAC1G,CAAC,EAAExI,KAAK,EAAE;EACjC,IAAIwI,CAAC,CAACrJ,YAAY,CAACqN,gBAAgB,CAACpX,CAAC,CAAC0R,CAAC,CAAC,EAAE;IACtC0B,CAAC,CAAC5B,cAAc,CAAC,CAAC;EACtB;EAEA4B,CAAC,CAACxC,oCAAoC,CAAC,CAAC;EACxCwC,CAAC,CAAC9I,UAAU,GAAG,KAAK;EACpB8I,CAAC,CAACxH,oBAAoB,CAAChB,KAAK,EAAEzL,SAAS,CAAC+M,IAAI,CAACgB,OAAO,CAAC;AACzD;AAEA,SAAS6M,oBAAoBA,CAAC3G,CAAC,EAAExI,KAAK,EAAE;EACpCwI,CAAC,CAAC9I,UAAU,GAAG,KAAK;EACpB8I,CAAC,CAACxH,oBAAoB,CAAChB,KAAK,EAAEzL,SAAS,CAAC+M,IAAI,CAACgB,OAAO,CAAC;AACzD;;AAEA;AACA;AACA,SAAS8M,qBAAqBA,CAAC5G,CAAC,EAAExI,KAAK,EAAE;EACrCwI,CAAC,CAACxH,oBAAoB,CAAChB,KAAK,EAAEzL,SAAS,CAAC+M,IAAI,CAACgB,OAAO,CAAC;AACzD;AAEA,SAAS+M,oBAAoBA,CAAC7G,CAAC,EAAExI,KAAK,EAAE;EACpCwI,CAAC,CAACxC,oCAAoC,CAAC,CAAC;EACxCwC,CAAC,CAACrH,cAAc,CAACnB,KAAK,EAAE1K,EAAE,CAACH,IAAI,CAAC;EAChCqT,CAAC,CAAC9I,UAAU,GAAG,KAAK;EAEpB,IACI8I,CAAC,CAACzJ,aAAa,KAAKtI,aAAa,IACjC+R,CAAC,CAACzJ,aAAa,KAAKpI,eAAe,IACnC6R,CAAC,CAACzJ,aAAa,KAAKlI,kBAAkB,IACtC2R,CAAC,CAACzJ,aAAa,KAAKjI,WAAW,IAC/B0R,CAAC,CAACzJ,aAAa,KAAKhI,YAAY,EAClC;IACEyR,CAAC,CAACzJ,aAAa,GAAG9H,uBAAuB;EAC7C,CAAC,MAAM;IACHuR,CAAC,CAACzJ,aAAa,GAAG/H,cAAc;EACpC;AACJ;AAEA,SAASsY,sBAAsBA,CAAC9G,CAAC,EAAExI,KAAK,EAAE;EACtC,IAAIwI,CAAC,CAACrJ,YAAY,CAACsM,cAAc,KAAKrW,CAAC,CAACma,MAAM,EAAE;IAC5C/G,CAAC,CAACrJ,YAAY,CAACuI,GAAG,CAAC,CAAC;EACxB;EAEAc,CAAC,CAACxC,oCAAoC,CAAC,CAAC;EACxCwC,CAAC,CAACrH,cAAc,CAACnB,KAAK,EAAE1K,EAAE,CAACH,IAAI,CAAC;AACpC;AAEA,SAASqa,gBAAgBA,CAAChH,CAAC,EAAExI,KAAK,EAAE;EAChC,IAAIwI,CAAC,CAACrJ,YAAY,CAACyJ,UAAU,CAACxT,CAAC,CAACqa,IAAI,CAAC,EAAE;IACnCjH,CAAC,CAACrJ,YAAY,CAACsH,sBAAsB,CAAC,CAAC;EAC3C;EAEA+B,CAAC,CAACrH,cAAc,CAACnB,KAAK,EAAE1K,EAAE,CAACH,IAAI,CAAC;AACpC;AAEA,SAASua,gBAAgBA,CAAClH,CAAC,EAAExI,KAAK,EAAE;EAChC,IAAIwI,CAAC,CAACrJ,YAAY,CAACyJ,UAAU,CAACxT,CAAC,CAACqa,IAAI,CAAC,EAAE;IACnCjH,CAAC,CAACrJ,YAAY,CAAC0H,mCAAmC,CAACzR,CAAC,CAACua,GAAG,CAAC;EAC7D;EAEAnH,CAAC,CAACrH,cAAc,CAACnB,KAAK,EAAE1K,EAAE,CAACH,IAAI,CAAC;AACpC;AAEA,SAASya,kBAAkBA,CAACpH,CAAC,EAAExI,KAAK,EAAE;EAClC,IAAIwI,CAAC,CAACrJ,YAAY,CAACqN,gBAAgB,CAACpX,CAAC,CAAC0R,CAAC,CAAC,EAAE;IACtC0B,CAAC,CAAC5B,cAAc,CAAC,CAAC;EACtB;EAEA4B,CAAC,CAACrH,cAAc,CAACnB,KAAK,EAAE1K,EAAE,CAACH,IAAI,CAAC;AACpC;AAEA,SAAS0a,kBAAkBA,CAACrH,CAAC,EAAExI,KAAK,EAAE;EAClCwI,CAAC,CAACxC,oCAAoC,CAAC,CAAC;EAExChR,cAAc,CAAC8a,sBAAsB,CAAC9P,KAAK,CAAC;EAC5ChL,cAAc,CAAC+a,mBAAmB,CAAC/P,KAAK,CAAC;EAEzC,IAAIA,KAAK,CAAC0F,WAAW,EAAE;IACnB8C,CAAC,CAACnF,cAAc,CAACrD,KAAK,EAAE1K,EAAE,CAACuP,MAAM,CAAC;EACtC,CAAC,MAAM;IACH2D,CAAC,CAACrH,cAAc,CAACnB,KAAK,EAAE1K,EAAE,CAACuP,MAAM,CAAC;EACtC;EAEA7E,KAAK,CAAC2F,cAAc,GAAG,IAAI;AAC/B;AAEA,SAASqK,iBAAiBA,CAACxH,CAAC,EAAExI,KAAK,EAAE;EACjCwI,CAAC,CAACxC,oCAAoC,CAAC,CAAC;EAExChR,cAAc,CAACib,mBAAmB,CAACjQ,KAAK,CAAC;EACzChL,cAAc,CAAC+a,mBAAmB,CAAC/P,KAAK,CAAC;EAEzC,IAAIA,KAAK,CAAC0F,WAAW,EAAE;IACnB8C,CAAC,CAACnF,cAAc,CAACrD,KAAK,EAAE1K,EAAE,CAACwP,GAAG,CAAC;EACnC,CAAC,MAAM;IACH0D,CAAC,CAACrH,cAAc,CAACnB,KAAK,EAAE1K,EAAE,CAACwP,GAAG,CAAC;EACnC;EAEA9E,KAAK,CAAC2F,cAAc,GAAG,IAAI;AAC/B;AAEA,SAASuK,qBAAqBA,CAAC1H,CAAC,EAAExI,KAAK,EAAE;EACrCwI,CAAC,CAACxC,oCAAoC,CAAC,CAAC;EACxCwC,CAAC,CAACrH,cAAc,CAACnB,KAAK,EAAE1K,EAAE,CAACH,IAAI,CAAC;AACpC;;AAEA;AACA;AACA,SAASmF,cAAcA,CAACkO,CAAC,EAAExI,KAAK,EAAE;EAC9B,IAAM4B,EAAE,GAAG5B,KAAK,CAACuD,OAAO;EAExB,QAAQ3B,EAAE,CAACvB,MAAM;IACb,KAAK,CAAC;MACF,IAAIuB,EAAE,KAAKxM,CAAC,CAAC+a,CAAC,IAAIvO,EAAE,KAAKxM,CAAC,CAACgb,CAAC,IAAIxO,EAAE,KAAKxM,CAAC,CAACib,CAAC,IAAIzO,EAAE,KAAKxM,CAAC,CAACkb,CAAC,EAAE;QACtDpC,eAAe,CAAC1F,CAAC,EAAExI,KAAK,CAAC;MAC7B,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAAC0R,CAAC,EAAE;QACnByF,qBAAqB,CAAC/D,CAAC,EAAExI,KAAK,CAAC;MACnC,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAAC4Y,CAAC,EAAE;QACnBF,eAAe,CAACtF,CAAC,EAAExI,KAAK,CAAC;MAC7B,CAAC,MAAM;QACHkQ,qBAAqB,CAAC1H,CAAC,EAAExI,KAAK,CAAC;MACnC;MAEA;IAEJ,KAAK,CAAC;MACF,IAAI4B,EAAE,KAAKxM,CAAC,CAACmb,EAAE,IAAI3O,EAAE,KAAKxM,CAAC,CAACob,EAAE,IAAI5O,EAAE,KAAKxM,CAAC,CAACqb,EAAE,EAAE;QAC3ClE,qBAAqB,CAAC/D,CAAC,EAAExI,KAAK,CAAC;MACnC,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAACsX,EAAE,IAAI9K,EAAE,KAAKxM,CAAC,CAACuX,EAAE,IAAI/K,EAAE,KAAKxM,CAAC,CAACwX,EAAE,IAAIhL,EAAE,KAAKxM,CAAC,CAACyX,EAAE,IAAIjL,EAAE,KAAKxM,CAAC,CAAC0X,EAAE,IAAIlL,EAAE,KAAKxM,CAAC,CAAC2X,EAAE,EAAE;QAC/FN,4BAA4B,CAACjE,CAAC,EAAExI,KAAK,CAAC;MAC1C,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAACkY,EAAE,IAAI1L,EAAE,KAAKxM,CAAC,CAACmY,EAAE,IAAI3L,EAAE,KAAKxM,CAAC,CAACoY,EAAE,EAAE;QAClDL,sBAAsB,CAAC3E,CAAC,EAAExI,KAAK,CAAC;MACpC,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAACsb,EAAE,IAAI9O,EAAE,KAAKxM,CAAC,CAACub,EAAE,EAAE;QACnCzC,eAAe,CAAC1F,CAAC,EAAExI,KAAK,CAAC;MAC7B,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAAC0V,EAAE,EAAE;QACpByD,kBAAkB,CAAC/F,CAAC,EAAExI,KAAK,CAAC;MAChC,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAACwb,EAAE,EAAE;QACpB9B,gBAAgB,CAACtG,CAAC,EAAExI,KAAK,CAAC;MAC9B,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAACyb,EAAE,EAAE;QACpBrB,gBAAgB,CAAChH,CAAC,EAAExI,KAAK,CAAC;MAC9B,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAAC0b,EAAE,IAAIlP,EAAE,KAAKxM,CAAC,CAAC2b,EAAE,EAAE;QACnCrB,gBAAgB,CAAClH,CAAC,EAAExI,KAAK,CAAC;MAC9B,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAACiD,EAAE,IAAIuJ,EAAE,KAAKxM,CAAC,CAACgD,EAAE,IAAIwJ,EAAE,KAAKxM,CAAC,CAACqC,EAAE,EAAE;QAClDyY,qBAAqB,CAAC1H,CAAC,EAAExI,KAAK,CAAC;MACnC;MAEA;IAEJ,KAAK,CAAC;MACF,IAAI4B,EAAE,KAAKxM,CAAC,CAACsY,GAAG,IAAI9L,EAAE,KAAKxM,CAAC,CAAC4b,GAAG,IAAIpP,EAAE,KAAKxM,CAAC,CAAC6b,GAAG,EAAE;QAC9C1E,qBAAqB,CAAC/D,CAAC,EAAExI,KAAK,CAAC;MACnC,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAAC8b,GAAG,EAAE;QACrBlE,iBAAiB,CAACxE,CAAC,EAAExI,KAAK,CAAC;MAC/B,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAAC+b,GAAG,EAAE;QACrBjD,eAAe,CAAC1F,CAAC,EAAExI,KAAK,CAAC;MAC7B,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAAC4Z,GAAG,IAAIpN,EAAE,KAAKxM,CAAC,CAACgc,GAAG,EAAE;QACrC7C,kBAAkB,CAAC/F,CAAC,EAAExI,KAAK,CAAC;MAChC,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAAC6M,GAAG,EAAE;QACrBiN,iBAAiB,CAAC1G,CAAC,EAAExI,KAAK,CAAC;MAC/B,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAAC0P,GAAG,EAAE;QACrBkL,iBAAiB,CAACxH,CAAC,EAAExI,KAAK,CAAC;MAC/B,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAACua,GAAG,EAAE;QACrBH,gBAAgB,CAAChH,CAAC,EAAExI,KAAK,CAAC;MAC9B,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAAC+C,GAAG,EAAE;QACrB+X,qBAAqB,CAAC1H,CAAC,EAAExI,KAAK,CAAC;MACnC;MAEA;IAEJ,KAAK,CAAC;MACF,IAAI4B,EAAE,KAAKxM,CAAC,CAACD,IAAI,EAAE;QACf6W,kBAAkB,CAACxD,CAAC,EAAExI,KAAK,CAAC;MAChC,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAAC4V,IAAI,IAAIpJ,EAAE,KAAKxM,CAAC,CAAC+V,IAAI,IAAIvJ,EAAE,KAAKxM,CAAC,CAACgW,IAAI,EAAE;QACxDxR,cAAc,CAAC4O,CAAC,EAAExI,KAAK,CAAC;MAC5B,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAAC4C,IAAI,EAAE;QACtBkU,kBAAkB,CAAC1D,CAAC,EAAExI,KAAK,CAAC;MAChC,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAACic,IAAI,IAAIzP,EAAE,KAAKxM,CAAC,CAACkc,IAAI,EAAE;QACvC/E,qBAAqB,CAAC/D,CAAC,EAAExI,KAAK,CAAC;MACnC,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAACsM,IAAI,EAAE;QACtBuL,kBAAkB,CAACzE,CAAC,EAAExI,KAAK,CAAC;MAChC,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAACmc,IAAI,IAAI3P,EAAE,KAAKxM,CAAC,CAACoc,IAAI,EAAE;QACvCtD,eAAe,CAAC1F,CAAC,EAAExI,KAAK,CAAC;MAC7B,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAACgZ,IAAI,EAAE;QACtBD,kBAAkB,CAAC3F,CAAC,EAAExI,KAAK,CAAC;MAChC,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAACqc,IAAI,EAAE;QACtBlD,kBAAkB,CAAC/F,CAAC,EAAExI,KAAK,CAAC;MAChC,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAACsc,IAAI,EAAE;QACtB7B,kBAAkB,CAACrH,CAAC,EAAExI,KAAK,CAAC;MAChC,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAACkc,IAAI,EAAE;QACtB1B,kBAAkB,CAACpH,CAAC,EAAExI,KAAK,CAAC;MAChC,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAAC+R,IAAI,EAAE;QACtB+I,qBAAqB,CAAC1H,CAAC,EAAExI,KAAK,CAAC;MACnC;MAEA;IAEJ,KAAK,CAAC;MACF,IAAI4B,EAAE,KAAKxM,CAAC,CAAC4M,KAAK,IAAIJ,EAAE,KAAKxM,CAAC,CAACyM,KAAK,EAAE;QAClCjI,cAAc,CAAC4O,CAAC,EAAExI,KAAK,CAAC;MAC5B,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAACuc,KAAK,EAAE;QACvBpF,qBAAqB,CAAC/D,CAAC,EAAExI,KAAK,CAAC;MACnC,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAACwc,KAAK,EAAE;QACvB1D,eAAe,CAAC1F,CAAC,EAAExI,KAAK,CAAC;MAC7B,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAAC2C,KAAK,EAAE;QACvBuW,mBAAmB,CAAC9F,CAAC,EAAExI,KAAK,CAAC;MACjC,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAACyc,KAAK,EAAE;QACvBtD,kBAAkB,CAAC/F,CAAC,EAAExI,KAAK,CAAC;MAChC,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAAC0c,KAAK,EAAE;QACvBtD,mBAAmB,CAAChG,CAAC,EAAExI,KAAK,CAAC;MACjC,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAAC2c,KAAK,IAAInQ,EAAE,KAAKxM,CAAC,CAAC4c,KAAK,EAAE;QACzCnD,mBAAmB,CAACrG,CAAC,EAAExI,KAAK,CAAC;MACjC,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAAC6c,KAAK,EAAE;QACvBlD,mBAAmB,CAACvG,CAAC,EAAExI,KAAK,CAAC;MACjC,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAAC8c,KAAK,IAAItQ,EAAE,KAAKxM,CAAC,CAACsC,KAAK,IAAIkK,EAAE,KAAKxM,CAAC,CAACwC,KAAK,IAAIgK,EAAE,KAAKxM,CAAC,CAACuC,KAAK,EAAE;QAC7EuY,qBAAqB,CAAC1H,CAAC,EAAExI,KAAK,CAAC;MACnC;MAEA;IAEJ,KAAK,CAAC;MACF,IAAI4B,EAAE,KAAKxM,CAAC,CAACmN,MAAM,EAAE;QACjB3I,cAAc,CAAC4O,CAAC,EAAExI,KAAK,CAAC;MAC5B,CAAC,MAAM,IACH4B,EAAE,KAAKxM,CAAC,CAAC+c,MAAM,IACfvQ,EAAE,KAAKxM,CAAC,CAACgd,MAAM,IACfxQ,EAAE,KAAKxM,CAAC,CAACid,MAAM,IACfzQ,EAAE,KAAKxM,CAAC,CAACkd,MAAM,IACf1Q,EAAE,KAAKxM,CAAC,CAACmd,MAAM,IACf3Q,EAAE,KAAKxM,CAAC,CAACod,MAAM,EACjB;QACEjG,qBAAqB,CAAC/D,CAAC,EAAExI,KAAK,CAAC;MACnC,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAACyY,MAAM,EAAE;QACxBD,oBAAoB,CAACpF,CAAC,EAAExI,KAAK,CAAC;MAClC,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAACqd,MAAM,IAAI7Q,EAAE,KAAKxM,CAAC,CAACsd,MAAM,EAAE;QAC3CxE,eAAe,CAAC1F,CAAC,EAAExI,KAAK,CAAC;MAC7B,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAACud,MAAM,IAAI/Q,EAAE,KAAKxM,CAAC,CAACwd,MAAM,EAAE;QAC3CvE,oBAAoB,CAAC7F,CAAC,EAAExI,KAAK,CAAC;MAClC,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAACyd,MAAM,EAAE;QACxBtE,kBAAkB,CAAC/F,CAAC,EAAExI,KAAK,CAAC;MAChC,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAAC0d,MAAM,EAAE;QACxBjE,mBAAmB,CAACrG,CAAC,EAAExI,KAAK,CAAC;MACjC,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAAC8M,MAAM,EAAE;QACxBiN,oBAAoB,CAAC3G,CAAC,EAAExI,KAAK,CAAC;MAClC,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAACgS,MAAM,EAAE;QACxBiI,oBAAoB,CAAC7G,CAAC,EAAExI,KAAK,CAAC;MAClC,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAACma,MAAM,EAAE;QACxBD,sBAAsB,CAAC9G,CAAC,EAAExI,KAAK,CAAC;MACpC,CAAC,MAAM;QACHkQ,qBAAqB,CAAC1H,CAAC,EAAExI,KAAK,CAAC;MACnC;MAEA;IAEJ,KAAK,CAAC;MACF,IAAI4B,EAAE,KAAKxM,CAAC,CAAC8V,OAAO,EAAE;QAClBtR,cAAc,CAAC4O,CAAC,EAAExI,KAAK,CAAC;MAC5B,CAAC,MAAM,IACH4B,EAAE,KAAKxM,CAAC,CAAC2d,OAAO,IAChBnR,EAAE,KAAKxM,CAAC,CAACqY,OAAO,IAChB7L,EAAE,KAAKxM,CAAC,CAAC4d,OAAO,IAChBpR,EAAE,KAAKxM,CAAC,CAAC6d,OAAO,IAChBrR,EAAE,KAAKxM,CAAC,CAAC8d,OAAO,EAClB;QACE3G,qBAAqB,CAAC/D,CAAC,EAAExI,KAAK,CAAC;MACnC,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAAC+d,OAAO,EAAE;QACzBnG,iBAAiB,CAACxE,CAAC,EAAExI,KAAK,CAAC;MAC/B,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAACge,OAAO,EAAE;QACzB/E,oBAAoB,CAAC7F,CAAC,EAAExI,KAAK,CAAC;MAClC,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAAC+M,OAAO,EAAE;QACzBiN,qBAAqB,CAAC5G,CAAC,EAAExI,KAAK,CAAC;MACnC,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAACyC,OAAO,EAAE;QACzBqY,qBAAqB,CAAC1H,CAAC,EAAExI,KAAK,CAAC;MACnC;MAEA;IAEJ,KAAK,CAAC;MACF,IAAI4B,EAAE,KAAKxM,CAAC,CAAC6V,QAAQ,EAAE;QACnBrR,cAAc,CAAC4O,CAAC,EAAExI,KAAK,CAAC;MAC5B,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAAC6C,QAAQ,EAAE;QAC1BoU,sBAAsB,CAAC7D,CAAC,EAAExI,KAAK,CAAC;MACpC,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAACie,QAAQ,EAAE;QAC1B9G,qBAAqB,CAAC/D,CAAC,EAAExI,KAAK,CAAC;MACnC,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAAC0M,QAAQ,EAAE;QAC1BmN,sBAAsB,CAACzG,CAAC,EAAExI,KAAK,CAAC;MACpC,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAAC6I,QAAQ,EAAE;QAC1BrE,cAAc,CAAC4O,CAAC,EAAExI,KAAK,CAAC;MAC5B,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAACiN,QAAQ,EAAE;QAC1B,IAAImG,CAAC,CAACvL,OAAO,CAACvH,gBAAgB,EAAE;UAC5B0Z,qBAAqB,CAAC5G,CAAC,EAAExI,KAAK,CAAC;QACnC,CAAC,MAAM;UACHkQ,qBAAqB,CAAC1H,CAAC,EAAExI,KAAK,CAAC;QACnC;MACJ,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAACke,QAAQ,EAAE;QAC1BhE,sBAAsB,CAAC9G,CAAC,EAAExI,KAAK,CAAC;MACpC,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAAC0C,QAAQ,EAAE;QAC1BoY,qBAAqB,CAAC1H,CAAC,EAAExI,KAAK,CAAC;MACnC;MAEA;IAEJ,KAAK,CAAC;MACF,IAAI4B,EAAE,KAAKxM,CAAC,CAACmM,SAAS,EAAE;QACpBoM,uBAAuB,CAACnF,CAAC,EAAExI,KAAK,CAAC;MACrC,CAAC,MAAM;QACHkQ,qBAAqB,CAAC1H,CAAC,EAAExI,KAAK,CAAC;MACnC;MAEA;IAEJ,KAAK,EAAE;MACH,IAAI4B,EAAE,KAAKxM,CAAC,CAACme,UAAU,IAAI3R,EAAE,KAAKxM,CAAC,CAACoe,UAAU,EAAE;QAC5CjH,qBAAqB,CAAC/D,CAAC,EAAExI,KAAK,CAAC;MACnC,CAAC,MAAM;QACHkQ,qBAAqB,CAAC1H,CAAC,EAAExI,KAAK,CAAC;MACnC;MAEA;IAEJ;MACIkQ,qBAAqB,CAAC1H,CAAC,EAAExI,KAAK,CAAC;EACvC;AACJ;AAEA,SAASyT,gBAAgBA,CAACjL,CAAC,EAAE;EACzB,IAAIA,CAAC,CAACrJ,YAAY,CAACyJ,UAAU,CAACxT,CAAC,CAAC4C,IAAI,CAAC,EAAE;IACnCwQ,CAAC,CAACzJ,aAAa,GAAG5H,eAAe;EACrC;AACJ;AAEA,SAASuc,gBAAgBA,CAAClL,CAAC,EAAExI,KAAK,EAAE;EAChC,IAAIwI,CAAC,CAACrJ,YAAY,CAACyJ,UAAU,CAACxT,CAAC,CAAC4C,IAAI,CAAC,EAAE;IACnCwQ,CAAC,CAACzJ,aAAa,GAAG5H,eAAe;IACjCqR,CAAC,CAACrD,aAAa,CAACnF,KAAK,CAAC;EAC1B;AACJ;AAEA,SAAS2T,mBAAmBA,CAACnL,CAAC,EAAExI,KAAK,EAAE;EACnC,IAAM4B,EAAE,GAAG5B,KAAK,CAACuD,OAAO;EAExB,IAAIiF,CAAC,CAACrJ,YAAY,CAACyJ,UAAU,CAAChH,EAAE,CAAC,EAAE;IAC/B4G,CAAC,CAACrJ,YAAY,CAACsH,sBAAsB,CAAC,CAAC;IACvC+B,CAAC,CAACrJ,YAAY,CAAC4H,qBAAqB,CAACnF,EAAE,CAAC;EAC5C;AACJ;AAEA,SAASgS,gBAAgBA,CAACpL,CAAC,EAAE;EACzB,IAAM0E,UAAU,GAAG1E,CAAC,CAACrJ,YAAY,CAACoM,SAAS,GAAG,CAAC;EAC/C,IAAMrM,WAAW,GAAGsJ,CAAC,CAACtJ,WAAW;EAEjC,IAAI,CAACgO,UAAU,EAAE;IACb1E,CAAC,CAACtJ,WAAW,GAAG,IAAI;EACxB;EAEA,IAAI,CAACA,WAAW,IAAIgO,UAAU,KAAK1E,CAAC,CAACrJ,YAAY,CAACyJ,UAAU,CAACxT,CAAC,CAACsM,IAAI,CAAC,EAAE;IAClE8G,CAAC,CAACrJ,YAAY,CAACsH,sBAAsB,CAAC,CAAC;IAEvC,IAAIyG,UAAU,EAAE;MACZ1E,CAAC,CAACrJ,YAAY,CAAC4H,qBAAqB,CAAC3R,CAAC,CAACsM,IAAI,CAAC;IAChD,CAAC,MAAM;MACH8G,CAAC,CAACrJ,YAAY,CAACuK,MAAM,CAACxK,WAAW,CAAC;IACtC;EACJ;AACJ;AAEA,SAAS2U,aAAaA,CAACrL,CAAC,EAAE;EACtB,IAAI,CAACA,CAAC,CAACrJ,YAAY,CAACqN,gBAAgB,CAACpX,CAAC,CAAC0R,CAAC,CAAC,EAAE;IACvC0B,CAAC,CAAC9E,kBAAkB,CAACtO,CAAC,CAAC0R,CAAC,CAAC;EAC7B;EAEA0B,CAAC,CAAC5B,cAAc,CAAC,CAAC;AACtB;AAEA,SAASkN,cAAcA,CAACtL,CAAC,EAAE;EACvB,IAAIA,CAAC,CAACrJ,YAAY,CAAC4U,kBAAkB,CAAC3e,CAAC,CAACkY,EAAE,CAAC,EAAE;IACzC9E,CAAC,CAACrJ,YAAY,CAAC0H,mCAAmC,CAACzR,CAAC,CAACkY,EAAE,CAAC;IACxD9E,CAAC,CAACrJ,YAAY,CAAC4H,qBAAqB,CAAC3R,CAAC,CAACkY,EAAE,CAAC;EAC9C;AACJ;AAEA,SAAS0G,cAAcA,CAACxL,CAAC,EAAExI,KAAK,EAAE;EAC9B,IAAM4B,EAAE,GAAG5B,KAAK,CAACuD,OAAO;EAExB,IAAIiF,CAAC,CAACrJ,YAAY,CAACyJ,UAAU,CAAChH,EAAE,CAAC,EAAE;IAC/B4G,CAAC,CAACrJ,YAAY,CAAC0H,mCAAmC,CAACjF,EAAE,CAAC;IACtD4G,CAAC,CAACrJ,YAAY,CAAC4H,qBAAqB,CAACnF,EAAE,CAAC;EAC5C;AACJ;AAEA,SAASqS,0BAA0BA,CAACzL,CAAC,EAAE;EACnC,IAAIA,CAAC,CAACrJ,YAAY,CAAC+U,wBAAwB,CAAC,CAAC,EAAE;IAC3C1L,CAAC,CAACrJ,YAAY,CAACsH,sBAAsB,CAAC,CAAC;IACvC+B,CAAC,CAACrJ,YAAY,CAACgV,4BAA4B,CAAC,CAAC;EACjD;AACJ;AAEA,SAASC,kBAAkBA,CAAC5L,CAAC,EAAExI,KAAK,EAAE;EAClC,IAAM4B,EAAE,GAAG5B,KAAK,CAACuD,OAAO;EAExB,IAAIiF,CAAC,CAACrJ,YAAY,CAACyJ,UAAU,CAAChH,EAAE,CAAC,EAAE;IAC/B4G,CAAC,CAACrJ,YAAY,CAACsH,sBAAsB,CAAC,CAAC;IACvC+B,CAAC,CAACrJ,YAAY,CAAC4H,qBAAqB,CAACnF,EAAE,CAAC;IACxC4G,CAAC,CAACpJ,wBAAwB,CAACuH,iBAAiB,CAAC,CAAC;EAClD;AACJ;AAEA,SAAS0N,cAAcA,CAAC7L,CAAC,EAAE;EACvBA,CAAC,CAACxC,oCAAoC,CAAC,CAAC;EACxCwC,CAAC,CAAC9E,kBAAkB,CAACtO,CAAC,CAAC0V,EAAE,CAAC;EAC1BtC,CAAC,CAACrJ,YAAY,CAACuI,GAAG,CAAC,CAAC;EACpBc,CAAC,CAAC9I,UAAU,GAAG,KAAK;AACxB;AAEA,SAASmJ,mBAAmBA,CAACL,CAAC,EAAExI,KAAK,EAAE;EACnC,IAAM4B,EAAE,GAAG5B,KAAK,CAACuD,OAAO;EAExB,KAAK,IAAIgD,CAAC,GAAGiC,CAAC,CAACrJ,YAAY,CAACqC,QAAQ,EAAE+E,CAAC,GAAG,CAAC,EAAEA,CAAC,EAAE,EAAE;IAC9C,IAAMxD,OAAO,GAAGyF,CAAC,CAACrJ,YAAY,CAAC8H,KAAK,CAACV,CAAC,CAAC;IAEvC,IAAIiC,CAAC,CAAC3S,WAAW,CAACsI,UAAU,CAAC4E,OAAO,CAAC,KAAKnB,EAAE,EAAE;MAC1C4G,CAAC,CAACrJ,YAAY,CAAC0H,mCAAmC,CAACjF,EAAE,CAAC;MACtD4G,CAAC,CAACrJ,YAAY,CAAC6J,qBAAqB,CAACjG,OAAO,CAAC;MAC7C;IACJ;IAEA,IAAIyF,CAAC,CAACL,iBAAiB,CAACpF,OAAO,CAAC,EAAE;MAC9B;IACJ;EACJ;AACJ;;AAEA;AACA;AACA,SAASxI,YAAYA,CAACiO,CAAC,EAAExI,KAAK,EAAE;EAC5B,IAAM4B,EAAE,GAAG5B,KAAK,CAACuD,OAAO;EAExB,QAAQ3B,EAAE,CAACvB,MAAM;IACb,KAAK,CAAC;MACF,IAAIuB,EAAE,KAAKxM,CAAC,CAAC4Y,CAAC,IAAIpM,EAAE,KAAKxM,CAAC,CAACib,CAAC,IAAIzO,EAAE,KAAKxM,CAAC,CAAC+a,CAAC,IAAIvO,EAAE,KAAKxM,CAAC,CAACgb,CAAC,IAAIxO,EAAE,KAAKxM,CAAC,CAACkb,CAAC,EAAE;QACpElG,kBAAkB,CAAC5B,CAAC,EAAExI,KAAK,CAAC;MAChC,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAAC0R,CAAC,EAAE;QACnB+M,aAAa,CAACrL,CAAC,EAAExI,KAAK,CAAC;MAC3B,CAAC,MAAM;QACH6I,mBAAmB,CAACL,CAAC,EAAExI,KAAK,CAAC;MACjC;MAEA;IAEJ,KAAK,CAAC;MACF,IAAI4B,EAAE,KAAKxM,CAAC,CAACmb,EAAE,IAAI3O,EAAE,KAAKxM,CAAC,CAACqb,EAAE,IAAI7O,EAAE,KAAKxM,CAAC,CAACob,EAAE,EAAE;QAC3CmD,mBAAmB,CAACnL,CAAC,EAAExI,KAAK,CAAC;MACjC,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAACkY,EAAE,EAAE;QACpBwG,cAAc,CAACtL,CAAC,EAAExI,KAAK,CAAC;MAC5B,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAACmY,EAAE,IAAI3L,EAAE,KAAKxM,CAAC,CAACoY,EAAE,EAAE;QACnCwG,cAAc,CAACxL,CAAC,EAAExI,KAAK,CAAC;MAC5B,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAACsX,EAAE,IAAI9K,EAAE,KAAKxM,CAAC,CAACuX,EAAE,IAAI/K,EAAE,KAAKxM,CAAC,CAACwX,EAAE,IAAIhL,EAAE,KAAKxM,CAAC,CAACyX,EAAE,IAAIjL,EAAE,KAAKxM,CAAC,CAAC0X,EAAE,IAAIlL,EAAE,KAAKxM,CAAC,CAAC2X,EAAE,EAAE;QAC/FkH,0BAA0B,CAACzL,CAAC,EAAExI,KAAK,CAAC;MACxC,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAAC0V,EAAE,EAAE;QACpBuJ,cAAc,CAAC7L,CAAC,EAAExI,KAAK,CAAC;MAC5B,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAACsb,EAAE,IAAI9O,EAAE,KAAKxM,CAAC,CAACub,EAAE,EAAE;QACnCvG,kBAAkB,CAAC5B,CAAC,EAAExI,KAAK,CAAC;MAChC,CAAC,MAAM;QACH6I,mBAAmB,CAACL,CAAC,EAAExI,KAAK,CAAC;MACjC;MAEA;IAEJ,KAAK,CAAC;MACF,IAAI4B,EAAE,KAAKxM,CAAC,CAAC+b,GAAG,EAAE;QACd/G,kBAAkB,CAAC5B,CAAC,EAAExI,KAAK,CAAC;MAChC,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAAC4b,GAAG,IAAIpP,EAAE,KAAKxM,CAAC,CAACsY,GAAG,IAAI9L,EAAE,KAAKxM,CAAC,CAAC6b,GAAG,IAAIrP,EAAE,KAAKxM,CAAC,CAAC8b,GAAG,EAAE;QACrEyC,mBAAmB,CAACnL,CAAC,EAAExI,KAAK,CAAC;MACjC,CAAC,MAAM;QACH6I,mBAAmB,CAACL,CAAC,EAAExI,KAAK,CAAC;MACjC;MAEA;IAEJ,KAAK,CAAC;MACF,IAAI4B,EAAE,KAAKxM,CAAC,CAAC4C,IAAI,EAAE;QACfyb,gBAAgB,CAACjL,CAAC,EAAExI,KAAK,CAAC;MAC9B,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAACD,IAAI,EAAE;QACtBue,gBAAgB,CAAClL,CAAC,EAAExI,KAAK,CAAC;MAC9B,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAACsM,IAAI,EAAE;QACtBkS,gBAAgB,CAACpL,CAAC,EAAExI,KAAK,CAAC;MAC9B,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAACmc,IAAI,IAAI3P,EAAE,KAAKxM,CAAC,CAACoc,IAAI,IAAI5P,EAAE,KAAKxM,CAAC,CAACgZ,IAAI,EAAE;QACxDhE,kBAAkB,CAAC5B,CAAC,EAAExI,KAAK,CAAC;MAChC,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAACic,IAAI,IAAIzP,EAAE,KAAKxM,CAAC,CAACkc,IAAI,EAAE;QACvCqC,mBAAmB,CAACnL,CAAC,EAAExI,KAAK,CAAC;MACjC,CAAC,MAAM;QACH6I,mBAAmB,CAACL,CAAC,EAAExI,KAAK,CAAC;MACjC;MAEA;IAEJ,KAAK,CAAC;MACF,IAAI4B,EAAE,KAAKxM,CAAC,CAACuc,KAAK,EAAE;QAChBgC,mBAAmB,CAACnL,CAAC,EAAExI,KAAK,CAAC;MACjC,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAACwc,KAAK,EAAE;QACvBxH,kBAAkB,CAAC5B,CAAC,EAAExI,KAAK,CAAC;MAChC,CAAC,MAAM;QACH6I,mBAAmB,CAACL,CAAC,EAAExI,KAAK,CAAC;MACjC;MAEA;IAEJ,KAAK,CAAC;MACF,IACI4B,EAAE,KAAKxM,CAAC,CAAC+c,MAAM,IACfvQ,EAAE,KAAKxM,CAAC,CAACgd,MAAM,IACfxQ,EAAE,KAAKxM,CAAC,CAACid,MAAM,IACfzQ,EAAE,KAAKxM,CAAC,CAACkd,MAAM,IACf1Q,EAAE,KAAKxM,CAAC,CAACmd,MAAM,IACf3Q,EAAE,KAAKxM,CAAC,CAACod,MAAM,EACjB;QACEmB,mBAAmB,CAACnL,CAAC,EAAExI,KAAK,CAAC;MACjC,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAACud,MAAM,IAAI/Q,EAAE,KAAKxM,CAAC,CAACwd,MAAM,EAAE;QAC3CwB,kBAAkB,CAAC5L,CAAC,EAAExI,KAAK,CAAC;MAChC,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAACqd,MAAM,IAAI7Q,EAAE,KAAKxM,CAAC,CAACsd,MAAM,EAAE;QAC3CtI,kBAAkB,CAAC5B,CAAC,EAAExI,KAAK,CAAC;MAChC,CAAC,MAAM;QACH6I,mBAAmB,CAACL,CAAC,EAAExI,KAAK,CAAC;MACjC;MAEA;IAEJ,KAAK,CAAC;MACF,IACI4B,EAAE,KAAKxM,CAAC,CAACqY,OAAO,IAChB7L,EAAE,KAAKxM,CAAC,CAAC4d,OAAO,IAChBpR,EAAE,KAAKxM,CAAC,CAAC2d,OAAO,IAChBnR,EAAE,KAAKxM,CAAC,CAAC6d,OAAO,IAChBrR,EAAE,KAAKxM,CAAC,CAAC8d,OAAO,IAChBtR,EAAE,KAAKxM,CAAC,CAAC+d,OAAO,EAClB;QACEQ,mBAAmB,CAACnL,CAAC,EAAExI,KAAK,CAAC;MACjC,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAACge,OAAO,EAAE;QACzBgB,kBAAkB,CAAC5L,CAAC,EAAExI,KAAK,CAAC;MAChC,CAAC,MAAM;QACH6I,mBAAmB,CAACL,CAAC,EAAExI,KAAK,CAAC;MACjC;MAEA;IAEJ,KAAK,CAAC;MACF,IAAI4B,EAAE,KAAKxM,CAAC,CAACie,QAAQ,EAAE;QACnBM,mBAAmB,CAACnL,CAAC,EAAExI,KAAK,CAAC;MACjC,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAAC6I,QAAQ,EAAE;QAC1BpE,YAAY,CAAC2O,CAAC,EAAExI,KAAK,CAAC;MAC1B,CAAC,MAAM;QACH6I,mBAAmB,CAACL,CAAC,EAAExI,KAAK,CAAC;MACjC;MAEA;IAEJ,KAAK,EAAE;MACH,IAAI4B,EAAE,KAAKxM,CAAC,CAACme,UAAU,IAAI3R,EAAE,KAAKxM,CAAC,CAACoe,UAAU,EAAE;QAC5CG,mBAAmB,CAACnL,CAAC,EAAExI,KAAK,CAAC;MACjC,CAAC,MAAM;QACH6I,mBAAmB,CAACL,CAAC,EAAExI,KAAK,CAAC;MACjC;MAEA;IAEJ;MACI6I,mBAAmB,CAACL,CAAC,EAAExI,KAAK,CAAC;EACrC;AACJ;AAEA,SAASxF,SAASA,CAACgO,CAAC,EAAExI,KAAK,EAAE;EACzB,IAAIwI,CAAC,CAAClJ,yBAAyB,GAAG,CAAC,CAAC,EAAE;IAClCpD,aAAa,CAACsM,CAAC,EAAExI,KAAK,CAAC;EAC3B,CAAC,MAAM;IACHwI,CAAC,CAAC1J,OAAO,GAAG,IAAI;EACpB;AACJ;;AAEA;AACA;AACA,SAASrE,YAAYA,CAAC+N,CAAC,EAAExI,KAAK,EAAE;EAC5B,IAAIA,KAAK,CAACuD,OAAO,KAAKnO,CAAC,CAACmN,MAAM,EAAE;IAC5BiG,CAAC,CAACtL,aAAa,GAAGsL,CAAC,CAACrJ,YAAY,CAACwB,OAAO;EAC5C;EAEA6H,CAAC,CAACrJ,YAAY,CAACuI,GAAG,CAAC,CAAC;EACpBc,CAAC,CAACzJ,aAAa,GAAGyJ,CAAC,CAACxJ,qBAAqB;AAC7C;AAEA,SAAStE,SAASA,CAAC8N,CAAC,EAAExI,KAAK,EAAE;EACzBwI,CAAC,CAAC3I,IAAI,CAAC5K,GAAG,CAACqf,kCAAkC,CAAC;EAC9C9L,CAAC,CAACrJ,YAAY,CAACuI,GAAG,CAAC,CAAC;EACpBc,CAAC,CAACzJ,aAAa,GAAGyJ,CAAC,CAACxJ,qBAAqB;EACzCwJ,CAAC,CAACrD,aAAa,CAACnF,KAAK,CAAC;AAC1B;;AAEA;AACA;AACA,SAASrF,gBAAgBA,CAAC6N,CAAC,EAAExI,KAAK,EAAE;EAChC,IAAMuU,KAAK,GAAG/L,CAAC,CAACrJ,YAAY,CAACsM,cAAc;EAE3C,IAAI8I,KAAK,KAAKnf,CAAC,CAAC2C,KAAK,IAAIwc,KAAK,KAAKnf,CAAC,CAACsC,KAAK,IAAI6c,KAAK,KAAKnf,CAAC,CAACwC,KAAK,IAAI2c,KAAK,KAAKnf,CAAC,CAACuC,KAAK,IAAI4c,KAAK,KAAKnf,CAAC,CAACqC,EAAE,EAAE;IACpG+Q,CAAC,CAAChJ,sBAAsB,GAAG,EAAE;IAC7BgJ,CAAC,CAAC/I,qCAAqC,GAAG,KAAK;IAC/C+I,CAAC,CAACxJ,qBAAqB,GAAGwJ,CAAC,CAACzJ,aAAa;IACzCyJ,CAAC,CAACzJ,aAAa,GAAGrI,kBAAkB;IACpC8R,CAAC,CAACrD,aAAa,CAACnF,KAAK,CAAC;EAC1B,CAAC,MAAM;IACHwU,YAAY,CAAChM,CAAC,EAAExI,KAAK,CAAC;EAC1B;AACJ;AAEA,SAASyU,sBAAsBA,CAACjM,CAAC,EAAExI,KAAK,EAAE;EACtCwI,CAAC,CAACrJ,YAAY,CAACuV,uBAAuB,CAAC,CAAC;EACxClM,CAAC,CAACpJ,wBAAwB,CAACiM,YAAY,CAAC,CAAC;EACzC7C,CAAC,CAACrH,cAAc,CAACnB,KAAK,EAAE1K,EAAE,CAACH,IAAI,CAAC;EAChCqT,CAAC,CAACzJ,aAAa,GAAGpI,eAAe;AACrC;AAEA,SAASge,uBAAuBA,CAACnM,CAAC,EAAExI,KAAK,EAAE;EACvCwI,CAAC,CAACrJ,YAAY,CAACuV,uBAAuB,CAAC,CAAC;EACxClM,CAAC,CAACrH,cAAc,CAACnB,KAAK,EAAE1K,EAAE,CAACH,IAAI,CAAC;EAChCqT,CAAC,CAACzJ,aAAa,GAAGnI,oBAAoB;AAC1C;AAEA,SAASge,kBAAkBA,CAACpM,CAAC,EAAExI,KAAK,EAAE;EAClCwI,CAAC,CAACrJ,YAAY,CAACuV,uBAAuB,CAAC,CAAC;EACxClM,CAAC,CAAC9E,kBAAkB,CAACtO,CAAC,CAAC0C,QAAQ,CAAC;EAChC0Q,CAAC,CAACzJ,aAAa,GAAGnI,oBAAoB;EACtC4R,CAAC,CAACrD,aAAa,CAACnF,KAAK,CAAC;AAC1B;AAEA,SAAS6U,oBAAoBA,CAACrM,CAAC,EAAExI,KAAK,EAAE;EACpCwI,CAAC,CAACrJ,YAAY,CAACuV,uBAAuB,CAAC,CAAC;EACxClM,CAAC,CAACrH,cAAc,CAACnB,KAAK,EAAE1K,EAAE,CAACH,IAAI,CAAC;EAChCqT,CAAC,CAACzJ,aAAa,GAAGlI,kBAAkB;AACxC;AAEA,SAASie,iBAAiBA,CAACtM,CAAC,EAAExI,KAAK,EAAE;EACjCwI,CAAC,CAACrJ,YAAY,CAACuV,uBAAuB,CAAC,CAAC;EACxClM,CAAC,CAAC9E,kBAAkB,CAACtO,CAAC,CAACsC,KAAK,CAAC;EAC7B8Q,CAAC,CAACzJ,aAAa,GAAGlI,kBAAkB;EACpC2R,CAAC,CAACrD,aAAa,CAACnF,KAAK,CAAC;AAC1B;AAEA,SAAS+U,oBAAoBA,CAACvM,CAAC,EAAExI,KAAK,EAAE;EACpC,IAAIwI,CAAC,CAACrJ,YAAY,CAAC6V,eAAe,CAAC5f,CAAC,CAAC2C,KAAK,CAAC,EAAE;IACzCyQ,CAAC,CAACrJ,YAAY,CAAC4H,qBAAqB,CAAC3R,CAAC,CAAC2C,KAAK,CAAC;IAC7CyQ,CAAC,CAACjK,mBAAmB,CAAC,CAAC;IACvBiK,CAAC,CAACrD,aAAa,CAACnF,KAAK,CAAC;EAC1B;AACJ;AAEA,SAASiV,oBAAoBA,CAACzM,CAAC,EAAExI,KAAK,EAAE;EACpC,IAAMyO,SAAS,GAAGla,SAAS,CAACma,YAAY,CAAC1O,KAAK,EAAExK,KAAK,CAACmZ,IAAI,CAAC;EAE3D,IAAIF,SAAS,IAAIA,SAAS,CAACG,WAAW,CAAC,CAAC,KAAK9Y,iBAAiB,EAAE;IAC5D0S,CAAC,CAACnF,cAAc,CAACrD,KAAK,EAAE1K,EAAE,CAACH,IAAI,CAAC;EACpC,CAAC,MAAM;IACHqf,YAAY,CAAChM,CAAC,EAAExI,KAAK,CAAC;EAC1B;EAEAA,KAAK,CAAC2F,cAAc,GAAG,IAAI;AAC/B;AAEA,SAASuP,mBAAmBA,CAAC1M,CAAC,EAAExI,KAAK,EAAE;EACnC,IAAI,CAACwI,CAAC,CAACtJ,WAAW,IAAIsJ,CAAC,CAACrJ,YAAY,CAACoM,SAAS,KAAK,CAAC,EAAE;IAClD/C,CAAC,CAACrH,cAAc,CAACnB,KAAK,EAAE1K,EAAE,CAACH,IAAI,CAAC;IAChCqT,CAAC,CAACtJ,WAAW,GAAGsJ,CAAC,CAACrJ,YAAY,CAACwB,OAAO;IACtC6H,CAAC,CAACrJ,YAAY,CAACuI,GAAG,CAAC,CAAC;EACxB;AACJ;AAEA,SAAS9M,eAAeA,CAAC4N,CAAC,EAAExI,KAAK,EAAE;EAC/B,IAAM4B,EAAE,GAAG5B,KAAK,CAACuD,OAAO;EAExB,QAAQ3B,EAAE,CAACvB,MAAM;IACb,KAAK,CAAC;MACF,IAAIuB,EAAE,KAAKxM,CAAC,CAACgD,EAAE,IAAIwJ,EAAE,KAAKxM,CAAC,CAACiD,EAAE,IAAIuJ,EAAE,KAAKxM,CAAC,CAACqC,EAAE,EAAE;QAC3Cqd,iBAAiB,CAACtM,CAAC,EAAExI,KAAK,CAAC;MAC/B,CAAC,MAAM;QACHwU,YAAY,CAAChM,CAAC,EAAExI,KAAK,CAAC;MAC1B;MAEA;IAEJ,KAAK,CAAC;MACF,IAAI4B,EAAE,KAAKxM,CAAC,CAAC+C,GAAG,EAAE;QACdyc,kBAAkB,CAACpM,CAAC,EAAExI,KAAK,CAAC;MAChC,CAAC,MAAM;QACHwU,YAAY,CAAChM,CAAC,EAAExI,KAAK,CAAC;MAC1B;MAEA;IAEJ,KAAK,CAAC;MACF,IAAI4B,EAAE,KAAKxM,CAAC,CAACsM,IAAI,EAAE;QACfwT,mBAAmB,CAAC1M,CAAC,EAAExI,KAAK,CAAC;MACjC,CAAC,MAAM;QACHwU,YAAY,CAAChM,CAAC,EAAExI,KAAK,CAAC;MAC1B;MAEA;IAEJ,KAAK,CAAC;MACF,IAAI4B,EAAE,KAAKxM,CAAC,CAAC2C,KAAK,EAAE;QAChBgd,oBAAoB,CAACvM,CAAC,EAAExI,KAAK,CAAC;MAClC,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAAC4M,KAAK,EAAE;QACvBpI,cAAc,CAAC4O,CAAC,EAAExI,KAAK,CAAC;MAC5B,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAACsC,KAAK,IAAIkK,EAAE,KAAKxM,CAAC,CAACwC,KAAK,IAAIgK,EAAE,KAAKxM,CAAC,CAACuC,KAAK,EAAE;QAC3Dkd,oBAAoB,CAACrM,CAAC,EAAExI,KAAK,CAAC;MAClC,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAAC0c,KAAK,EAAE;QACvBmD,oBAAoB,CAACzM,CAAC,EAAExI,KAAK,CAAC;MAClC,CAAC,MAAM;QACHwU,YAAY,CAAChM,CAAC,EAAExI,KAAK,CAAC;MAC1B;MAEA;IAEJ,KAAK,CAAC;MACF,IAAI4B,EAAE,KAAKxM,CAAC,CAACmN,MAAM,EAAE;QACjB3I,cAAc,CAAC4O,CAAC,EAAExI,KAAK,CAAC;MAC5B,CAAC,MAAM;QACHwU,YAAY,CAAChM,CAAC,EAAExI,KAAK,CAAC;MAC1B;MAEA;IAEJ,KAAK,CAAC;MACF,IAAI4B,EAAE,KAAKxM,CAAC,CAACyC,OAAO,EAAE;QAClB4c,sBAAsB,CAACjM,CAAC,EAAExI,KAAK,CAAC;MACpC,CAAC,MAAM;QACHwU,YAAY,CAAChM,CAAC,EAAExI,KAAK,CAAC;MAC1B;MAEA;IAEJ,KAAK,CAAC;MACF,IAAI4B,EAAE,KAAKxM,CAAC,CAAC0C,QAAQ,EAAE;QACnB6c,uBAAuB,CAACnM,CAAC,EAAExI,KAAK,CAAC;MACrC,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAAC6I,QAAQ,EAAE;QAC1BrE,cAAc,CAAC4O,CAAC,EAAExI,KAAK,CAAC;MAC5B,CAAC,MAAM;QACHwU,YAAY,CAAChM,CAAC,EAAExI,KAAK,CAAC;MAC1B;MAEA;IAEJ;MACIwU,YAAY,CAAChM,CAAC,EAAExI,KAAK,CAAC;EAC9B;AACJ;AAEA,SAASnF,aAAaA,CAAC2N,CAAC,EAAExI,KAAK,EAAE;EAC7B,IAAM4B,EAAE,GAAG5B,KAAK,CAACuD,OAAO;EAExB,IAAI3B,EAAE,KAAKxM,CAAC,CAAC2C,KAAK,EAAE;IAChB,IAAIyQ,CAAC,CAACrJ,YAAY,CAAC6V,eAAe,CAAC5f,CAAC,CAAC2C,KAAK,CAAC,EAAE;MACzCyQ,CAAC,CAACrJ,YAAY,CAAC4H,qBAAqB,CAAC3R,CAAC,CAAC2C,KAAK,CAAC;MAC7CyQ,CAAC,CAACjK,mBAAmB,CAAC,CAAC;IAC3B;EACJ,CAAC,MAAM,IAAIqD,EAAE,KAAKxM,CAAC,CAAC6I,QAAQ,EAAE;IAC1BpE,YAAY,CAAC2O,CAAC,EAAExI,KAAK,CAAC;EAC1B,CAAC,MAAM,IACH4B,EAAE,KAAKxM,CAAC,CAAC4C,IAAI,IACb4J,EAAE,KAAKxM,CAAC,CAACyC,OAAO,IAChB+J,EAAE,KAAKxM,CAAC,CAAC+C,GAAG,IACZyJ,EAAE,KAAKxM,CAAC,CAAC0C,QAAQ,IACjB8J,EAAE,KAAKxM,CAAC,CAACD,IAAI,IACbyM,EAAE,KAAKxM,CAAC,CAACsC,KAAK,IACdkK,EAAE,KAAKxM,CAAC,CAACgD,EAAE,IACXwJ,EAAE,KAAKxM,CAAC,CAACwC,KAAK,IACdgK,EAAE,KAAKxM,CAAC,CAACiD,EAAE,IACXuJ,EAAE,KAAKxM,CAAC,CAACuC,KAAK,IACdiK,EAAE,KAAKxM,CAAC,CAACqC,EAAE,EACb;IACE+c,YAAY,CAAChM,CAAC,EAAExI,KAAK,CAAC;EAC1B;AACJ;AAEA,SAASwU,YAAYA,CAAChM,CAAC,EAAExI,KAAK,EAAE;EAC5B,IAAMmV,yBAAyB,GAAG3M,CAAC,CAAC5I,sBAAsB;EAE1D4I,CAAC,CAAC5I,sBAAsB,GAAG,IAAI;EAC/B4I,CAAC,CAACpD,uBAAuB,CAACpF,KAAK,CAAC;EAChCwI,CAAC,CAAC5I,sBAAsB,GAAGuV,yBAAyB;AACxD;;AAEA;AACA;AACA,SAASpa,8BAA8BA,CAACyN,CAAC,EAAExI,KAAK,EAAE;EAC9CwI,CAAC,CAAChJ,sBAAsB,CAACiE,IAAI,CAACzD,KAAK,CAAC;AACxC;AAEA,SAASlF,oBAAoBA,CAAC0N,CAAC,EAAExI,KAAK,EAAE;EACpCwI,CAAC,CAAChJ,sBAAsB,CAACiE,IAAI,CAACzD,KAAK,CAAC;EACpCwI,CAAC,CAAC/I,qCAAqC,GAAG,IAAI;AAClD;AAEA,SAASzE,gBAAgBA,CAACwN,CAAC,EAAExI,KAAK,EAAE;EAChC,IAAIuG,CAAC,GAAG,CAAC;EAET,IAAIiC,CAAC,CAAC/I,qCAAqC,EAAE;IACzC,OAAO8G,CAAC,GAAGiC,CAAC,CAAChJ,sBAAsB,CAACa,MAAM,EAAEkG,CAAC,EAAE,EAAE;MAC7CiO,YAAY,CAAChM,CAAC,EAAEA,CAAC,CAAChJ,sBAAsB,CAAC+G,CAAC,CAAC,CAAC;IAChD;EACJ,CAAC,MAAM;IACH,OAAOA,CAAC,GAAGiC,CAAC,CAAChJ,sBAAsB,CAACa,MAAM,EAAEkG,CAAC,EAAE,EAAE;MAC7CiC,CAAC,CAACrE,iBAAiB,CAACqE,CAAC,CAAChJ,sBAAsB,CAAC+G,CAAC,CAAC,CAAC;IACpD;EACJ;EAEAiC,CAAC,CAACzJ,aAAa,GAAGyJ,CAAC,CAACxJ,qBAAqB;EACzCwJ,CAAC,CAACrD,aAAa,CAACnF,KAAK,CAAC;AAC1B;;AAEA;AACA;AACA,SAAS/E,iBAAiBA,CAACuN,CAAC,EAAExI,KAAK,EAAE;EACjC,IAAM4B,EAAE,GAAG5B,KAAK,CAACuD,OAAO;EAExB,IACI3B,EAAE,KAAKxM,CAAC,CAACyC,OAAO,IAChB+J,EAAE,KAAKxM,CAAC,CAAC+C,GAAG,IACZyJ,EAAE,KAAKxM,CAAC,CAAC0C,QAAQ,IACjB8J,EAAE,KAAKxM,CAAC,CAACsC,KAAK,IACdkK,EAAE,KAAKxM,CAAC,CAACgD,EAAE,IACXwJ,EAAE,KAAKxM,CAAC,CAACwC,KAAK,IACdgK,EAAE,KAAKxM,CAAC,CAACiD,EAAE,IACXuJ,EAAE,KAAKxM,CAAC,CAACuC,KAAK,IACdiK,EAAE,KAAKxM,CAAC,CAACqC,EAAE,EACb;IACE,IAAI+Q,CAAC,CAACrJ,YAAY,CAAC6V,eAAe,CAAC5f,CAAC,CAACyC,OAAO,CAAC,EAAE;MAC3C2Q,CAAC,CAACrJ,YAAY,CAACsH,sBAAsB,CAAC,CAAC;MACvC+B,CAAC,CAACrJ,YAAY,CAAC4H,qBAAqB,CAAC3R,CAAC,CAACyC,OAAO,CAAC;MAC/C2Q,CAAC,CAACpJ,wBAAwB,CAACuH,iBAAiB,CAAC,CAAC;MAC9C6B,CAAC,CAACzJ,aAAa,GAAGtI,aAAa;MAC/B+R,CAAC,CAACrD,aAAa,CAACnF,KAAK,CAAC;IAC1B;EACJ,CAAC,MAAM;IACH1F,cAAc,CAACkO,CAAC,EAAExI,KAAK,CAAC;EAC5B;AACJ;AAEA,SAAS9E,eAAeA,CAACsN,CAAC,EAAExI,KAAK,EAAE;EAC/B,IAAM4B,EAAE,GAAG5B,KAAK,CAACuD,OAAO;EAExB,IAAI3B,EAAE,KAAKxM,CAAC,CAACyC,OAAO,IAAI+J,EAAE,KAAKxM,CAAC,CAAC2C,KAAK,EAAE;IACpC,IAAIyQ,CAAC,CAACrJ,YAAY,CAAC6V,eAAe,CAAC5f,CAAC,CAACyC,OAAO,CAAC,EAAE;MAC3C2Q,CAAC,CAACrJ,YAAY,CAACsH,sBAAsB,CAAC,CAAC;MACvC+B,CAAC,CAACrJ,YAAY,CAAC4H,qBAAqB,CAAC3R,CAAC,CAACyC,OAAO,CAAC;MAC/C2Q,CAAC,CAACpJ,wBAAwB,CAACuH,iBAAiB,CAAC,CAAC;MAC9C6B,CAAC,CAACzJ,aAAa,GAAGtI,aAAa;MAE/B,IAAImL,EAAE,KAAKxM,CAAC,CAAC2C,KAAK,EAAE;QAChByQ,CAAC,CAACrD,aAAa,CAACnF,KAAK,CAAC;MAC1B;IACJ;EACJ,CAAC,MAAM,IACH4B,EAAE,KAAKxM,CAAC,CAAC4C,IAAI,IACb4J,EAAE,KAAKxM,CAAC,CAAC+C,GAAG,IACZyJ,EAAE,KAAKxM,CAAC,CAAC0C,QAAQ,IACjB8J,EAAE,KAAKxM,CAAC,CAACD,IAAI,IACbyM,EAAE,KAAKxM,CAAC,CAACsC,KAAK,IACdkK,EAAE,KAAKxM,CAAC,CAACgD,EAAE,IACXwJ,EAAE,KAAKxM,CAAC,CAACwC,KAAK,IACdgK,EAAE,KAAKxM,CAAC,CAACiD,EAAE,IACXuJ,EAAE,KAAKxM,CAAC,CAACuC,KAAK,IACdiK,EAAE,KAAKxM,CAAC,CAACqC,EAAE,EACb;IACE8C,YAAY,CAACiO,CAAC,EAAExI,KAAK,CAAC;EAC1B;AACJ;;AAEA;AACA;AACA,SAAS5E,qBAAqBA,CAACoN,CAAC,EAAExI,KAAK,EAAE;EACrC,IAAM4B,EAAE,GAAG5B,KAAK,CAACuD,OAAO;EAExB,IAAI3B,EAAE,KAAKxM,CAAC,CAACD,IAAI,EAAE;IACfmF,cAAc,CAACkO,CAAC,EAAExI,KAAK,CAAC;EAC5B,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAAC+C,GAAG,EAAE;IACrBqQ,CAAC,CAACnF,cAAc,CAACrD,KAAK,EAAE1K,EAAE,CAACH,IAAI,CAAC;IAChC6K,KAAK,CAAC2F,cAAc,GAAG,IAAI;EAC/B,CAAC,MAAM,IAAI/D,EAAE,KAAKxM,CAAC,CAAC6I,QAAQ,EAAE;IAC1BrE,cAAc,CAAC4O,CAAC,EAAExI,KAAK,CAAC;EAC5B,CAAC,MAAM;IACH7E,kBAAkB,CAACqN,CAAC,EAAExI,KAAK,CAAC;EAChC;AACJ;AAEA,SAAS3E,mBAAmBA,CAACmN,CAAC,EAAExI,KAAK,EAAE;EACnC,IAAM4B,EAAE,GAAG5B,KAAK,CAACuD,OAAO;EAExB,IAAI3B,EAAE,KAAKxM,CAAC,CAAC0C,QAAQ,EAAE;IACnB,IAAI0Q,CAAC,CAACrJ,YAAY,CAACsM,cAAc,KAAKrW,CAAC,CAAC0C,QAAQ,EAAE;MAC9C0Q,CAAC,CAACrJ,YAAY,CAACuI,GAAG,CAAC,CAAC;MACpBc,CAAC,CAACzJ,aAAa,GAAGtI,aAAa;IACnC;EACJ,CAAC,MAAM,IAAImL,EAAE,KAAKxM,CAAC,CAAC6I,QAAQ,EAAE;IAC1BpE,YAAY,CAAC2O,CAAC,EAAExI,KAAK,CAAC;EAC1B,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAAC+C,GAAG,EAAE;IACrBgD,kBAAkB,CAACqN,CAAC,EAAExI,KAAK,CAAC;EAChC;AACJ;AAEA,SAAS7E,kBAAkBA,CAACqN,CAAC,EAAExI,KAAK,EAAE;EAClC,IAAIwI,CAAC,CAACrJ,YAAY,CAACsM,cAAc,KAAKrW,CAAC,CAAC0C,QAAQ,EAAE;IAC9C0Q,CAAC,CAACrJ,YAAY,CAACuI,GAAG,CAAC,CAAC;IACpBc,CAAC,CAACzJ,aAAa,GAAGtI,aAAa;IAC/B+R,CAAC,CAACrD,aAAa,CAACnF,KAAK,CAAC;EAC1B;AACJ;;AAEA;AACA;AACA,SAAS1E,mBAAmBA,CAACkN,CAAC,EAAExI,KAAK,EAAE;EACnC,IAAM4B,EAAE,GAAG5B,KAAK,CAACuD,OAAO;EAExB,IAAI3B,EAAE,KAAKxM,CAAC,CAACqC,EAAE,EAAE;IACb+Q,CAAC,CAACrJ,YAAY,CAACiW,2BAA2B,CAAC,CAAC;IAC5C5M,CAAC,CAACrH,cAAc,CAACnB,KAAK,EAAE1K,EAAE,CAACH,IAAI,CAAC;IAChCqT,CAAC,CAACzJ,aAAa,GAAGjI,WAAW;EACjC,CAAC,MAAM,IAAI8K,EAAE,KAAKxM,CAAC,CAACiD,EAAE,IAAIuJ,EAAE,KAAKxM,CAAC,CAACgD,EAAE,EAAE;IACnCoQ,CAAC,CAACrJ,YAAY,CAACiW,2BAA2B,CAAC,CAAC;IAC5C5M,CAAC,CAAC9E,kBAAkB,CAACtO,CAAC,CAACqC,EAAE,CAAC;IAC1B+Q,CAAC,CAACzJ,aAAa,GAAGjI,WAAW;IAC7B0R,CAAC,CAACrD,aAAa,CAACnF,KAAK,CAAC;EAC1B,CAAC,MAAM,IACH4B,EAAE,KAAKxM,CAAC,CAACyC,OAAO,IAChB+J,EAAE,KAAKxM,CAAC,CAAC+C,GAAG,IACZyJ,EAAE,KAAKxM,CAAC,CAAC0C,QAAQ,IACjB8J,EAAE,KAAKxM,CAAC,CAACsC,KAAK,IACdkK,EAAE,KAAKxM,CAAC,CAACwC,KAAK,IACdgK,EAAE,KAAKxM,CAAC,CAACuC,KAAK,EAChB;IACE,IAAI6Q,CAAC,CAACrJ,YAAY,CAACkW,+BAA+B,CAAC,CAAC,EAAE;MAClD7M,CAAC,CAACrJ,YAAY,CAACiW,2BAA2B,CAAC,CAAC;MAC5C5M,CAAC,CAACrJ,YAAY,CAACuI,GAAG,CAAC,CAAC;MACpBc,CAAC,CAACzJ,aAAa,GAAGtI,aAAa;MAC/B+R,CAAC,CAACrD,aAAa,CAACnF,KAAK,CAAC;IAC1B;EACJ,CAAC,MAAM;IACHpF,eAAe,CAAC4N,CAAC,EAAExI,KAAK,CAAC;EAC7B;AACJ;AAEA,SAASzE,iBAAiBA,CAACiN,CAAC,EAAExI,KAAK,EAAE;EACjC,IAAM4B,EAAE,GAAG5B,KAAK,CAACuD,OAAO;EAExB,IAAI3B,EAAE,KAAKxM,CAAC,CAACsC,KAAK,IAAIkK,EAAE,KAAKxM,CAAC,CAACwC,KAAK,IAAIgK,EAAE,KAAKxM,CAAC,CAACuC,KAAK,EAAE;IACpD,IAAI6Q,CAAC,CAACrJ,YAAY,CAAC6V,eAAe,CAACpT,EAAE,CAAC,EAAE;MACpC4G,CAAC,CAACrJ,YAAY,CAACiW,2BAA2B,CAAC,CAAC;MAC5C5M,CAAC,CAACrJ,YAAY,CAACuI,GAAG,CAAC,CAAC;MACpBc,CAAC,CAACzJ,aAAa,GAAGtI,aAAa;IACnC;EACJ,CAAC,MAAM,IAAImL,EAAE,KAAKxM,CAAC,CAAC2C,KAAK,EAAE;IACvB,IAAIyQ,CAAC,CAACrJ,YAAY,CAACkW,+BAA+B,CAAC,CAAC,EAAE;MAClD7M,CAAC,CAACrJ,YAAY,CAACiW,2BAA2B,CAAC,CAAC;MAC5C5M,CAAC,CAACrJ,YAAY,CAACuI,GAAG,CAAC,CAAC;MACpBc,CAAC,CAACzJ,aAAa,GAAGtI,aAAa;MAC/B+R,CAAC,CAACrD,aAAa,CAACnF,KAAK,CAAC;IAC1B;EACJ,CAAC,MAAM,IACF4B,EAAE,KAAKxM,CAAC,CAAC4C,IAAI,IAAI4J,EAAE,KAAKxM,CAAC,CAACyC,OAAO,IAAI+J,EAAE,KAAKxM,CAAC,CAAC+C,GAAG,IAAIyJ,EAAE,KAAKxM,CAAC,CAAC0C,QAAQ,IACtE8J,EAAE,KAAKxM,CAAC,CAACD,IAAI,IAAIyM,EAAE,KAAKxM,CAAC,CAACgD,EAAE,IAAIwJ,EAAE,KAAKxM,CAAC,CAACiD,EAAE,IAAIuJ,EAAE,KAAKxM,CAAC,CAACqC,EAAG,EAC9D;IACEoD,aAAa,CAAC2N,CAAC,EAAExI,KAAK,CAAC;EAC3B;AACJ;;AAEA;AACA;AACA,SAASxE,aAAaA,CAACgN,CAAC,EAAExI,KAAK,EAAE;EAC7B,IAAM4B,EAAE,GAAG5B,KAAK,CAACuD,OAAO;EAExB,IAAI3B,EAAE,KAAKxM,CAAC,CAACiD,EAAE,IAAIuJ,EAAE,KAAKxM,CAAC,CAACgD,EAAE,EAAE;IAC5BoQ,CAAC,CAACrJ,YAAY,CAACmW,0BAA0B,CAAC,CAAC;IAC3C9M,CAAC,CAACrH,cAAc,CAACnB,KAAK,EAAE1K,EAAE,CAACH,IAAI,CAAC;IAChCqT,CAAC,CAACzJ,aAAa,GAAGhI,YAAY;IAC9ByR,CAAC,CAACpJ,wBAAwB,CAACiM,YAAY,CAAC,CAAC;EAC7C,CAAC,MAAM,IACHzJ,EAAE,KAAKxM,CAAC,CAACyC,OAAO,IAChB+J,EAAE,KAAKxM,CAAC,CAAC+C,GAAG,IACZyJ,EAAE,KAAKxM,CAAC,CAAC0C,QAAQ,IACjB8J,EAAE,KAAKxM,CAAC,CAACsC,KAAK,IACdkK,EAAE,KAAKxM,CAAC,CAACwC,KAAK,IACdgK,EAAE,KAAKxM,CAAC,CAACuC,KAAK,IACdiK,EAAE,KAAKxM,CAAC,CAACqC,EAAE,EACb;IACE,IAAI+Q,CAAC,CAACrJ,YAAY,CAAC6V,eAAe,CAAC5f,CAAC,CAACqC,EAAE,CAAC,EAAE;MACtC+Q,CAAC,CAACrJ,YAAY,CAACmW,0BAA0B,CAAC,CAAC;MAC3C9M,CAAC,CAACrJ,YAAY,CAACuI,GAAG,CAAC,CAAC;MACpBc,CAAC,CAACzJ,aAAa,GAAGlI,kBAAkB;MACpC2R,CAAC,CAACrD,aAAa,CAACnF,KAAK,CAAC;IAC1B;EACJ,CAAC,MAAM;IACHpF,eAAe,CAAC4N,CAAC,EAAExI,KAAK,CAAC;EAC7B;AACJ;AAEA,SAASvE,WAAWA,CAAC+M,CAAC,EAAExI,KAAK,EAAE;EAC3B,IAAM4B,EAAE,GAAG5B,KAAK,CAACuD,OAAO;EAExB,IAAI3B,EAAE,KAAKxM,CAAC,CAACqC,EAAE,EAAE;IACb,IAAI+Q,CAAC,CAACrJ,YAAY,CAAC6V,eAAe,CAAC5f,CAAC,CAACqC,EAAE,CAAC,EAAE;MACtC+Q,CAAC,CAACrJ,YAAY,CAACmW,0BAA0B,CAAC,CAAC;MAC3C9M,CAAC,CAACrJ,YAAY,CAACuI,GAAG,CAAC,CAAC;MACpBc,CAAC,CAACzJ,aAAa,GAAGlI,kBAAkB;IACxC;EACJ,CAAC,MAAM,IAAI+K,EAAE,KAAKxM,CAAC,CAAC2C,KAAK,EAAE;IACvB,IAAIyQ,CAAC,CAACrJ,YAAY,CAAC6V,eAAe,CAAC5f,CAAC,CAACqC,EAAE,CAAC,EAAE;MACtC+Q,CAAC,CAACrJ,YAAY,CAACmW,0BAA0B,CAAC,CAAC;MAC3C9M,CAAC,CAACrJ,YAAY,CAACuI,GAAG,CAAC,CAAC;MACpBc,CAAC,CAACzJ,aAAa,GAAGlI,kBAAkB;MACpC2R,CAAC,CAACrD,aAAa,CAACnF,KAAK,CAAC;IAC1B;EACJ,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAACsC,KAAK,IAAIkK,EAAE,KAAKxM,CAAC,CAACwC,KAAK,IAAIgK,EAAE,KAAKxM,CAAC,CAACuC,KAAK,EAAE;IAC3D,IAAI6Q,CAAC,CAACrJ,YAAY,CAAC6V,eAAe,CAACpT,EAAE,CAAC,IAAI4G,CAAC,CAACrJ,YAAY,CAAC6V,eAAe,CAAC5f,CAAC,CAACqC,EAAE,CAAC,EAAE;MAC5E+Q,CAAC,CAACrJ,YAAY,CAACmW,0BAA0B,CAAC,CAAC;MAC3C9M,CAAC,CAACrJ,YAAY,CAACuI,GAAG,CAAC,CAAC;MACpBc,CAAC,CAACzJ,aAAa,GAAGlI,kBAAkB;MACpC2R,CAAC,CAACrD,aAAa,CAACnF,KAAK,CAAC;IAC1B;EACJ,CAAC,MAAM,IACF4B,EAAE,KAAKxM,CAAC,CAAC4C,IAAI,IAAI4J,EAAE,KAAKxM,CAAC,CAACyC,OAAO,IAAI+J,EAAE,KAAKxM,CAAC,CAAC+C,GAAG,IAAIyJ,EAAE,KAAKxM,CAAC,CAAC0C,QAAQ,IACtE8J,EAAE,KAAKxM,CAAC,CAACD,IAAI,IAAIyM,EAAE,KAAKxM,CAAC,CAACgD,EAAE,IAAIwJ,EAAE,KAAKxM,CAAC,CAACiD,EAAG,EAC/C;IACEwC,aAAa,CAAC2N,CAAC,EAAExI,KAAK,CAAC;EAC3B;AACJ;;AAEA;AACA;AACA,SAAStE,cAAcA,CAAC8M,CAAC,EAAExI,KAAK,EAAE;EAC9B,IAAM4B,EAAE,GAAG5B,KAAK,CAACuD,OAAO;EAExB,IACI3B,EAAE,KAAKxM,CAAC,CAACyC,OAAO,IAChB+J,EAAE,KAAKxM,CAAC,CAAC+C,GAAG,IACZyJ,EAAE,KAAKxM,CAAC,CAAC0C,QAAQ,IACjB8J,EAAE,KAAKxM,CAAC,CAACsC,KAAK,IACdkK,EAAE,KAAKxM,CAAC,CAACgD,EAAE,IACXwJ,EAAE,KAAKxM,CAAC,CAACwC,KAAK,IACdgK,EAAE,KAAKxM,CAAC,CAACiD,EAAE,IACXuJ,EAAE,KAAKxM,CAAC,CAACuC,KAAK,IACdiK,EAAE,KAAKxM,CAAC,CAACqC,EAAE,EACb;IACE,IAAI+Q,CAAC,CAACrJ,YAAY,CAAC6V,eAAe,CAAC5f,CAAC,CAACgD,EAAE,CAAC,IAAIoQ,CAAC,CAACrJ,YAAY,CAAC6V,eAAe,CAAC5f,CAAC,CAACiD,EAAE,CAAC,EAAE;MAC9EmQ,CAAC,CAAChC,eAAe,CAAC,CAAC;MACnBgC,CAAC,CAACrD,aAAa,CAACnF,KAAK,CAAC;IAC1B;EACJ,CAAC,MAAM;IACH1F,cAAc,CAACkO,CAAC,EAAExI,KAAK,CAAC;EAC5B;AACJ;AAEA,SAASrE,YAAYA,CAAC6M,CAAC,EAAExI,KAAK,EAAE;EAC5B,IAAM4B,EAAE,GAAG5B,KAAK,CAACuD,OAAO;EAExB,IAAI3B,EAAE,KAAKxM,CAAC,CAACgD,EAAE,IAAIwJ,EAAE,KAAKxM,CAAC,CAACiD,EAAE,EAAE;IAC5B,IAAImQ,CAAC,CAACrJ,YAAY,CAAC6V,eAAe,CAACpT,EAAE,CAAC,EAAE;MACpC4G,CAAC,CAACrJ,YAAY,CAACsH,sBAAsB,CAAC,CAAC;MACvC+B,CAAC,CAACrJ,YAAY,CAAC4H,qBAAqB,CAACnF,EAAE,CAAC;MACxC4G,CAAC,CAACpJ,wBAAwB,CAACuH,iBAAiB,CAAC,CAAC;MAC9C6B,CAAC,CAACzJ,aAAa,GAAGjI,WAAW;IACjC;EACJ,CAAC,MAAM,IAAI8K,EAAE,KAAKxM,CAAC,CAAC2C,KAAK,IAAI6J,EAAE,KAAKxM,CAAC,CAACsC,KAAK,IAAIkK,EAAE,KAAKxM,CAAC,CAACwC,KAAK,IAAIgK,EAAE,KAAKxM,CAAC,CAACuC,KAAK,IAAIiK,EAAE,KAAKxM,CAAC,CAACqC,EAAE,EAAE;IAC5F,IAAI+Q,CAAC,CAACrJ,YAAY,CAAC6V,eAAe,CAACpT,EAAE,CAAC,EAAE;MACpC4G,CAAC,CAAChC,eAAe,CAAC,CAAC;MACnBgC,CAAC,CAACrD,aAAa,CAACnF,KAAK,CAAC;IAC1B;EACJ,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAAC4C,IAAI,IAAI4J,EAAE,KAAKxM,CAAC,CAACyC,OAAO,IAAI+J,EAAE,KAAKxM,CAAC,CAAC+C,GAAG,IAAIyJ,EAAE,KAAKxM,CAAC,CAAC0C,QAAQ,IAAI8J,EAAE,KAAKxM,CAAC,CAACD,IAAI,EAAE;IAChGoF,YAAY,CAACiO,CAAC,EAAExI,KAAK,CAAC;EAC1B;AACJ;;AAEA;AACA;AACA,SAASpE,gBAAgBA,CAAC4M,CAAC,EAAExI,KAAK,EAAE;EAChC,IAAM4B,EAAE,GAAG5B,KAAK,CAACuD,OAAO;EAExB,IAAI3B,EAAE,KAAKxM,CAAC,CAACD,IAAI,EAAE;IACfmF,cAAc,CAACkO,CAAC,EAAExI,KAAK,CAAC;EAC5B,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAACma,MAAM,EAAE;IACxB,IAAI/G,CAAC,CAACrJ,YAAY,CAACsM,cAAc,KAAKrW,CAAC,CAACma,MAAM,EAAE;MAC5C/G,CAAC,CAACrJ,YAAY,CAACuI,GAAG,CAAC,CAAC;IACxB;IAEAc,CAAC,CAACrH,cAAc,CAACnB,KAAK,EAAE1K,EAAE,CAACH,IAAI,CAAC;EACpC,CAAC,MAAM,IAAIyM,EAAE,KAAKxM,CAAC,CAACke,QAAQ,EAAE;IAC1B,IAAI9K,CAAC,CAACrJ,YAAY,CAACsM,cAAc,KAAKrW,CAAC,CAACma,MAAM,EAAE;MAC5C/G,CAAC,CAACrJ,YAAY,CAACuI,GAAG,CAAC,CAAC;IACxB;IAEA,IAAIc,CAAC,CAACrJ,YAAY,CAACsM,cAAc,KAAKrW,CAAC,CAACke,QAAQ,EAAE;MAC9C9K,CAAC,CAACrJ,YAAY,CAACuI,GAAG,CAAC,CAAC;IACxB;IAEAc,CAAC,CAACrH,cAAc,CAACnB,KAAK,EAAE1K,EAAE,CAACH,IAAI,CAAC;EACpC,CAAC,MAAM,IAAIyM,EAAE,KAAKxM,CAAC,CAAC0c,KAAK,IAAIlQ,EAAE,KAAKxM,CAAC,CAACyd,MAAM,IAAIjR,EAAE,KAAKxM,CAAC,CAAC0M,QAAQ,IAAIF,EAAE,KAAKxM,CAAC,CAACgS,MAAM,EAAE;IAClF,IAAIoB,CAAC,CAACrJ,YAAY,CAACoW,gBAAgB,CAACngB,CAAC,CAACgS,MAAM,CAAC,EAAE;MAC3CoB,CAAC,CAACrJ,YAAY,CAAC4H,qBAAqB,CAAC3R,CAAC,CAACgS,MAAM,CAAC;MAC9CoB,CAAC,CAACjK,mBAAmB,CAAC,CAAC;MAEvB,IAAIqD,EAAE,KAAKxM,CAAC,CAACgS,MAAM,EAAE;QACjBoB,CAAC,CAACrD,aAAa,CAACnF,KAAK,CAAC;MAC1B;IACJ;EACJ,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAACmN,MAAM,IAAIX,EAAE,KAAKxM,CAAC,CAAC6I,QAAQ,EAAE;IAC7CrE,cAAc,CAAC4O,CAAC,EAAExI,KAAK,CAAC;EAC5B;AACJ;AAEA,SAASnE,cAAcA,CAAC2M,CAAC,EAAExI,KAAK,EAAE;EAC9B,IAAM4B,EAAE,GAAG5B,KAAK,CAACuD,OAAO;EAExB,IAAI3B,EAAE,KAAKxM,CAAC,CAACke,QAAQ,EAAE;IACnB,IAAMkC,eAAe,GAAGhN,CAAC,CAACrJ,YAAY,CAAC8H,KAAK,CAACuB,CAAC,CAACrJ,YAAY,CAACqC,QAAQ,GAAG,CAAC,CAAC;IACzE,IAAMiU,iBAAiB,GAAGD,eAAe,IAAIhN,CAAC,CAAC3S,WAAW,CAACsI,UAAU,CAACqX,eAAe,CAAC;IAEtF,IAAIhN,CAAC,CAACrJ,YAAY,CAACsM,cAAc,KAAKrW,CAAC,CAACma,MAAM,IAAIkG,iBAAiB,KAAKrgB,CAAC,CAACke,QAAQ,EAAE;MAChF9K,CAAC,CAACrJ,YAAY,CAACuI,GAAG,CAAC,CAAC;IACxB;IAEA,IAAIc,CAAC,CAACrJ,YAAY,CAACsM,cAAc,KAAKrW,CAAC,CAACke,QAAQ,EAAE;MAC9C9K,CAAC,CAACrJ,YAAY,CAACuI,GAAG,CAAC,CAAC;IACxB;EACJ,CAAC,MAAM,IAAI9F,EAAE,KAAKxM,CAAC,CAACma,MAAM,EAAE;IACxB,IAAI/G,CAAC,CAACrJ,YAAY,CAACsM,cAAc,KAAKrW,CAAC,CAACma,MAAM,EAAE;MAC5C/G,CAAC,CAACrJ,YAAY,CAACuI,GAAG,CAAC,CAAC;IACxB;EACJ,CAAC,MAAM,IAAI9F,EAAE,KAAKxM,CAAC,CAACgS,MAAM,IAAIoB,CAAC,CAACrJ,YAAY,CAACoW,gBAAgB,CAACngB,CAAC,CAACgS,MAAM,CAAC,EAAE;IACrEoB,CAAC,CAACrJ,YAAY,CAAC4H,qBAAqB,CAAC3R,CAAC,CAACgS,MAAM,CAAC;IAC9CoB,CAAC,CAACjK,mBAAmB,CAAC,CAAC;EAC3B,CAAC,MAAM,IAAIqD,EAAE,KAAKxM,CAAC,CAAC6I,QAAQ,EAAE;IAC1BpE,YAAY,CAAC2O,CAAC,EAAExI,KAAK,CAAC;EAC1B;AACJ;;AAEA;AACA;AACA,SAASlE,uBAAuBA,CAAC0M,CAAC,EAAExI,KAAK,EAAE;EACvC,IAAM4B,EAAE,GAAG5B,KAAK,CAACuD,OAAO;EAExB,IACI3B,EAAE,KAAKxM,CAAC,CAACyC,OAAO,IAChB+J,EAAE,KAAKxM,CAAC,CAAC2C,KAAK,IACd6J,EAAE,KAAKxM,CAAC,CAACsC,KAAK,IACdkK,EAAE,KAAKxM,CAAC,CAACwC,KAAK,IACdgK,EAAE,KAAKxM,CAAC,CAACuC,KAAK,IACdiK,EAAE,KAAKxM,CAAC,CAACqC,EAAE,IACXmK,EAAE,KAAKxM,CAAC,CAACgD,EAAE,IACXwJ,EAAE,KAAKxM,CAAC,CAACiD,EAAE,EACb;IACEmQ,CAAC,CAACrJ,YAAY,CAAC4H,qBAAqB,CAAC3R,CAAC,CAACgS,MAAM,CAAC;IAC9CoB,CAAC,CAACjK,mBAAmB,CAAC,CAAC;IACvBiK,CAAC,CAACrD,aAAa,CAACnF,KAAK,CAAC;EAC1B,CAAC,MAAM;IACHpE,gBAAgB,CAAC4M,CAAC,EAAExI,KAAK,CAAC;EAC9B;AACJ;AAEA,SAASjE,qBAAqBA,CAACyM,CAAC,EAAExI,KAAK,EAAE;EACrC,IAAM4B,EAAE,GAAG5B,KAAK,CAACuD,OAAO;EAExB,IACI3B,EAAE,KAAKxM,CAAC,CAACyC,OAAO,IAChB+J,EAAE,KAAKxM,CAAC,CAAC2C,KAAK,IACd6J,EAAE,KAAKxM,CAAC,CAACsC,KAAK,IACdkK,EAAE,KAAKxM,CAAC,CAACwC,KAAK,IACdgK,EAAE,KAAKxM,CAAC,CAACuC,KAAK,IACdiK,EAAE,KAAKxM,CAAC,CAACqC,EAAE,IACXmK,EAAE,KAAKxM,CAAC,CAACgD,EAAE,IACXwJ,EAAE,KAAKxM,CAAC,CAACiD,EAAE,EACb;IACE,IAAImQ,CAAC,CAACrJ,YAAY,CAAC6V,eAAe,CAACpT,EAAE,CAAC,EAAE;MACpC4G,CAAC,CAACrJ,YAAY,CAAC4H,qBAAqB,CAAC3R,CAAC,CAACgS,MAAM,CAAC;MAC9CoB,CAAC,CAACjK,mBAAmB,CAAC,CAAC;MACvBiK,CAAC,CAACrD,aAAa,CAACnF,KAAK,CAAC;IAC1B;EACJ,CAAC,MAAM;IACHnE,cAAc,CAAC2M,CAAC,EAAExI,KAAK,CAAC;EAC5B;AACJ;;AAEA;AACA;AACA,SAAShE,kBAAkBA,CAACwM,CAAC,EAAExI,KAAK,EAAE;EAClC,IAAM4B,EAAE,GAAG5B,KAAK,CAACuD,OAAO;EAExB,IACI3B,EAAE,KAAKxM,CAAC,CAAC4V,IAAI,IACbpJ,EAAE,KAAKxM,CAAC,CAAC6V,QAAQ,IACjBrJ,EAAE,KAAKxM,CAAC,CAAC8V,OAAO,IAChBtJ,EAAE,KAAKxM,CAAC,CAAC+V,IAAI,IACbvJ,EAAE,KAAKxM,CAAC,CAACgW,IAAI,IACbxJ,EAAE,KAAKxM,CAAC,CAACgN,QAAQ,IACjBR,EAAE,KAAKxM,CAAC,CAACmN,MAAM,IACfX,EAAE,KAAKxM,CAAC,CAAC4M,KAAK,IACdJ,EAAE,KAAKxM,CAAC,CAAC6I,QAAQ,IACjB2D,EAAE,KAAKxM,CAAC,CAACyM,KAAK,EAChB;IACEjI,cAAc,CAAC4O,CAAC,EAAExI,KAAK,CAAC;EAC5B,CAAC,MAAM;IACH,IAAMkH,gBAAgB,GAAGhP,kCAAkC,CAAC0J,EAAE,CAAC,IAAIrL,YAAY;IAE/EiS,CAAC,CAACf,qBAAqB,CAAC,CAAC;IACzBe,CAAC,CAACpK,sBAAsB,CAAC8I,gBAAgB,CAAC;IAC1CsB,CAAC,CAACzJ,aAAa,GAAGmI,gBAAgB;IAClCsB,CAAC,CAACrD,aAAa,CAACnF,KAAK,CAAC;EAC1B;AACJ;AAEA,SAAS/D,gBAAgBA,CAACuM,CAAC,EAAExI,KAAK,EAAE;EAChC,IAAIA,KAAK,CAACuD,OAAO,KAAKnO,CAAC,CAAC6I,QAAQ,EAAE;IAC9BpE,YAAY,CAAC2O,CAAC,EAAExI,KAAK,CAAC;EAC1B;AACJ;AAEA,SAAS9D,aAAaA,CAACsM,CAAC,EAAExI,KAAK,EAAE;EAC7B,IAAIwI,CAAC,CAACrJ,YAAY,CAACoM,SAAS,GAAG,CAAC,EAAE;IAC9B/C,CAAC,CAACrJ,YAAY,CAAC4H,qBAAqB,CAAC3R,CAAC,CAAC6I,QAAQ,CAAC;IAChDuK,CAAC,CAACpJ,wBAAwB,CAACuH,iBAAiB,CAAC,CAAC;IAC9C6B,CAAC,CAACf,qBAAqB,CAAC,CAAC;IACzBe,CAAC,CAACjK,mBAAmB,CAAC,CAAC;IACvBiK,CAAC,CAACrD,aAAa,CAACnF,KAAK,CAAC;EAC1B,CAAC,MAAM;IACHwI,CAAC,CAAC1J,OAAO,GAAG,IAAI;EACpB;AACJ;;AAEA;AACA;AACA,SAASzC,iBAAiBA,CAACmM,CAAC,EAAExI,KAAK,EAAE;EACjC,IAAIA,KAAK,CAACuD,OAAO,KAAKnO,CAAC,CAACD,IAAI,EAAE;IAC1BmF,cAAc,CAACkO,CAAC,EAAExI,KAAK,CAAC;EAC5B,CAAC,MAAM;IACH7D,cAAc,CAACqM,CAAC,EAAExI,KAAK,CAAC;EAC5B;AACJ;AAEA,SAAS1D,eAAeA,CAACkM,CAAC,EAAExI,KAAK,EAAE;EAC/B,IAAIA,KAAK,CAACuD,OAAO,KAAKnO,CAAC,CAACD,IAAI,EAAE;IAC1B,IAAI,CAACqT,CAAC,CAACzK,eAAe,EAAE;MACpByK,CAAC,CAACzJ,aAAa,GAAGzH,qBAAqB;IAC3C;EACJ,CAAC,MAAM;IACH6E,cAAc,CAACqM,CAAC,EAAExI,KAAK,CAAC;EAC5B;AACJ;AAEA,SAAS7D,cAAcA,CAACqM,CAAC,EAAExI,KAAK,EAAE;EAC9BwI,CAAC,CAACzJ,aAAa,GAAGxI,YAAY;EAC9BiS,CAAC,CAACrD,aAAa,CAACnF,KAAK,CAAC;AAC1B;;AAEA;AACA;AACA,SAASxD,kBAAkBA,CAACgM,CAAC,EAAExI,KAAK,EAAE;EAClC,IAAM4B,EAAE,GAAG5B,KAAK,CAACuD,OAAO;EAExB,IAAI3B,EAAE,KAAKxM,CAAC,CAACD,IAAI,EAAE;IACfmF,cAAc,CAACkO,CAAC,EAAExI,KAAK,CAAC;EAC5B,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAAC6C,QAAQ,EAAE;IAC1BuQ,CAAC,CAACrH,cAAc,CAACnB,KAAK,EAAE1K,EAAE,CAACH,IAAI,CAAC;EACpC,CAAC,MAAM,IAAIyM,EAAE,KAAKxM,CAAC,CAAC8c,KAAK,EAAE;IACvB1J,CAAC,CAACnF,cAAc,CAACrD,KAAK,EAAE1K,EAAE,CAACH,IAAI,CAAC;IAChC6K,KAAK,CAAC2F,cAAc,GAAG,IAAI;EAC/B,CAAC,MAAM,IAAI/D,EAAE,KAAKxM,CAAC,CAACgN,QAAQ,EAAE;IAC1BxI,cAAc,CAAC4O,CAAC,EAAExI,KAAK,CAAC;EAC5B;AACJ;AAEA,SAASvD,gBAAgBA,CAAC+L,CAAC,EAAExI,KAAK,EAAE;EAChC,IAAIA,KAAK,CAACuD,OAAO,KAAKnO,CAAC,CAAC6C,QAAQ,IAAI,CAACuQ,CAAC,CAACrJ,YAAY,CAACuW,wBAAwB,CAAC,CAAC,EAAE;IAC5ElN,CAAC,CAACrJ,YAAY,CAACuI,GAAG,CAAC,CAAC;IAEpB,IAAI,CAACc,CAAC,CAACzK,eAAe,IAAIyK,CAAC,CAACrJ,YAAY,CAACsM,cAAc,KAAKrW,CAAC,CAAC6C,QAAQ,EAAE;MACpEuQ,CAAC,CAACzJ,aAAa,GAAG1H,mBAAmB;IACzC;EACJ;AACJ;;AAEA;AACA;AACA,SAASqF,qBAAqBA,CAAC8L,CAAC,EAAExI,KAAK,EAAE;EACrC,IAAM4B,EAAE,GAAG5B,KAAK,CAACuD,OAAO;EAExB,IAAI3B,EAAE,KAAKxM,CAAC,CAACD,IAAI,EAAE;IACfmF,cAAc,CAACkO,CAAC,EAAExI,KAAK,CAAC;EAC5B,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAACgN,QAAQ,EAAE;IAC1BxI,cAAc,CAAC4O,CAAC,EAAExI,KAAK,CAAC;EAC5B;AACJ;AAEA,SAASrD,mBAAmBA,CAAC6L,CAAC,EAAExI,KAAK,EAAE;EACnC,IAAIA,KAAK,CAACuD,OAAO,KAAKnO,CAAC,CAACD,IAAI,EAAE;IAC1BqT,CAAC,CAACzJ,aAAa,GAAGxH,yBAAyB;EAC/C;AACJ;;AAEA;AACA;AACA,SAASuF,sBAAsBA,CAAC0L,CAAC,EAAExI,KAAK,EAAE;EACtC,IAAIA,KAAK,CAACuD,OAAO,KAAKnO,CAAC,CAACD,IAAI,EAAE;IAC1BmF,cAAc,CAACkO,CAAC,EAAExI,KAAK,CAAC;EAC5B,CAAC,MAAM;IACHpD,mBAAmB,CAAC4L,CAAC,EAAExI,KAAK,CAAC;EACjC;AACJ;AAEA,SAASpD,mBAAmBA,CAAC4L,CAAC,EAAExI,KAAK,EAAE;EACnCwI,CAAC,CAACzJ,aAAa,GAAGxI,YAAY;EAC9BiS,CAAC,CAACrD,aAAa,CAACnF,KAAK,CAAC;AAC1B;;AAEA;AACA;AACA,SAASjD,0BAA0BA,CAACyL,CAAC,EAAExI,KAAK,EAAE;EAC1C,IAAM4B,EAAE,GAAG5B,KAAK,CAACuD,OAAO;EAExB,IAAI3B,EAAE,KAAKxM,CAAC,CAACD,IAAI,EAAE;IACfmF,cAAc,CAACkO,CAAC,EAAExI,KAAK,CAAC;EAC5B,CAAC,MAAM,IAAI4B,EAAE,KAAKxM,CAAC,CAACgN,QAAQ,EAAE;IAC1BxI,cAAc,CAAC4O,CAAC,EAAExI,KAAK,CAAC;EAC5B;AACJ;;AAEA;AACA;AACA,SAASuF,6BAA6BA,CAACiD,CAAC,EAAExI,KAAK,EAAE;EAC7CA,KAAK,CAACI,KAAK,GAAGlL,OAAO,CAACygB,qBAAqB;EAC3CnN,CAAC,CAACrE,iBAAiB,CAACnE,KAAK,CAAC;AAC9B;AAEA,SAASsF,yBAAyBA,CAACkD,CAAC,EAAExI,KAAK,EAAE;EACzCwI,CAAC,CAACrE,iBAAiB,CAACnE,KAAK,CAAC;EAC1BwI,CAAC,CAAC9I,UAAU,GAAG,KAAK;AACxB;AAEA,SAAS8F,wBAAwBA,CAACgD,CAAC,EAAExI,KAAK,EAAE;EACxC,IAAIhL,cAAc,CAAC4gB,UAAU,CAAC5V,KAAK,CAAC,IAAI,CAACwI,CAAC,CAACzK,eAAe,EAAE;IACxD,OACIyK,CAAC,CAAC3S,WAAW,CAACiL,eAAe,CAAC0H,CAAC,CAACrJ,YAAY,CAACwB,OAAO,CAAC,KAAKrL,EAAE,CAACH,IAAI,IACjE,CAACqT,CAAC,CAACzH,mBAAmB,CAACyH,CAAC,CAACrJ,YAAY,CAACwB,OAAO,CAAC,EAChD;MACE6H,CAAC,CAACrJ,YAAY,CAACuI,GAAG,CAAC,CAAC;IACxB;IAEAc,CAAC,CAACrD,aAAa,CAACnF,KAAK,CAAC;EAC1B,CAAC,MAAM;IACH,IAAMW,OAAO,GAAG6H,CAAC,CAAC5H,0BAA0B,CAAC,CAAC;IAC9C,IAAMiV,SAAS,GAAGrN,CAAC,CAAC3S,WAAW,CAACiL,eAAe,CAACH,OAAO,CAAC;IAExD,IAAIkV,SAAS,KAAKvgB,EAAE,CAACuP,MAAM,EAAE;MACzB7P,cAAc,CAAC8a,sBAAsB,CAAC9P,KAAK,CAAC;IAChD,CAAC,MAAM,IAAI6V,SAAS,KAAKvgB,EAAE,CAACwP,GAAG,EAAE;MAC7B9P,cAAc,CAAC8gB,qBAAqB,CAAC9V,KAAK,CAAC;MAC3ChL,cAAc,CAACib,mBAAmB,CAACjQ,KAAK,CAAC;IAC7C;IAEAhL,cAAc,CAAC+a,mBAAmB,CAAC/P,KAAK,CAAC;IAEzC,IAAIA,KAAK,CAAC0F,WAAW,EAAE;MACnB8C,CAAC,CAACnF,cAAc,CAACrD,KAAK,EAAE6V,SAAS,CAAC;IACtC,CAAC,MAAM;MACHrN,CAAC,CAACrH,cAAc,CAACnB,KAAK,EAAE6V,SAAS,CAAC;IACtC;IAEA7V,KAAK,CAAC2F,cAAc,GAAG,IAAI;EAC/B;AACJ;AAEA,SAASF,sBAAsBA,CAAC+C,CAAC,EAAExI,KAAK,EAAE;EACtC,KAAK,IAAIuG,CAAC,GAAGiC,CAAC,CAACrJ,YAAY,CAACqC,QAAQ,EAAE+E,CAAC,GAAG,CAAC,EAAEA,CAAC,EAAE,EAAE;IAC9C,IAAMxD,OAAO,GAAGyF,CAAC,CAACrJ,YAAY,CAAC8H,KAAK,CAACV,CAAC,CAAC;IAEvC,IAAIiC,CAAC,CAAC3S,WAAW,CAACiL,eAAe,CAACiC,OAAO,CAAC,KAAKzN,EAAE,CAACH,IAAI,EAAE;MACpDqT,CAAC,CAACrD,aAAa,CAACnF,KAAK,CAAC;MACtB;IACJ;IAEA,IAAIwI,CAAC,CAAC3S,WAAW,CAACsI,UAAU,CAAC4E,OAAO,CAAC,CAAC6L,WAAW,CAAC,CAAC,KAAK5O,KAAK,CAACuD,OAAO,EAAE;MACnEiF,CAAC,CAACrJ,YAAY,CAAC6J,qBAAqB,CAACjG,OAAO,CAAC;MAC7C;IACJ;EACJ;AACJ","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}