{"ast":null,"code":"import _createForOfIteratorHelper from \"/Users/yinger/Desktop/z95_exam_frontend/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _callSuper from \"/Users/yinger/Desktop/z95_exam_frontend/node_modules/@babel/runtime/helpers/esm/callSuper.js\";\nimport _inherits from \"/Users/yinger/Desktop/z95_exam_frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _regeneratorRuntime from \"/Users/yinger/Desktop/z95_exam_frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/yinger/Desktop/z95_exam_frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"/Users/yinger/Desktop/z95_exam_frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/yinger/Desktop/z95_exam_frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _typeof from \"/Users/yinger/Desktop/z95_exam_frontend/node_modules/@babel/runtime/helpers/esm/typeof.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.sort.js\";\nimport \"core-js/modules/es.array.unshift.js\";\nimport \"core-js/modules/es.object.define-property.js\";\nimport \"core-js/modules/es.object.get-own-property-descriptor.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.reflect.to-string-tag.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if ((typeof Reflect === \"undefined\" ? \"undefined\" : _typeof(Reflect)) === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar SmartSelectController_1;\nimport * as arrays from '../../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { BracketSelectionRangeProvider } from './bracketSelections.js';\nimport { WordSelectionRangeProvider } from './wordSelections.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nvar SelectionRanges = /*#__PURE__*/function () {\n  function SelectionRanges(index, ranges) {\n    _classCallCheck(this, SelectionRanges);\n    this.index = index;\n    this.ranges = ranges;\n  }\n  return _createClass(SelectionRanges, [{\n    key: \"mov\",\n    value: function mov(fwd) {\n      var index = this.index + (fwd ? 1 : -1);\n      if (index < 0 || index >= this.ranges.length) {\n        return this;\n      }\n      var res = new SelectionRanges(index, this.ranges);\n      if (res.ranges[index].equalsRange(this.ranges[this.index])) {\n        // next range equals this range, retry with next-next\n        return res.mov(fwd);\n      }\n      return res;\n    }\n  }]);\n}();\nvar SmartSelectController = SmartSelectController_1 = /*#__PURE__*/function () {\n  function SmartSelectController(_editor, _languageFeaturesService) {\n    _classCallCheck(this, SmartSelectController);\n    this._editor = _editor;\n    this._languageFeaturesService = _languageFeaturesService;\n    this._ignoreSelection = false;\n  }\n  return _createClass(SmartSelectController, [{\n    key: \"dispose\",\n    value: function dispose() {\n      var _a;\n      (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\n    }\n  }, {\n    key: \"run\",\n    value: function () {\n      var _run = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(forward) {\n        var _this = this;\n        var selections, model, newSelections;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              if (this._editor.hasModel()) {\n                _context.next = 2;\n                break;\n              }\n              return _context.abrupt(\"return\");\n            case 2:\n              selections = this._editor.getSelections();\n              model = this._editor.getModel();\n              if (this._state) {\n                _context.next = 7;\n                break;\n              }\n              _context.next = 7;\n              return provideSelectionRanges(this._languageFeaturesService.selectionRangeProvider, model, selections.map(function (s) {\n                return s.getPosition();\n              }), this._editor.getOption(113 /* EditorOption.smartSelect */), CancellationToken.None).then(function (ranges) {\n                var _a;\n                if (!arrays.isNonEmptyArray(ranges) || ranges.length !== selections.length) {\n                  // invalid result\n                  return;\n                }\n                if (!_this._editor.hasModel() || !arrays.equals(_this._editor.getSelections(), selections, function (a, b) {\n                  return a.equalsSelection(b);\n                })) {\n                  // invalid editor state\n                  return;\n                }\n                var _loop = function _loop(i) {\n                  ranges[i] = ranges[i].filter(function (range) {\n                    // filter ranges inside the selection\n                    return range.containsPosition(selections[i].getStartPosition()) && range.containsPosition(selections[i].getEndPosition());\n                  });\n                  // prepend current selection\n                  ranges[i].unshift(selections[i]);\n                };\n                for (var i = 0; i < ranges.length; i++) {\n                  _loop(i);\n                }\n                _this._state = ranges.map(function (ranges) {\n                  return new SelectionRanges(0, ranges);\n                });\n                // listen to caret move and forget about state\n                (_a = _this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\n                _this._selectionListener = _this._editor.onDidChangeCursorPosition(function () {\n                  var _a;\n                  if (!_this._ignoreSelection) {\n                    (_a = _this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\n                    _this._state = undefined;\n                  }\n                });\n              });\n            case 7:\n              if (this._state) {\n                _context.next = 9;\n                break;\n              }\n              return _context.abrupt(\"return\");\n            case 9:\n              this._state = this._state.map(function (state) {\n                return state.mov(forward);\n              });\n              newSelections = this._state.map(function (state) {\n                return Selection.fromPositions(state.ranges[state.index].getStartPosition(), state.ranges[state.index].getEndPosition());\n              });\n              this._ignoreSelection = true;\n              try {\n                this._editor.setSelections(newSelections);\n              } finally {\n                this._ignoreSelection = false;\n              }\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function run(_x) {\n        return _run.apply(this, arguments);\n      }\n      return run;\n    }()\n  }], [{\n    key: \"get\",\n    value: function get(editor) {\n      return editor.getContribution(SmartSelectController_1.ID);\n    }\n  }]);\n}();\nSmartSelectController.ID = 'editor.contrib.smartSelectController';\nSmartSelectController = SmartSelectController_1 = __decorate([__param(1, ILanguageFeaturesService)], SmartSelectController);\nexport { SmartSelectController };\nvar AbstractSmartSelect = /*#__PURE__*/function (_EditorAction) {\n  function AbstractSmartSelect(forward, opts) {\n    var _this2;\n    _classCallCheck(this, AbstractSmartSelect);\n    _this2 = _callSuper(this, AbstractSmartSelect, [opts]);\n    _this2._forward = forward;\n    return _this2;\n  }\n  _inherits(AbstractSmartSelect, _EditorAction);\n  return _createClass(AbstractSmartSelect, [{\n    key: \"run\",\n    value: function () {\n      var _run2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(_accessor, editor) {\n        var controller;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              controller = SmartSelectController.get(editor);\n              if (!controller) {\n                _context2.next = 4;\n                break;\n              }\n              _context2.next = 4;\n              return controller.run(this._forward);\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, this);\n      }));\n      function run(_x2, _x3) {\n        return _run2.apply(this, arguments);\n      }\n      return run;\n    }()\n  }]);\n}(EditorAction);\nvar GrowSelectionAction = /*#__PURE__*/function (_AbstractSmartSelect) {\n  function GrowSelectionAction() {\n    _classCallCheck(this, GrowSelectionAction);\n    return _callSuper(this, GrowSelectionAction, [true, {\n      id: 'editor.action.smartSelect.expand',\n      label: nls.localize('smartSelect.expand', \"Expand Selection\"),\n      alias: 'Expand Selection',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 17 /* KeyCode.RightArrow */,\n        mac: {\n          primary: 2048 /* KeyMod.CtrlCmd */ | 256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 17 /* KeyCode.RightArrow */,\n          secondary: [256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 17 /* KeyCode.RightArrow */]\n        },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      },\n      menuOpts: {\n        menuId: MenuId.MenubarSelectionMenu,\n        group: '1_basic',\n        title: nls.localize({\n          key: 'miSmartSelectGrow',\n          comment: ['&& denotes a mnemonic']\n        }, \"&&Expand Selection\"),\n        order: 2\n      }\n    }]);\n  }\n  _inherits(GrowSelectionAction, _AbstractSmartSelect);\n  return _createClass(GrowSelectionAction);\n}(AbstractSmartSelect); // renamed command id\nCommandsRegistry.registerCommandAlias('editor.action.smartSelect.grow', 'editor.action.smartSelect.expand');\nvar ShrinkSelectionAction = /*#__PURE__*/function (_AbstractSmartSelect2) {\n  function ShrinkSelectionAction() {\n    _classCallCheck(this, ShrinkSelectionAction);\n    return _callSuper(this, ShrinkSelectionAction, [false, {\n      id: 'editor.action.smartSelect.shrink',\n      label: nls.localize('smartSelect.shrink', \"Shrink Selection\"),\n      alias: 'Shrink Selection',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 15 /* KeyCode.LeftArrow */,\n        mac: {\n          primary: 2048 /* KeyMod.CtrlCmd */ | 256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 15 /* KeyCode.LeftArrow */,\n          secondary: [256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 15 /* KeyCode.LeftArrow */]\n        },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      },\n      menuOpts: {\n        menuId: MenuId.MenubarSelectionMenu,\n        group: '1_basic',\n        title: nls.localize({\n          key: 'miSmartSelectShrink',\n          comment: ['&& denotes a mnemonic']\n        }, \"&&Shrink Selection\"),\n        order: 3\n      }\n    }]);\n  }\n  _inherits(ShrinkSelectionAction, _AbstractSmartSelect2);\n  return _createClass(ShrinkSelectionAction);\n}(AbstractSmartSelect);\nregisterEditorContribution(SmartSelectController.ID, SmartSelectController, 4 /* EditorContributionInstantiation.Lazy */);\nregisterEditorAction(GrowSelectionAction);\nregisterEditorAction(ShrinkSelectionAction);\nexport function provideSelectionRanges(_x4, _x5, _x6, _x7, _x8) {\n  return _provideSelectionRanges.apply(this, arguments);\n}\nfunction _provideSelectionRanges() {\n  _provideSelectionRanges = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(registry, model, positions, options, token) {\n    var providers, work, allRawRanges, _iterator, _step, provider;\n    return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          providers = registry.all(model).concat(new WordSelectionRangeProvider(options.selectSubwords)); // ALWAYS have word based selection range\n          if (providers.length === 1) {\n            // add word selection and bracket selection when no provider exists\n            providers.unshift(new BracketSelectionRangeProvider());\n          }\n          work = [];\n          allRawRanges = [];\n          _iterator = _createForOfIteratorHelper(providers);\n          try {\n            for (_iterator.s(); !(_step = _iterator.n()).done;) {\n              provider = _step.value;\n              work.push(Promise.resolve(provider.provideSelectionRanges(model, positions, token)).then(function (allProviderRanges) {\n                if (arrays.isNonEmptyArray(allProviderRanges) && allProviderRanges.length === positions.length) {\n                  for (var i = 0; i < positions.length; i++) {\n                    if (!allRawRanges[i]) {\n                      allRawRanges[i] = [];\n                    }\n                    var _iterator3 = _createForOfIteratorHelper(allProviderRanges[i]),\n                      _step3;\n                    try {\n                      for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n                        var oneProviderRanges = _step3.value;\n                        if (Range.isIRange(oneProviderRanges.range) && Range.containsPosition(oneProviderRanges.range, positions[i])) {\n                          allRawRanges[i].push(Range.lift(oneProviderRanges.range));\n                        }\n                      }\n                    } catch (err) {\n                      _iterator3.e(err);\n                    } finally {\n                      _iterator3.f();\n                    }\n                  }\n                }\n              }, onUnexpectedExternalError));\n            }\n          } catch (err) {\n            _iterator.e(err);\n          } finally {\n            _iterator.f();\n          }\n          _context4.next = 8;\n          return Promise.all(work);\n        case 8:\n          return _context4.abrupt(\"return\", allRawRanges.map(function (oneRawRanges) {\n            if (oneRawRanges.length === 0) {\n              return [];\n            }\n            // sort all by start/end position\n            oneRawRanges.sort(function (a, b) {\n              if (Position.isBefore(a.getStartPosition(), b.getStartPosition())) {\n                return 1;\n              } else if (Position.isBefore(b.getStartPosition(), a.getStartPosition())) {\n                return -1;\n              } else if (Position.isBefore(a.getEndPosition(), b.getEndPosition())) {\n                return -1;\n              } else if (Position.isBefore(b.getEndPosition(), a.getEndPosition())) {\n                return 1;\n              } else {\n                return 0;\n              }\n            });\n            // remove ranges that don't contain the former range or that are equal to the\n            // former range\n            var oneRanges = [];\n            var last;\n            var _iterator2 = _createForOfIteratorHelper(oneRawRanges),\n              _step2;\n            try {\n              for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n                var range = _step2.value;\n                if (!last || Range.containsRange(range, last) && !Range.equalsRange(range, last)) {\n                  oneRanges.push(range);\n                  last = range;\n                }\n              }\n            } catch (err) {\n              _iterator2.e(err);\n            } finally {\n              _iterator2.f();\n            }\n            if (!options.selectLeadingAndTrailingWhitespace) {\n              return oneRanges;\n            }\n            // add ranges that expand trivia at line starts and ends whenever a range\n            // wraps onto the a new line\n            var oneRangesWithTrivia = [oneRanges[0]];\n            for (var i = 1; i < oneRanges.length; i++) {\n              var prev = oneRanges[i - 1];\n              var cur = oneRanges[i];\n              if (cur.startLineNumber !== prev.startLineNumber || cur.endLineNumber !== prev.endLineNumber) {\n                // add line/block range without leading/failing whitespace\n                var rangeNoWhitespace = new Range(prev.startLineNumber, model.getLineFirstNonWhitespaceColumn(prev.startLineNumber), prev.endLineNumber, model.getLineLastNonWhitespaceColumn(prev.endLineNumber));\n                if (rangeNoWhitespace.containsRange(prev) && !rangeNoWhitespace.equalsRange(prev) && cur.containsRange(rangeNoWhitespace) && !cur.equalsRange(rangeNoWhitespace)) {\n                  oneRangesWithTrivia.push(rangeNoWhitespace);\n                }\n                // add line/block range\n                var rangeFull = new Range(prev.startLineNumber, 1, prev.endLineNumber, model.getLineMaxColumn(prev.endLineNumber));\n                if (rangeFull.containsRange(prev) && !rangeFull.equalsRange(rangeNoWhitespace) && cur.containsRange(rangeFull) && !cur.equalsRange(rangeFull)) {\n                  oneRangesWithTrivia.push(rangeFull);\n                }\n              }\n              oneRangesWithTrivia.push(cur);\n            }\n            return oneRangesWithTrivia;\n          }));\n        case 9:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee4);\n  }));\n  return _provideSelectionRanges.apply(this, arguments);\n}\nCommandsRegistry.registerCommand('_executeSelectionRangeProvider', /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(accessor) {\n    var _len,\n      args,\n      _key,\n      resource,\n      positions,\n      registry,\n      reference,\n      _args3 = arguments;\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          for (_len = _args3.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n            args[_key - 1] = _args3[_key];\n          }\n          resource = args[0], positions = args[1];\n          assertType(URI.isUri(resource));\n          registry = accessor.get(ILanguageFeaturesService).selectionRangeProvider;\n          _context3.next = 6;\n          return accessor.get(ITextModelService).createModelReference(resource);\n        case 6:\n          reference = _context3.sent;\n          _context3.prev = 7;\n          return _context3.abrupt(\"return\", provideSelectionRanges(registry, reference.object.textEditorModel, positions, {\n            selectLeadingAndTrailingWhitespace: true,\n            selectSubwords: true\n          }, CancellationToken.None));\n        case 9:\n          _context3.prev = 9;\n          reference.dispose();\n          return _context3.finish(9);\n        case 12:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3, null, [[7,, 9, 12]]);\n  }));\n  return function (_x9) {\n    return _ref.apply(this, arguments);\n  };\n}());","map":{"version":3,"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","_typeof","decorate","i","defineProperty","__param","paramIndex","decorator","SmartSelectController_1","arrays","CancellationToken","onUnexpectedExternalError","EditorAction","registerEditorAction","registerEditorContribution","Position","Range","Selection","EditorContextKeys","BracketSelectionRangeProvider","WordSelectionRangeProvider","nls","MenuId","CommandsRegistry","ILanguageFeaturesService","ITextModelService","assertType","URI","SelectionRanges","index","ranges","_classCallCheck","_createClass","value","mov","fwd","res","equalsRange","SmartSelectController","_editor","_languageFeaturesService","_ignoreSelection","dispose","_a","_selectionListener","_run","_asyncToGenerator","_regeneratorRuntime","mark","_callee","forward","_this","selections","model","newSelections","wrap","_callee$","_context","prev","next","hasModel","abrupt","getSelections","getModel","_state","provideSelectionRanges","selectionRangeProvider","map","s","getPosition","getOption","None","then","isNonEmptyArray","equals","a","b","equalsSelection","_loop","filter","range","containsPosition","getStartPosition","getEndPosition","unshift","onDidChangeCursorPosition","undefined","state","fromPositions","setSelections","stop","run","_x","apply","get","editor","getContribution","ID","AbstractSmartSelect","_EditorAction","opts","_this2","_callSuper","_forward","_inherits","_run2","_callee2","_accessor","controller","_callee2$","_context2","_x2","_x3","GrowSelectionAction","_AbstractSmartSelect","id","label","localize","alias","precondition","kbOpts","kbExpr","editorTextFocus","primary","mac","secondary","weight","menuOpts","menuId","MenubarSelectionMenu","group","title","comment","order","registerCommandAlias","ShrinkSelectionAction","_AbstractSmartSelect2","_x4","_x5","_x6","_x7","_x8","_provideSelectionRanges","_callee4","registry","positions","options","token","providers","work","allRawRanges","_iterator","_step","provider","_callee4$","_context4","all","concat","selectSubwords","_createForOfIteratorHelper","n","done","push","Promise","resolve","allProviderRanges","_iterator3","_step3","oneProviderRanges","isIRange","lift","err","e","f","oneRawRanges","sort","isBefore","oneRanges","last","_iterator2","_step2","containsRange","selectLeadingAndTrailingWhitespace","oneRangesWithTrivia","cur","startLineNumber","endLineNumber","rangeNoWhitespace","getLineFirstNonWhitespaceColumn","getLineLastNonWhitespaceColumn","rangeFull","getLineMaxColumn","registerCommand","_ref","_callee3","accessor","_len","args","_key","resource","reference","_args3","_callee3$","_context3","Array","isUri","createModelReference","sent","object","textEditorModel","finish","_x9"],"sources":["/Users/yinger/Desktop/z95_exam_frontend/node_modules/monaco-editor/esm/vs/editor/contrib/smartSelect/browser/smartSelect.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar SmartSelectController_1;\nimport * as arrays from '../../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { BracketSelectionRangeProvider } from './bracketSelections.js';\nimport { WordSelectionRangeProvider } from './wordSelections.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nclass SelectionRanges {\n    constructor(index, ranges) {\n        this.index = index;\n        this.ranges = ranges;\n    }\n    mov(fwd) {\n        const index = this.index + (fwd ? 1 : -1);\n        if (index < 0 || index >= this.ranges.length) {\n            return this;\n        }\n        const res = new SelectionRanges(index, this.ranges);\n        if (res.ranges[index].equalsRange(this.ranges[this.index])) {\n            // next range equals this range, retry with next-next\n            return res.mov(fwd);\n        }\n        return res;\n    }\n}\nlet SmartSelectController = SmartSelectController_1 = class SmartSelectController {\n    static get(editor) {\n        return editor.getContribution(SmartSelectController_1.ID);\n    }\n    constructor(_editor, _languageFeaturesService) {\n        this._editor = _editor;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._ignoreSelection = false;\n    }\n    dispose() {\n        var _a;\n        (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\n    }\n    async run(forward) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const selections = this._editor.getSelections();\n        const model = this._editor.getModel();\n        if (!this._state) {\n            await provideSelectionRanges(this._languageFeaturesService.selectionRangeProvider, model, selections.map(s => s.getPosition()), this._editor.getOption(113 /* EditorOption.smartSelect */), CancellationToken.None).then(ranges => {\n                var _a;\n                if (!arrays.isNonEmptyArray(ranges) || ranges.length !== selections.length) {\n                    // invalid result\n                    return;\n                }\n                if (!this._editor.hasModel() || !arrays.equals(this._editor.getSelections(), selections, (a, b) => a.equalsSelection(b))) {\n                    // invalid editor state\n                    return;\n                }\n                for (let i = 0; i < ranges.length; i++) {\n                    ranges[i] = ranges[i].filter(range => {\n                        // filter ranges inside the selection\n                        return range.containsPosition(selections[i].getStartPosition()) && range.containsPosition(selections[i].getEndPosition());\n                    });\n                    // prepend current selection\n                    ranges[i].unshift(selections[i]);\n                }\n                this._state = ranges.map(ranges => new SelectionRanges(0, ranges));\n                // listen to caret move and forget about state\n                (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\n                this._selectionListener = this._editor.onDidChangeCursorPosition(() => {\n                    var _a;\n                    if (!this._ignoreSelection) {\n                        (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\n                        this._state = undefined;\n                    }\n                });\n            });\n        }\n        if (!this._state) {\n            // no state\n            return;\n        }\n        this._state = this._state.map(state => state.mov(forward));\n        const newSelections = this._state.map(state => Selection.fromPositions(state.ranges[state.index].getStartPosition(), state.ranges[state.index].getEndPosition()));\n        this._ignoreSelection = true;\n        try {\n            this._editor.setSelections(newSelections);\n        }\n        finally {\n            this._ignoreSelection = false;\n        }\n    }\n};\nSmartSelectController.ID = 'editor.contrib.smartSelectController';\nSmartSelectController = SmartSelectController_1 = __decorate([\n    __param(1, ILanguageFeaturesService)\n], SmartSelectController);\nexport { SmartSelectController };\nclass AbstractSmartSelect extends EditorAction {\n    constructor(forward, opts) {\n        super(opts);\n        this._forward = forward;\n    }\n    async run(_accessor, editor) {\n        const controller = SmartSelectController.get(editor);\n        if (controller) {\n            await controller.run(this._forward);\n        }\n    }\n}\nclass GrowSelectionAction extends AbstractSmartSelect {\n    constructor() {\n        super(true, {\n            id: 'editor.action.smartSelect.expand',\n            label: nls.localize('smartSelect.expand', \"Expand Selection\"),\n            alias: 'Expand Selection',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 17 /* KeyCode.RightArrow */,\n                mac: {\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 17 /* KeyCode.RightArrow */,\n                    secondary: [256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 17 /* KeyCode.RightArrow */],\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '1_basic',\n                title: nls.localize({ key: 'miSmartSelectGrow', comment: ['&& denotes a mnemonic'] }, \"&&Expand Selection\"),\n                order: 2\n            }\n        });\n    }\n}\n// renamed command id\nCommandsRegistry.registerCommandAlias('editor.action.smartSelect.grow', 'editor.action.smartSelect.expand');\nclass ShrinkSelectionAction extends AbstractSmartSelect {\n    constructor() {\n        super(false, {\n            id: 'editor.action.smartSelect.shrink',\n            label: nls.localize('smartSelect.shrink', \"Shrink Selection\"),\n            alias: 'Shrink Selection',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 15 /* KeyCode.LeftArrow */,\n                mac: {\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 15 /* KeyCode.LeftArrow */,\n                    secondary: [256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 15 /* KeyCode.LeftArrow */],\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '1_basic',\n                title: nls.localize({ key: 'miSmartSelectShrink', comment: ['&& denotes a mnemonic'] }, \"&&Shrink Selection\"),\n                order: 3\n            }\n        });\n    }\n}\nregisterEditorContribution(SmartSelectController.ID, SmartSelectController, 4 /* EditorContributionInstantiation.Lazy */);\nregisterEditorAction(GrowSelectionAction);\nregisterEditorAction(ShrinkSelectionAction);\nexport async function provideSelectionRanges(registry, model, positions, options, token) {\n    const providers = registry.all(model)\n        .concat(new WordSelectionRangeProvider(options.selectSubwords)); // ALWAYS have word based selection range\n    if (providers.length === 1) {\n        // add word selection and bracket selection when no provider exists\n        providers.unshift(new BracketSelectionRangeProvider());\n    }\n    const work = [];\n    const allRawRanges = [];\n    for (const provider of providers) {\n        work.push(Promise.resolve(provider.provideSelectionRanges(model, positions, token)).then(allProviderRanges => {\n            if (arrays.isNonEmptyArray(allProviderRanges) && allProviderRanges.length === positions.length) {\n                for (let i = 0; i < positions.length; i++) {\n                    if (!allRawRanges[i]) {\n                        allRawRanges[i] = [];\n                    }\n                    for (const oneProviderRanges of allProviderRanges[i]) {\n                        if (Range.isIRange(oneProviderRanges.range) && Range.containsPosition(oneProviderRanges.range, positions[i])) {\n                            allRawRanges[i].push(Range.lift(oneProviderRanges.range));\n                        }\n                    }\n                }\n            }\n        }, onUnexpectedExternalError));\n    }\n    await Promise.all(work);\n    return allRawRanges.map(oneRawRanges => {\n        if (oneRawRanges.length === 0) {\n            return [];\n        }\n        // sort all by start/end position\n        oneRawRanges.sort((a, b) => {\n            if (Position.isBefore(a.getStartPosition(), b.getStartPosition())) {\n                return 1;\n            }\n            else if (Position.isBefore(b.getStartPosition(), a.getStartPosition())) {\n                return -1;\n            }\n            else if (Position.isBefore(a.getEndPosition(), b.getEndPosition())) {\n                return -1;\n            }\n            else if (Position.isBefore(b.getEndPosition(), a.getEndPosition())) {\n                return 1;\n            }\n            else {\n                return 0;\n            }\n        });\n        // remove ranges that don't contain the former range or that are equal to the\n        // former range\n        const oneRanges = [];\n        let last;\n        for (const range of oneRawRanges) {\n            if (!last || (Range.containsRange(range, last) && !Range.equalsRange(range, last))) {\n                oneRanges.push(range);\n                last = range;\n            }\n        }\n        if (!options.selectLeadingAndTrailingWhitespace) {\n            return oneRanges;\n        }\n        // add ranges that expand trivia at line starts and ends whenever a range\n        // wraps onto the a new line\n        const oneRangesWithTrivia = [oneRanges[0]];\n        for (let i = 1; i < oneRanges.length; i++) {\n            const prev = oneRanges[i - 1];\n            const cur = oneRanges[i];\n            if (cur.startLineNumber !== prev.startLineNumber || cur.endLineNumber !== prev.endLineNumber) {\n                // add line/block range without leading/failing whitespace\n                const rangeNoWhitespace = new Range(prev.startLineNumber, model.getLineFirstNonWhitespaceColumn(prev.startLineNumber), prev.endLineNumber, model.getLineLastNonWhitespaceColumn(prev.endLineNumber));\n                if (rangeNoWhitespace.containsRange(prev) && !rangeNoWhitespace.equalsRange(prev) && cur.containsRange(rangeNoWhitespace) && !cur.equalsRange(rangeNoWhitespace)) {\n                    oneRangesWithTrivia.push(rangeNoWhitespace);\n                }\n                // add line/block range\n                const rangeFull = new Range(prev.startLineNumber, 1, prev.endLineNumber, model.getLineMaxColumn(prev.endLineNumber));\n                if (rangeFull.containsRange(prev) && !rangeFull.equalsRange(rangeNoWhitespace) && cur.containsRange(rangeFull) && !cur.equalsRange(rangeFull)) {\n                    oneRangesWithTrivia.push(rangeFull);\n                }\n            }\n            oneRangesWithTrivia.push(cur);\n        }\n        return oneRangesWithTrivia;\n    });\n}\nCommandsRegistry.registerCommand('_executeSelectionRangeProvider', async function (accessor, ...args) {\n    const [resource, positions] = args;\n    assertType(URI.isUri(resource));\n    const registry = accessor.get(ILanguageFeaturesService).selectionRangeProvider;\n    const reference = await accessor.get(ITextModelService).createModelReference(resource);\n    try {\n        return provideSelectionRanges(registry, reference.object.textEditorModel, positions, { selectLeadingAndTrailingWhitespace: true, selectSubwords: true }, CancellationToken.None);\n    }\n    finally {\n        reference.dispose();\n    }\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}