{"ast":null,"code":"import _createForOfIteratorHelper from \"/Users/yinger/Desktop/z95_exam_frontend/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _slicedToArray from \"/Users/yinger/Desktop/z95_exam_frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _objectSpread from \"/Users/yinger/Desktop/z95_exam_frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _regeneratorRuntime from \"/Users/yinger/Desktop/z95_exam_frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/yinger/Desktop/z95_exam_frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"/Users/yinger/Desktop/z95_exam_frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/yinger/Desktop/z95_exam_frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _callSuper from \"/Users/yinger/Desktop/z95_exam_frontend/node_modules/@babel/runtime/helpers/esm/callSuper.js\";\nimport _inherits from \"/Users/yinger/Desktop/z95_exam_frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _typeof from \"/Users/yinger/Desktop/z95_exam_frontend/node_modules/@babel/runtime/helpers/esm/typeof.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.find-index.js\";\nimport \"core-js/modules/es.array.flat.js\";\nimport \"core-js/modules/es.array.is-array.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.some.js\";\nimport \"core-js/modules/es.array.unscopables.flat.js\";\nimport \"core-js/modules/es.object.define-property.js\";\nimport \"core-js/modules/es.object.entries.js\";\nimport \"core-js/modules/es.object.get-own-property-descriptor.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.reflect.to-string-tag.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if ((typeof Reflect === \"undefined\" ? \"undefined\" : _typeof(Reflect)) === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar DropIntoEditorController_1;\nimport { coalesce } from '../../../../base/common/arrays.js';\nimport { createCancelablePromise, raceCancellation } from '../../../../base/common/async.js';\nimport { VSDataTransfer, matchesMimeType } from '../../../../base/common/dataTransfer.js';\nimport { HierarchicalKind } from '../../../../base/common/hierarchicalKind.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { toExternalVSDataTransfer } from '../../../browser/dnd.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { DraggedTreeItemsIdentifier } from '../../../common/services/treeViewsDnd.js';\nimport { ITreeViewsDnDService } from '../../../common/services/treeViewsDndService.js';\nimport { EditorStateCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport { InlineProgressManager } from '../../inlineProgress/browser/inlineProgress.js';\nimport { localize } from '../../../../nls.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { LocalSelectionTransfer } from '../../../../platform/dnd/browser/dnd.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { sortEditsByYieldTo } from './edit.js';\nimport { PostEditWidgetManager } from './postEditWidget.js';\nexport var defaultProviderConfig = 'editor.experimental.dropIntoEditor.defaultProvider';\nexport var changeDropTypeCommandId = 'editor.changeDropType';\nexport var dropWidgetVisibleCtx = new RawContextKey('dropWidgetVisible', false, localize('dropWidgetVisible', \"Whether the drop widget is showing\"));\nvar DropIntoEditorController = DropIntoEditorController_1 = /*#__PURE__*/function (_Disposable) {\n  function DropIntoEditorController(editor, instantiationService, _configService, _languageFeaturesService, _treeViewsDragAndDropService) {\n    var _this;\n    _classCallCheck(this, DropIntoEditorController);\n    _this = _callSuper(this, DropIntoEditorController);\n    _this._configService = _configService;\n    _this._languageFeaturesService = _languageFeaturesService;\n    _this._treeViewsDragAndDropService = _treeViewsDragAndDropService;\n    _this.treeItemsTransfer = LocalSelectionTransfer.getInstance();\n    _this._dropProgressManager = _this._register(instantiationService.createInstance(InlineProgressManager, 'dropIntoEditor', editor));\n    _this._postDropWidgetManager = _this._register(instantiationService.createInstance(PostEditWidgetManager, 'dropIntoEditor', editor, dropWidgetVisibleCtx, {\n      id: changeDropTypeCommandId,\n      label: localize('postDropWidgetTitle', \"Show drop options...\")\n    }));\n    _this._register(editor.onDropIntoEditor(function (e) {\n      return _this.onDropIntoEditor(editor, e.position, e.event);\n    }));\n    return _this;\n  }\n  _inherits(DropIntoEditorController, _Disposable);\n  return _createClass(DropIntoEditorController, [{\n    key: \"clearWidgets\",\n    value: function clearWidgets() {\n      this._postDropWidgetManager.clear();\n    }\n  }, {\n    key: \"changeDropType\",\n    value: function changeDropType() {\n      this._postDropWidgetManager.tryShowSelector();\n    }\n  }, {\n    key: \"onDropIntoEditor\",\n    value: function () {\n      var _onDropIntoEditor = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(editor, position, dragEvent) {\n        var _this2 = this;\n        var _a, p;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              if (!(!dragEvent.dataTransfer || !editor.hasModel())) {\n                _context3.next = 2;\n                break;\n              }\n              return _context3.abrupt(\"return\");\n            case 2:\n              (_a = this._currentOperation) === null || _a === void 0 ? void 0 : _a.cancel();\n              editor.focus();\n              editor.setPosition(position);\n              p = createCancelablePromise( /*#__PURE__*/function () {\n                var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(token) {\n                  var tokenSource, ourDataTransfer, model, providers, edits, activeEditIndex, canShowWidget;\n                  return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n                    while (1) switch (_context2.prev = _context2.next) {\n                      case 0:\n                        tokenSource = new EditorStateCancellationTokenSource(editor, 1 /* CodeEditorStateFlag.Value */, undefined, token);\n                        _context2.prev = 1;\n                        _context2.next = 4;\n                        return _this2.extractDataTransferData(dragEvent);\n                      case 4:\n                        ourDataTransfer = _context2.sent;\n                        if (!(ourDataTransfer.size === 0 || tokenSource.token.isCancellationRequested)) {\n                          _context2.next = 7;\n                          break;\n                        }\n                        return _context2.abrupt(\"return\");\n                      case 7:\n                        model = editor.getModel();\n                        if (model) {\n                          _context2.next = 10;\n                          break;\n                        }\n                        return _context2.abrupt(\"return\");\n                      case 10:\n                        providers = _this2._languageFeaturesService.documentOnDropEditProvider.ordered(model).filter(function (provider) {\n                          if (!provider.dropMimeTypes) {\n                            // Keep all providers that don't specify mime types\n                            return true;\n                          }\n                          return provider.dropMimeTypes.some(function (mime) {\n                            return ourDataTransfer.matches(mime);\n                          });\n                        });\n                        _context2.next = 13;\n                        return _this2.getDropEdits(providers, model, position, ourDataTransfer, tokenSource);\n                      case 13:\n                        edits = _context2.sent;\n                        if (!tokenSource.token.isCancellationRequested) {\n                          _context2.next = 16;\n                          break;\n                        }\n                        return _context2.abrupt(\"return\");\n                      case 16:\n                        if (!edits.length) {\n                          _context2.next = 21;\n                          break;\n                        }\n                        activeEditIndex = _this2.getInitialActiveEditIndex(model, edits);\n                        canShowWidget = editor.getOption(36 /* EditorOption.dropIntoEditor */).showDropSelector === 'afterDrop'; // Pass in the parent token here as it tracks cancelling the entire drop operation\n                        _context2.next = 21;\n                        return _this2._postDropWidgetManager.applyEditAndShowIfNeeded([Range.fromPositions(position)], {\n                          activeEditIndex: activeEditIndex,\n                          allEdits: edits\n                        }, canShowWidget, /*#__PURE__*/function () {\n                          var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(edit) {\n                            return _regeneratorRuntime().wrap(function _callee$(_context) {\n                              while (1) switch (_context.prev = _context.next) {\n                                case 0:\n                                  return _context.abrupt(\"return\", edit);\n                                case 1:\n                                case \"end\":\n                                  return _context.stop();\n                              }\n                            }, _callee);\n                          }));\n                          return function (_x5) {\n                            return _ref2.apply(this, arguments);\n                          };\n                        }(), token);\n                      case 21:\n                        _context2.prev = 21;\n                        tokenSource.dispose();\n                        if (_this2._currentOperation === p) {\n                          _this2._currentOperation = undefined;\n                        }\n                        return _context2.finish(21);\n                      case 25:\n                      case \"end\":\n                        return _context2.stop();\n                    }\n                  }, _callee2, null, [[1,, 21, 25]]);\n                }));\n                return function (_x4) {\n                  return _ref.apply(this, arguments);\n                };\n              }());\n              this._dropProgressManager.showWhile(position, localize('dropIntoEditorProgress', \"Running drop handlers. Click to cancel\"), p);\n              this._currentOperation = p;\n            case 8:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, this);\n      }));\n      function onDropIntoEditor(_x, _x2, _x3) {\n        return _onDropIntoEditor.apply(this, arguments);\n      }\n      return onDropIntoEditor;\n    }()\n  }, {\n    key: \"getDropEdits\",\n    value: function () {\n      var _getDropEdits = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(providers, model, position, dataTransfer, tokenSource) {\n        var results, edits;\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.next = 2;\n              return raceCancellation(Promise.all(providers.map( /*#__PURE__*/function () {\n                var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(provider) {\n                  var _edits;\n                  return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n                    while (1) switch (_context4.prev = _context4.next) {\n                      case 0:\n                        _context4.prev = 0;\n                        _context4.next = 3;\n                        return provider.provideDocumentOnDropEdits(model, position, dataTransfer, tokenSource.token);\n                      case 3:\n                        _edits = _context4.sent;\n                        return _context4.abrupt(\"return\", _edits === null || _edits === void 0 ? void 0 : _edits.map(function (edit) {\n                          return _objectSpread(_objectSpread({}, edit), {}, {\n                            providerId: provider.id\n                          });\n                        }));\n                      case 7:\n                        _context4.prev = 7;\n                        _context4.t0 = _context4[\"catch\"](0);\n                        console.error(_context4.t0);\n                      case 10:\n                        return _context4.abrupt(\"return\", undefined);\n                      case 11:\n                      case \"end\":\n                        return _context4.stop();\n                    }\n                  }, _callee4, null, [[0, 7]]);\n                }));\n                return function (_x11) {\n                  return _ref3.apply(this, arguments);\n                };\n              }())), tokenSource.token);\n            case 2:\n              results = _context5.sent;\n              edits = coalesce(results !== null && results !== void 0 ? results : []).flat();\n              return _context5.abrupt(\"return\", sortEditsByYieldTo(edits));\n            case 5:\n            case \"end\":\n              return _context5.stop();\n          }\n        }, _callee5);\n      }));\n      function getDropEdits(_x6, _x7, _x8, _x9, _x10) {\n        return _getDropEdits.apply(this, arguments);\n      }\n      return getDropEdits;\n    }()\n  }, {\n    key: \"getInitialActiveEditIndex\",\n    value: function getInitialActiveEditIndex(model, edits) {\n      var preferredProviders = this._configService.getValue(defaultProviderConfig, {\n        resource: model.uri\n      });\n      var _loop = function _loop() {\n          var _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2),\n            configMime = _Object$entries$_i[0],\n            desiredKindStr = _Object$entries$_i[1];\n          var desiredKind = new HierarchicalKind(desiredKindStr);\n          var editIndex = edits.findIndex(function (edit) {\n            return desiredKind.value === edit.providerId && edit.handledMimeType && matchesMimeType(configMime, [edit.handledMimeType]);\n          });\n          if (editIndex >= 0) {\n            return {\n              v: editIndex\n            };\n          }\n        },\n        _ret;\n      for (var _i = 0, _Object$entries = Object.entries(preferredProviders); _i < _Object$entries.length; _i++) {\n        _ret = _loop();\n        if (_ret) return _ret.v;\n      }\n      return 0;\n    }\n  }, {\n    key: \"extractDataTransferData\",\n    value: function () {\n      var _extractDataTransferData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6(dragEvent) {\n        var dataTransfer, data, _iterator, _step, id, treeDataTransfer, _iterator2, _step2, _step2$value, type, value;\n        return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n          while (1) switch (_context6.prev = _context6.next) {\n            case 0:\n              if (dragEvent.dataTransfer) {\n                _context6.next = 2;\n                break;\n              }\n              return _context6.abrupt(\"return\", new VSDataTransfer());\n            case 2:\n              dataTransfer = toExternalVSDataTransfer(dragEvent.dataTransfer);\n              if (!this.treeItemsTransfer.hasData(DraggedTreeItemsIdentifier.prototype)) {\n                _context6.next = 25;\n                break;\n              }\n              data = this.treeItemsTransfer.getData(DraggedTreeItemsIdentifier.prototype);\n              if (!Array.isArray(data)) {\n                _context6.next = 25;\n                break;\n              }\n              _iterator = _createForOfIteratorHelper(data);\n              _context6.prev = 7;\n              _iterator.s();\n            case 9:\n              if ((_step = _iterator.n()).done) {\n                _context6.next = 17;\n                break;\n              }\n              id = _step.value;\n              _context6.next = 13;\n              return this._treeViewsDragAndDropService.removeDragOperationTransfer(id.identifier);\n            case 13:\n              treeDataTransfer = _context6.sent;\n              if (treeDataTransfer) {\n                _iterator2 = _createForOfIteratorHelper(treeDataTransfer);\n                try {\n                  for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n                    _step2$value = _slicedToArray(_step2.value, 2), type = _step2$value[0], value = _step2$value[1];\n                    dataTransfer.replace(type, value);\n                  }\n                } catch (err) {\n                  _iterator2.e(err);\n                } finally {\n                  _iterator2.f();\n                }\n              }\n            case 15:\n              _context6.next = 9;\n              break;\n            case 17:\n              _context6.next = 22;\n              break;\n            case 19:\n              _context6.prev = 19;\n              _context6.t0 = _context6[\"catch\"](7);\n              _iterator.e(_context6.t0);\n            case 22:\n              _context6.prev = 22;\n              _iterator.f();\n              return _context6.finish(22);\n            case 25:\n              return _context6.abrupt(\"return\", dataTransfer);\n            case 26:\n            case \"end\":\n              return _context6.stop();\n          }\n        }, _callee6, this, [[7, 19, 22, 25]]);\n      }));\n      function extractDataTransferData(_x12) {\n        return _extractDataTransferData.apply(this, arguments);\n      }\n      return extractDataTransferData;\n    }()\n  }], [{\n    key: \"get\",\n    value: function get(editor) {\n      return editor.getContribution(DropIntoEditorController_1.ID);\n    }\n  }]);\n}(Disposable);\nDropIntoEditorController.ID = 'editor.contrib.dropIntoEditorController';\nDropIntoEditorController = DropIntoEditorController_1 = __decorate([__param(1, IInstantiationService), __param(2, IConfigurationService), __param(3, ILanguageFeaturesService), __param(4, ITreeViewsDnDService)], DropIntoEditorController);\nexport { DropIntoEditorController };","map":{"version":3,"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","_typeof","decorate","i","defineProperty","__param","paramIndex","decorator","DropIntoEditorController_1","coalesce","createCancelablePromise","raceCancellation","VSDataTransfer","matchesMimeType","HierarchicalKind","Disposable","toExternalVSDataTransfer","Range","ILanguageFeaturesService","DraggedTreeItemsIdentifier","ITreeViewsDnDService","EditorStateCancellationTokenSource","InlineProgressManager","localize","IConfigurationService","RawContextKey","LocalSelectionTransfer","IInstantiationService","sortEditsByYieldTo","PostEditWidgetManager","defaultProviderConfig","changeDropTypeCommandId","dropWidgetVisibleCtx","DropIntoEditorController","_Disposable","editor","instantiationService","_configService","_languageFeaturesService","_treeViewsDragAndDropService","_this","_classCallCheck","_callSuper","treeItemsTransfer","getInstance","_dropProgressManager","_register","createInstance","_postDropWidgetManager","id","label","onDropIntoEditor","e","position","event","_inherits","_createClass","value","clearWidgets","clear","changeDropType","tryShowSelector","_onDropIntoEditor","_asyncToGenerator","_regeneratorRuntime","mark","_callee3","dragEvent","_this2","_a","p","wrap","_callee3$","_context3","prev","next","dataTransfer","hasModel","abrupt","_currentOperation","cancel","focus","setPosition","_ref","_callee2","token","tokenSource","ourDataTransfer","model","providers","edits","activeEditIndex","canShowWidget","_callee2$","_context2","undefined","extractDataTransferData","sent","size","isCancellationRequested","getModel","documentOnDropEditProvider","ordered","filter","provider","dropMimeTypes","some","mime","matches","getDropEdits","getInitialActiveEditIndex","getOption","showDropSelector","applyEditAndShowIfNeeded","fromPositions","allEdits","_ref2","_callee","edit","_callee$","_context","stop","_x5","apply","dispose","finish","_x4","showWhile","_x","_x2","_x3","_getDropEdits","_callee5","results","_callee5$","_context5","Promise","all","map","_ref3","_callee4","_edits","_callee4$","_context4","provideDocumentOnDropEdits","_objectSpread","providerId","t0","console","error","_x11","flat","_x6","_x7","_x8","_x9","_x10","preferredProviders","getValue","resource","uri","_loop","_Object$entries$_i","_slicedToArray","_Object$entries","_i","configMime","desiredKindStr","desiredKind","editIndex","findIndex","handledMimeType","v","_ret","entries","_extractDataTransferData","_callee6","data","_iterator","_step","treeDataTransfer","_iterator2","_step2","_step2$value","type","_callee6$","_context6","hasData","prototype","getData","Array","isArray","_createForOfIteratorHelper","s","n","done","removeDragOperationTransfer","identifier","replace","err","f","_x12","get","getContribution","ID"],"sources":["/Users/yinger/Desktop/z95_exam_frontend/node_modules/monaco-editor/esm/vs/editor/contrib/dropOrPasteInto/browser/dropIntoEditorController.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar DropIntoEditorController_1;\nimport { coalesce } from '../../../../base/common/arrays.js';\nimport { createCancelablePromise, raceCancellation } from '../../../../base/common/async.js';\nimport { VSDataTransfer, matchesMimeType } from '../../../../base/common/dataTransfer.js';\nimport { HierarchicalKind } from '../../../../base/common/hierarchicalKind.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { toExternalVSDataTransfer } from '../../../browser/dnd.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { DraggedTreeItemsIdentifier } from '../../../common/services/treeViewsDnd.js';\nimport { ITreeViewsDnDService } from '../../../common/services/treeViewsDndService.js';\nimport { EditorStateCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport { InlineProgressManager } from '../../inlineProgress/browser/inlineProgress.js';\nimport { localize } from '../../../../nls.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { LocalSelectionTransfer } from '../../../../platform/dnd/browser/dnd.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { sortEditsByYieldTo } from './edit.js';\nimport { PostEditWidgetManager } from './postEditWidget.js';\nexport const defaultProviderConfig = 'editor.experimental.dropIntoEditor.defaultProvider';\nexport const changeDropTypeCommandId = 'editor.changeDropType';\nexport const dropWidgetVisibleCtx = new RawContextKey('dropWidgetVisible', false, localize('dropWidgetVisible', \"Whether the drop widget is showing\"));\nlet DropIntoEditorController = DropIntoEditorController_1 = class DropIntoEditorController extends Disposable {\n    static get(editor) {\n        return editor.getContribution(DropIntoEditorController_1.ID);\n    }\n    constructor(editor, instantiationService, _configService, _languageFeaturesService, _treeViewsDragAndDropService) {\n        super();\n        this._configService = _configService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._treeViewsDragAndDropService = _treeViewsDragAndDropService;\n        this.treeItemsTransfer = LocalSelectionTransfer.getInstance();\n        this._dropProgressManager = this._register(instantiationService.createInstance(InlineProgressManager, 'dropIntoEditor', editor));\n        this._postDropWidgetManager = this._register(instantiationService.createInstance(PostEditWidgetManager, 'dropIntoEditor', editor, dropWidgetVisibleCtx, { id: changeDropTypeCommandId, label: localize('postDropWidgetTitle', \"Show drop options...\") }));\n        this._register(editor.onDropIntoEditor(e => this.onDropIntoEditor(editor, e.position, e.event)));\n    }\n    clearWidgets() {\n        this._postDropWidgetManager.clear();\n    }\n    changeDropType() {\n        this._postDropWidgetManager.tryShowSelector();\n    }\n    async onDropIntoEditor(editor, position, dragEvent) {\n        var _a;\n        if (!dragEvent.dataTransfer || !editor.hasModel()) {\n            return;\n        }\n        (_a = this._currentOperation) === null || _a === void 0 ? void 0 : _a.cancel();\n        editor.focus();\n        editor.setPosition(position);\n        const p = createCancelablePromise(async (token) => {\n            const tokenSource = new EditorStateCancellationTokenSource(editor, 1 /* CodeEditorStateFlag.Value */, undefined, token);\n            try {\n                const ourDataTransfer = await this.extractDataTransferData(dragEvent);\n                if (ourDataTransfer.size === 0 || tokenSource.token.isCancellationRequested) {\n                    return;\n                }\n                const model = editor.getModel();\n                if (!model) {\n                    return;\n                }\n                const providers = this._languageFeaturesService.documentOnDropEditProvider\n                    .ordered(model)\n                    .filter(provider => {\n                    if (!provider.dropMimeTypes) {\n                        // Keep all providers that don't specify mime types\n                        return true;\n                    }\n                    return provider.dropMimeTypes.some(mime => ourDataTransfer.matches(mime));\n                });\n                const edits = await this.getDropEdits(providers, model, position, ourDataTransfer, tokenSource);\n                if (tokenSource.token.isCancellationRequested) {\n                    return;\n                }\n                if (edits.length) {\n                    const activeEditIndex = this.getInitialActiveEditIndex(model, edits);\n                    const canShowWidget = editor.getOption(36 /* EditorOption.dropIntoEditor */).showDropSelector === 'afterDrop';\n                    // Pass in the parent token here as it tracks cancelling the entire drop operation\n                    await this._postDropWidgetManager.applyEditAndShowIfNeeded([Range.fromPositions(position)], { activeEditIndex, allEdits: edits }, canShowWidget, async (edit) => edit, token);\n                }\n            }\n            finally {\n                tokenSource.dispose();\n                if (this._currentOperation === p) {\n                    this._currentOperation = undefined;\n                }\n            }\n        });\n        this._dropProgressManager.showWhile(position, localize('dropIntoEditorProgress', \"Running drop handlers. Click to cancel\"), p);\n        this._currentOperation = p;\n    }\n    async getDropEdits(providers, model, position, dataTransfer, tokenSource) {\n        const results = await raceCancellation(Promise.all(providers.map(async (provider) => {\n            try {\n                const edits = await provider.provideDocumentOnDropEdits(model, position, dataTransfer, tokenSource.token);\n                return edits === null || edits === void 0 ? void 0 : edits.map(edit => ({ ...edit, providerId: provider.id }));\n            }\n            catch (err) {\n                console.error(err);\n            }\n            return undefined;\n        })), tokenSource.token);\n        const edits = coalesce(results !== null && results !== void 0 ? results : []).flat();\n        return sortEditsByYieldTo(edits);\n    }\n    getInitialActiveEditIndex(model, edits) {\n        const preferredProviders = this._configService.getValue(defaultProviderConfig, { resource: model.uri });\n        for (const [configMime, desiredKindStr] of Object.entries(preferredProviders)) {\n            const desiredKind = new HierarchicalKind(desiredKindStr);\n            const editIndex = edits.findIndex(edit => desiredKind.value === edit.providerId\n                && edit.handledMimeType && matchesMimeType(configMime, [edit.handledMimeType]));\n            if (editIndex >= 0) {\n                return editIndex;\n            }\n        }\n        return 0;\n    }\n    async extractDataTransferData(dragEvent) {\n        if (!dragEvent.dataTransfer) {\n            return new VSDataTransfer();\n        }\n        const dataTransfer = toExternalVSDataTransfer(dragEvent.dataTransfer);\n        if (this.treeItemsTransfer.hasData(DraggedTreeItemsIdentifier.prototype)) {\n            const data = this.treeItemsTransfer.getData(DraggedTreeItemsIdentifier.prototype);\n            if (Array.isArray(data)) {\n                for (const id of data) {\n                    const treeDataTransfer = await this._treeViewsDragAndDropService.removeDragOperationTransfer(id.identifier);\n                    if (treeDataTransfer) {\n                        for (const [type, value] of treeDataTransfer) {\n                            dataTransfer.replace(type, value);\n                        }\n                    }\n                }\n            }\n        }\n        return dataTransfer;\n    }\n};\nDropIntoEditorController.ID = 'editor.contrib.dropIntoEditorController';\nDropIntoEditorController = DropIntoEditorController_1 = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, IConfigurationService),\n    __param(3, ILanguageFeaturesService),\n    __param(4, ITreeViewsDnDService)\n], DropIntoEditorController);\nexport { DropIntoEditorController };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}