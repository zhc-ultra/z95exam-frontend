{"ast":null,"code":"import _slicedToArray from \"/Users/yinger/Desktop/algo_evaluator_front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _createForOfIteratorHelper from \"/Users/yinger/Desktop/algo_evaluator_front/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _toConsumableArray from \"/Users/yinger/Desktop/algo_evaluator_front/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _classCallCheck from \"/Users/yinger/Desktop/algo_evaluator_front/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/yinger/Desktop/algo_evaluator_front/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _callSuper from \"/Users/yinger/Desktop/algo_evaluator_front/node_modules/@babel/runtime/helpers/esm/callSuper.js\";\nimport _get from \"/Users/yinger/Desktop/algo_evaluator_front/node_modules/@babel/runtime/helpers/esm/get.js\";\nimport _getPrototypeOf from \"/Users/yinger/Desktop/algo_evaluator_front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _inherits from \"/Users/yinger/Desktop/algo_evaluator_front/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _typeof from \"/Users/yinger/Desktop/algo_evaluator_front/node_modules/@babel/runtime/helpers/esm/typeof.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.sort.js\";\nimport \"core-js/modules/es.date.now.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport \"core-js/modules/es.object.define-property.js\";\nimport \"core-js/modules/es.object.get-own-property-descriptor.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.reflect.to-string-tag.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if ((typeof Reflect === \"undefined\" ? \"undefined\" : _typeof(Reflect)) === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport * as DomUtils from './dom.js';\nimport { mainWindow } from './window.js';\nimport * as arrays from '../common/arrays.js';\nimport { memoize } from '../common/decorators.js';\nimport { Event as EventUtils } from '../common/event.js';\nimport { Disposable, markAsSingleton, toDisposable } from '../common/lifecycle.js';\nimport { LinkedList } from '../common/linkedList.js';\nexport var EventType;\n(function (EventType) {\n  EventType.Tap = '-monaco-gesturetap';\n  EventType.Change = '-monaco-gesturechange';\n  EventType.Start = '-monaco-gesturestart';\n  EventType.End = '-monaco-gesturesend';\n  EventType.Contextmenu = '-monaco-gesturecontextmenu';\n})(EventType || (EventType = {}));\nexport var Gesture = /*#__PURE__*/function (_Disposable) {\n  function Gesture() {\n    var _this;\n    _classCallCheck(this, Gesture);\n    _this = _callSuper(this, Gesture);\n    _this.dispatched = false;\n    _this.targets = new LinkedList();\n    _this.ignoreTargets = new LinkedList();\n    _this.activeTouches = {};\n    _this.handle = null;\n    _this._lastSetTapCountTime = 0;\n    _this._register(EventUtils.runAndSubscribe(DomUtils.onDidRegisterWindow, function (_ref) {\n      var window = _ref.window,\n        disposables = _ref.disposables;\n      disposables.add(DomUtils.addDisposableListener(window.document, 'touchstart', function (e) {\n        return _this.onTouchStart(e);\n      }, {\n        passive: false\n      }));\n      disposables.add(DomUtils.addDisposableListener(window.document, 'touchend', function (e) {\n        return _this.onTouchEnd(window, e);\n      }));\n      disposables.add(DomUtils.addDisposableListener(window.document, 'touchmove', function (e) {\n        return _this.onTouchMove(e);\n      }, {\n        passive: false\n      }));\n    }, {\n      window: mainWindow,\n      disposables: _this._store\n    }));\n    return _this;\n  }\n  _inherits(Gesture, _Disposable);\n  return _createClass(Gesture, [{\n    key: \"dispose\",\n    value: function dispose() {\n      if (this.handle) {\n        this.handle.dispose();\n        this.handle = null;\n      }\n      _get(_getPrototypeOf(Gesture.prototype), \"dispose\", this).call(this);\n    }\n  }, {\n    key: \"onTouchStart\",\n    value: function onTouchStart(e) {\n      var timestamp = Date.now(); // use Date.now() because on FF e.timeStamp is not epoch based.\n      if (this.handle) {\n        this.handle.dispose();\n        this.handle = null;\n      }\n      for (var i = 0, len = e.targetTouches.length; i < len; i++) {\n        var touch = e.targetTouches.item(i);\n        this.activeTouches[touch.identifier] = {\n          id: touch.identifier,\n          initialTarget: touch.target,\n          initialTimeStamp: timestamp,\n          initialPageX: touch.pageX,\n          initialPageY: touch.pageY,\n          rollingTimestamps: [timestamp],\n          rollingPageX: [touch.pageX],\n          rollingPageY: [touch.pageY]\n        };\n        var evt = this.newGestureEvent(EventType.Start, touch.target);\n        evt.pageX = touch.pageX;\n        evt.pageY = touch.pageY;\n        this.dispatchEvent(evt);\n      }\n      if (this.dispatched) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.dispatched = false;\n      }\n    }\n  }, {\n    key: \"onTouchEnd\",\n    value: function onTouchEnd(targetWindow, e) {\n      var _this2 = this;\n      var timestamp = Date.now(); // use Date.now() because on FF e.timeStamp is not epoch based.\n      var activeTouchCount = Object.keys(this.activeTouches).length;\n      var _loop = function _loop() {\n        var touch = e.changedTouches.item(i);\n        if (!_this2.activeTouches.hasOwnProperty(String(touch.identifier))) {\n          console.warn('move of an UNKNOWN touch', touch);\n          return 1; // continue\n        }\n        var data = _this2.activeTouches[touch.identifier],\n          holdTime = Date.now() - data.initialTimeStamp;\n        if (holdTime < Gesture.HOLD_DELAY && Math.abs(data.initialPageX - arrays.tail(data.rollingPageX)) < 30 && Math.abs(data.initialPageY - arrays.tail(data.rollingPageY)) < 30) {\n          var evt = _this2.newGestureEvent(EventType.Tap, data.initialTarget);\n          evt.pageX = arrays.tail(data.rollingPageX);\n          evt.pageY = arrays.tail(data.rollingPageY);\n          _this2.dispatchEvent(evt);\n        } else if (holdTime >= Gesture.HOLD_DELAY && Math.abs(data.initialPageX - arrays.tail(data.rollingPageX)) < 30 && Math.abs(data.initialPageY - arrays.tail(data.rollingPageY)) < 30) {\n          var _evt = _this2.newGestureEvent(EventType.Contextmenu, data.initialTarget);\n          _evt.pageX = arrays.tail(data.rollingPageX);\n          _evt.pageY = arrays.tail(data.rollingPageY);\n          _this2.dispatchEvent(_evt);\n        } else if (activeTouchCount === 1) {\n          var finalX = arrays.tail(data.rollingPageX);\n          var finalY = arrays.tail(data.rollingPageY);\n          var deltaT = arrays.tail(data.rollingTimestamps) - data.rollingTimestamps[0];\n          var deltaX = finalX - data.rollingPageX[0];\n          var deltaY = finalY - data.rollingPageY[0];\n          // We need to get all the dispatch targets on the start of the inertia event\n          var dispatchTo = _toConsumableArray(_this2.targets).filter(function (t) {\n            return data.initialTarget instanceof Node && t.contains(data.initialTarget);\n          });\n          _this2.inertia(targetWindow, dispatchTo, timestamp,\n          // time now\n          Math.abs(deltaX) / deltaT,\n          // speed\n          deltaX > 0 ? 1 : -1,\n          // x direction\n          finalX,\n          // x now\n          Math.abs(deltaY) / deltaT,\n          // y speed\n          deltaY > 0 ? 1 : -1,\n          // y direction\n          finalY // y now\n          );\n        }\n        _this2.dispatchEvent(_this2.newGestureEvent(EventType.End, data.initialTarget));\n        // forget about this touch\n        delete _this2.activeTouches[touch.identifier];\n      };\n      for (var i = 0, len = e.changedTouches.length; i < len; i++) {\n        if (_loop()) continue;\n      }\n      if (this.dispatched) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.dispatched = false;\n      }\n    }\n  }, {\n    key: \"newGestureEvent\",\n    value: function newGestureEvent(type, initialTarget) {\n      var event = document.createEvent('CustomEvent');\n      event.initEvent(type, false, true);\n      event.initialTarget = initialTarget;\n      event.tapCount = 0;\n      return event;\n    }\n  }, {\n    key: \"dispatchEvent\",\n    value: function dispatchEvent(event) {\n      if (event.type === EventType.Tap) {\n        var currentTime = new Date().getTime();\n        var setTapCount = 0;\n        if (currentTime - this._lastSetTapCountTime > Gesture.CLEAR_TAP_COUNT_TIME) {\n          setTapCount = 1;\n        } else {\n          setTapCount = 2;\n        }\n        this._lastSetTapCountTime = currentTime;\n        event.tapCount = setTapCount;\n      } else if (event.type === EventType.Change || event.type === EventType.Contextmenu) {\n        // tap is canceled by scrolling or context menu\n        this._lastSetTapCountTime = 0;\n      }\n      if (event.initialTarget instanceof Node) {\n        var _iterator = _createForOfIteratorHelper(this.ignoreTargets),\n          _step;\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var ignoreTarget = _step.value;\n            if (ignoreTarget.contains(event.initialTarget)) {\n              return;\n            }\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n        var targets = [];\n        var _iterator2 = _createForOfIteratorHelper(this.targets),\n          _step2;\n        try {\n          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n            var _target = _step2.value;\n            if (_target.contains(event.initialTarget)) {\n              var depth = 0;\n              var now = event.initialTarget;\n              while (now && now !== _target) {\n                depth++;\n                now = now.parentElement;\n              }\n              targets.push([depth, _target]);\n            }\n          }\n        } catch (err) {\n          _iterator2.e(err);\n        } finally {\n          _iterator2.f();\n        }\n        targets.sort(function (a, b) {\n          return a[0] - b[0];\n        });\n        for (var _i = 0, _targets = targets; _i < _targets.length; _i++) {\n          var _targets$_i = _slicedToArray(_targets[_i], 2),\n            _ = _targets$_i[0],\n            target = _targets$_i[1];\n          target.dispatchEvent(event);\n          this.dispatched = true;\n        }\n      }\n    }\n  }, {\n    key: \"inertia\",\n    value: function inertia(targetWindow, dispatchTo, t1, vX, dirX, x, vY, dirY, y) {\n      var _this3 = this;\n      this.handle = DomUtils.scheduleAtNextAnimationFrame(targetWindow, function () {\n        var now = Date.now();\n        // velocity: old speed + accel_over_time\n        var deltaT = now - t1;\n        var delta_pos_x = 0,\n          delta_pos_y = 0;\n        var stopped = true;\n        vX += Gesture.SCROLL_FRICTION * deltaT;\n        vY += Gesture.SCROLL_FRICTION * deltaT;\n        if (vX > 0) {\n          stopped = false;\n          delta_pos_x = dirX * vX * deltaT;\n        }\n        if (vY > 0) {\n          stopped = false;\n          delta_pos_y = dirY * vY * deltaT;\n        }\n        // dispatch translation event\n        var evt = _this3.newGestureEvent(EventType.Change);\n        evt.translationX = delta_pos_x;\n        evt.translationY = delta_pos_y;\n        dispatchTo.forEach(function (d) {\n          return d.dispatchEvent(evt);\n        });\n        if (!stopped) {\n          _this3.inertia(targetWindow, dispatchTo, now, vX, dirX, x + delta_pos_x, vY, dirY, y + delta_pos_y);\n        }\n      });\n    }\n  }, {\n    key: \"onTouchMove\",\n    value: function onTouchMove(e) {\n      var timestamp = Date.now(); // use Date.now() because on FF e.timeStamp is not epoch based.\n      for (var i = 0, len = e.changedTouches.length; i < len; i++) {\n        var touch = e.changedTouches.item(i);\n        if (!this.activeTouches.hasOwnProperty(String(touch.identifier))) {\n          console.warn('end of an UNKNOWN touch', touch);\n          continue;\n        }\n        var data = this.activeTouches[touch.identifier];\n        var evt = this.newGestureEvent(EventType.Change, data.initialTarget);\n        evt.translationX = touch.pageX - arrays.tail(data.rollingPageX);\n        evt.translationY = touch.pageY - arrays.tail(data.rollingPageY);\n        evt.pageX = touch.pageX;\n        evt.pageY = touch.pageY;\n        this.dispatchEvent(evt);\n        // only keep a few data points, to average the final speed\n        if (data.rollingPageX.length > 3) {\n          data.rollingPageX.shift();\n          data.rollingPageY.shift();\n          data.rollingTimestamps.shift();\n        }\n        data.rollingPageX.push(touch.pageX);\n        data.rollingPageY.push(touch.pageY);\n        data.rollingTimestamps.push(timestamp);\n      }\n      if (this.dispatched) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.dispatched = false;\n      }\n    }\n  }], [{\n    key: \"addTarget\",\n    value: function addTarget(element) {\n      if (!Gesture.isTouchDevice()) {\n        return Disposable.None;\n      }\n      if (!Gesture.INSTANCE) {\n        Gesture.INSTANCE = markAsSingleton(new Gesture());\n      }\n      var remove = Gesture.INSTANCE.targets.push(element);\n      return toDisposable(remove);\n    }\n  }, {\n    key: \"ignoreTarget\",\n    value: function ignoreTarget(element) {\n      if (!Gesture.isTouchDevice()) {\n        return Disposable.None;\n      }\n      if (!Gesture.INSTANCE) {\n        Gesture.INSTANCE = markAsSingleton(new Gesture());\n      }\n      var remove = Gesture.INSTANCE.ignoreTargets.push(element);\n      return toDisposable(remove);\n    }\n  }, {\n    key: \"isTouchDevice\",\n    value: function isTouchDevice() {\n      // `'ontouchstart' in window` always evaluates to true with typescript's modern typings. This causes `window` to be\n      // `never` later in `window.navigator`. That's why we need the explicit `window as Window` cast\n      return 'ontouchstart' in mainWindow || navigator.maxTouchPoints > 0;\n    }\n  }]);\n}(Disposable);\nGesture.SCROLL_FRICTION = -0.005;\nGesture.HOLD_DELAY = 700;\nGesture.CLEAR_TAP_COUNT_TIME = 400; // ms\n__decorate([memoize], Gesture, \"isTouchDevice\", null);","map":{"version":3,"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","_typeof","decorate","i","defineProperty","DomUtils","mainWindow","arrays","memoize","Event","EventUtils","Disposable","markAsSingleton","toDisposable","LinkedList","EventType","Tap","Change","Start","End","Contextmenu","Gesture","_Disposable","_this","_classCallCheck","_callSuper","dispatched","targets","ignoreTargets","activeTouches","handle","_lastSetTapCountTime","_register","runAndSubscribe","onDidRegisterWindow","_ref","window","disposables","add","addDisposableListener","document","e","onTouchStart","passive","onTouchEnd","onTouchMove","_store","_inherits","_createClass","value","dispose","_get","_getPrototypeOf","prototype","call","timestamp","Date","now","len","targetTouches","touch","item","identifier","id","initialTarget","initialTimeStamp","initialPageX","pageX","initialPageY","pageY","rollingTimestamps","rollingPageX","rollingPageY","evt","newGestureEvent","dispatchEvent","preventDefault","stopPropagation","targetWindow","_this2","activeTouchCount","keys","_loop","changedTouches","hasOwnProperty","String","console","warn","data","holdTime","HOLD_DELAY","Math","abs","tail","finalX","finalY","deltaT","deltaX","deltaY","dispatchTo","_toConsumableArray","filter","t","Node","contains","inertia","type","event","createEvent","initEvent","tapCount","currentTime","getTime","setTapCount","CLEAR_TAP_COUNT_TIME","_iterator","_createForOfIteratorHelper","_step","s","n","done","ignoreTarget","err","f","_iterator2","_step2","depth","parentElement","push","sort","a","b","_i","_targets","_targets$_i","_slicedToArray","_","t1","vX","dirX","x","vY","dirY","y","_this3","scheduleAtNextAnimationFrame","delta_pos_x","delta_pos_y","stopped","SCROLL_FRICTION","translationX","translationY","forEach","shift","addTarget","element","isTouchDevice","None","INSTANCE","remove","navigator","maxTouchPoints"],"sources":["/Users/yinger/Desktop/algo_evaluator_front/node_modules/monaco-editor/esm/vs/base/browser/touch.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport * as DomUtils from './dom.js';\nimport { mainWindow } from './window.js';\nimport * as arrays from '../common/arrays.js';\nimport { memoize } from '../common/decorators.js';\nimport { Event as EventUtils } from '../common/event.js';\nimport { Disposable, markAsSingleton, toDisposable } from '../common/lifecycle.js';\nimport { LinkedList } from '../common/linkedList.js';\nexport var EventType;\n(function (EventType) {\n    EventType.Tap = '-monaco-gesturetap';\n    EventType.Change = '-monaco-gesturechange';\n    EventType.Start = '-monaco-gesturestart';\n    EventType.End = '-monaco-gesturesend';\n    EventType.Contextmenu = '-monaco-gesturecontextmenu';\n})(EventType || (EventType = {}));\nexport class Gesture extends Disposable {\n    constructor() {\n        super();\n        this.dispatched = false;\n        this.targets = new LinkedList();\n        this.ignoreTargets = new LinkedList();\n        this.activeTouches = {};\n        this.handle = null;\n        this._lastSetTapCountTime = 0;\n        this._register(EventUtils.runAndSubscribe(DomUtils.onDidRegisterWindow, ({ window, disposables }) => {\n            disposables.add(DomUtils.addDisposableListener(window.document, 'touchstart', (e) => this.onTouchStart(e), { passive: false }));\n            disposables.add(DomUtils.addDisposableListener(window.document, 'touchend', (e) => this.onTouchEnd(window, e)));\n            disposables.add(DomUtils.addDisposableListener(window.document, 'touchmove', (e) => this.onTouchMove(e), { passive: false }));\n        }, { window: mainWindow, disposables: this._store }));\n    }\n    static addTarget(element) {\n        if (!Gesture.isTouchDevice()) {\n            return Disposable.None;\n        }\n        if (!Gesture.INSTANCE) {\n            Gesture.INSTANCE = markAsSingleton(new Gesture());\n        }\n        const remove = Gesture.INSTANCE.targets.push(element);\n        return toDisposable(remove);\n    }\n    static ignoreTarget(element) {\n        if (!Gesture.isTouchDevice()) {\n            return Disposable.None;\n        }\n        if (!Gesture.INSTANCE) {\n            Gesture.INSTANCE = markAsSingleton(new Gesture());\n        }\n        const remove = Gesture.INSTANCE.ignoreTargets.push(element);\n        return toDisposable(remove);\n    }\n    static isTouchDevice() {\n        // `'ontouchstart' in window` always evaluates to true with typescript's modern typings. This causes `window` to be\n        // `never` later in `window.navigator`. That's why we need the explicit `window as Window` cast\n        return 'ontouchstart' in mainWindow || navigator.maxTouchPoints > 0;\n    }\n    dispose() {\n        if (this.handle) {\n            this.handle.dispose();\n            this.handle = null;\n        }\n        super.dispose();\n    }\n    onTouchStart(e) {\n        const timestamp = Date.now(); // use Date.now() because on FF e.timeStamp is not epoch based.\n        if (this.handle) {\n            this.handle.dispose();\n            this.handle = null;\n        }\n        for (let i = 0, len = e.targetTouches.length; i < len; i++) {\n            const touch = e.targetTouches.item(i);\n            this.activeTouches[touch.identifier] = {\n                id: touch.identifier,\n                initialTarget: touch.target,\n                initialTimeStamp: timestamp,\n                initialPageX: touch.pageX,\n                initialPageY: touch.pageY,\n                rollingTimestamps: [timestamp],\n                rollingPageX: [touch.pageX],\n                rollingPageY: [touch.pageY]\n            };\n            const evt = this.newGestureEvent(EventType.Start, touch.target);\n            evt.pageX = touch.pageX;\n            evt.pageY = touch.pageY;\n            this.dispatchEvent(evt);\n        }\n        if (this.dispatched) {\n            e.preventDefault();\n            e.stopPropagation();\n            this.dispatched = false;\n        }\n    }\n    onTouchEnd(targetWindow, e) {\n        const timestamp = Date.now(); // use Date.now() because on FF e.timeStamp is not epoch based.\n        const activeTouchCount = Object.keys(this.activeTouches).length;\n        for (let i = 0, len = e.changedTouches.length; i < len; i++) {\n            const touch = e.changedTouches.item(i);\n            if (!this.activeTouches.hasOwnProperty(String(touch.identifier))) {\n                console.warn('move of an UNKNOWN touch', touch);\n                continue;\n            }\n            const data = this.activeTouches[touch.identifier], holdTime = Date.now() - data.initialTimeStamp;\n            if (holdTime < Gesture.HOLD_DELAY\n                && Math.abs(data.initialPageX - arrays.tail(data.rollingPageX)) < 30\n                && Math.abs(data.initialPageY - arrays.tail(data.rollingPageY)) < 30) {\n                const evt = this.newGestureEvent(EventType.Tap, data.initialTarget);\n                evt.pageX = arrays.tail(data.rollingPageX);\n                evt.pageY = arrays.tail(data.rollingPageY);\n                this.dispatchEvent(evt);\n            }\n            else if (holdTime >= Gesture.HOLD_DELAY\n                && Math.abs(data.initialPageX - arrays.tail(data.rollingPageX)) < 30\n                && Math.abs(data.initialPageY - arrays.tail(data.rollingPageY)) < 30) {\n                const evt = this.newGestureEvent(EventType.Contextmenu, data.initialTarget);\n                evt.pageX = arrays.tail(data.rollingPageX);\n                evt.pageY = arrays.tail(data.rollingPageY);\n                this.dispatchEvent(evt);\n            }\n            else if (activeTouchCount === 1) {\n                const finalX = arrays.tail(data.rollingPageX);\n                const finalY = arrays.tail(data.rollingPageY);\n                const deltaT = arrays.tail(data.rollingTimestamps) - data.rollingTimestamps[0];\n                const deltaX = finalX - data.rollingPageX[0];\n                const deltaY = finalY - data.rollingPageY[0];\n                // We need to get all the dispatch targets on the start of the inertia event\n                const dispatchTo = [...this.targets].filter(t => data.initialTarget instanceof Node && t.contains(data.initialTarget));\n                this.inertia(targetWindow, dispatchTo, timestamp, // time now\n                Math.abs(deltaX) / deltaT, // speed\n                deltaX > 0 ? 1 : -1, // x direction\n                finalX, // x now\n                Math.abs(deltaY) / deltaT, // y speed\n                deltaY > 0 ? 1 : -1, // y direction\n                finalY // y now\n                );\n            }\n            this.dispatchEvent(this.newGestureEvent(EventType.End, data.initialTarget));\n            // forget about this touch\n            delete this.activeTouches[touch.identifier];\n        }\n        if (this.dispatched) {\n            e.preventDefault();\n            e.stopPropagation();\n            this.dispatched = false;\n        }\n    }\n    newGestureEvent(type, initialTarget) {\n        const event = document.createEvent('CustomEvent');\n        event.initEvent(type, false, true);\n        event.initialTarget = initialTarget;\n        event.tapCount = 0;\n        return event;\n    }\n    dispatchEvent(event) {\n        if (event.type === EventType.Tap) {\n            const currentTime = (new Date()).getTime();\n            let setTapCount = 0;\n            if (currentTime - this._lastSetTapCountTime > Gesture.CLEAR_TAP_COUNT_TIME) {\n                setTapCount = 1;\n            }\n            else {\n                setTapCount = 2;\n            }\n            this._lastSetTapCountTime = currentTime;\n            event.tapCount = setTapCount;\n        }\n        else if (event.type === EventType.Change || event.type === EventType.Contextmenu) {\n            // tap is canceled by scrolling or context menu\n            this._lastSetTapCountTime = 0;\n        }\n        if (event.initialTarget instanceof Node) {\n            for (const ignoreTarget of this.ignoreTargets) {\n                if (ignoreTarget.contains(event.initialTarget)) {\n                    return;\n                }\n            }\n            const targets = [];\n            for (const target of this.targets) {\n                if (target.contains(event.initialTarget)) {\n                    let depth = 0;\n                    let now = event.initialTarget;\n                    while (now && now !== target) {\n                        depth++;\n                        now = now.parentElement;\n                    }\n                    targets.push([depth, target]);\n                }\n            }\n            targets.sort((a, b) => a[0] - b[0]);\n            for (const [_, target] of targets) {\n                target.dispatchEvent(event);\n                this.dispatched = true;\n            }\n        }\n    }\n    inertia(targetWindow, dispatchTo, t1, vX, dirX, x, vY, dirY, y) {\n        this.handle = DomUtils.scheduleAtNextAnimationFrame(targetWindow, () => {\n            const now = Date.now();\n            // velocity: old speed + accel_over_time\n            const deltaT = now - t1;\n            let delta_pos_x = 0, delta_pos_y = 0;\n            let stopped = true;\n            vX += Gesture.SCROLL_FRICTION * deltaT;\n            vY += Gesture.SCROLL_FRICTION * deltaT;\n            if (vX > 0) {\n                stopped = false;\n                delta_pos_x = dirX * vX * deltaT;\n            }\n            if (vY > 0) {\n                stopped = false;\n                delta_pos_y = dirY * vY * deltaT;\n            }\n            // dispatch translation event\n            const evt = this.newGestureEvent(EventType.Change);\n            evt.translationX = delta_pos_x;\n            evt.translationY = delta_pos_y;\n            dispatchTo.forEach(d => d.dispatchEvent(evt));\n            if (!stopped) {\n                this.inertia(targetWindow, dispatchTo, now, vX, dirX, x + delta_pos_x, vY, dirY, y + delta_pos_y);\n            }\n        });\n    }\n    onTouchMove(e) {\n        const timestamp = Date.now(); // use Date.now() because on FF e.timeStamp is not epoch based.\n        for (let i = 0, len = e.changedTouches.length; i < len; i++) {\n            const touch = e.changedTouches.item(i);\n            if (!this.activeTouches.hasOwnProperty(String(touch.identifier))) {\n                console.warn('end of an UNKNOWN touch', touch);\n                continue;\n            }\n            const data = this.activeTouches[touch.identifier];\n            const evt = this.newGestureEvent(EventType.Change, data.initialTarget);\n            evt.translationX = touch.pageX - arrays.tail(data.rollingPageX);\n            evt.translationY = touch.pageY - arrays.tail(data.rollingPageY);\n            evt.pageX = touch.pageX;\n            evt.pageY = touch.pageY;\n            this.dispatchEvent(evt);\n            // only keep a few data points, to average the final speed\n            if (data.rollingPageX.length > 3) {\n                data.rollingPageX.shift();\n                data.rollingPageY.shift();\n                data.rollingTimestamps.shift();\n            }\n            data.rollingPageX.push(touch.pageX);\n            data.rollingPageY.push(touch.pageY);\n            data.rollingTimestamps.push(timestamp);\n        }\n        if (this.dispatched) {\n            e.preventDefault();\n            e.stopPropagation();\n            this.dispatched = false;\n        }\n    }\n}\nGesture.SCROLL_FRICTION = -0.005;\nGesture.HOLD_DELAY = 700;\nGesture.CLEAR_TAP_COUNT_TIME = 400; // ms\n__decorate([\n    memoize\n], Gesture, \"isTouchDevice\", null);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}