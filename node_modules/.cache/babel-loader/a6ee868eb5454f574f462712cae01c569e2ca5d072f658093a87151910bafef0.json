{"ast":null,"code":"import _toConsumableArray from \"/Users/yinger/Desktop/algo_evaluator_front/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _regeneratorRuntime from \"/Users/yinger/Desktop/algo_evaluator_front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/yinger/Desktop/algo_evaluator_front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"/Users/yinger/Desktop/algo_evaluator_front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _classCallCheck from \"/Users/yinger/Desktop/algo_evaluator_front/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/yinger/Desktop/algo_evaluator_front/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _typeof from \"/Users/yinger/Desktop/algo_evaluator_front/node_modules/@babel/runtime/helpers/esm/typeof.js\";\nimport \"core-js/modules/es.error.to-string.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.flat-map.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.splice.js\";\nimport \"core-js/modules/es.array.unscopables.flat-map.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport \"core-js/modules/es.object.define-property.js\";\nimport \"core-js/modules/es.object.get-own-property-descriptor.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.parse-int.js\";\nimport \"core-js/modules/es.promise.all-settled.js\";\nimport \"core-js/modules/es.reflect.to-string-tag.js\";\nimport \"core-js/modules/es.regexp.to-string.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/es.string.trim.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/web.timers.js\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if ((typeof Reflect === \"undefined\" ? \"undefined\" : _typeof(Reflect)) === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport * as aria from '../../../../base/browser/ui/aria/aria.js';\nimport { renderIcon } from '../../../../base/browser/ui/iconLabel/iconLabels.js';\nimport { List } from '../../../../base/browser/ui/list/listWidget.js';\nimport * as arrays from '../../../../base/common/arrays.js';\nimport { DeferredPromise, raceCancellation } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { assertType, isDefined } from '../../../../base/common/types.js';\nimport './renameWidget.css';\nimport { applyFontInfo } from '../../../browser/config/domFontInfo.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { NewSymbolNameTag } from '../../../common/languages.js';\nimport { localize } from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { getListStyles } from '../../../../platform/theme/browser/defaultStyles.js';\nimport { editorWidgetBackground, inputBackground, inputBorder, inputForeground, quickInputListFocusBackground, quickInputListFocusForeground, widgetBorder, widgetShadow } from '../../../../platform/theme/common/colorRegistry.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\n/** for debugging */\nvar _sticky = false;\nexport var CONTEXT_RENAME_INPUT_VISIBLE = new RawContextKey('renameInputVisible', false, localize('renameInputVisible', \"Whether the rename input widget is visible\"));\nexport var CONTEXT_RENAME_INPUT_FOCUSED = new RawContextKey('renameInputFocused', false, localize('renameInputFocused', \"Whether the rename input widget is focused\"));\nvar RenameWidget = /*#__PURE__*/function () {\n  function RenameWidget(_editor, _acceptKeybindings, _themeService, _keybindingService, contextKeyService, _logService) {\n    var _this = this;\n    _classCallCheck(this, RenameWidget);\n    this._editor = _editor;\n    this._acceptKeybindings = _acceptKeybindings;\n    this._themeService = _themeService;\n    this._keybindingService = _keybindingService;\n    this._logService = _logService;\n    // implement IContentWidget\n    this.allowEditorOverflow = true;\n    this._disposables = new DisposableStore();\n    this._visibleContextKey = CONTEXT_RENAME_INPUT_VISIBLE.bindTo(contextKeyService);\n    this._isEditingRenameCandidate = false;\n    this._beforeFirstInputFieldEditSW = new StopWatch();\n    this._input = new RenameInput();\n    this._disposables.add(this._input);\n    this._editor.addContentWidget(this);\n    this._disposables.add(this._editor.onDidChangeConfiguration(function (e) {\n      if (e.hasChanged(50 /* EditorOption.fontInfo */)) {\n        _this._updateFont();\n      }\n    }));\n    this._disposables.add(_themeService.onDidColorThemeChange(this._updateStyles, this));\n  }\n  return _createClass(RenameWidget, [{\n    key: \"dispose\",\n    value: function dispose() {\n      this._disposables.dispose();\n      this._editor.removeContentWidget(this);\n    }\n  }, {\n    key: \"getId\",\n    value: function getId() {\n      return '__renameInputWidget';\n    }\n  }, {\n    key: \"getDomNode\",\n    value: function getDomNode() {\n      var _this2 = this;\n      if (!this._domNode) {\n        this._domNode = document.createElement('div');\n        this._domNode.className = 'monaco-editor rename-box';\n        this._domNode.appendChild(this._input.domNode);\n        this._renameCandidateListView = this._disposables.add(new RenameCandidateListView(this._domNode, {\n          fontInfo: this._editor.getOption(50 /* EditorOption.fontInfo */),\n          onFocusChange: function onFocusChange(newSymbolName) {\n            _this2._input.domNode.value = newSymbolName;\n            _this2._isEditingRenameCandidate = false; // @ulugbekna: reset\n          },\n          onSelectionChange: function onSelectionChange() {\n            _this2._isEditingRenameCandidate = false; // @ulugbekna: because user picked a rename suggestion\n            _this2.acceptInput(false); // we don't allow preview with mouse click for now\n          }\n        }));\n        this._disposables.add(this._input.onDidChange(function () {\n          var _a, _b, _c, _d;\n          if (((_a = _this2._renameCandidateListView) === null || _a === void 0 ? void 0 : _a.focusedCandidate) !== undefined) {\n            _this2._isEditingRenameCandidate = true;\n          }\n          (_b = _this2._timeBeforeFirstInputFieldEdit) !== null && _b !== void 0 ? _b : _this2._timeBeforeFirstInputFieldEdit = _this2._beforeFirstInputFieldEditSW.elapsed();\n          if (((_c = _this2._renameCandidateProvidersCts) === null || _c === void 0 ? void 0 : _c.token.isCancellationRequested) === false) {\n            _this2._renameCandidateProvidersCts.cancel();\n          }\n          (_d = _this2._renameCandidateListView) === null || _d === void 0 ? void 0 : _d.clearFocus();\n        }));\n        this._label = document.createElement('div');\n        this._label.className = 'rename-label';\n        this._domNode.appendChild(this._label);\n        this._updateFont();\n        this._updateStyles(this._themeService.getColorTheme());\n      }\n      return this._domNode;\n    }\n  }, {\n    key: \"_updateStyles\",\n    value: function _updateStyles(theme) {\n      var _a, _b, _c, _d;\n      if (!this._domNode) {\n        return;\n      }\n      var widgetShadowColor = theme.getColor(widgetShadow);\n      var widgetBorderColor = theme.getColor(widgetBorder);\n      this._domNode.style.backgroundColor = String((_a = theme.getColor(editorWidgetBackground)) !== null && _a !== void 0 ? _a : '');\n      this._domNode.style.boxShadow = widgetShadowColor ? \" 0 0 8px 2px \".concat(widgetShadowColor) : '';\n      this._domNode.style.border = widgetBorderColor ? \"1px solid \".concat(widgetBorderColor) : '';\n      this._domNode.style.color = String((_b = theme.getColor(inputForeground)) !== null && _b !== void 0 ? _b : '');\n      this._input.domNode.style.backgroundColor = String((_c = theme.getColor(inputBackground)) !== null && _c !== void 0 ? _c : '');\n      // this._input.style.color = String(theme.getColor(inputForeground) ?? '');\n      var border = theme.getColor(inputBorder);\n      this._input.domNode.style.borderWidth = border ? '1px' : '0px';\n      this._input.domNode.style.borderStyle = border ? 'solid' : 'none';\n      this._input.domNode.style.borderColor = (_d = border === null || border === void 0 ? void 0 : border.toString()) !== null && _d !== void 0 ? _d : 'none';\n    }\n  }, {\n    key: \"_updateFont\",\n    value: function _updateFont() {\n      if (this._domNode === undefined) {\n        return;\n      }\n      assertType(this._label !== undefined, 'RenameWidget#_updateFont: _label must not be undefined given _domNode is defined');\n      this._editor.applyFontInfo(this._input.domNode);\n      var fontInfo = this._editor.getOption(50 /* EditorOption.fontInfo */);\n      this._label.style.fontSize = \"\".concat(this._computeLabelFontSize(fontInfo.fontSize), \"px\");\n    }\n  }, {\n    key: \"_computeLabelFontSize\",\n    value: function _computeLabelFontSize(editorFontSize) {\n      return editorFontSize * 0.8;\n    }\n  }, {\n    key: \"getPosition\",\n    value: function getPosition() {\n      if (!this._visible) {\n        return null;\n      }\n      if (!this._editor.hasModel() ||\n      // @ulugbekna: shouldn't happen\n      !this._editor.getDomNode() // @ulugbekna: can happen during tests based on suggestWidget's similar predicate check\n      ) {\n        return null;\n      }\n      var bodyBox = dom.getClientArea(this.getDomNode().ownerDocument.body);\n      var editorBox = dom.getDomNodePagePosition(this._editor.getDomNode());\n      var cursorBoxTop = this._getTopForPosition();\n      this._nPxAvailableAbove = cursorBoxTop + editorBox.top;\n      this._nPxAvailableBelow = bodyBox.height - this._nPxAvailableAbove;\n      var lineHeight = this._editor.getOption(67 /* EditorOption.lineHeight */);\n      var _RenameCandidateView$ = RenameCandidateView.getLayoutInfo({\n          lineHeight: lineHeight\n        }),\n        candidateViewHeight = _RenameCandidateView$.totalHeight;\n      var positionPreference = this._nPxAvailableBelow > candidateViewHeight * 6 /* approximate # of candidates to fit in (inclusive of rename input box & rename label) */ ? [2 /* ContentWidgetPositionPreference.BELOW */, 1 /* ContentWidgetPositionPreference.ABOVE */] : [1 /* ContentWidgetPositionPreference.ABOVE */, 2 /* ContentWidgetPositionPreference.BELOW */];\n      return {\n        position: this._position,\n        preference: positionPreference\n      };\n    }\n  }, {\n    key: \"beforeRender\",\n    value: function beforeRender() {\n      var _a, _b;\n      var _this$_acceptKeybindi = _slicedToArray(this._acceptKeybindings, 2),\n        accept = _this$_acceptKeybindi[0],\n        preview = _this$_acceptKeybindi[1];\n      this._label.innerText = localize({\n        key: 'label',\n        comment: ['placeholders are keybindings, e.g \"F2 to Rename, Shift+F2 to Preview\"']\n      }, \"{0} to Rename, {1} to Preview\", (_a = this._keybindingService.lookupKeybinding(accept)) === null || _a === void 0 ? void 0 : _a.getLabel(), (_b = this._keybindingService.lookupKeybinding(preview)) === null || _b === void 0 ? void 0 : _b.getLabel());\n      this._domNode.style.minWidth = \"200px\"; // to prevent from widening when candidates come in\n      return null;\n    }\n  }, {\n    key: \"afterRender\",\n    value: function afterRender(position) {\n      this._trace('invoking afterRender, position: ', position ? 'not null' : 'null');\n      if (position === null) {\n        // cancel rename when input widget isn't rendered anymore\n        this.cancelInput(true, 'afterRender (because position is null)');\n        return;\n      }\n      if (!this._editor.hasModel() ||\n      // shouldn't happen\n      !this._editor.getDomNode() // can happen during tests based on suggestWidget's similar predicate check\n      ) {\n        return;\n      }\n      assertType(this._renameCandidateListView);\n      assertType(this._nPxAvailableAbove !== undefined);\n      assertType(this._nPxAvailableBelow !== undefined);\n      var inputBoxHeight = dom.getTotalHeight(this._input.domNode);\n      var labelHeight = dom.getTotalHeight(this._label);\n      var totalHeightAvailable;\n      if (position === 2 /* ContentWidgetPositionPreference.BELOW */) {\n        totalHeightAvailable = this._nPxAvailableBelow;\n      } else {\n        totalHeightAvailable = this._nPxAvailableAbove;\n      }\n      this._renameCandidateListView.layout({\n        height: totalHeightAvailable - labelHeight - inputBoxHeight,\n        width: dom.getTotalWidth(this._input.domNode)\n      });\n    }\n  }, {\n    key: \"acceptInput\",\n    value: function acceptInput(wantsPreview) {\n      var _a;\n      this._trace(\"invoking acceptInput\");\n      (_a = this._currentAcceptInput) === null || _a === void 0 ? void 0 : _a.call(this, wantsPreview);\n    }\n  }, {\n    key: \"cancelInput\",\n    value: function cancelInput(focusEditor, caller) {\n      var _a;\n      this._trace(\"invoking cancelInput, caller: \".concat(caller, \", _currentCancelInput: \").concat(this._currentAcceptInput ? 'not undefined' : 'undefined'));\n      (_a = this._currentCancelInput) === null || _a === void 0 ? void 0 : _a.call(this, focusEditor);\n    }\n  }, {\n    key: \"focusNextRenameSuggestion\",\n    value: function focusNextRenameSuggestion() {\n      var _a;\n      if (!((_a = this._renameCandidateListView) === null || _a === void 0 ? void 0 : _a.focusNext())) {\n        this._input.domNode.value = this._currentName;\n      }\n    }\n  }, {\n    key: \"focusPreviousRenameSuggestion\",\n    value: function focusPreviousRenameSuggestion() {\n      var _a;\n      if (!((_a = this._renameCandidateListView) === null || _a === void 0 ? void 0 : _a.focusPrevious())) {\n        this._input.domNode.value = this._currentName;\n      }\n    }\n  }, {\n    key: \"getInput\",\n    value: function getInput(where, currentName, supportPreview, requestRenameCandidates, cts) {\n      var _this3 = this;\n      var _this$_getSelection = this._getSelection(where, currentName),\n        selectionStart = _this$_getSelection.start,\n        selectionEnd = _this$_getSelection.end;\n      this._renameCandidateProvidersCts = new CancellationTokenSource();\n      var candidates = requestRenameCandidates(this._renameCandidateProvidersCts.token);\n      this._updateRenameCandidates(candidates, currentName, cts.token);\n      this._isEditingRenameCandidate = false;\n      this._domNode.classList.toggle('preview', supportPreview);\n      this._position = new Position(where.startLineNumber, where.startColumn);\n      this._currentName = currentName;\n      this._input.domNode.value = currentName;\n      this._input.domNode.setAttribute('selectionStart', selectionStart.toString());\n      this._input.domNode.setAttribute('selectionEnd', selectionEnd.toString());\n      this._input.domNode.size = Math.max((where.endColumn - where.startColumn) * 1.1, 20); // determines width\n      this._beforeFirstInputFieldEditSW.reset();\n      var disposeOnDone = new DisposableStore();\n      disposeOnDone.add(toDisposable(function () {\n        return cts.dispose(true);\n      })); // @ulugbekna: this may result in `this.cancelInput` being called twice, but it should be safe since we set it to undefined after 1st call\n      disposeOnDone.add(toDisposable(function () {\n        if (_this3._renameCandidateProvidersCts !== undefined) {\n          _this3._renameCandidateProvidersCts.dispose(true);\n          _this3._renameCandidateProvidersCts = undefined;\n        }\n      }));\n      var inputResult = new DeferredPromise();\n      inputResult.p[\"finally\"](function () {\n        disposeOnDone.dispose();\n        _this3._hide();\n      });\n      this._currentCancelInput = function (focusEditor) {\n        var _a;\n        _this3._trace('invoking _currentCancelInput');\n        _this3._currentAcceptInput = undefined;\n        _this3._currentCancelInput = undefined;\n        (_a = _this3._renameCandidateListView) === null || _a === void 0 ? void 0 : _a.clearCandidates();\n        inputResult.complete(focusEditor);\n        return true;\n      };\n      this._currentAcceptInput = function (wantsPreview) {\n        _this3._trace('invoking _currentAcceptInput');\n        assertType(_this3._renameCandidateListView !== undefined);\n        var nRenameSuggestions = _this3._renameCandidateListView.nCandidates;\n        var newName;\n        var source;\n        var focusedCandidate = _this3._renameCandidateListView.focusedCandidate;\n        if (focusedCandidate !== undefined) {\n          _this3._trace('using new name from renameSuggestion');\n          newName = focusedCandidate;\n          source = {\n            k: 'renameSuggestion'\n          };\n        } else {\n          _this3._trace('using new name from inputField');\n          newName = _this3._input.domNode.value;\n          source = _this3._isEditingRenameCandidate ? {\n            k: 'userEditedRenameSuggestion'\n          } : {\n            k: 'inputField'\n          };\n        }\n        if (newName === currentName || newName.trim().length === 0 /* is just whitespace */) {\n          _this3.cancelInput(true, '_currentAcceptInput (because newName === value || newName.trim().length === 0)');\n          return;\n        }\n        _this3._currentAcceptInput = undefined;\n        _this3._currentCancelInput = undefined;\n        _this3._renameCandidateListView.clearCandidates();\n        inputResult.complete({\n          newName: newName,\n          wantsPreview: supportPreview && wantsPreview,\n          stats: {\n            source: source,\n            nRenameSuggestions: nRenameSuggestions,\n            timeBeforeFirstInputFieldEdit: _this3._timeBeforeFirstInputFieldEdit\n          }\n        });\n      };\n      disposeOnDone.add(cts.token.onCancellationRequested(function () {\n        return _this3.cancelInput(true, 'cts.token.onCancellationRequested');\n      }));\n      if (!_sticky) {\n        disposeOnDone.add(this._editor.onDidBlurEditorWidget(function () {\n          var _a;\n          return _this3.cancelInput(!((_a = _this3._domNode) === null || _a === void 0 ? void 0 : _a.ownerDocument.hasFocus()), 'editor.onDidBlurEditorWidget');\n        }));\n      }\n      this._show();\n      return inputResult.p;\n    }\n    /**\n     * This allows selecting only part of the symbol name in the input field based on the selection in the editor\n     */\n  }, {\n    key: \"_getSelection\",\n    value: function _getSelection(where, currentName) {\n      assertType(this._editor.hasModel());\n      var selection = this._editor.getSelection();\n      var start = 0;\n      var end = currentName.length;\n      if (!Range.isEmpty(selection) && !Range.spansMultipleLines(selection) && Range.containsRange(where, selection)) {\n        start = Math.max(0, selection.startColumn - where.startColumn);\n        end = Math.min(where.endColumn, selection.endColumn) - where.startColumn;\n      }\n      return {\n        start: start,\n        end: end\n      };\n    }\n  }, {\n    key: \"_show\",\n    value: function _show() {\n      var _this4 = this;\n      this._trace('invoking _show');\n      this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber, 0 /* ScrollType.Smooth */);\n      this._visible = true;\n      this._visibleContextKey.set(true);\n      this._editor.layoutContentWidget(this);\n      // TODO@ulugbekna: could this be simply run in `afterRender`?\n      setTimeout(function () {\n        _this4._input.domNode.focus();\n        _this4._input.domNode.setSelectionRange(parseInt(_this4._input.domNode.getAttribute('selectionStart')), parseInt(_this4._input.domNode.getAttribute('selectionEnd')));\n      }, 100);\n    }\n  }, {\n    key: \"_updateRenameCandidates\",\n    value: function () {\n      var _updateRenameCandidates2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(candidates, currentName, token) {\n        var _this5 = this;\n        var trace, namesListResults, newNames, distinctNames, validDistinctNames;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              trace = function trace() {\n                for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n                  args[_key] = arguments[_key];\n                }\n                return _this5._trace.apply(_this5, ['_updateRenameCandidates'].concat(args));\n              };\n              trace('start');\n              _context.next = 4;\n              return raceCancellation(Promise.allSettled(candidates), token);\n            case 4:\n              namesListResults = _context.sent;\n              if (!(namesListResults === undefined)) {\n                _context.next = 8;\n                break;\n              }\n              trace('returning early - received updateRenameCandidates results - undefined');\n              return _context.abrupt(\"return\");\n            case 8:\n              newNames = namesListResults.flatMap(function (namesListResult) {\n                return namesListResult.status === 'fulfilled' && isDefined(namesListResult.value) ? namesListResult.value : [];\n              });\n              trace(\"received updateRenameCandidates results - total (unfiltered) \".concat(newNames.length, \" candidates.\"));\n              // deduplicate and filter out the current value\n              distinctNames = arrays.distinct(newNames, function (v) {\n                return v.newSymbolName;\n              });\n              trace(\"distinct candidates - \".concat(distinctNames.length, \" candidates.\"));\n              validDistinctNames = distinctNames.filter(function (_ref) {\n                var newSymbolName = _ref.newSymbolName;\n                return newSymbolName.trim().length > 0 && newSymbolName !== _this5._input.domNode.value && newSymbolName !== currentName;\n              });\n              trace(\"valid distinct candidates - \".concat(newNames.length, \" candidates.\"));\n              if (!(validDistinctNames.length < 1)) {\n                _context.next = 17;\n                break;\n              }\n              trace('returning early - no valid distinct candidates');\n              return _context.abrupt(\"return\");\n            case 17:\n              // show the candidates\n              trace('setting candidates');\n              this._renameCandidateListView.setCandidates(validDistinctNames);\n              // ask editor to re-layout given that the widget is now of a different size after rendering rename candidates\n              trace('asking editor to re-layout');\n              this._editor.layoutContentWidget(this);\n            case 21:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function _updateRenameCandidates(_x, _x2, _x3) {\n        return _updateRenameCandidates2.apply(this, arguments);\n      }\n      return _updateRenameCandidates;\n    }()\n  }, {\n    key: \"_hide\",\n    value: function _hide() {\n      this._trace('invoked _hide');\n      this._visible = false;\n      this._visibleContextKey.reset();\n      this._editor.layoutContentWidget(this);\n    }\n  }, {\n    key: \"_getTopForPosition\",\n    value: function _getTopForPosition() {\n      var visibleRanges = this._editor.getVisibleRanges();\n      var firstLineInViewport;\n      if (visibleRanges.length > 0) {\n        firstLineInViewport = visibleRanges[0].startLineNumber;\n      } else {\n        this._logService.warn('RenameWidget#_getTopForPosition: this should not happen - visibleRanges is empty');\n        firstLineInViewport = Math.max(1, this._position.lineNumber - 5); // @ulugbekna: fallback to current line minus 5\n      }\n      return this._editor.getTopForLineNumber(this._position.lineNumber) - this._editor.getTopForLineNumber(firstLineInViewport);\n    }\n  }, {\n    key: \"_trace\",\n    value: function _trace() {\n      var _this$_logService;\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n      (_this$_logService = this._logService).trace.apply(_this$_logService, ['RenameWidget'].concat(args));\n    }\n  }]);\n}();\nRenameWidget = __decorate([__param(2, IThemeService), __param(3, IKeybindingService), __param(4, IContextKeyService), __param(5, ILogService)], RenameWidget);\nexport { RenameWidget };\nvar RenameCandidateListView = /*#__PURE__*/function () {\n  // FIXME@ulugbekna: rewrite using event emitters\n  function RenameCandidateListView(parent, opts) {\n    var _this6 = this;\n    _classCallCheck(this, RenameCandidateListView);\n    this._disposables = new DisposableStore();\n    this._availableHeight = 0;\n    this._minimumWidth = 0;\n    this._lineHeight = opts.fontInfo.lineHeight;\n    this._typicalHalfwidthCharacterWidth = opts.fontInfo.typicalHalfwidthCharacterWidth;\n    this._listContainer = document.createElement('div');\n    parent.appendChild(this._listContainer);\n    this._listWidget = RenameCandidateListView._createListWidget(this._listContainer, this._candidateViewHeight, opts.fontInfo);\n    this._listWidget.onDidChangeFocus(function (e) {\n      if (e.elements.length === 1) {\n        opts.onFocusChange(e.elements[0].newSymbolName);\n      }\n    }, this._disposables);\n    this._listWidget.onDidChangeSelection(function (e) {\n      if (e.elements.length === 1) {\n        opts.onSelectionChange();\n      }\n    }, this._disposables);\n    this._disposables.add(this._listWidget.onDidBlur(function (e) {\n      _this6._listWidget.setFocus([]);\n    }));\n    this._listWidget.style(getListStyles({\n      listInactiveFocusForeground: quickInputListFocusForeground,\n      listInactiveFocusBackground: quickInputListFocusBackground\n    }));\n  }\n  return _createClass(RenameCandidateListView, [{\n    key: \"dispose\",\n    value: function dispose() {\n      this._listWidget.dispose();\n      this._disposables.dispose();\n    }\n    // height - max height allowed by parent element\n  }, {\n    key: \"layout\",\n    value: function layout(_ref2) {\n      var height = _ref2.height,\n        width = _ref2.width;\n      this._availableHeight = height;\n      this._minimumWidth = width;\n    }\n  }, {\n    key: \"setCandidates\",\n    value: function setCandidates(candidates) {\n      // insert candidates into list widget\n      this._listWidget.splice(0, 0, candidates);\n      // adjust list widget layout\n      var height = this._pickListHeight(candidates.length);\n      var width = this._pickListWidth(candidates);\n      this._listWidget.layout(height, width);\n      // adjust list container layout\n      this._listContainer.style.height = \"\".concat(height, \"px\");\n      this._listContainer.style.width = \"\".concat(width, \"px\");\n      aria.status(localize('renameSuggestionsReceivedAria', \"Received {0} rename suggestions\", candidates.length));\n    }\n  }, {\n    key: \"clearCandidates\",\n    value: function clearCandidates() {\n      this._listContainer.style.height = '0px';\n      this._listContainer.style.width = '0px';\n      this._listWidget.splice(0, this._listWidget.length, []);\n    }\n  }, {\n    key: \"nCandidates\",\n    get: function get() {\n      return this._listWidget.length;\n    }\n  }, {\n    key: \"focusedCandidate\",\n    get: function get() {\n      if (this._listWidget.length === 0) {\n        return;\n      }\n      var selectedElement = this._listWidget.getSelectedElements()[0];\n      if (selectedElement !== undefined) {\n        return selectedElement.newSymbolName;\n      }\n      var focusedElement = this._listWidget.getFocusedElements()[0];\n      if (focusedElement !== undefined) {\n        return focusedElement.newSymbolName;\n      }\n      return;\n    }\n  }, {\n    key: \"focusNext\",\n    value: function focusNext() {\n      if (this._listWidget.length === 0) {\n        return false;\n      }\n      var focusedIxs = this._listWidget.getFocus();\n      if (focusedIxs.length === 0) {\n        this._listWidget.focusFirst();\n        return true;\n      } else {\n        if (focusedIxs[0] === this._listWidget.length - 1) {\n          this._listWidget.setFocus([]);\n          return false;\n        } else {\n          this._listWidget.focusNext();\n          return true;\n        }\n      }\n    }\n    /**\n     * @returns true if focus is moved to previous element\n     */\n  }, {\n    key: \"focusPrevious\",\n    value: function focusPrevious() {\n      if (this._listWidget.length === 0) {\n        return false;\n      }\n      var focusedIxs = this._listWidget.getFocus();\n      if (focusedIxs.length === 0) {\n        this._listWidget.focusLast();\n        return true;\n      } else {\n        if (focusedIxs[0] === 0) {\n          this._listWidget.setFocus([]);\n          return false;\n        } else {\n          this._listWidget.focusPrevious();\n          return true;\n        }\n      }\n    }\n  }, {\n    key: \"clearFocus\",\n    value: function clearFocus() {\n      this._listWidget.setFocus([]);\n    }\n  }, {\n    key: \"_candidateViewHeight\",\n    get: function get() {\n      var _RenameCandidateView$2 = RenameCandidateView.getLayoutInfo({\n          lineHeight: this._lineHeight\n        }),\n        totalHeight = _RenameCandidateView$2.totalHeight;\n      return totalHeight;\n    }\n  }, {\n    key: \"_pickListHeight\",\n    value: function _pickListHeight(nCandidates) {\n      var heightToFitAllCandidates = this._candidateViewHeight * nCandidates;\n      var MAX_N_CANDIDATES = 7; // @ulugbekna: max # of candidates we want to show at once\n      var height = Math.min(heightToFitAllCandidates, this._availableHeight, this._candidateViewHeight * MAX_N_CANDIDATES);\n      return height;\n    }\n  }, {\n    key: \"_pickListWidth\",\n    value: function _pickListWidth(candidates) {\n      var longestCandidateWidth = Math.ceil(Math.max.apply(Math, _toConsumableArray(candidates.map(function (c) {\n        return c.newSymbolName.length;\n      }))) * this._typicalHalfwidthCharacterWidth);\n      var width = Math.max(this._minimumWidth, 4 /* padding */ + 16 /* sparkle icon */ + 5 /* margin-left */ + longestCandidateWidth + 10 /* (possibly visible) scrollbar width */ // TODO@ulugbekna: approximate calc - clean this up\n      );\n      return width;\n    }\n  }], [{\n    key: \"_createListWidget\",\n    value: function _createListWidget(container, candidateViewHeight, fontInfo) {\n      var virtualDelegate = new ( /*#__PURE__*/function () {\n        function _class() {\n          _classCallCheck(this, _class);\n        }\n        return _createClass(_class, [{\n          key: \"getTemplateId\",\n          value: function getTemplateId(element) {\n            return 'candidate';\n          }\n        }, {\n          key: \"getHeight\",\n          value: function getHeight(element) {\n            return candidateViewHeight;\n          }\n        }]);\n      }())();\n      var renderer = new ( /*#__PURE__*/function () {\n        function _class2() {\n          _classCallCheck(this, _class2);\n          this.templateId = 'candidate';\n        }\n        return _createClass(_class2, [{\n          key: \"renderTemplate\",\n          value: function renderTemplate(container) {\n            return new RenameCandidateView(container, fontInfo);\n          }\n        }, {\n          key: \"renderElement\",\n          value: function renderElement(candidate, index, templateData) {\n            templateData.populate(candidate);\n          }\n        }, {\n          key: \"disposeTemplate\",\n          value: function disposeTemplate(templateData) {\n            templateData.dispose();\n          }\n        }]);\n      }())();\n      return new List('NewSymbolNameCandidates', container, virtualDelegate, [renderer], {\n        keyboardSupport: false,\n        // @ulugbekna: because we handle keyboard events through proper commands & keybinding service, see `rename.ts`\n        mouseSupport: true,\n        multipleSelectionSupport: false\n      });\n    }\n  }]);\n}();\n/**\n * @remarks lazily creates the DOM node\n */\nvar RenameInput = /*#__PURE__*/function () {\n  function RenameInput() {\n    _classCallCheck(this, RenameInput);\n    this._onDidChange = new Emitter();\n    this.onDidChange = this._onDidChange.event;\n    this._disposables = new DisposableStore();\n  }\n  return _createClass(RenameInput, [{\n    key: \"domNode\",\n    get: function get() {\n      var _this7 = this;\n      if (!this._domNode) {\n        this._domNode = document.createElement('input');\n        this._domNode.className = 'rename-input';\n        this._domNode.type = 'text';\n        this._domNode.setAttribute('aria-label', localize('renameAriaLabel', \"Rename input. Type new name and press Enter to commit.\"));\n        this._disposables.add(dom.addDisposableListener(this._domNode, 'input', function () {\n          return _this7._onDidChange.fire();\n        }));\n      }\n      return this._domNode;\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      this._onDidChange.dispose();\n      this._disposables.dispose();\n    }\n  }]);\n}();\nvar RenameCandidateView = /*#__PURE__*/function () {\n  function RenameCandidateView(parent, fontInfo) {\n    _classCallCheck(this, RenameCandidateView);\n    this._domNode = document.createElement('div');\n    this._domNode.style.display = \"flex\";\n    this._domNode.style.columnGap = \"5px\";\n    this._domNode.style.alignItems = \"center\";\n    this._domNode.style.height = \"\".concat(fontInfo.lineHeight, \"px\");\n    this._domNode.style.padding = \"\".concat(RenameCandidateView._PADDING, \"px\");\n    // @ulugbekna: needed to keep space when the `icon.style.display` is set to `none`\n    var iconContainer = document.createElement('div');\n    iconContainer.style.display = \"flex\";\n    iconContainer.style.alignItems = \"center\";\n    iconContainer.style.width = iconContainer.style.height = \"\".concat(fontInfo.lineHeight * 0.8, \"px\");\n    this._domNode.appendChild(iconContainer);\n    this._icon = renderIcon(Codicon.sparkle);\n    this._icon.style.display = \"none\";\n    iconContainer.appendChild(this._icon);\n    this._label = document.createElement('div');\n    applyFontInfo(this._label, fontInfo);\n    this._domNode.appendChild(this._label);\n    parent.appendChild(this._domNode);\n  }\n  return _createClass(RenameCandidateView, [{\n    key: \"populate\",\n    value: function populate(value) {\n      this._updateIcon(value);\n      this._updateLabel(value);\n    }\n  }, {\n    key: \"_updateIcon\",\n    value: function _updateIcon(value) {\n      var _a;\n      var isAIGenerated = !!((_a = value.tags) === null || _a === void 0 ? void 0 : _a.includes(NewSymbolNameTag.AIGenerated));\n      this._icon.style.display = isAIGenerated ? 'inherit' : 'none';\n    }\n  }, {\n    key: \"_updateLabel\",\n    value: function _updateLabel(value) {\n      this._label.innerText = value.newSymbolName;\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {}\n  }], [{\n    key: \"getLayoutInfo\",\n    value: function getLayoutInfo(_ref3) {\n      var lineHeight = _ref3.lineHeight;\n      var totalHeight = lineHeight + RenameCandidateView._PADDING * 2 /* top & bottom padding */;\n      return {\n        totalHeight: totalHeight\n      };\n    }\n  }]);\n}();\nRenameCandidateView._PADDING = 2;","map":{"version":3,"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","_typeof","decorate","i","defineProperty","__param","paramIndex","decorator","dom","aria","renderIcon","List","arrays","DeferredPromise","raceCancellation","CancellationTokenSource","Codicon","Emitter","DisposableStore","toDisposable","StopWatch","assertType","isDefined","applyFontInfo","Position","Range","NewSymbolNameTag","localize","IContextKeyService","RawContextKey","IKeybindingService","ILogService","getListStyles","editorWidgetBackground","inputBackground","inputBorder","inputForeground","quickInputListFocusBackground","quickInputListFocusForeground","widgetBorder","widgetShadow","IThemeService","_sticky","CONTEXT_RENAME_INPUT_VISIBLE","CONTEXT_RENAME_INPUT_FOCUSED","RenameWidget","_editor","_acceptKeybindings","_themeService","_keybindingService","contextKeyService","_logService","_this","_classCallCheck","allowEditorOverflow","_disposables","_visibleContextKey","bindTo","_isEditingRenameCandidate","_beforeFirstInputFieldEditSW","_input","RenameInput","add","addContentWidget","onDidChangeConfiguration","e","hasChanged","_updateFont","onDidColorThemeChange","_updateStyles","_createClass","value","dispose","removeContentWidget","getId","getDomNode","_this2","_domNode","document","createElement","className","appendChild","domNode","_renameCandidateListView","RenameCandidateListView","fontInfo","getOption","onFocusChange","newSymbolName","onSelectionChange","acceptInput","onDidChange","_a","_b","_c","_d","focusedCandidate","undefined","_timeBeforeFirstInputFieldEdit","elapsed","_renameCandidateProvidersCts","token","isCancellationRequested","cancel","clearFocus","_label","getColorTheme","theme","widgetShadowColor","getColor","widgetBorderColor","style","backgroundColor","String","boxShadow","concat","border","color","borderWidth","borderStyle","borderColor","toString","fontSize","_computeLabelFontSize","editorFontSize","getPosition","_visible","hasModel","bodyBox","getClientArea","ownerDocument","body","editorBox","getDomNodePagePosition","cursorBoxTop","_getTopForPosition","_nPxAvailableAbove","top","_nPxAvailableBelow","height","lineHeight","_RenameCandidateView$","RenameCandidateView","getLayoutInfo","candidateViewHeight","totalHeight","positionPreference","position","_position","preference","beforeRender","_this$_acceptKeybindi","_slicedToArray","accept","preview","innerText","comment","lookupKeybinding","getLabel","minWidth","afterRender","_trace","cancelInput","inputBoxHeight","getTotalHeight","labelHeight","totalHeightAvailable","layout","width","getTotalWidth","wantsPreview","_currentAcceptInput","call","focusEditor","caller","_currentCancelInput","focusNextRenameSuggestion","focusNext","_currentName","focusPreviousRenameSuggestion","focusPrevious","getInput","where","currentName","supportPreview","requestRenameCandidates","cts","_this3","_this$_getSelection","_getSelection","selectionStart","start","selectionEnd","end","candidates","_updateRenameCandidates","classList","toggle","startLineNumber","startColumn","setAttribute","size","Math","max","endColumn","reset","disposeOnDone","inputResult","p","_hide","clearCandidates","complete","nRenameSuggestions","nCandidates","newName","source","k","trim","stats","timeBeforeFirstInputFieldEdit","onCancellationRequested","onDidBlurEditorWidget","hasFocus","_show","selection","getSelection","isEmpty","spansMultipleLines","containsRange","min","_this4","revealLineInCenterIfOutsideViewport","lineNumber","set","layoutContentWidget","setTimeout","focus","setSelectionRange","parseInt","getAttribute","_updateRenameCandidates2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_this5","trace","namesListResults","newNames","distinctNames","validDistinctNames","wrap","_callee$","_context","prev","next","_len","args","Array","_key","apply","Promise","allSettled","sent","abrupt","flatMap","namesListResult","status","distinct","v","filter","_ref","setCandidates","stop","_x","_x2","_x3","visibleRanges","getVisibleRanges","firstLineInViewport","warn","getTopForLineNumber","_this$_logService","_len2","_key2","parent","opts","_this6","_availableHeight","_minimumWidth","_lineHeight","_typicalHalfwidthCharacterWidth","typicalHalfwidthCharacterWidth","_listContainer","_listWidget","_createListWidget","_candidateViewHeight","onDidChangeFocus","elements","onDidChangeSelection","onDidBlur","setFocus","listInactiveFocusForeground","listInactiveFocusBackground","_ref2","splice","_pickListHeight","_pickListWidth","get","selectedElement","getSelectedElements","focusedElement","getFocusedElements","focusedIxs","getFocus","focusFirst","focusLast","_RenameCandidateView$2","heightToFitAllCandidates","MAX_N_CANDIDATES","longestCandidateWidth","ceil","_toConsumableArray","map","container","virtualDelegate","_class","getTemplateId","element","getHeight","renderer","_class2","templateId","renderTemplate","renderElement","candidate","index","templateData","populate","disposeTemplate","keyboardSupport","mouseSupport","multipleSelectionSupport","_onDidChange","event","_this7","type","addDisposableListener","fire","display","columnGap","alignItems","padding","_PADDING","iconContainer","_icon","sparkle","_updateIcon","_updateLabel","isAIGenerated","tags","includes","AIGenerated","_ref3"],"sources":["/Users/yinger/Desktop/algo_evaluator_front/node_modules/monaco-editor/esm/vs/editor/contrib/rename/browser/renameWidget.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport * as aria from '../../../../base/browser/ui/aria/aria.js';\nimport { renderIcon } from '../../../../base/browser/ui/iconLabel/iconLabels.js';\nimport { List } from '../../../../base/browser/ui/list/listWidget.js';\nimport * as arrays from '../../../../base/common/arrays.js';\nimport { DeferredPromise, raceCancellation } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { assertType, isDefined } from '../../../../base/common/types.js';\nimport './renameWidget.css';\nimport { applyFontInfo } from '../../../browser/config/domFontInfo.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { NewSymbolNameTag } from '../../../common/languages.js';\nimport { localize } from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { getListStyles } from '../../../../platform/theme/browser/defaultStyles.js';\nimport { editorWidgetBackground, inputBackground, inputBorder, inputForeground, quickInputListFocusBackground, quickInputListFocusForeground, widgetBorder, widgetShadow } from '../../../../platform/theme/common/colorRegistry.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\n/** for debugging */\nconst _sticky = false;\nexport const CONTEXT_RENAME_INPUT_VISIBLE = new RawContextKey('renameInputVisible', false, localize('renameInputVisible', \"Whether the rename input widget is visible\"));\nexport const CONTEXT_RENAME_INPUT_FOCUSED = new RawContextKey('renameInputFocused', false, localize('renameInputFocused', \"Whether the rename input widget is focused\"));\nlet RenameWidget = class RenameWidget {\n    constructor(_editor, _acceptKeybindings, _themeService, _keybindingService, contextKeyService, _logService) {\n        this._editor = _editor;\n        this._acceptKeybindings = _acceptKeybindings;\n        this._themeService = _themeService;\n        this._keybindingService = _keybindingService;\n        this._logService = _logService;\n        // implement IContentWidget\n        this.allowEditorOverflow = true;\n        this._disposables = new DisposableStore();\n        this._visibleContextKey = CONTEXT_RENAME_INPUT_VISIBLE.bindTo(contextKeyService);\n        this._isEditingRenameCandidate = false;\n        this._beforeFirstInputFieldEditSW = new StopWatch();\n        this._input = new RenameInput();\n        this._disposables.add(this._input);\n        this._editor.addContentWidget(this);\n        this._disposables.add(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(50 /* EditorOption.fontInfo */)) {\n                this._updateFont();\n            }\n        }));\n        this._disposables.add(_themeService.onDidColorThemeChange(this._updateStyles, this));\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._editor.removeContentWidget(this);\n    }\n    getId() {\n        return '__renameInputWidget';\n    }\n    getDomNode() {\n        if (!this._domNode) {\n            this._domNode = document.createElement('div');\n            this._domNode.className = 'monaco-editor rename-box';\n            this._domNode.appendChild(this._input.domNode);\n            this._renameCandidateListView = this._disposables.add(new RenameCandidateListView(this._domNode, {\n                fontInfo: this._editor.getOption(50 /* EditorOption.fontInfo */),\n                onFocusChange: (newSymbolName) => {\n                    this._input.domNode.value = newSymbolName;\n                    this._isEditingRenameCandidate = false; // @ulugbekna: reset\n                },\n                onSelectionChange: () => {\n                    this._isEditingRenameCandidate = false; // @ulugbekna: because user picked a rename suggestion\n                    this.acceptInput(false); // we don't allow preview with mouse click for now\n                }\n            }));\n            this._disposables.add(this._input.onDidChange(() => {\n                var _a, _b, _c, _d;\n                if (((_a = this._renameCandidateListView) === null || _a === void 0 ? void 0 : _a.focusedCandidate) !== undefined) {\n                    this._isEditingRenameCandidate = true;\n                }\n                (_b = this._timeBeforeFirstInputFieldEdit) !== null && _b !== void 0 ? _b : (this._timeBeforeFirstInputFieldEdit = this._beforeFirstInputFieldEditSW.elapsed());\n                if (((_c = this._renameCandidateProvidersCts) === null || _c === void 0 ? void 0 : _c.token.isCancellationRequested) === false) {\n                    this._renameCandidateProvidersCts.cancel();\n                }\n                (_d = this._renameCandidateListView) === null || _d === void 0 ? void 0 : _d.clearFocus();\n            }));\n            this._label = document.createElement('div');\n            this._label.className = 'rename-label';\n            this._domNode.appendChild(this._label);\n            this._updateFont();\n            this._updateStyles(this._themeService.getColorTheme());\n        }\n        return this._domNode;\n    }\n    _updateStyles(theme) {\n        var _a, _b, _c, _d;\n        if (!this._domNode) {\n            return;\n        }\n        const widgetShadowColor = theme.getColor(widgetShadow);\n        const widgetBorderColor = theme.getColor(widgetBorder);\n        this._domNode.style.backgroundColor = String((_a = theme.getColor(editorWidgetBackground)) !== null && _a !== void 0 ? _a : '');\n        this._domNode.style.boxShadow = widgetShadowColor ? ` 0 0 8px 2px ${widgetShadowColor}` : '';\n        this._domNode.style.border = widgetBorderColor ? `1px solid ${widgetBorderColor}` : '';\n        this._domNode.style.color = String((_b = theme.getColor(inputForeground)) !== null && _b !== void 0 ? _b : '');\n        this._input.domNode.style.backgroundColor = String((_c = theme.getColor(inputBackground)) !== null && _c !== void 0 ? _c : '');\n        // this._input.style.color = String(theme.getColor(inputForeground) ?? '');\n        const border = theme.getColor(inputBorder);\n        this._input.domNode.style.borderWidth = border ? '1px' : '0px';\n        this._input.domNode.style.borderStyle = border ? 'solid' : 'none';\n        this._input.domNode.style.borderColor = (_d = border === null || border === void 0 ? void 0 : border.toString()) !== null && _d !== void 0 ? _d : 'none';\n    }\n    _updateFont() {\n        if (this._domNode === undefined) {\n            return;\n        }\n        assertType(this._label !== undefined, 'RenameWidget#_updateFont: _label must not be undefined given _domNode is defined');\n        this._editor.applyFontInfo(this._input.domNode);\n        const fontInfo = this._editor.getOption(50 /* EditorOption.fontInfo */);\n        this._label.style.fontSize = `${this._computeLabelFontSize(fontInfo.fontSize)}px`;\n    }\n    _computeLabelFontSize(editorFontSize) {\n        return editorFontSize * 0.8;\n    }\n    getPosition() {\n        if (!this._visible) {\n            return null;\n        }\n        if (!this._editor.hasModel() || // @ulugbekna: shouldn't happen\n            !this._editor.getDomNode() // @ulugbekna: can happen during tests based on suggestWidget's similar predicate check\n        ) {\n            return null;\n        }\n        const bodyBox = dom.getClientArea(this.getDomNode().ownerDocument.body);\n        const editorBox = dom.getDomNodePagePosition(this._editor.getDomNode());\n        const cursorBoxTop = this._getTopForPosition();\n        this._nPxAvailableAbove = cursorBoxTop + editorBox.top;\n        this._nPxAvailableBelow = bodyBox.height - this._nPxAvailableAbove;\n        const lineHeight = this._editor.getOption(67 /* EditorOption.lineHeight */);\n        const { totalHeight: candidateViewHeight } = RenameCandidateView.getLayoutInfo({ lineHeight });\n        const positionPreference = this._nPxAvailableBelow > candidateViewHeight * 6 /* approximate # of candidates to fit in (inclusive of rename input box & rename label) */\n            ? [2 /* ContentWidgetPositionPreference.BELOW */, 1 /* ContentWidgetPositionPreference.ABOVE */]\n            : [1 /* ContentWidgetPositionPreference.ABOVE */, 2 /* ContentWidgetPositionPreference.BELOW */];\n        return {\n            position: this._position,\n            preference: positionPreference,\n        };\n    }\n    beforeRender() {\n        var _a, _b;\n        const [accept, preview] = this._acceptKeybindings;\n        this._label.innerText = localize({ key: 'label', comment: ['placeholders are keybindings, e.g \"F2 to Rename, Shift+F2 to Preview\"'] }, \"{0} to Rename, {1} to Preview\", (_a = this._keybindingService.lookupKeybinding(accept)) === null || _a === void 0 ? void 0 : _a.getLabel(), (_b = this._keybindingService.lookupKeybinding(preview)) === null || _b === void 0 ? void 0 : _b.getLabel());\n        this._domNode.style.minWidth = `200px`; // to prevent from widening when candidates come in\n        return null;\n    }\n    afterRender(position) {\n        this._trace('invoking afterRender, position: ', position ? 'not null' : 'null');\n        if (position === null) {\n            // cancel rename when input widget isn't rendered anymore\n            this.cancelInput(true, 'afterRender (because position is null)');\n            return;\n        }\n        if (!this._editor.hasModel() || // shouldn't happen\n            !this._editor.getDomNode() // can happen during tests based on suggestWidget's similar predicate check\n        ) {\n            return;\n        }\n        assertType(this._renameCandidateListView);\n        assertType(this._nPxAvailableAbove !== undefined);\n        assertType(this._nPxAvailableBelow !== undefined);\n        const inputBoxHeight = dom.getTotalHeight(this._input.domNode);\n        const labelHeight = dom.getTotalHeight(this._label);\n        let totalHeightAvailable;\n        if (position === 2 /* ContentWidgetPositionPreference.BELOW */) {\n            totalHeightAvailable = this._nPxAvailableBelow;\n        }\n        else {\n            totalHeightAvailable = this._nPxAvailableAbove;\n        }\n        this._renameCandidateListView.layout({\n            height: totalHeightAvailable - labelHeight - inputBoxHeight,\n            width: dom.getTotalWidth(this._input.domNode),\n        });\n    }\n    acceptInput(wantsPreview) {\n        var _a;\n        this._trace(`invoking acceptInput`);\n        (_a = this._currentAcceptInput) === null || _a === void 0 ? void 0 : _a.call(this, wantsPreview);\n    }\n    cancelInput(focusEditor, caller) {\n        var _a;\n        this._trace(`invoking cancelInput, caller: ${caller}, _currentCancelInput: ${this._currentAcceptInput ? 'not undefined' : 'undefined'}`);\n        (_a = this._currentCancelInput) === null || _a === void 0 ? void 0 : _a.call(this, focusEditor);\n    }\n    focusNextRenameSuggestion() {\n        var _a;\n        if (!((_a = this._renameCandidateListView) === null || _a === void 0 ? void 0 : _a.focusNext())) {\n            this._input.domNode.value = this._currentName;\n        }\n    }\n    focusPreviousRenameSuggestion() {\n        var _a;\n        if (!((_a = this._renameCandidateListView) === null || _a === void 0 ? void 0 : _a.focusPrevious())) {\n            this._input.domNode.value = this._currentName;\n        }\n    }\n    getInput(where, currentName, supportPreview, requestRenameCandidates, cts) {\n        const { start: selectionStart, end: selectionEnd } = this._getSelection(where, currentName);\n        this._renameCandidateProvidersCts = new CancellationTokenSource();\n        const candidates = requestRenameCandidates(this._renameCandidateProvidersCts.token);\n        this._updateRenameCandidates(candidates, currentName, cts.token);\n        this._isEditingRenameCandidate = false;\n        this._domNode.classList.toggle('preview', supportPreview);\n        this._position = new Position(where.startLineNumber, where.startColumn);\n        this._currentName = currentName;\n        this._input.domNode.value = currentName;\n        this._input.domNode.setAttribute('selectionStart', selectionStart.toString());\n        this._input.domNode.setAttribute('selectionEnd', selectionEnd.toString());\n        this._input.domNode.size = Math.max((where.endColumn - where.startColumn) * 1.1, 20); // determines width\n        this._beforeFirstInputFieldEditSW.reset();\n        const disposeOnDone = new DisposableStore();\n        disposeOnDone.add(toDisposable(() => cts.dispose(true))); // @ulugbekna: this may result in `this.cancelInput` being called twice, but it should be safe since we set it to undefined after 1st call\n        disposeOnDone.add(toDisposable(() => {\n            if (this._renameCandidateProvidersCts !== undefined) {\n                this._renameCandidateProvidersCts.dispose(true);\n                this._renameCandidateProvidersCts = undefined;\n            }\n        }));\n        const inputResult = new DeferredPromise();\n        inputResult.p.finally(() => {\n            disposeOnDone.dispose();\n            this._hide();\n        });\n        this._currentCancelInput = (focusEditor) => {\n            var _a;\n            this._trace('invoking _currentCancelInput');\n            this._currentAcceptInput = undefined;\n            this._currentCancelInput = undefined;\n            (_a = this._renameCandidateListView) === null || _a === void 0 ? void 0 : _a.clearCandidates();\n            inputResult.complete(focusEditor);\n            return true;\n        };\n        this._currentAcceptInput = (wantsPreview) => {\n            this._trace('invoking _currentAcceptInput');\n            assertType(this._renameCandidateListView !== undefined);\n            const nRenameSuggestions = this._renameCandidateListView.nCandidates;\n            let newName;\n            let source;\n            const focusedCandidate = this._renameCandidateListView.focusedCandidate;\n            if (focusedCandidate !== undefined) {\n                this._trace('using new name from renameSuggestion');\n                newName = focusedCandidate;\n                source = { k: 'renameSuggestion' };\n            }\n            else {\n                this._trace('using new name from inputField');\n                newName = this._input.domNode.value;\n                source = this._isEditingRenameCandidate ? { k: 'userEditedRenameSuggestion' } : { k: 'inputField' };\n            }\n            if (newName === currentName || newName.trim().length === 0 /* is just whitespace */) {\n                this.cancelInput(true, '_currentAcceptInput (because newName === value || newName.trim().length === 0)');\n                return;\n            }\n            this._currentAcceptInput = undefined;\n            this._currentCancelInput = undefined;\n            this._renameCandidateListView.clearCandidates();\n            inputResult.complete({\n                newName,\n                wantsPreview: supportPreview && wantsPreview,\n                stats: {\n                    source,\n                    nRenameSuggestions,\n                    timeBeforeFirstInputFieldEdit: this._timeBeforeFirstInputFieldEdit,\n                }\n            });\n        };\n        disposeOnDone.add(cts.token.onCancellationRequested(() => this.cancelInput(true, 'cts.token.onCancellationRequested')));\n        if (!_sticky) {\n            disposeOnDone.add(this._editor.onDidBlurEditorWidget(() => { var _a; return this.cancelInput(!((_a = this._domNode) === null || _a === void 0 ? void 0 : _a.ownerDocument.hasFocus()), 'editor.onDidBlurEditorWidget'); }));\n        }\n        this._show();\n        return inputResult.p;\n    }\n    /**\n     * This allows selecting only part of the symbol name in the input field based on the selection in the editor\n     */\n    _getSelection(where, currentName) {\n        assertType(this._editor.hasModel());\n        const selection = this._editor.getSelection();\n        let start = 0;\n        let end = currentName.length;\n        if (!Range.isEmpty(selection) && !Range.spansMultipleLines(selection) && Range.containsRange(where, selection)) {\n            start = Math.max(0, selection.startColumn - where.startColumn);\n            end = Math.min(where.endColumn, selection.endColumn) - where.startColumn;\n        }\n        return { start, end };\n    }\n    _show() {\n        this._trace('invoking _show');\n        this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber, 0 /* ScrollType.Smooth */);\n        this._visible = true;\n        this._visibleContextKey.set(true);\n        this._editor.layoutContentWidget(this);\n        // TODO@ulugbekna: could this be simply run in `afterRender`?\n        setTimeout(() => {\n            this._input.domNode.focus();\n            this._input.domNode.setSelectionRange(parseInt(this._input.domNode.getAttribute('selectionStart')), parseInt(this._input.domNode.getAttribute('selectionEnd')));\n        }, 100);\n    }\n    async _updateRenameCandidates(candidates, currentName, token) {\n        const trace = (...args) => this._trace('_updateRenameCandidates', ...args);\n        trace('start');\n        const namesListResults = await raceCancellation(Promise.allSettled(candidates), token);\n        if (namesListResults === undefined) {\n            trace('returning early - received updateRenameCandidates results - undefined');\n            return;\n        }\n        const newNames = namesListResults.flatMap(namesListResult => namesListResult.status === 'fulfilled' && isDefined(namesListResult.value)\n            ? namesListResult.value\n            : []);\n        trace(`received updateRenameCandidates results - total (unfiltered) ${newNames.length} candidates.`);\n        // deduplicate and filter out the current value\n        const distinctNames = arrays.distinct(newNames, v => v.newSymbolName);\n        trace(`distinct candidates - ${distinctNames.length} candidates.`);\n        const validDistinctNames = distinctNames.filter(({ newSymbolName }) => newSymbolName.trim().length > 0 && newSymbolName !== this._input.domNode.value && newSymbolName !== currentName);\n        trace(`valid distinct candidates - ${newNames.length} candidates.`);\n        if (validDistinctNames.length < 1) {\n            trace('returning early - no valid distinct candidates');\n            return;\n        }\n        // show the candidates\n        trace('setting candidates');\n        this._renameCandidateListView.setCandidates(validDistinctNames);\n        // ask editor to re-layout given that the widget is now of a different size after rendering rename candidates\n        trace('asking editor to re-layout');\n        this._editor.layoutContentWidget(this);\n    }\n    _hide() {\n        this._trace('invoked _hide');\n        this._visible = false;\n        this._visibleContextKey.reset();\n        this._editor.layoutContentWidget(this);\n    }\n    _getTopForPosition() {\n        const visibleRanges = this._editor.getVisibleRanges();\n        let firstLineInViewport;\n        if (visibleRanges.length > 0) {\n            firstLineInViewport = visibleRanges[0].startLineNumber;\n        }\n        else {\n            this._logService.warn('RenameWidget#_getTopForPosition: this should not happen - visibleRanges is empty');\n            firstLineInViewport = Math.max(1, this._position.lineNumber - 5); // @ulugbekna: fallback to current line minus 5\n        }\n        return this._editor.getTopForLineNumber(this._position.lineNumber) - this._editor.getTopForLineNumber(firstLineInViewport);\n    }\n    _trace(...args) {\n        this._logService.trace('RenameWidget', ...args);\n    }\n};\nRenameWidget = __decorate([\n    __param(2, IThemeService),\n    __param(3, IKeybindingService),\n    __param(4, IContextKeyService),\n    __param(5, ILogService)\n], RenameWidget);\nexport { RenameWidget };\nclass RenameCandidateListView {\n    // FIXME@ulugbekna: rewrite using event emitters\n    constructor(parent, opts) {\n        this._disposables = new DisposableStore();\n        this._availableHeight = 0;\n        this._minimumWidth = 0;\n        this._lineHeight = opts.fontInfo.lineHeight;\n        this._typicalHalfwidthCharacterWidth = opts.fontInfo.typicalHalfwidthCharacterWidth;\n        this._listContainer = document.createElement('div');\n        parent.appendChild(this._listContainer);\n        this._listWidget = RenameCandidateListView._createListWidget(this._listContainer, this._candidateViewHeight, opts.fontInfo);\n        this._listWidget.onDidChangeFocus(e => {\n            if (e.elements.length === 1) {\n                opts.onFocusChange(e.elements[0].newSymbolName);\n            }\n        }, this._disposables);\n        this._listWidget.onDidChangeSelection(e => {\n            if (e.elements.length === 1) {\n                opts.onSelectionChange();\n            }\n        }, this._disposables);\n        this._disposables.add(this._listWidget.onDidBlur(e => {\n            this._listWidget.setFocus([]);\n        }));\n        this._listWidget.style(getListStyles({\n            listInactiveFocusForeground: quickInputListFocusForeground,\n            listInactiveFocusBackground: quickInputListFocusBackground,\n        }));\n    }\n    dispose() {\n        this._listWidget.dispose();\n        this._disposables.dispose();\n    }\n    // height - max height allowed by parent element\n    layout({ height, width }) {\n        this._availableHeight = height;\n        this._minimumWidth = width;\n    }\n    setCandidates(candidates) {\n        // insert candidates into list widget\n        this._listWidget.splice(0, 0, candidates);\n        // adjust list widget layout\n        const height = this._pickListHeight(candidates.length);\n        const width = this._pickListWidth(candidates);\n        this._listWidget.layout(height, width);\n        // adjust list container layout\n        this._listContainer.style.height = `${height}px`;\n        this._listContainer.style.width = `${width}px`;\n        aria.status(localize('renameSuggestionsReceivedAria', \"Received {0} rename suggestions\", candidates.length));\n    }\n    clearCandidates() {\n        this._listContainer.style.height = '0px';\n        this._listContainer.style.width = '0px';\n        this._listWidget.splice(0, this._listWidget.length, []);\n    }\n    get nCandidates() {\n        return this._listWidget.length;\n    }\n    get focusedCandidate() {\n        if (this._listWidget.length === 0) {\n            return;\n        }\n        const selectedElement = this._listWidget.getSelectedElements()[0];\n        if (selectedElement !== undefined) {\n            return selectedElement.newSymbolName;\n        }\n        const focusedElement = this._listWidget.getFocusedElements()[0];\n        if (focusedElement !== undefined) {\n            return focusedElement.newSymbolName;\n        }\n        return;\n    }\n    focusNext() {\n        if (this._listWidget.length === 0) {\n            return false;\n        }\n        const focusedIxs = this._listWidget.getFocus();\n        if (focusedIxs.length === 0) {\n            this._listWidget.focusFirst();\n            return true;\n        }\n        else {\n            if (focusedIxs[0] === this._listWidget.length - 1) {\n                this._listWidget.setFocus([]);\n                return false;\n            }\n            else {\n                this._listWidget.focusNext();\n                return true;\n            }\n        }\n    }\n    /**\n     * @returns true if focus is moved to previous element\n     */\n    focusPrevious() {\n        if (this._listWidget.length === 0) {\n            return false;\n        }\n        const focusedIxs = this._listWidget.getFocus();\n        if (focusedIxs.length === 0) {\n            this._listWidget.focusLast();\n            return true;\n        }\n        else {\n            if (focusedIxs[0] === 0) {\n                this._listWidget.setFocus([]);\n                return false;\n            }\n            else {\n                this._listWidget.focusPrevious();\n                return true;\n            }\n        }\n    }\n    clearFocus() {\n        this._listWidget.setFocus([]);\n    }\n    get _candidateViewHeight() {\n        const { totalHeight } = RenameCandidateView.getLayoutInfo({ lineHeight: this._lineHeight });\n        return totalHeight;\n    }\n    _pickListHeight(nCandidates) {\n        const heightToFitAllCandidates = this._candidateViewHeight * nCandidates;\n        const MAX_N_CANDIDATES = 7; // @ulugbekna: max # of candidates we want to show at once\n        const height = Math.min(heightToFitAllCandidates, this._availableHeight, this._candidateViewHeight * MAX_N_CANDIDATES);\n        return height;\n    }\n    _pickListWidth(candidates) {\n        const longestCandidateWidth = Math.ceil(Math.max(...candidates.map(c => c.newSymbolName.length)) * this._typicalHalfwidthCharacterWidth);\n        const width = Math.max(this._minimumWidth, 4 /* padding */ + 16 /* sparkle icon */ + 5 /* margin-left */ + longestCandidateWidth + 10 /* (possibly visible) scrollbar width */ // TODO@ulugbekna: approximate calc - clean this up\n        );\n        return width;\n    }\n    static _createListWidget(container, candidateViewHeight, fontInfo) {\n        const virtualDelegate = new class {\n            getTemplateId(element) {\n                return 'candidate';\n            }\n            getHeight(element) {\n                return candidateViewHeight;\n            }\n        };\n        const renderer = new class {\n            constructor() {\n                this.templateId = 'candidate';\n            }\n            renderTemplate(container) {\n                return new RenameCandidateView(container, fontInfo);\n            }\n            renderElement(candidate, index, templateData) {\n                templateData.populate(candidate);\n            }\n            disposeTemplate(templateData) {\n                templateData.dispose();\n            }\n        };\n        return new List('NewSymbolNameCandidates', container, virtualDelegate, [renderer], {\n            keyboardSupport: false, // @ulugbekna: because we handle keyboard events through proper commands & keybinding service, see `rename.ts`\n            mouseSupport: true,\n            multipleSelectionSupport: false,\n        });\n    }\n}\n/**\n * @remarks lazily creates the DOM node\n */\nclass RenameInput {\n    constructor() {\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this._disposables = new DisposableStore();\n    }\n    get domNode() {\n        if (!this._domNode) {\n            this._domNode = document.createElement('input');\n            this._domNode.className = 'rename-input';\n            this._domNode.type = 'text';\n            this._domNode.setAttribute('aria-label', localize('renameAriaLabel', \"Rename input. Type new name and press Enter to commit.\"));\n            this._disposables.add(dom.addDisposableListener(this._domNode, 'input', () => this._onDidChange.fire()));\n        }\n        return this._domNode;\n    }\n    dispose() {\n        this._onDidChange.dispose();\n        this._disposables.dispose();\n    }\n}\nclass RenameCandidateView {\n    constructor(parent, fontInfo) {\n        this._domNode = document.createElement('div');\n        this._domNode.style.display = `flex`;\n        this._domNode.style.columnGap = `5px`;\n        this._domNode.style.alignItems = `center`;\n        this._domNode.style.height = `${fontInfo.lineHeight}px`;\n        this._domNode.style.padding = `${RenameCandidateView._PADDING}px`;\n        // @ulugbekna: needed to keep space when the `icon.style.display` is set to `none`\n        const iconContainer = document.createElement('div');\n        iconContainer.style.display = `flex`;\n        iconContainer.style.alignItems = `center`;\n        iconContainer.style.width = iconContainer.style.height = `${fontInfo.lineHeight * 0.8}px`;\n        this._domNode.appendChild(iconContainer);\n        this._icon = renderIcon(Codicon.sparkle);\n        this._icon.style.display = `none`;\n        iconContainer.appendChild(this._icon);\n        this._label = document.createElement('div');\n        applyFontInfo(this._label, fontInfo);\n        this._domNode.appendChild(this._label);\n        parent.appendChild(this._domNode);\n    }\n    populate(value) {\n        this._updateIcon(value);\n        this._updateLabel(value);\n    }\n    _updateIcon(value) {\n        var _a;\n        const isAIGenerated = !!((_a = value.tags) === null || _a === void 0 ? void 0 : _a.includes(NewSymbolNameTag.AIGenerated));\n        this._icon.style.display = isAIGenerated ? 'inherit' : 'none';\n    }\n    _updateLabel(value) {\n        this._label.innerText = value.newSymbolName;\n    }\n    static getLayoutInfo({ lineHeight }) {\n        const totalHeight = lineHeight + RenameCandidateView._PADDING * 2 /* top & bottom padding */;\n        return { totalHeight };\n    }\n    dispose() {\n    }\n}\nRenameCandidateView._PADDING = 2;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}