{"ast":null,"code":"import _createForOfIteratorHelper from \"/Users/yinger/Desktop/algo_evaluator_front/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _regeneratorRuntime from \"/Users/yinger/Desktop/algo_evaluator_front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/yinger/Desktop/algo_evaluator_front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"/Users/yinger/Desktop/algo_evaluator_front/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/yinger/Desktop/algo_evaluator_front/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _callSuper from \"/Users/yinger/Desktop/algo_evaluator_front/node_modules/@babel/runtime/helpers/esm/callSuper.js\";\nimport _inherits from \"/Users/yinger/Desktop/algo_evaluator_front/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _typeof from \"/Users/yinger/Desktop/algo_evaluator_front/node_modules/@babel/runtime/helpers/esm/typeof.js\";\nimport \"core-js/modules/es.error.to-string.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.unshift.js\";\nimport \"core-js/modules/es.date.to-json.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/es.object.define-property.js\";\nimport \"core-js/modules/es.object.get-own-property-descriptor.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.reflect.to-string-tag.js\";\nimport \"core-js/modules/es.regexp.to-string.js\";\nimport \"core-js/modules/es.string.starts-with.js\";\nimport \"core-js/modules/es.string.trim-start.js\";\nimport \"core-js/modules/web.timers.js\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if ((typeof Reflect === \"undefined\" ? \"undefined\" : _typeof(Reflect)) === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { matchesSubString } from '../../../../base/common/filters.js';\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { derived, disposableObservableValue, transaction } from '../../../../base/common/observable.js';\nimport { Position } from '../../../common/core/position.js';\nimport { InlineCompletionTriggerKind } from '../../../common/languages.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { provideInlineCompletions } from './provideInlineCompletions.js';\nimport { SingleTextEdit } from '../../../common/core/textEdit.js';\nimport { singleTextRemoveCommonPrefix } from './singleTextEdit.js';\nvar InlineCompletionsSource = /*#__PURE__*/function (_Disposable) {\n  function InlineCompletionsSource(textModel, versionId, _debounceValue, languageFeaturesService, languageConfigurationService) {\n    var _this;\n    _classCallCheck(this, InlineCompletionsSource);\n    _this = _callSuper(this, InlineCompletionsSource);\n    _this.textModel = textModel;\n    _this.versionId = versionId;\n    _this._debounceValue = _debounceValue;\n    _this.languageFeaturesService = languageFeaturesService;\n    _this.languageConfigurationService = languageConfigurationService;\n    _this._updateOperation = _this._register(new MutableDisposable());\n    _this.inlineCompletions = disposableObservableValue('inlineCompletions', undefined);\n    _this.suggestWidgetInlineCompletions = disposableObservableValue('suggestWidgetInlineCompletions', undefined);\n    _this._register(_this.textModel.onDidChangeContent(function () {\n      _this._updateOperation.clear();\n    }));\n    return _this;\n  }\n  _inherits(InlineCompletionsSource, _Disposable);\n  return _createClass(InlineCompletionsSource, [{\n    key: \"fetch\",\n    value: function fetch(position, context, activeInlineCompletion) {\n      var _this2 = this;\n      var _a, _b;\n      var request = new UpdateRequest(position, context, this.textModel.getVersionId());\n      var target = context.selectedSuggestionInfo ? this.suggestWidgetInlineCompletions : this.inlineCompletions;\n      if ((_a = this._updateOperation.value) === null || _a === void 0 ? void 0 : _a.request.satisfies(request)) {\n        return this._updateOperation.value.promise;\n      } else if ((_b = target.get()) === null || _b === void 0 ? void 0 : _b.request.satisfies(request)) {\n        return Promise.resolve(true);\n      }\n      var updateOngoing = !!this._updateOperation.value;\n      this._updateOperation.clear();\n      var source = new CancellationTokenSource();\n      var promise = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var shouldDebounce, startTime, updatedCompletions, endTime, completions, asInlineCompletion;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              shouldDebounce = updateOngoing || context.triggerKind === InlineCompletionTriggerKind.Automatic;\n              if (!shouldDebounce) {\n                _context.next = 4;\n                break;\n              }\n              _context.next = 4;\n              return wait(_this2._debounceValue.get(_this2.textModel), source.token);\n            case 4:\n              if (!(source.token.isCancellationRequested || _this2.textModel.getVersionId() !== request.versionId)) {\n                _context.next = 6;\n                break;\n              }\n              return _context.abrupt(\"return\", false);\n            case 6:\n              startTime = new Date();\n              _context.next = 9;\n              return provideInlineCompletions(_this2.languageFeaturesService.inlineCompletionsProvider, position, _this2.textModel, context, source.token, _this2.languageConfigurationService);\n            case 9:\n              updatedCompletions = _context.sent;\n              if (!(source.token.isCancellationRequested || _this2.textModel.getVersionId() !== request.versionId)) {\n                _context.next = 12;\n                break;\n              }\n              return _context.abrupt(\"return\", false);\n            case 12:\n              endTime = new Date();\n              _this2._debounceValue.update(_this2.textModel, endTime.getTime() - startTime.getTime());\n              completions = new UpToDateInlineCompletions(updatedCompletions, request, _this2.textModel, _this2.versionId);\n              if (activeInlineCompletion) {\n                asInlineCompletion = activeInlineCompletion.toInlineCompletion(undefined);\n                if (activeInlineCompletion.canBeReused(_this2.textModel, position) && !updatedCompletions.has(asInlineCompletion)) {\n                  completions.prepend(activeInlineCompletion.inlineCompletion, asInlineCompletion.range, true);\n                }\n              }\n              _this2._updateOperation.clear();\n              transaction(function (tx) {\n                /** @description Update completions with provider result */\n                target.set(completions, tx);\n              });\n              return _context.abrupt(\"return\", true);\n            case 19:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }))();\n      var updateOperation = new UpdateOperation(request, source, promise);\n      this._updateOperation.value = updateOperation;\n      return promise;\n    }\n  }, {\n    key: \"clear\",\n    value: function clear(tx) {\n      this._updateOperation.clear();\n      this.inlineCompletions.set(undefined, tx);\n      this.suggestWidgetInlineCompletions.set(undefined, tx);\n    }\n  }, {\n    key: \"clearSuggestWidgetInlineCompletions\",\n    value: function clearSuggestWidgetInlineCompletions(tx) {\n      var _a;\n      if ((_a = this._updateOperation.value) === null || _a === void 0 ? void 0 : _a.request.context.selectedSuggestionInfo) {\n        this._updateOperation.clear();\n      }\n      this.suggestWidgetInlineCompletions.set(undefined, tx);\n    }\n  }, {\n    key: \"cancelUpdate\",\n    value: function cancelUpdate() {\n      this._updateOperation.clear();\n    }\n  }]);\n}(Disposable);\nInlineCompletionsSource = __decorate([__param(3, ILanguageFeaturesService), __param(4, ILanguageConfigurationService)], InlineCompletionsSource);\nexport { InlineCompletionsSource };\nfunction wait(ms, cancellationToken) {\n  return new Promise(function (resolve) {\n    var d = undefined;\n    var handle = setTimeout(function () {\n      if (d) {\n        d.dispose();\n      }\n      resolve();\n    }, ms);\n    if (cancellationToken) {\n      d = cancellationToken.onCancellationRequested(function () {\n        clearTimeout(handle);\n        if (d) {\n          d.dispose();\n        }\n        resolve();\n      });\n    }\n  });\n}\nvar UpdateRequest = /*#__PURE__*/function () {\n  function UpdateRequest(position, context, versionId) {\n    _classCallCheck(this, UpdateRequest);\n    this.position = position;\n    this.context = context;\n    this.versionId = versionId;\n  }\n  return _createClass(UpdateRequest, [{\n    key: \"satisfies\",\n    value: function satisfies(other) {\n      return this.position.equals(other.position) && equals(this.context.selectedSuggestionInfo, other.context.selectedSuggestionInfo, function (v1, v2) {\n        return v1.equals(v2);\n      }) && (other.context.triggerKind === InlineCompletionTriggerKind.Automatic || this.context.triggerKind === InlineCompletionTriggerKind.Explicit) && this.versionId === other.versionId;\n    }\n  }]);\n}();\nfunction equals(v1, v2, equals) {\n  if (!v1 || !v2) {\n    return v1 === v2;\n  }\n  return equals(v1, v2);\n}\nvar UpdateOperation = /*#__PURE__*/function () {\n  function UpdateOperation(request, cancellationTokenSource, promise) {\n    _classCallCheck(this, UpdateOperation);\n    this.request = request;\n    this.cancellationTokenSource = cancellationTokenSource;\n    this.promise = promise;\n  }\n  return _createClass(UpdateOperation, [{\n    key: \"dispose\",\n    value: function dispose() {\n      this.cancellationTokenSource.cancel();\n    }\n  }]);\n}();\nexport var UpToDateInlineCompletions = /*#__PURE__*/function () {\n  function UpToDateInlineCompletions(inlineCompletionProviderResult, request, textModel, versionId) {\n    var _this3 = this;\n    _classCallCheck(this, UpToDateInlineCompletions);\n    this.inlineCompletionProviderResult = inlineCompletionProviderResult;\n    this.request = request;\n    this.textModel = textModel;\n    this.versionId = versionId;\n    this._refCount = 1;\n    this._prependedInlineCompletionItems = [];\n    this._rangeVersionIdValue = 0;\n    this._rangeVersionId = derived(this, function (reader) {\n      _this3.versionId.read(reader);\n      var changed = false;\n      var _iterator = _createForOfIteratorHelper(_this3._inlineCompletions),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var i = _step.value;\n          changed = changed || i._updateRange(_this3.textModel);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n      if (changed) {\n        _this3._rangeVersionIdValue++;\n      }\n      return _this3._rangeVersionIdValue;\n    });\n    var ids = textModel.deltaDecorations([], inlineCompletionProviderResult.completions.map(function (i) {\n      return {\n        range: i.range,\n        options: {\n          description: 'inline-completion-tracking-range'\n        }\n      };\n    }));\n    this._inlineCompletions = inlineCompletionProviderResult.completions.map(function (i, index) {\n      return new InlineCompletionWithUpdatedRange(i, ids[index], _this3._rangeVersionId);\n    });\n  }\n  return _createClass(UpToDateInlineCompletions, [{\n    key: \"inlineCompletions\",\n    get: function get() {\n      return this._inlineCompletions;\n    }\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      this._refCount++;\n      return this;\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      var _this4 = this;\n      this._refCount--;\n      if (this._refCount === 0) {\n        setTimeout(function () {\n          // To fix https://github.com/microsoft/vscode/issues/188348\n          if (!_this4.textModel.isDisposed()) {\n            // This is just cleanup. It's ok if it happens with a delay.\n            _this4.textModel.deltaDecorations(_this4._inlineCompletions.map(function (i) {\n              return i.decorationId;\n            }), []);\n          }\n        }, 0);\n        this.inlineCompletionProviderResult.dispose();\n        var _iterator2 = _createForOfIteratorHelper(this._prependedInlineCompletionItems),\n          _step2;\n        try {\n          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n            var i = _step2.value;\n            i.source.removeRef();\n          }\n        } catch (err) {\n          _iterator2.e(err);\n        } finally {\n          _iterator2.f();\n        }\n      }\n    }\n  }, {\n    key: \"prepend\",\n    value: function prepend(inlineCompletion, range, addRefToSource) {\n      if (addRefToSource) {\n        inlineCompletion.source.addRef();\n      }\n      var id = this.textModel.deltaDecorations([], [{\n        range: range,\n        options: {\n          description: 'inline-completion-tracking-range'\n        }\n      }])[0];\n      this._inlineCompletions.unshift(new InlineCompletionWithUpdatedRange(inlineCompletion, id, this._rangeVersionId, range));\n      this._prependedInlineCompletionItems.push(inlineCompletion);\n    }\n  }]);\n}();\nexport var InlineCompletionWithUpdatedRange = /*#__PURE__*/function () {\n  function InlineCompletionWithUpdatedRange(inlineCompletion, decorationId, rangeVersion, initialRange) {\n    _classCallCheck(this, InlineCompletionWithUpdatedRange);\n    this.inlineCompletion = inlineCompletion;\n    this.decorationId = decorationId;\n    this.rangeVersion = rangeVersion;\n    this.semanticId = JSON.stringify([this.inlineCompletion.filterText, this.inlineCompletion.insertText, this.inlineCompletion.range.getStartPosition().toString()]);\n    this._isValid = true;\n    this._updatedRange = initialRange !== null && initialRange !== void 0 ? initialRange : inlineCompletion.range;\n  }\n  return _createClass(InlineCompletionWithUpdatedRange, [{\n    key: \"forwardStable\",\n    get: function get() {\n      var _a;\n      return (_a = this.inlineCompletion.source.inlineCompletions.enableForwardStability) !== null && _a !== void 0 ? _a : false;\n    }\n  }, {\n    key: \"toInlineCompletion\",\n    value: function toInlineCompletion(reader) {\n      return this.inlineCompletion.withRange(this._getUpdatedRange(reader));\n    }\n  }, {\n    key: \"toSingleTextEdit\",\n    value: function toSingleTextEdit(reader) {\n      return new SingleTextEdit(this._getUpdatedRange(reader), this.inlineCompletion.insertText);\n    }\n  }, {\n    key: \"isVisible\",\n    value: function isVisible(model, cursorPosition, reader) {\n      var minimizedReplacement = singleTextRemoveCommonPrefix(this._toFilterTextReplacement(reader), model);\n      if (!this._isValid || !this.inlineCompletion.range.getStartPosition().equals(this._getUpdatedRange(reader).getStartPosition()) || cursorPosition.lineNumber !== minimizedReplacement.range.startLineNumber) {\n        return false;\n      }\n      // We might consider comparing by .toLowerText, but this requires GhostTextReplacement\n      var originalValue = model.getValueInRange(minimizedReplacement.range, 1 /* EndOfLinePreference.LF */);\n      var filterText = minimizedReplacement.text;\n      var cursorPosIndex = Math.max(0, cursorPosition.column - minimizedReplacement.range.startColumn);\n      var filterTextBefore = filterText.substring(0, cursorPosIndex);\n      var filterTextAfter = filterText.substring(cursorPosIndex);\n      var originalValueBefore = originalValue.substring(0, cursorPosIndex);\n      var originalValueAfter = originalValue.substring(cursorPosIndex);\n      var originalValueIndent = model.getLineIndentColumn(minimizedReplacement.range.startLineNumber);\n      if (minimizedReplacement.range.startColumn <= originalValueIndent) {\n        // Remove indentation\n        originalValueBefore = originalValueBefore.trimStart();\n        if (originalValueBefore.length === 0) {\n          originalValueAfter = originalValueAfter.trimStart();\n        }\n        filterTextBefore = filterTextBefore.trimStart();\n        if (filterTextBefore.length === 0) {\n          filterTextAfter = filterTextAfter.trimStart();\n        }\n      }\n      return filterTextBefore.startsWith(originalValueBefore) && !!matchesSubString(originalValueAfter, filterTextAfter);\n    }\n  }, {\n    key: \"canBeReused\",\n    value: function canBeReused(model, position) {\n      var result = this._isValid && this._getUpdatedRange(undefined).containsPosition(position) && this.isVisible(model, position, undefined) && !this._isSmallerThanOriginal(undefined);\n      return result;\n    }\n  }, {\n    key: \"_toFilterTextReplacement\",\n    value: function _toFilterTextReplacement(reader) {\n      return new SingleTextEdit(this._getUpdatedRange(reader), this.inlineCompletion.filterText);\n    }\n  }, {\n    key: \"_isSmallerThanOriginal\",\n    value: function _isSmallerThanOriginal(reader) {\n      return length(this._getUpdatedRange(reader)).isBefore(length(this.inlineCompletion.range));\n    }\n  }, {\n    key: \"_getUpdatedRange\",\n    value: function _getUpdatedRange(reader) {\n      this.rangeVersion.read(reader); // This makes sure all the ranges are updated.\n      return this._updatedRange;\n    }\n  }, {\n    key: \"_updateRange\",\n    value: function _updateRange(textModel) {\n      var range = textModel.getDecorationRange(this.decorationId);\n      if (!range) {\n        // A setValue call might flush all decorations.\n        this._isValid = false;\n        return true;\n      }\n      if (!this._updatedRange.equalsRange(range)) {\n        this._updatedRange = range;\n        return true;\n      }\n      return false;\n    }\n  }]);\n}();\nfunction length(range) {\n  if (range.startLineNumber === range.endLineNumber) {\n    return new Position(1, 1 + range.endColumn - range.startColumn);\n  } else {\n    return new Position(1 + range.endLineNumber - range.startLineNumber, range.endColumn);\n  }\n}","map":{"version":3,"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","_typeof","decorate","i","defineProperty","__param","paramIndex","decorator","CancellationTokenSource","matchesSubString","Disposable","MutableDisposable","derived","disposableObservableValue","transaction","Position","InlineCompletionTriggerKind","ILanguageConfigurationService","ILanguageFeaturesService","provideInlineCompletions","SingleTextEdit","singleTextRemoveCommonPrefix","InlineCompletionsSource","_Disposable","textModel","versionId","_debounceValue","languageFeaturesService","languageConfigurationService","_this","_classCallCheck","_callSuper","_updateOperation","_register","inlineCompletions","undefined","suggestWidgetInlineCompletions","onDidChangeContent","clear","_inherits","_createClass","value","fetch","position","context","activeInlineCompletion","_this2","_a","_b","request","UpdateRequest","getVersionId","selectedSuggestionInfo","satisfies","promise","get","Promise","resolve","updateOngoing","source","_asyncToGenerator","_regeneratorRuntime","mark","_callee","shouldDebounce","startTime","updatedCompletions","endTime","completions","asInlineCompletion","wrap","_callee$","_context","prev","next","triggerKind","Automatic","wait","token","isCancellationRequested","abrupt","Date","inlineCompletionsProvider","sent","update","getTime","UpToDateInlineCompletions","toInlineCompletion","canBeReused","has","prepend","inlineCompletion","range","tx","set","stop","updateOperation","UpdateOperation","clearSuggestWidgetInlineCompletions","cancelUpdate","ms","cancellationToken","handle","setTimeout","dispose","onCancellationRequested","clearTimeout","other","equals","v1","v2","Explicit","cancellationTokenSource","cancel","inlineCompletionProviderResult","_this3","_refCount","_prependedInlineCompletionItems","_rangeVersionIdValue","_rangeVersionId","reader","read","changed","_iterator","_createForOfIteratorHelper","_inlineCompletions","_step","s","n","done","_updateRange","err","e","f","ids","deltaDecorations","map","options","description","index","InlineCompletionWithUpdatedRange","clone","_this4","isDisposed","decorationId","_iterator2","_step2","removeRef","addRefToSource","addRef","id","unshift","push","rangeVersion","initialRange","semanticId","JSON","stringify","filterText","insertText","getStartPosition","toString","_isValid","_updatedRange","enableForwardStability","withRange","_getUpdatedRange","toSingleTextEdit","isVisible","model","cursorPosition","minimizedReplacement","_toFilterTextReplacement","lineNumber","startLineNumber","originalValue","getValueInRange","text","cursorPosIndex","Math","max","column","startColumn","filterTextBefore","substring","filterTextAfter","originalValueBefore","originalValueAfter","originalValueIndent","getLineIndentColumn","trimStart","startsWith","result","containsPosition","_isSmallerThanOriginal","isBefore","getDecorationRange","equalsRange","endLineNumber","endColumn"],"sources":["/Users/yinger/Desktop/algo_evaluator_front/node_modules/monaco-editor/esm/vs/editor/contrib/inlineCompletions/browser/inlineCompletionsSource.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { matchesSubString } from '../../../../base/common/filters.js';\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { derived, disposableObservableValue, transaction } from '../../../../base/common/observable.js';\nimport { Position } from '../../../common/core/position.js';\nimport { InlineCompletionTriggerKind } from '../../../common/languages.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { provideInlineCompletions } from './provideInlineCompletions.js';\nimport { SingleTextEdit } from '../../../common/core/textEdit.js';\nimport { singleTextRemoveCommonPrefix } from './singleTextEdit.js';\nlet InlineCompletionsSource = class InlineCompletionsSource extends Disposable {\n    constructor(textModel, versionId, _debounceValue, languageFeaturesService, languageConfigurationService) {\n        super();\n        this.textModel = textModel;\n        this.versionId = versionId;\n        this._debounceValue = _debounceValue;\n        this.languageFeaturesService = languageFeaturesService;\n        this.languageConfigurationService = languageConfigurationService;\n        this._updateOperation = this._register(new MutableDisposable());\n        this.inlineCompletions = disposableObservableValue('inlineCompletions', undefined);\n        this.suggestWidgetInlineCompletions = disposableObservableValue('suggestWidgetInlineCompletions', undefined);\n        this._register(this.textModel.onDidChangeContent(() => {\n            this._updateOperation.clear();\n        }));\n    }\n    fetch(position, context, activeInlineCompletion) {\n        var _a, _b;\n        const request = new UpdateRequest(position, context, this.textModel.getVersionId());\n        const target = context.selectedSuggestionInfo ? this.suggestWidgetInlineCompletions : this.inlineCompletions;\n        if ((_a = this._updateOperation.value) === null || _a === void 0 ? void 0 : _a.request.satisfies(request)) {\n            return this._updateOperation.value.promise;\n        }\n        else if ((_b = target.get()) === null || _b === void 0 ? void 0 : _b.request.satisfies(request)) {\n            return Promise.resolve(true);\n        }\n        const updateOngoing = !!this._updateOperation.value;\n        this._updateOperation.clear();\n        const source = new CancellationTokenSource();\n        const promise = (async () => {\n            const shouldDebounce = updateOngoing || context.triggerKind === InlineCompletionTriggerKind.Automatic;\n            if (shouldDebounce) {\n                // This debounces the operation\n                await wait(this._debounceValue.get(this.textModel), source.token);\n            }\n            if (source.token.isCancellationRequested || this.textModel.getVersionId() !== request.versionId) {\n                return false;\n            }\n            const startTime = new Date();\n            const updatedCompletions = await provideInlineCompletions(this.languageFeaturesService.inlineCompletionsProvider, position, this.textModel, context, source.token, this.languageConfigurationService);\n            if (source.token.isCancellationRequested || this.textModel.getVersionId() !== request.versionId) {\n                return false;\n            }\n            const endTime = new Date();\n            this._debounceValue.update(this.textModel, endTime.getTime() - startTime.getTime());\n            const completions = new UpToDateInlineCompletions(updatedCompletions, request, this.textModel, this.versionId);\n            if (activeInlineCompletion) {\n                const asInlineCompletion = activeInlineCompletion.toInlineCompletion(undefined);\n                if (activeInlineCompletion.canBeReused(this.textModel, position) && !updatedCompletions.has(asInlineCompletion)) {\n                    completions.prepend(activeInlineCompletion.inlineCompletion, asInlineCompletion.range, true);\n                }\n            }\n            this._updateOperation.clear();\n            transaction(tx => {\n                /** @description Update completions with provider result */\n                target.set(completions, tx);\n            });\n            return true;\n        })();\n        const updateOperation = new UpdateOperation(request, source, promise);\n        this._updateOperation.value = updateOperation;\n        return promise;\n    }\n    clear(tx) {\n        this._updateOperation.clear();\n        this.inlineCompletions.set(undefined, tx);\n        this.suggestWidgetInlineCompletions.set(undefined, tx);\n    }\n    clearSuggestWidgetInlineCompletions(tx) {\n        var _a;\n        if ((_a = this._updateOperation.value) === null || _a === void 0 ? void 0 : _a.request.context.selectedSuggestionInfo) {\n            this._updateOperation.clear();\n        }\n        this.suggestWidgetInlineCompletions.set(undefined, tx);\n    }\n    cancelUpdate() {\n        this._updateOperation.clear();\n    }\n};\nInlineCompletionsSource = __decorate([\n    __param(3, ILanguageFeaturesService),\n    __param(4, ILanguageConfigurationService)\n], InlineCompletionsSource);\nexport { InlineCompletionsSource };\nfunction wait(ms, cancellationToken) {\n    return new Promise(resolve => {\n        let d = undefined;\n        const handle = setTimeout(() => {\n            if (d) {\n                d.dispose();\n            }\n            resolve();\n        }, ms);\n        if (cancellationToken) {\n            d = cancellationToken.onCancellationRequested(() => {\n                clearTimeout(handle);\n                if (d) {\n                    d.dispose();\n                }\n                resolve();\n            });\n        }\n    });\n}\nclass UpdateRequest {\n    constructor(position, context, versionId) {\n        this.position = position;\n        this.context = context;\n        this.versionId = versionId;\n    }\n    satisfies(other) {\n        return this.position.equals(other.position)\n            && equals(this.context.selectedSuggestionInfo, other.context.selectedSuggestionInfo, (v1, v2) => v1.equals(v2))\n            && (other.context.triggerKind === InlineCompletionTriggerKind.Automatic\n                || this.context.triggerKind === InlineCompletionTriggerKind.Explicit)\n            && this.versionId === other.versionId;\n    }\n}\nfunction equals(v1, v2, equals) {\n    if (!v1 || !v2) {\n        return v1 === v2;\n    }\n    return equals(v1, v2);\n}\nclass UpdateOperation {\n    constructor(request, cancellationTokenSource, promise) {\n        this.request = request;\n        this.cancellationTokenSource = cancellationTokenSource;\n        this.promise = promise;\n    }\n    dispose() {\n        this.cancellationTokenSource.cancel();\n    }\n}\nexport class UpToDateInlineCompletions {\n    get inlineCompletions() { return this._inlineCompletions; }\n    constructor(inlineCompletionProviderResult, request, textModel, versionId) {\n        this.inlineCompletionProviderResult = inlineCompletionProviderResult;\n        this.request = request;\n        this.textModel = textModel;\n        this.versionId = versionId;\n        this._refCount = 1;\n        this._prependedInlineCompletionItems = [];\n        this._rangeVersionIdValue = 0;\n        this._rangeVersionId = derived(this, reader => {\n            this.versionId.read(reader);\n            let changed = false;\n            for (const i of this._inlineCompletions) {\n                changed = changed || i._updateRange(this.textModel);\n            }\n            if (changed) {\n                this._rangeVersionIdValue++;\n            }\n            return this._rangeVersionIdValue;\n        });\n        const ids = textModel.deltaDecorations([], inlineCompletionProviderResult.completions.map(i => ({\n            range: i.range,\n            options: {\n                description: 'inline-completion-tracking-range'\n            },\n        })));\n        this._inlineCompletions = inlineCompletionProviderResult.completions.map((i, index) => new InlineCompletionWithUpdatedRange(i, ids[index], this._rangeVersionId));\n    }\n    clone() {\n        this._refCount++;\n        return this;\n    }\n    dispose() {\n        this._refCount--;\n        if (this._refCount === 0) {\n            setTimeout(() => {\n                // To fix https://github.com/microsoft/vscode/issues/188348\n                if (!this.textModel.isDisposed()) {\n                    // This is just cleanup. It's ok if it happens with a delay.\n                    this.textModel.deltaDecorations(this._inlineCompletions.map(i => i.decorationId), []);\n                }\n            }, 0);\n            this.inlineCompletionProviderResult.dispose();\n            for (const i of this._prependedInlineCompletionItems) {\n                i.source.removeRef();\n            }\n        }\n    }\n    prepend(inlineCompletion, range, addRefToSource) {\n        if (addRefToSource) {\n            inlineCompletion.source.addRef();\n        }\n        const id = this.textModel.deltaDecorations([], [{\n                range,\n                options: {\n                    description: 'inline-completion-tracking-range'\n                },\n            }])[0];\n        this._inlineCompletions.unshift(new InlineCompletionWithUpdatedRange(inlineCompletion, id, this._rangeVersionId, range));\n        this._prependedInlineCompletionItems.push(inlineCompletion);\n    }\n}\nexport class InlineCompletionWithUpdatedRange {\n    get forwardStable() {\n        var _a;\n        return (_a = this.inlineCompletion.source.inlineCompletions.enableForwardStability) !== null && _a !== void 0 ? _a : false;\n    }\n    constructor(inlineCompletion, decorationId, rangeVersion, initialRange) {\n        this.inlineCompletion = inlineCompletion;\n        this.decorationId = decorationId;\n        this.rangeVersion = rangeVersion;\n        this.semanticId = JSON.stringify([\n            this.inlineCompletion.filterText,\n            this.inlineCompletion.insertText,\n            this.inlineCompletion.range.getStartPosition().toString()\n        ]);\n        this._isValid = true;\n        this._updatedRange = initialRange !== null && initialRange !== void 0 ? initialRange : inlineCompletion.range;\n    }\n    toInlineCompletion(reader) {\n        return this.inlineCompletion.withRange(this._getUpdatedRange(reader));\n    }\n    toSingleTextEdit(reader) {\n        return new SingleTextEdit(this._getUpdatedRange(reader), this.inlineCompletion.insertText);\n    }\n    isVisible(model, cursorPosition, reader) {\n        const minimizedReplacement = singleTextRemoveCommonPrefix(this._toFilterTextReplacement(reader), model);\n        if (!this._isValid\n            || !this.inlineCompletion.range.getStartPosition().equals(this._getUpdatedRange(reader).getStartPosition())\n            || cursorPosition.lineNumber !== minimizedReplacement.range.startLineNumber) {\n            return false;\n        }\n        // We might consider comparing by .toLowerText, but this requires GhostTextReplacement\n        const originalValue = model.getValueInRange(minimizedReplacement.range, 1 /* EndOfLinePreference.LF */);\n        const filterText = minimizedReplacement.text;\n        const cursorPosIndex = Math.max(0, cursorPosition.column - minimizedReplacement.range.startColumn);\n        let filterTextBefore = filterText.substring(0, cursorPosIndex);\n        let filterTextAfter = filterText.substring(cursorPosIndex);\n        let originalValueBefore = originalValue.substring(0, cursorPosIndex);\n        let originalValueAfter = originalValue.substring(cursorPosIndex);\n        const originalValueIndent = model.getLineIndentColumn(minimizedReplacement.range.startLineNumber);\n        if (minimizedReplacement.range.startColumn <= originalValueIndent) {\n            // Remove indentation\n            originalValueBefore = originalValueBefore.trimStart();\n            if (originalValueBefore.length === 0) {\n                originalValueAfter = originalValueAfter.trimStart();\n            }\n            filterTextBefore = filterTextBefore.trimStart();\n            if (filterTextBefore.length === 0) {\n                filterTextAfter = filterTextAfter.trimStart();\n            }\n        }\n        return filterTextBefore.startsWith(originalValueBefore)\n            && !!matchesSubString(originalValueAfter, filterTextAfter);\n    }\n    canBeReused(model, position) {\n        const result = this._isValid\n            && this._getUpdatedRange(undefined).containsPosition(position)\n            && this.isVisible(model, position, undefined)\n            && !this._isSmallerThanOriginal(undefined);\n        return result;\n    }\n    _toFilterTextReplacement(reader) {\n        return new SingleTextEdit(this._getUpdatedRange(reader), this.inlineCompletion.filterText);\n    }\n    _isSmallerThanOriginal(reader) {\n        return length(this._getUpdatedRange(reader)).isBefore(length(this.inlineCompletion.range));\n    }\n    _getUpdatedRange(reader) {\n        this.rangeVersion.read(reader); // This makes sure all the ranges are updated.\n        return this._updatedRange;\n    }\n    _updateRange(textModel) {\n        const range = textModel.getDecorationRange(this.decorationId);\n        if (!range) {\n            // A setValue call might flush all decorations.\n            this._isValid = false;\n            return true;\n        }\n        if (!this._updatedRange.equalsRange(range)) {\n            this._updatedRange = range;\n            return true;\n        }\n        return false;\n    }\n}\nfunction length(range) {\n    if (range.startLineNumber === range.endLineNumber) {\n        return new Position(1, 1 + range.endColumn - range.startColumn);\n    }\n    else {\n        return new Position(1 + range.endLineNumber - range.startLineNumber, range.endColumn);\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}