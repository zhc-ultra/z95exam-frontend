{"ast":null,"code":"import _regeneratorRuntime from \"/Users/yinger/Desktop/z95_exam_frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/yinger/Desktop/z95_exam_frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport { ref, reactive, onMounted } from \"vue\";\nimport { useRoute } from \"vue-router\";\nimport { message } from \"@arco-design/web-vue\";\nimport SingleChoice from \"./SingleChoice.vue\";\nimport MultipleChoice from \"./MultipleChoice.vue\";\nimport TrueFalse from \"./TrueFalse.vue\";\nimport Subjective from \"./Subjective.vue\";\nimport { TeacherControllerService } from \"../../../generated\";\nexport default {\n  name: \"DoExam\",\n  components: {\n    SingleChoice: SingleChoice,\n    MultipleChoice: MultipleChoice,\n    TrueFalse: TrueFalse,\n    Subjective: Subjective\n  },\n  setup: function setup() {\n    var route = useRoute();\n    var exam = ref(null);\n    var answers = reactive({});\n    var queryExamByIdUsingPost = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var id, response;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              id = route.params.id;\n              _context.next = 4;\n              return TeacherControllerService.queryExamByIdUsingPost(id);\n            case 4:\n              response = _context.sent;\n              if (response.code === 0) {\n                exam.value = response.data;\n                exam.value.questions.forEach(function (question) {\n                  answers[question.id] = question.type === 1 ? [] : \"\"; // 初始化答案，单选和判断题为空字符串，多选题为空数组\n                });\n              }\n              _context.next = 11;\n              break;\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](0);\n              console.error(\"Failed to fetch exam data:\", _context.t0);\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[0, 8]]);\n      }));\n      return function queryExamByIdUsingPost() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    var handleSubmit = function handleSubmit() {\n      // 处理提交逻辑，这里可以将答案发送到后端\n      console.log(\"学生答案:\", answers);\n      message.success(\"提交成功\");\n    };\n    onMounted(function () {\n      queryExamByIdUsingPost();\n    });\n    var formatDate = function formatDate(dateStr) {\n      var date = new Date(dateStr);\n      return date.toLocaleDateString();\n    };\n    return {\n      exam: exam,\n      answers: answers,\n      handleSubmit: handleSubmit,\n      formatDate: formatDate,\n      getQuestionComponent: getQuestionComponent\n    };\n  }\n};","map":{"version":3,"names":["ref","reactive","onMounted","useRoute","message","SingleChoice","MultipleChoice","TrueFalse","Subjective","TeacherControllerService","name","components","setup","route","exam","answers","queryExamByIdUsingPost","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","id","response","wrap","_callee$","_context","prev","next","params","sent","code","value","data","questions","forEach","question","type","t0","console","error","stop","apply","arguments","handleSubmit","log","success","formatDate","dateStr","date","Date","toLocaleDateString","getQuestionComponent"],"sources":["/Users/yinger/Desktop/z95_exam_frontend/src/views/student/DoExam.vue"],"sourcesContent":["<template>\n  <div v-if=\"exam\">\n    <a-card>\n      <h1>{{ exam.title }}</h1>\n      <p>考试日期: {{ formatDate(exam.examDate) }}</p>\n      <p>考试时长: {{ exam.examTime }} 分钟</p>\n    </a-card>\n    <a-form :model=\"answers\" layout=\"vertical\" @submit=\"handleSubmit\">\n      <div v-for=\"(question, index) in exam.questions\" :key=\"question.id\">\n        <a-form-item :label=\"`题目 ${index + 1}: ${question.title}`\">\n          \n        </a-form-item>\n      </div>\n      <a-form-item>\n        <a-button type=\"primary\" html-type=\"submit\">提交</a-button>\n      </a-form-item>\n    </a-form>\n  </div>\n  <div v-else>\n    <a-spin>加载中...</a-spin>\n  </div>\n</template>\n\n<script>\nimport { ref, reactive, onMounted } from \"vue\";\nimport { useRoute } from \"vue-router\";\nimport { message } from \"@arco-design/web-vue\";\nimport SingleChoice from \"./SingleChoice.vue\";\nimport MultipleChoice from \"./MultipleChoice.vue\";\nimport TrueFalse from \"./TrueFalse.vue\";\nimport Subjective from \"./Subjective.vue\";\nimport { TeacherControllerService } from \"../../../generated\";\n\nexport default {\n  name: \"DoExam\",\n  components: {\n    SingleChoice,\n    MultipleChoice,\n    TrueFalse,\n    Subjective,\n  },\n  setup() {\n    const route = useRoute();\n    const exam = ref(null);\n    const answers = reactive({});\n\n    const queryExamByIdUsingPost = async () => {\n      try {\n        const id = route.params.id;\n        const response = await TeacherControllerService.queryExamByIdUsingPost(\n          id\n        );\n        if (response.code === 0) {\n          exam.value = response.data;\n          exam.value.questions.forEach((question) => {\n            answers[question.id] = question.type === 1 ? [] : \"\"; // 初始化答案，单选和判断题为空字符串，多选题为空数组\n          });\n        }\n      } catch (error) {\n        console.error(\"Failed to fetch exam data:\", error);\n      }\n    };\n\n    const handleSubmit = () => {\n      // 处理提交逻辑，这里可以将答案发送到后端\n      console.log(\"学生答案:\", answers);\n      message.success(\"提交成功\");\n    };\n\n    onMounted(() => {\n      queryExamByIdUsingPost();\n    });\n\n    const formatDate = (dateStr) => {\n      const date = new Date(dateStr);\n      return date.toLocaleDateString();\n    };\n\n    return {\n      exam,\n      answers,\n      handleSubmit,\n      formatDate,\n      getQuestionComponent,\n    };\n  },\n};\n</script>\n\n<style scoped>\n/* 你的样式 */\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}