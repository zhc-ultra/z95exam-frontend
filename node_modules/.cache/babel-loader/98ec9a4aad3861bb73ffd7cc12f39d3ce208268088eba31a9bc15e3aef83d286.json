{"ast":null,"code":"import _toConsumableArray from \"/Users/yinger/Desktop/algo_evaluator_front/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _regeneratorRuntime from \"/Users/yinger/Desktop/algo_evaluator_front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/yinger/Desktop/algo_evaluator_front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _callSuper from \"/Users/yinger/Desktop/algo_evaluator_front/node_modules/@babel/runtime/helpers/esm/callSuper.js\";\nimport _inherits from \"/Users/yinger/Desktop/algo_evaluator_front/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createClass from \"/Users/yinger/Desktop/algo_evaluator_front/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _classCallCheck from \"/Users/yinger/Desktop/algo_evaluator_front/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.function.bind.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.parse-float.js\";\nimport \"core-js/modules/es.regexp.constructor.js\";\nimport \"core-js/modules/es.regexp.dot-all.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.regexp.sticky.js\";\nimport \"core-js/modules/es.regexp.to-string.js\";\nimport \"core-js/modules/es.string.match.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport \"core-js/modules/es.string.replace-all.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/web.timers.js\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../../base/browser/dom.js';\nimport { alert as alertFn } from '../../../../base/browser/ui/aria/aria.js';\nimport { Toggle } from '../../../../base/browser/ui/toggle/toggle.js';\nimport { Sash } from '../../../../base/browser/ui/sash/sash.js';\nimport { Widget } from '../../../../base/browser/ui/widget.js';\nimport { Delayer } from '../../../../base/common/async.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { toDisposable } from '../../../../base/common/lifecycle.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport './findWidget.css';\nimport { Range } from '../../../common/core/range.js';\nimport { CONTEXT_FIND_INPUT_FOCUSED, CONTEXT_REPLACE_INPUT_FOCUSED, FIND_IDS, MATCHES_LIMIT } from './findModel.js';\nimport * as nls from '../../../../nls.js';\nimport { ContextScopedFindInput, ContextScopedReplaceInput } from '../../../../platform/history/browser/contextScopedHistoryWidget.js';\nimport { showHistoryKeybindingHint } from '../../../../platform/history/browser/historyWidgetKeybindingHint.js';\nimport { asCssVariable, contrastBorder, editorFindMatchHighlightBorder, editorFindRangeHighlightBorder, inputActiveOptionBackground, inputActiveOptionBorder, inputActiveOptionForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerIcon, widgetClose } from '../../../../platform/theme/common/iconRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { isHighContrast } from '../../../../platform/theme/common/theme.js';\nimport { assertIsDefined } from '../../../../base/common/types.js';\nimport { defaultInputBoxStyles, defaultToggleStyles } from '../../../../platform/theme/browser/defaultStyles.js';\nimport { setupCustomHover } from '../../../../base/browser/ui/hover/updatableHoverWidget.js';\nimport { createInstantHoverDelegate, getDefaultHoverDelegate } from '../../../../base/browser/ui/hover/hoverDelegateFactory.js';\nvar findSelectionIcon = registerIcon('find-selection', Codicon.selection, nls.localize('findSelectionIcon', 'Icon for \\'Find in Selection\\' in the editor find widget.'));\nvar findCollapsedIcon = registerIcon('find-collapsed', Codicon.chevronRight, nls.localize('findCollapsedIcon', 'Icon to indicate that the editor find widget is collapsed.'));\nvar findExpandedIcon = registerIcon('find-expanded', Codicon.chevronDown, nls.localize('findExpandedIcon', 'Icon to indicate that the editor find widget is expanded.'));\nexport var findReplaceIcon = registerIcon('find-replace', Codicon.replace, nls.localize('findReplaceIcon', 'Icon for \\'Replace\\' in the editor find widget.'));\nexport var findReplaceAllIcon = registerIcon('find-replace-all', Codicon.replaceAll, nls.localize('findReplaceAllIcon', 'Icon for \\'Replace All\\' in the editor find widget.'));\nexport var findPreviousMatchIcon = registerIcon('find-previous-match', Codicon.arrowUp, nls.localize('findPreviousMatchIcon', 'Icon for \\'Find Previous\\' in the editor find widget.'));\nexport var findNextMatchIcon = registerIcon('find-next-match', Codicon.arrowDown, nls.localize('findNextMatchIcon', 'Icon for \\'Find Next\\' in the editor find widget.'));\nvar NLS_FIND_DIALOG_LABEL = nls.localize('label.findDialog', \"Find / Replace\");\nvar NLS_FIND_INPUT_LABEL = nls.localize('label.find', \"Find\");\nvar NLS_FIND_INPUT_PLACEHOLDER = nls.localize('placeholder.find', \"Find\");\nvar NLS_PREVIOUS_MATCH_BTN_LABEL = nls.localize('label.previousMatchButton', \"Previous Match\");\nvar NLS_NEXT_MATCH_BTN_LABEL = nls.localize('label.nextMatchButton', \"Next Match\");\nvar NLS_TOGGLE_SELECTION_FIND_TITLE = nls.localize('label.toggleSelectionFind', \"Find in Selection\");\nvar NLS_CLOSE_BTN_LABEL = nls.localize('label.closeButton', \"Close\");\nvar NLS_REPLACE_INPUT_LABEL = nls.localize('label.replace', \"Replace\");\nvar NLS_REPLACE_INPUT_PLACEHOLDER = nls.localize('placeholder.replace', \"Replace\");\nvar NLS_REPLACE_BTN_LABEL = nls.localize('label.replaceButton', \"Replace\");\nvar NLS_REPLACE_ALL_BTN_LABEL = nls.localize('label.replaceAllButton', \"Replace All\");\nvar NLS_TOGGLE_REPLACE_MODE_BTN_LABEL = nls.localize('label.toggleReplaceButton', \"Toggle Replace\");\nvar NLS_MATCHES_COUNT_LIMIT_TITLE = nls.localize('title.matchesCountLimit', \"Only the first {0} results are highlighted, but all find operations work on the entire text.\", MATCHES_LIMIT);\nexport var NLS_MATCHES_LOCATION = nls.localize('label.matchesLocation', \"{0} of {1}\");\nexport var NLS_NO_RESULTS = nls.localize('label.noResults', \"No results\");\nvar FIND_WIDGET_INITIAL_WIDTH = 419;\nvar PART_WIDTH = 275;\nvar FIND_INPUT_AREA_WIDTH = PART_WIDTH - 54;\nvar MAX_MATCHES_COUNT_WIDTH = 69;\n// let FIND_ALL_CONTROLS_WIDTH = 17/** Find Input margin-left */ + (MAX_MATCHES_COUNT_WIDTH + 3 + 1) /** Match Results */ + 23 /** Button */ * 4 + 2/** sash */;\nvar FIND_INPUT_AREA_HEIGHT = 33; // The height of Find Widget when Replace Input is not visible.\nvar ctrlEnterReplaceAllWarningPromptedKey = 'ctrlEnterReplaceAll.windows.donotask';\nvar ctrlKeyMod = platform.isMacintosh ? 256 /* KeyMod.WinCtrl */ : 2048 /* KeyMod.CtrlCmd */;\nexport var FindWidgetViewZone = /*#__PURE__*/_createClass(function FindWidgetViewZone(afterLineNumber) {\n  _classCallCheck(this, FindWidgetViewZone);\n  this.afterLineNumber = afterLineNumber;\n  this.heightInPx = FIND_INPUT_AREA_HEIGHT;\n  this.suppressMouseDown = false;\n  this.domNode = document.createElement('div');\n  this.domNode.className = 'dock-find-viewzone';\n});\nfunction stopPropagationForMultiLineUpwards(event, value, textarea) {\n  var isMultiline = !!value.match(/\\n/);\n  if (textarea && isMultiline && textarea.selectionStart > 0) {\n    event.stopPropagation();\n    return;\n  }\n}\nfunction stopPropagationForMultiLineDownwards(event, value, textarea) {\n  var isMultiline = !!value.match(/\\n/);\n  if (textarea && isMultiline && textarea.selectionEnd < textarea.value.length) {\n    event.stopPropagation();\n    return;\n  }\n}\nexport var FindWidget = /*#__PURE__*/function (_Widget) {\n  function FindWidget(codeEditor, controller, state, contextViewProvider, keybindingService, contextKeyService, themeService, storageService, notificationService) {\n    var _this;\n    _classCallCheck(this, FindWidget);\n    _this = _callSuper(this, FindWidget);\n    _this._cachedHeight = null;\n    _this._revealTimeouts = [];\n    _this._codeEditor = codeEditor;\n    _this._controller = controller;\n    _this._state = state;\n    _this._contextViewProvider = contextViewProvider;\n    _this._keybindingService = keybindingService;\n    _this._contextKeyService = contextKeyService;\n    _this._storageService = storageService;\n    _this._notificationService = notificationService;\n    _this._ctrlEnterReplaceAllWarningPrompted = !!storageService.getBoolean(ctrlEnterReplaceAllWarningPromptedKey, 0 /* StorageScope.PROFILE */);\n    _this._isVisible = false;\n    _this._isReplaceVisible = false;\n    _this._ignoreChangeEvent = false;\n    _this._updateHistoryDelayer = new Delayer(500);\n    _this._register(toDisposable(function () {\n      return _this._updateHistoryDelayer.cancel();\n    }));\n    _this._register(_this._state.onFindReplaceStateChange(function (e) {\n      return _this._onStateChanged(e);\n    }));\n    _this._buildDomNode();\n    _this._updateButtons();\n    _this._tryUpdateWidgetWidth();\n    _this._findInput.inputBox.layout();\n    _this._register(_this._codeEditor.onDidChangeConfiguration(function (e) {\n      if (e.hasChanged(91 /* EditorOption.readOnly */)) {\n        if (_this._codeEditor.getOption(91 /* EditorOption.readOnly */)) {\n          // Hide replace part if editor becomes read only\n          _this._state.change({\n            isReplaceRevealed: false\n          }, false);\n        }\n        _this._updateButtons();\n      }\n      if (e.hasChanged(145 /* EditorOption.layoutInfo */)) {\n        _this._tryUpdateWidgetWidth();\n      }\n      if (e.hasChanged(2 /* EditorOption.accessibilitySupport */)) {\n        _this.updateAccessibilitySupport();\n      }\n      if (e.hasChanged(41 /* EditorOption.find */)) {\n        var supportLoop = _this._codeEditor.getOption(41 /* EditorOption.find */).loop;\n        _this._state.change({\n          loop: supportLoop\n        }, false);\n        var addExtraSpaceOnTop = _this._codeEditor.getOption(41 /* EditorOption.find */).addExtraSpaceOnTop;\n        if (addExtraSpaceOnTop && !_this._viewZone) {\n          _this._viewZone = new FindWidgetViewZone(0);\n          _this._showViewZone();\n        }\n        if (!addExtraSpaceOnTop && _this._viewZone) {\n          _this._removeViewZone();\n        }\n      }\n    }));\n    _this.updateAccessibilitySupport();\n    _this._register(_this._codeEditor.onDidChangeCursorSelection(function () {\n      if (_this._isVisible) {\n        _this._updateToggleSelectionFindButton();\n      }\n    }));\n    _this._register(_this._codeEditor.onDidFocusEditorWidget( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var globalBufferTerm;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            if (!_this._isVisible) {\n              _context.next = 5;\n              break;\n            }\n            _context.next = 3;\n            return _this._controller.getGlobalBufferTerm();\n          case 3:\n            globalBufferTerm = _context.sent;\n            if (globalBufferTerm && globalBufferTerm !== _this._state.searchString) {\n              _this._state.change({\n                searchString: globalBufferTerm\n              }, false);\n              _this._findInput.select();\n            }\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }))));\n    _this._findInputFocused = CONTEXT_FIND_INPUT_FOCUSED.bindTo(contextKeyService);\n    _this._findFocusTracker = _this._register(dom.trackFocus(_this._findInput.inputBox.inputElement));\n    _this._register(_this._findFocusTracker.onDidFocus(function () {\n      _this._findInputFocused.set(true);\n      _this._updateSearchScope();\n    }));\n    _this._register(_this._findFocusTracker.onDidBlur(function () {\n      _this._findInputFocused.set(false);\n    }));\n    _this._replaceInputFocused = CONTEXT_REPLACE_INPUT_FOCUSED.bindTo(contextKeyService);\n    _this._replaceFocusTracker = _this._register(dom.trackFocus(_this._replaceInput.inputBox.inputElement));\n    _this._register(_this._replaceFocusTracker.onDidFocus(function () {\n      _this._replaceInputFocused.set(true);\n      _this._updateSearchScope();\n    }));\n    _this._register(_this._replaceFocusTracker.onDidBlur(function () {\n      _this._replaceInputFocused.set(false);\n    }));\n    _this._codeEditor.addOverlayWidget(_this);\n    if (_this._codeEditor.getOption(41 /* EditorOption.find */).addExtraSpaceOnTop) {\n      _this._viewZone = new FindWidgetViewZone(0); // Put it before the first line then users can scroll beyond the first line.\n    }\n    _this._register(_this._codeEditor.onDidChangeModel(function () {\n      if (!_this._isVisible) {\n        return;\n      }\n      _this._viewZoneId = undefined;\n    }));\n    _this._register(_this._codeEditor.onDidScrollChange(function (e) {\n      if (e.scrollTopChanged) {\n        _this._layoutViewZone();\n        return;\n      }\n      // for other scroll changes, layout the viewzone in next tick to avoid ruining current rendering.\n      setTimeout(function () {\n        _this._layoutViewZone();\n      }, 0);\n    }));\n    return _this;\n  }\n  // ----- IOverlayWidget API\n  _inherits(FindWidget, _Widget);\n  return _createClass(FindWidget, [{\n    key: \"getId\",\n    value: function getId() {\n      return FindWidget.ID;\n    }\n  }, {\n    key: \"getDomNode\",\n    value: function getDomNode() {\n      return this._domNode;\n    }\n  }, {\n    key: \"getPosition\",\n    value: function getPosition() {\n      if (this._isVisible) {\n        return {\n          preference: 0 /* OverlayWidgetPositionPreference.TOP_RIGHT_CORNER */\n        };\n      }\n      return null;\n    }\n    // ----- React to state changes\n  }, {\n    key: \"_onStateChanged\",\n    value: function _onStateChanged(e) {\n      if (e.searchString) {\n        try {\n          this._ignoreChangeEvent = true;\n          this._findInput.setValue(this._state.searchString);\n        } finally {\n          this._ignoreChangeEvent = false;\n        }\n        this._updateButtons();\n      }\n      if (e.replaceString) {\n        this._replaceInput.inputBox.value = this._state.replaceString;\n      }\n      if (e.isRevealed) {\n        if (this._state.isRevealed) {\n          this._reveal();\n        } else {\n          this._hide(true);\n        }\n      }\n      if (e.isReplaceRevealed) {\n        if (this._state.isReplaceRevealed) {\n          if (!this._codeEditor.getOption(91 /* EditorOption.readOnly */) && !this._isReplaceVisible) {\n            this._isReplaceVisible = true;\n            this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n            this._updateButtons();\n            this._replaceInput.inputBox.layout();\n          }\n        } else {\n          if (this._isReplaceVisible) {\n            this._isReplaceVisible = false;\n            this._updateButtons();\n          }\n        }\n      }\n      if ((e.isRevealed || e.isReplaceRevealed) && (this._state.isRevealed || this._state.isReplaceRevealed)) {\n        if (this._tryUpdateHeight()) {\n          this._showViewZone();\n        }\n      }\n      if (e.isRegex) {\n        this._findInput.setRegex(this._state.isRegex);\n      }\n      if (e.wholeWord) {\n        this._findInput.setWholeWords(this._state.wholeWord);\n      }\n      if (e.matchCase) {\n        this._findInput.setCaseSensitive(this._state.matchCase);\n      }\n      if (e.preserveCase) {\n        this._replaceInput.setPreserveCase(this._state.preserveCase);\n      }\n      if (e.searchScope) {\n        if (this._state.searchScope) {\n          this._toggleSelectionFind.checked = true;\n        } else {\n          this._toggleSelectionFind.checked = false;\n        }\n        this._updateToggleSelectionFindButton();\n      }\n      if (e.searchString || e.matchesCount || e.matchesPosition) {\n        var showRedOutline = this._state.searchString.length > 0 && this._state.matchesCount === 0;\n        this._domNode.classList.toggle('no-results', showRedOutline);\n        this._updateMatchesCount();\n        this._updateButtons();\n      }\n      if (e.searchString || e.currentMatch) {\n        this._layoutViewZone();\n      }\n      if (e.updateHistory) {\n        this._delayedUpdateHistory();\n      }\n      if (e.loop) {\n        this._updateButtons();\n      }\n    }\n  }, {\n    key: \"_delayedUpdateHistory\",\n    value: function _delayedUpdateHistory() {\n      this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(undefined, onUnexpectedError);\n    }\n  }, {\n    key: \"_updateHistory\",\n    value: function _updateHistory() {\n      if (this._state.searchString) {\n        this._findInput.inputBox.addToHistory();\n      }\n      if (this._state.replaceString) {\n        this._replaceInput.inputBox.addToHistory();\n      }\n    }\n  }, {\n    key: \"_updateMatchesCount\",\n    value: function _updateMatchesCount() {\n      this._matchesCount.style.minWidth = MAX_MATCHES_COUNT_WIDTH + 'px';\n      if (this._state.matchesCount >= MATCHES_LIMIT) {\n        this._matchesCount.title = NLS_MATCHES_COUNT_LIMIT_TITLE;\n      } else {\n        this._matchesCount.title = '';\n      }\n      // remove previous content\n      if (this._matchesCount.firstChild) {\n        this._matchesCount.removeChild(this._matchesCount.firstChild);\n      }\n      var label;\n      if (this._state.matchesCount > 0) {\n        var matchesCount = String(this._state.matchesCount);\n        if (this._state.matchesCount >= MATCHES_LIMIT) {\n          matchesCount += '+';\n        }\n        var matchesPosition = String(this._state.matchesPosition);\n        if (matchesPosition === '0') {\n          matchesPosition = '?';\n        }\n        label = strings.format(NLS_MATCHES_LOCATION, matchesPosition, matchesCount);\n      } else {\n        label = NLS_NO_RESULTS;\n      }\n      this._matchesCount.appendChild(document.createTextNode(label));\n      alertFn(this._getAriaLabel(label, this._state.currentMatch, this._state.searchString));\n      MAX_MATCHES_COUNT_WIDTH = Math.max(MAX_MATCHES_COUNT_WIDTH, this._matchesCount.clientWidth);\n    }\n    // ----- actions\n  }, {\n    key: \"_getAriaLabel\",\n    value: function _getAriaLabel(label, currentMatch, searchString) {\n      if (label === NLS_NO_RESULTS) {\n        return searchString === '' ? nls.localize('ariaSearchNoResultEmpty', \"{0} found\", label) : nls.localize('ariaSearchNoResult', \"{0} found for '{1}'\", label, searchString);\n      }\n      if (currentMatch) {\n        var ariaLabel = nls.localize('ariaSearchNoResultWithLineNum', \"{0} found for '{1}', at {2}\", label, searchString, currentMatch.startLineNumber + ':' + currentMatch.startColumn);\n        var model = this._codeEditor.getModel();\n        if (model && currentMatch.startLineNumber <= model.getLineCount() && currentMatch.startLineNumber >= 1) {\n          var lineContent = model.getLineContent(currentMatch.startLineNumber);\n          return \"\".concat(lineContent, \", \").concat(ariaLabel);\n        }\n        return ariaLabel;\n      }\n      return nls.localize('ariaSearchNoResultWithLineNumNoCurrentMatch', \"{0} found for '{1}'\", label, searchString);\n    }\n    /**\n     * If 'selection find' is ON we should not disable the button (its function is to cancel 'selection find').\n     * If 'selection find' is OFF we enable the button only if there is a selection.\n     */\n  }, {\n    key: \"_updateToggleSelectionFindButton\",\n    value: function _updateToggleSelectionFindButton() {\n      var selection = this._codeEditor.getSelection();\n      var isSelection = selection ? selection.startLineNumber !== selection.endLineNumber || selection.startColumn !== selection.endColumn : false;\n      var isChecked = this._toggleSelectionFind.checked;\n      if (this._isVisible && (isChecked || isSelection)) {\n        this._toggleSelectionFind.enable();\n      } else {\n        this._toggleSelectionFind.disable();\n      }\n    }\n  }, {\n    key: \"_updateButtons\",\n    value: function _updateButtons() {\n      this._findInput.setEnabled(this._isVisible);\n      this._replaceInput.setEnabled(this._isVisible && this._isReplaceVisible);\n      this._updateToggleSelectionFindButton();\n      this._closeBtn.setEnabled(this._isVisible);\n      var findInputIsNonEmpty = this._state.searchString.length > 0;\n      var matchesCount = this._state.matchesCount ? true : false;\n      this._prevBtn.setEnabled(this._isVisible && findInputIsNonEmpty && matchesCount && this._state.canNavigateBack());\n      this._nextBtn.setEnabled(this._isVisible && findInputIsNonEmpty && matchesCount && this._state.canNavigateForward());\n      this._replaceBtn.setEnabled(this._isVisible && this._isReplaceVisible && findInputIsNonEmpty);\n      this._replaceAllBtn.setEnabled(this._isVisible && this._isReplaceVisible && findInputIsNonEmpty);\n      this._domNode.classList.toggle('replaceToggled', this._isReplaceVisible);\n      this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);\n      var canReplace = !this._codeEditor.getOption(91 /* EditorOption.readOnly */);\n      this._toggleReplaceBtn.setEnabled(this._isVisible && canReplace);\n    }\n  }, {\n    key: \"_reveal\",\n    value: function _reveal() {\n      var _this2 = this;\n      this._revealTimeouts.forEach(function (e) {\n        clearTimeout(e);\n      });\n      this._revealTimeouts = [];\n      if (!this._isVisible) {\n        this._isVisible = true;\n        var selection = this._codeEditor.getSelection();\n        switch (this._codeEditor.getOption(41 /* EditorOption.find */).autoFindInSelection) {\n          case 'always':\n            this._toggleSelectionFind.checked = true;\n            break;\n          case 'never':\n            this._toggleSelectionFind.checked = false;\n            break;\n          case 'multiline':\n            {\n              var isSelectionMultipleLine = !!selection && selection.startLineNumber !== selection.endLineNumber;\n              this._toggleSelectionFind.checked = isSelectionMultipleLine;\n              break;\n            }\n          default:\n            break;\n        }\n        this._tryUpdateWidgetWidth();\n        this._updateButtons();\n        this._revealTimeouts.push(setTimeout(function () {\n          _this2._domNode.classList.add('visible');\n          _this2._domNode.setAttribute('aria-hidden', 'false');\n        }, 0));\n        // validate query again as it's being dismissed when we hide the find widget.\n        this._revealTimeouts.push(setTimeout(function () {\n          _this2._findInput.validate();\n        }, 200));\n        this._codeEditor.layoutOverlayWidget(this);\n        var adjustEditorScrollTop = true;\n        if (this._codeEditor.getOption(41 /* EditorOption.find */).seedSearchStringFromSelection && selection) {\n          var domNode = this._codeEditor.getDomNode();\n          if (domNode) {\n            var editorCoords = dom.getDomNodePagePosition(domNode);\n            var startCoords = this._codeEditor.getScrolledVisiblePosition(selection.getStartPosition());\n            var startLeft = editorCoords.left + (startCoords ? startCoords.left : 0);\n            var startTop = startCoords ? startCoords.top : 0;\n            if (this._viewZone && startTop < this._viewZone.heightInPx) {\n              if (selection.endLineNumber > selection.startLineNumber) {\n                adjustEditorScrollTop = false;\n              }\n              var leftOfFindWidget = dom.getTopLeftOffset(this._domNode).left;\n              if (startLeft > leftOfFindWidget) {\n                adjustEditorScrollTop = false;\n              }\n              var endCoords = this._codeEditor.getScrolledVisiblePosition(selection.getEndPosition());\n              var endLeft = editorCoords.left + (endCoords ? endCoords.left : 0);\n              if (endLeft > leftOfFindWidget) {\n                adjustEditorScrollTop = false;\n              }\n            }\n          }\n        }\n        this._showViewZone(adjustEditorScrollTop);\n      }\n    }\n  }, {\n    key: \"_hide\",\n    value: function _hide(focusTheEditor) {\n      this._revealTimeouts.forEach(function (e) {\n        clearTimeout(e);\n      });\n      this._revealTimeouts = [];\n      if (this._isVisible) {\n        this._isVisible = false;\n        this._updateButtons();\n        this._domNode.classList.remove('visible');\n        this._domNode.setAttribute('aria-hidden', 'true');\n        this._findInput.clearMessage();\n        if (focusTheEditor) {\n          this._codeEditor.focus();\n        }\n        this._codeEditor.layoutOverlayWidget(this);\n        this._removeViewZone();\n      }\n    }\n  }, {\n    key: \"_layoutViewZone\",\n    value: function _layoutViewZone(targetScrollTop) {\n      var _this3 = this;\n      var addExtraSpaceOnTop = this._codeEditor.getOption(41 /* EditorOption.find */).addExtraSpaceOnTop;\n      if (!addExtraSpaceOnTop) {\n        this._removeViewZone();\n        return;\n      }\n      if (!this._isVisible) {\n        return;\n      }\n      var viewZone = this._viewZone;\n      if (this._viewZoneId !== undefined || !viewZone) {\n        return;\n      }\n      this._codeEditor.changeViewZones(function (accessor) {\n        viewZone.heightInPx = _this3._getHeight();\n        _this3._viewZoneId = accessor.addZone(viewZone);\n        // scroll top adjust to make sure the editor doesn't scroll when adding viewzone at the beginning.\n        _this3._codeEditor.setScrollTop(targetScrollTop || _this3._codeEditor.getScrollTop() + viewZone.heightInPx);\n      });\n    }\n  }, {\n    key: \"_showViewZone\",\n    value: function _showViewZone() {\n      var _this4 = this;\n      var adjustScroll = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      if (!this._isVisible) {\n        return;\n      }\n      var addExtraSpaceOnTop = this._codeEditor.getOption(41 /* EditorOption.find */).addExtraSpaceOnTop;\n      if (!addExtraSpaceOnTop) {\n        return;\n      }\n      if (this._viewZone === undefined) {\n        this._viewZone = new FindWidgetViewZone(0);\n      }\n      var viewZone = this._viewZone;\n      this._codeEditor.changeViewZones(function (accessor) {\n        if (_this4._viewZoneId !== undefined) {\n          // the view zone already exists, we need to update the height\n          var newHeight = _this4._getHeight();\n          if (newHeight === viewZone.heightInPx) {\n            return;\n          }\n          var scrollAdjustment = newHeight - viewZone.heightInPx;\n          viewZone.heightInPx = newHeight;\n          accessor.layoutZone(_this4._viewZoneId);\n          if (adjustScroll) {\n            _this4._codeEditor.setScrollTop(_this4._codeEditor.getScrollTop() + scrollAdjustment);\n          }\n          return;\n        } else {\n          var _scrollAdjustment = _this4._getHeight();\n          // if the editor has top padding, factor that into the zone height\n          _scrollAdjustment -= _this4._codeEditor.getOption(84 /* EditorOption.padding */).top;\n          if (_scrollAdjustment <= 0) {\n            return;\n          }\n          viewZone.heightInPx = _scrollAdjustment;\n          _this4._viewZoneId = accessor.addZone(viewZone);\n          if (adjustScroll) {\n            _this4._codeEditor.setScrollTop(_this4._codeEditor.getScrollTop() + _scrollAdjustment);\n          }\n        }\n      });\n    }\n  }, {\n    key: \"_removeViewZone\",\n    value: function _removeViewZone() {\n      var _this5 = this;\n      this._codeEditor.changeViewZones(function (accessor) {\n        if (_this5._viewZoneId !== undefined) {\n          accessor.removeZone(_this5._viewZoneId);\n          _this5._viewZoneId = undefined;\n          if (_this5._viewZone) {\n            _this5._codeEditor.setScrollTop(_this5._codeEditor.getScrollTop() - _this5._viewZone.heightInPx);\n            _this5._viewZone = undefined;\n          }\n        }\n      });\n    }\n  }, {\n    key: \"_tryUpdateWidgetWidth\",\n    value: function _tryUpdateWidgetWidth() {\n      if (!this._isVisible) {\n        return;\n      }\n      if (!this._domNode.isConnected) {\n        // the widget is not in the DOM\n        return;\n      }\n      var layoutInfo = this._codeEditor.getLayoutInfo();\n      var editorContentWidth = layoutInfo.contentWidth;\n      if (editorContentWidth <= 0) {\n        // for example, diff view original editor\n        this._domNode.classList.add('hiddenEditor');\n        return;\n      } else if (this._domNode.classList.contains('hiddenEditor')) {\n        this._domNode.classList.remove('hiddenEditor');\n      }\n      var editorWidth = layoutInfo.width;\n      var minimapWidth = layoutInfo.minimap.minimapWidth;\n      var collapsedFindWidget = false;\n      var reducedFindWidget = false;\n      var narrowFindWidget = false;\n      if (this._resized) {\n        var widgetWidth = dom.getTotalWidth(this._domNode);\n        if (widgetWidth > FIND_WIDGET_INITIAL_WIDTH) {\n          // as the widget is resized by users, we may need to change the max width of the widget as the editor width changes.\n          this._domNode.style.maxWidth = \"\".concat(editorWidth - 28 - minimapWidth - 15, \"px\");\n          this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n          return;\n        }\n      }\n      if (FIND_WIDGET_INITIAL_WIDTH + 28 + minimapWidth >= editorWidth) {\n        reducedFindWidget = true;\n      }\n      if (FIND_WIDGET_INITIAL_WIDTH + 28 + minimapWidth - MAX_MATCHES_COUNT_WIDTH >= editorWidth) {\n        narrowFindWidget = true;\n      }\n      if (FIND_WIDGET_INITIAL_WIDTH + 28 + minimapWidth - MAX_MATCHES_COUNT_WIDTH >= editorWidth + 50) {\n        collapsedFindWidget = true;\n      }\n      this._domNode.classList.toggle('collapsed-find-widget', collapsedFindWidget);\n      this._domNode.classList.toggle('narrow-find-widget', narrowFindWidget);\n      this._domNode.classList.toggle('reduced-find-widget', reducedFindWidget);\n      if (!narrowFindWidget && !collapsedFindWidget) {\n        // the minimal left offset of findwidget is 15px.\n        this._domNode.style.maxWidth = \"\".concat(editorWidth - 28 - minimapWidth - 15, \"px\");\n      }\n      this._findInput.layout({\n        collapsedFindWidget: collapsedFindWidget,\n        narrowFindWidget: narrowFindWidget,\n        reducedFindWidget: reducedFindWidget\n      });\n      if (this._resized) {\n        var findInputWidth = this._findInput.inputBox.element.clientWidth;\n        if (findInputWidth > 0) {\n          this._replaceInput.width = findInputWidth;\n        }\n      } else if (this._isReplaceVisible) {\n        this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n      }\n    }\n  }, {\n    key: \"_getHeight\",\n    value: function _getHeight() {\n      var totalheight = 0;\n      // find input margin top\n      totalheight += 4;\n      // find input height\n      totalheight += this._findInput.inputBox.height + 2 /** input box border */;\n      if (this._isReplaceVisible) {\n        // replace input margin\n        totalheight += 4;\n        totalheight += this._replaceInput.inputBox.height + 2 /** input box border */;\n      }\n      // margin bottom\n      totalheight += 4;\n      return totalheight;\n    }\n  }, {\n    key: \"_tryUpdateHeight\",\n    value: function _tryUpdateHeight() {\n      var totalHeight = this._getHeight();\n      if (this._cachedHeight !== null && this._cachedHeight === totalHeight) {\n        return false;\n      }\n      this._cachedHeight = totalHeight;\n      this._domNode.style.height = \"\".concat(totalHeight, \"px\");\n      return true;\n    }\n    // ----- Public\n  }, {\n    key: \"focusFindInput\",\n    value: function focusFindInput() {\n      this._findInput.select();\n      // Edge browser requires focus() in addition to select()\n      this._findInput.focus();\n    }\n  }, {\n    key: \"focusReplaceInput\",\n    value: function focusReplaceInput() {\n      this._replaceInput.select();\n      // Edge browser requires focus() in addition to select()\n      this._replaceInput.focus();\n    }\n  }, {\n    key: \"highlightFindOptions\",\n    value: function highlightFindOptions() {\n      this._findInput.highlightFindOptions();\n    }\n  }, {\n    key: \"_updateSearchScope\",\n    value: function _updateSearchScope() {\n      var _this6 = this;\n      if (!this._codeEditor.hasModel()) {\n        return;\n      }\n      if (this._toggleSelectionFind.checked) {\n        var selections = this._codeEditor.getSelections();\n        selections.map(function (selection) {\n          if (selection.endColumn === 1 && selection.endLineNumber > selection.startLineNumber) {\n            selection = selection.setEndPosition(selection.endLineNumber - 1, _this6._codeEditor.getModel().getLineMaxColumn(selection.endLineNumber - 1));\n          }\n          var currentMatch = _this6._state.currentMatch;\n          if (selection.startLineNumber !== selection.endLineNumber) {\n            if (!Range.equalsRange(selection, currentMatch)) {\n              return selection;\n            }\n          }\n          return null;\n        }).filter(function (element) {\n          return !!element;\n        });\n        if (selections.length) {\n          this._state.change({\n            searchScope: selections\n          }, true);\n        }\n      }\n    }\n  }, {\n    key: \"_onFindInputMouseDown\",\n    value: function _onFindInputMouseDown(e) {\n      // on linux, middle key does pasting.\n      if (e.middleButton) {\n        e.stopPropagation();\n      }\n    }\n  }, {\n    key: \"_onFindInputKeyDown\",\n    value: function _onFindInputKeyDown(e) {\n      if (e.equals(ctrlKeyMod | 3 /* KeyCode.Enter */)) {\n        if (this._keybindingService.dispatchEvent(e, e.target)) {\n          e.preventDefault();\n          return;\n        } else {\n          this._findInput.inputBox.insertAtCursor('\\n');\n          e.preventDefault();\n          return;\n        }\n      }\n      if (e.equals(2 /* KeyCode.Tab */)) {\n        if (this._isReplaceVisible) {\n          this._replaceInput.focus();\n        } else {\n          this._findInput.focusOnCaseSensitive();\n        }\n        e.preventDefault();\n        return;\n      }\n      if (e.equals(2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */)) {\n        this._codeEditor.focus();\n        e.preventDefault();\n        return;\n      }\n      if (e.equals(16 /* KeyCode.UpArrow */)) {\n        return stopPropagationForMultiLineUpwards(e, this._findInput.getValue(), this._findInput.domNode.querySelector('textarea'));\n      }\n      if (e.equals(18 /* KeyCode.DownArrow */)) {\n        return stopPropagationForMultiLineDownwards(e, this._findInput.getValue(), this._findInput.domNode.querySelector('textarea'));\n      }\n    }\n  }, {\n    key: \"_onReplaceInputKeyDown\",\n    value: function _onReplaceInputKeyDown(e) {\n      if (e.equals(ctrlKeyMod | 3 /* KeyCode.Enter */)) {\n        if (this._keybindingService.dispatchEvent(e, e.target)) {\n          e.preventDefault();\n          return;\n        } else {\n          if (platform.isWindows && platform.isNative && !this._ctrlEnterReplaceAllWarningPrompted) {\n            // this is the first time when users press Ctrl + Enter to replace all\n            this._notificationService.info(nls.localize('ctrlEnter.keybindingChanged', 'Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.'));\n            this._ctrlEnterReplaceAllWarningPrompted = true;\n            this._storageService.store(ctrlEnterReplaceAllWarningPromptedKey, true, 0 /* StorageScope.PROFILE */, 0 /* StorageTarget.USER */);\n          }\n          this._replaceInput.inputBox.insertAtCursor('\\n');\n          e.preventDefault();\n          return;\n        }\n      }\n      if (e.equals(2 /* KeyCode.Tab */)) {\n        this._findInput.focusOnCaseSensitive();\n        e.preventDefault();\n        return;\n      }\n      if (e.equals(1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */)) {\n        this._findInput.focus();\n        e.preventDefault();\n        return;\n      }\n      if (e.equals(2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */)) {\n        this._codeEditor.focus();\n        e.preventDefault();\n        return;\n      }\n      if (e.equals(16 /* KeyCode.UpArrow */)) {\n        return stopPropagationForMultiLineUpwards(e, this._replaceInput.inputBox.value, this._replaceInput.inputBox.element.querySelector('textarea'));\n      }\n      if (e.equals(18 /* KeyCode.DownArrow */)) {\n        return stopPropagationForMultiLineDownwards(e, this._replaceInput.inputBox.value, this._replaceInput.inputBox.element.querySelector('textarea'));\n      }\n    }\n    // ----- sash\n  }, {\n    key: \"getVerticalSashLeft\",\n    value: function getVerticalSashLeft(_sash) {\n      return 0;\n    }\n    // ----- initialization\n  }, {\n    key: \"_keybindingLabelFor\",\n    value: function _keybindingLabelFor(actionId) {\n      var kb = this._keybindingService.lookupKeybinding(actionId);\n      if (!kb) {\n        return '';\n      }\n      return \" (\".concat(kb.getLabel(), \")\");\n    }\n  }, {\n    key: \"_buildDomNode\",\n    value: function _buildDomNode() {\n      var _this7 = this;\n      var flexibleHeight = true;\n      var flexibleWidth = true;\n      // Find input\n      this._findInput = this._register(new ContextScopedFindInput(null, this._contextViewProvider, {\n        width: FIND_INPUT_AREA_WIDTH,\n        label: NLS_FIND_INPUT_LABEL,\n        placeholder: NLS_FIND_INPUT_PLACEHOLDER,\n        appendCaseSensitiveLabel: this._keybindingLabelFor(FIND_IDS.ToggleCaseSensitiveCommand),\n        appendWholeWordsLabel: this._keybindingLabelFor(FIND_IDS.ToggleWholeWordCommand),\n        appendRegexLabel: this._keybindingLabelFor(FIND_IDS.ToggleRegexCommand),\n        validation: function validation(value) {\n          if (value.length === 0 || !_this7._findInput.getRegex()) {\n            return null;\n          }\n          try {\n            // use `g` and `u` which are also used by the TextModel search\n            new RegExp(value, 'gu');\n            return null;\n          } catch (e) {\n            return {\n              content: e.message\n            };\n          }\n        },\n        flexibleHeight: flexibleHeight,\n        flexibleWidth: flexibleWidth,\n        flexibleMaxHeight: 118,\n        showCommonFindToggles: true,\n        showHistoryHint: function showHistoryHint() {\n          return showHistoryKeybindingHint(_this7._keybindingService);\n        },\n        inputBoxStyles: defaultInputBoxStyles,\n        toggleStyles: defaultToggleStyles\n      }, this._contextKeyService));\n      this._findInput.setRegex(!!this._state.isRegex);\n      this._findInput.setCaseSensitive(!!this._state.matchCase);\n      this._findInput.setWholeWords(!!this._state.wholeWord);\n      this._register(this._findInput.onKeyDown(function (e) {\n        return _this7._onFindInputKeyDown(e);\n      }));\n      this._register(this._findInput.inputBox.onDidChange(function () {\n        if (_this7._ignoreChangeEvent) {\n          return;\n        }\n        _this7._state.change({\n          searchString: _this7._findInput.getValue()\n        }, true);\n      }));\n      this._register(this._findInput.onDidOptionChange(function () {\n        _this7._state.change({\n          isRegex: _this7._findInput.getRegex(),\n          wholeWord: _this7._findInput.getWholeWords(),\n          matchCase: _this7._findInput.getCaseSensitive()\n        }, true);\n      }));\n      this._register(this._findInput.onCaseSensitiveKeyDown(function (e) {\n        if (e.equals(1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */)) {\n          if (_this7._isReplaceVisible) {\n            _this7._replaceInput.focus();\n            e.preventDefault();\n          }\n        }\n      }));\n      this._register(this._findInput.onRegexKeyDown(function (e) {\n        if (e.equals(2 /* KeyCode.Tab */)) {\n          if (_this7._isReplaceVisible) {\n            _this7._replaceInput.focusOnPreserve();\n            e.preventDefault();\n          }\n        }\n      }));\n      this._register(this._findInput.inputBox.onDidHeightChange(function (e) {\n        if (_this7._tryUpdateHeight()) {\n          _this7._showViewZone();\n        }\n      }));\n      if (platform.isLinux) {\n        this._register(this._findInput.onMouseDown(function (e) {\n          return _this7._onFindInputMouseDown(e);\n        }));\n      }\n      this._matchesCount = document.createElement('div');\n      this._matchesCount.className = 'matchesCount';\n      this._updateMatchesCount();\n      // Create a scoped hover delegate for all find related buttons\n      var hoverDelegate = this._register(createInstantHoverDelegate());\n      // Previous button\n      this._prevBtn = this._register(new SimpleButton({\n        label: NLS_PREVIOUS_MATCH_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.PreviousMatchFindAction),\n        icon: findPreviousMatchIcon,\n        hoverDelegate: hoverDelegate,\n        onTrigger: function onTrigger() {\n          assertIsDefined(_this7._codeEditor.getAction(FIND_IDS.PreviousMatchFindAction)).run().then(undefined, onUnexpectedError);\n        }\n      }));\n      // Next button\n      this._nextBtn = this._register(new SimpleButton({\n        label: NLS_NEXT_MATCH_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.NextMatchFindAction),\n        icon: findNextMatchIcon,\n        hoverDelegate: hoverDelegate,\n        onTrigger: function onTrigger() {\n          assertIsDefined(_this7._codeEditor.getAction(FIND_IDS.NextMatchFindAction)).run().then(undefined, onUnexpectedError);\n        }\n      }));\n      var findPart = document.createElement('div');\n      findPart.className = 'find-part';\n      findPart.appendChild(this._findInput.domNode);\n      var actionsContainer = document.createElement('div');\n      actionsContainer.className = 'find-actions';\n      findPart.appendChild(actionsContainer);\n      actionsContainer.appendChild(this._matchesCount);\n      actionsContainer.appendChild(this._prevBtn.domNode);\n      actionsContainer.appendChild(this._nextBtn.domNode);\n      // Toggle selection button\n      this._toggleSelectionFind = this._register(new Toggle({\n        icon: findSelectionIcon,\n        title: NLS_TOGGLE_SELECTION_FIND_TITLE + this._keybindingLabelFor(FIND_IDS.ToggleSearchScopeCommand),\n        isChecked: false,\n        hoverDelegate: hoverDelegate,\n        inputActiveOptionBackground: asCssVariable(inputActiveOptionBackground),\n        inputActiveOptionBorder: asCssVariable(inputActiveOptionBorder),\n        inputActiveOptionForeground: asCssVariable(inputActiveOptionForeground)\n      }));\n      this._register(this._toggleSelectionFind.onChange(function () {\n        if (_this7._toggleSelectionFind.checked) {\n          if (_this7._codeEditor.hasModel()) {\n            var selections = _this7._codeEditor.getSelections();\n            selections = selections.map(function (selection) {\n              if (selection.endColumn === 1 && selection.endLineNumber > selection.startLineNumber) {\n                selection = selection.setEndPosition(selection.endLineNumber - 1, _this7._codeEditor.getModel().getLineMaxColumn(selection.endLineNumber - 1));\n              }\n              if (!selection.isEmpty()) {\n                return selection;\n              }\n              return null;\n            }).filter(function (element) {\n              return !!element;\n            });\n            if (selections.length) {\n              _this7._state.change({\n                searchScope: selections\n              }, true);\n            }\n          }\n        } else {\n          _this7._state.change({\n            searchScope: null\n          }, true);\n        }\n      }));\n      actionsContainer.appendChild(this._toggleSelectionFind.domNode);\n      // Close button\n      this._closeBtn = this._register(new SimpleButton({\n        label: NLS_CLOSE_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.CloseFindWidgetCommand),\n        icon: widgetClose,\n        hoverDelegate: hoverDelegate,\n        onTrigger: function onTrigger() {\n          _this7._state.change({\n            isRevealed: false,\n            searchScope: null\n          }, false);\n        },\n        onKeyDown: function onKeyDown(e) {\n          if (e.equals(2 /* KeyCode.Tab */)) {\n            if (_this7._isReplaceVisible) {\n              if (_this7._replaceBtn.isEnabled()) {\n                _this7._replaceBtn.focus();\n              } else {\n                _this7._codeEditor.focus();\n              }\n              e.preventDefault();\n            }\n          }\n        }\n      }));\n      // Replace input\n      this._replaceInput = this._register(new ContextScopedReplaceInput(null, undefined, {\n        label: NLS_REPLACE_INPUT_LABEL,\n        placeholder: NLS_REPLACE_INPUT_PLACEHOLDER,\n        appendPreserveCaseLabel: this._keybindingLabelFor(FIND_IDS.TogglePreserveCaseCommand),\n        history: [],\n        flexibleHeight: flexibleHeight,\n        flexibleWidth: flexibleWidth,\n        flexibleMaxHeight: 118,\n        showHistoryHint: function showHistoryHint() {\n          return showHistoryKeybindingHint(_this7._keybindingService);\n        },\n        inputBoxStyles: defaultInputBoxStyles,\n        toggleStyles: defaultToggleStyles\n      }, this._contextKeyService, true));\n      this._replaceInput.setPreserveCase(!!this._state.preserveCase);\n      this._register(this._replaceInput.onKeyDown(function (e) {\n        return _this7._onReplaceInputKeyDown(e);\n      }));\n      this._register(this._replaceInput.inputBox.onDidChange(function () {\n        _this7._state.change({\n          replaceString: _this7._replaceInput.inputBox.value\n        }, false);\n      }));\n      this._register(this._replaceInput.inputBox.onDidHeightChange(function (e) {\n        if (_this7._isReplaceVisible && _this7._tryUpdateHeight()) {\n          _this7._showViewZone();\n        }\n      }));\n      this._register(this._replaceInput.onDidOptionChange(function () {\n        _this7._state.change({\n          preserveCase: _this7._replaceInput.getPreserveCase()\n        }, true);\n      }));\n      this._register(this._replaceInput.onPreserveCaseKeyDown(function (e) {\n        if (e.equals(2 /* KeyCode.Tab */)) {\n          if (_this7._prevBtn.isEnabled()) {\n            _this7._prevBtn.focus();\n          } else if (_this7._nextBtn.isEnabled()) {\n            _this7._nextBtn.focus();\n          } else if (_this7._toggleSelectionFind.enabled) {\n            _this7._toggleSelectionFind.focus();\n          } else if (_this7._closeBtn.isEnabled()) {\n            _this7._closeBtn.focus();\n          }\n          e.preventDefault();\n        }\n      }));\n      // Create scoped hover delegate for replace actions\n      var replaceHoverDelegate = this._register(createInstantHoverDelegate());\n      // Replace one button\n      this._replaceBtn = this._register(new SimpleButton({\n        label: NLS_REPLACE_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.ReplaceOneAction),\n        icon: findReplaceIcon,\n        hoverDelegate: replaceHoverDelegate,\n        onTrigger: function onTrigger() {\n          _this7._controller.replace();\n        },\n        onKeyDown: function onKeyDown(e) {\n          if (e.equals(1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */)) {\n            _this7._closeBtn.focus();\n            e.preventDefault();\n          }\n        }\n      }));\n      // Replace all button\n      this._replaceAllBtn = this._register(new SimpleButton({\n        label: NLS_REPLACE_ALL_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.ReplaceAllAction),\n        icon: findReplaceAllIcon,\n        hoverDelegate: replaceHoverDelegate,\n        onTrigger: function onTrigger() {\n          _this7._controller.replaceAll();\n        }\n      }));\n      var replacePart = document.createElement('div');\n      replacePart.className = 'replace-part';\n      replacePart.appendChild(this._replaceInput.domNode);\n      var replaceActionsContainer = document.createElement('div');\n      replaceActionsContainer.className = 'replace-actions';\n      replacePart.appendChild(replaceActionsContainer);\n      replaceActionsContainer.appendChild(this._replaceBtn.domNode);\n      replaceActionsContainer.appendChild(this._replaceAllBtn.domNode);\n      // Toggle replace button\n      this._toggleReplaceBtn = this._register(new SimpleButton({\n        label: NLS_TOGGLE_REPLACE_MODE_BTN_LABEL,\n        className: 'codicon toggle left',\n        onTrigger: function onTrigger() {\n          _this7._state.change({\n            isReplaceRevealed: !_this7._isReplaceVisible\n          }, false);\n          if (_this7._isReplaceVisible) {\n            _this7._replaceInput.width = dom.getTotalWidth(_this7._findInput.domNode);\n            _this7._replaceInput.inputBox.layout();\n          }\n          _this7._showViewZone();\n        }\n      }));\n      this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);\n      // Widget\n      this._domNode = document.createElement('div');\n      this._domNode.className = 'editor-widget find-widget';\n      this._domNode.setAttribute('aria-hidden', 'true');\n      this._domNode.ariaLabel = NLS_FIND_DIALOG_LABEL;\n      this._domNode.role = 'dialog';\n      // We need to set this explicitly, otherwise on IE11, the width inheritence of flex doesn't work.\n      this._domNode.style.width = \"\".concat(FIND_WIDGET_INITIAL_WIDTH, \"px\");\n      this._domNode.appendChild(this._toggleReplaceBtn.domNode);\n      this._domNode.appendChild(findPart);\n      this._domNode.appendChild(this._closeBtn.domNode);\n      this._domNode.appendChild(replacePart);\n      this._resizeSash = this._register(new Sash(this._domNode, this, {\n        orientation: 0 /* Orientation.VERTICAL */,\n        size: 2\n      }));\n      this._resized = false;\n      var originalWidth = FIND_WIDGET_INITIAL_WIDTH;\n      this._register(this._resizeSash.onDidStart(function () {\n        originalWidth = dom.getTotalWidth(_this7._domNode);\n      }));\n      this._register(this._resizeSash.onDidChange(function (evt) {\n        _this7._resized = true;\n        var width = originalWidth + evt.startX - evt.currentX;\n        if (width < FIND_WIDGET_INITIAL_WIDTH) {\n          // narrow down the find widget should be handled by CSS.\n          return;\n        }\n        var maxWidth = parseFloat(dom.getComputedStyle(_this7._domNode).maxWidth) || 0;\n        if (width > maxWidth) {\n          return;\n        }\n        _this7._domNode.style.width = \"\".concat(width, \"px\");\n        if (_this7._isReplaceVisible) {\n          _this7._replaceInput.width = dom.getTotalWidth(_this7._findInput.domNode);\n        }\n        _this7._findInput.inputBox.layout();\n        _this7._tryUpdateHeight();\n      }));\n      this._register(this._resizeSash.onDidReset(function () {\n        // users double click on the sash\n        var currentWidth = dom.getTotalWidth(_this7._domNode);\n        if (currentWidth < FIND_WIDGET_INITIAL_WIDTH) {\n          // The editor is narrow and the width of the find widget is controlled fully by CSS.\n          return;\n        }\n        var width = FIND_WIDGET_INITIAL_WIDTH;\n        if (!_this7._resized || currentWidth === FIND_WIDGET_INITIAL_WIDTH) {\n          // 1. never resized before, double click should maximizes it\n          // 2. users resized it already but its width is the same as default\n          var layoutInfo = _this7._codeEditor.getLayoutInfo();\n          width = layoutInfo.width - 28 - layoutInfo.minimap.minimapWidth - 15;\n          _this7._resized = true;\n        } else {\n          /**\n           * no op, the find widget should be shrinked to its default size.\n           */\n        }\n        _this7._domNode.style.width = \"\".concat(width, \"px\");\n        if (_this7._isReplaceVisible) {\n          _this7._replaceInput.width = dom.getTotalWidth(_this7._findInput.domNode);\n        }\n        _this7._findInput.inputBox.layout();\n      }));\n    }\n  }, {\n    key: \"updateAccessibilitySupport\",\n    value: function updateAccessibilitySupport() {\n      var value = this._codeEditor.getOption(2 /* EditorOption.accessibilitySupport */);\n      this._findInput.setFocusInputOnOptionClick(value !== 2 /* AccessibilitySupport.Enabled */);\n    }\n  }]);\n}(Widget);\nFindWidget.ID = 'editor.contrib.findWidget';\nexport var SimpleButton = /*#__PURE__*/function (_Widget2) {\n  function SimpleButton(opts) {\n    var _this8;\n    _classCallCheck(this, SimpleButton);\n    var _a;\n    _this8 = _callSuper(this, SimpleButton);\n    _this8._opts = opts;\n    var className = 'button';\n    if (_this8._opts.className) {\n      className = className + ' ' + _this8._opts.className;\n    }\n    if (_this8._opts.icon) {\n      className = className + ' ' + ThemeIcon.asClassName(_this8._opts.icon);\n    }\n    _this8._domNode = document.createElement('div');\n    _this8._domNode.tabIndex = 0;\n    _this8._domNode.className = className;\n    _this8._domNode.setAttribute('role', 'button');\n    _this8._domNode.setAttribute('aria-label', _this8._opts.label);\n    _this8._register(setupCustomHover((_a = opts.hoverDelegate) !== null && _a !== void 0 ? _a : getDefaultHoverDelegate('element'), _this8._domNode, _this8._opts.label));\n    _this8.onclick(_this8._domNode, function (e) {\n      _this8._opts.onTrigger();\n      e.preventDefault();\n    });\n    _this8.onkeydown(_this8._domNode, function (e) {\n      var _a, _b;\n      if (e.equals(10 /* KeyCode.Space */) || e.equals(3 /* KeyCode.Enter */)) {\n        _this8._opts.onTrigger();\n        e.preventDefault();\n        return;\n      }\n      (_b = (_a = _this8._opts).onKeyDown) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n    });\n    return _this8;\n  }\n  _inherits(SimpleButton, _Widget2);\n  return _createClass(SimpleButton, [{\n    key: \"domNode\",\n    get: function get() {\n      return this._domNode;\n    }\n  }, {\n    key: \"isEnabled\",\n    value: function isEnabled() {\n      return this._domNode.tabIndex >= 0;\n    }\n  }, {\n    key: \"focus\",\n    value: function focus() {\n      this._domNode.focus();\n    }\n  }, {\n    key: \"setEnabled\",\n    value: function setEnabled(enabled) {\n      this._domNode.classList.toggle('disabled', !enabled);\n      this._domNode.setAttribute('aria-disabled', String(!enabled));\n      this._domNode.tabIndex = enabled ? 0 : -1;\n    }\n  }, {\n    key: \"setExpanded\",\n    value: function setExpanded(expanded) {\n      this._domNode.setAttribute('aria-expanded', String(!!expanded));\n      if (expanded) {\n        var _this$_domNode$classL, _this$_domNode$classL2;\n        (_this$_domNode$classL = this._domNode.classList).remove.apply(_this$_domNode$classL, _toConsumableArray(ThemeIcon.asClassNameArray(findCollapsedIcon)));\n        (_this$_domNode$classL2 = this._domNode.classList).add.apply(_this$_domNode$classL2, _toConsumableArray(ThemeIcon.asClassNameArray(findExpandedIcon)));\n      } else {\n        var _this$_domNode$classL3, _this$_domNode$classL4;\n        (_this$_domNode$classL3 = this._domNode.classList).remove.apply(_this$_domNode$classL3, _toConsumableArray(ThemeIcon.asClassNameArray(findExpandedIcon)));\n        (_this$_domNode$classL4 = this._domNode.classList).add.apply(_this$_domNode$classL4, _toConsumableArray(ThemeIcon.asClassNameArray(findCollapsedIcon)));\n      }\n    }\n  }]);\n}(Widget);\n// theming\nregisterThemingParticipant(function (theme, collector) {\n  var findMatchHighlightBorder = theme.getColor(editorFindMatchHighlightBorder);\n  if (findMatchHighlightBorder) {\n    collector.addRule(\".monaco-editor .findMatch { border: 1px \".concat(isHighContrast(theme.type) ? 'dotted' : 'solid', \" \").concat(findMatchHighlightBorder, \"; box-sizing: border-box; }\"));\n  }\n  var findRangeHighlightBorder = theme.getColor(editorFindRangeHighlightBorder);\n  if (findRangeHighlightBorder) {\n    collector.addRule(\".monaco-editor .findScope { border: 1px \".concat(isHighContrast(theme.type) ? 'dashed' : 'solid', \" \").concat(findRangeHighlightBorder, \"; }\"));\n  }\n  var hcBorder = theme.getColor(contrastBorder);\n  if (hcBorder) {\n    collector.addRule(\".monaco-editor .find-widget { border: 1px solid \".concat(hcBorder, \"; }\"));\n  }\n});","map":{"version":3,"names":["dom","alert","alertFn","Toggle","Sash","Widget","Delayer","Codicon","onUnexpectedError","toDisposable","platform","strings","Range","CONTEXT_FIND_INPUT_FOCUSED","CONTEXT_REPLACE_INPUT_FOCUSED","FIND_IDS","MATCHES_LIMIT","nls","ContextScopedFindInput","ContextScopedReplaceInput","showHistoryKeybindingHint","asCssVariable","contrastBorder","editorFindMatchHighlightBorder","editorFindRangeHighlightBorder","inputActiveOptionBackground","inputActiveOptionBorder","inputActiveOptionForeground","registerIcon","widgetClose","registerThemingParticipant","ThemeIcon","isHighContrast","assertIsDefined","defaultInputBoxStyles","defaultToggleStyles","setupCustomHover","createInstantHoverDelegate","getDefaultHoverDelegate","findSelectionIcon","selection","localize","findCollapsedIcon","chevronRight","findExpandedIcon","chevronDown","findReplaceIcon","replace","findReplaceAllIcon","replaceAll","findPreviousMatchIcon","arrowUp","findNextMatchIcon","arrowDown","NLS_FIND_DIALOG_LABEL","NLS_FIND_INPUT_LABEL","NLS_FIND_INPUT_PLACEHOLDER","NLS_PREVIOUS_MATCH_BTN_LABEL","NLS_NEXT_MATCH_BTN_LABEL","NLS_TOGGLE_SELECTION_FIND_TITLE","NLS_CLOSE_BTN_LABEL","NLS_REPLACE_INPUT_LABEL","NLS_REPLACE_INPUT_PLACEHOLDER","NLS_REPLACE_BTN_LABEL","NLS_REPLACE_ALL_BTN_LABEL","NLS_TOGGLE_REPLACE_MODE_BTN_LABEL","NLS_MATCHES_COUNT_LIMIT_TITLE","NLS_MATCHES_LOCATION","NLS_NO_RESULTS","FIND_WIDGET_INITIAL_WIDTH","PART_WIDTH","FIND_INPUT_AREA_WIDTH","MAX_MATCHES_COUNT_WIDTH","FIND_INPUT_AREA_HEIGHT","ctrlEnterReplaceAllWarningPromptedKey","ctrlKeyMod","isMacintosh","FindWidgetViewZone","_createClass","afterLineNumber","_classCallCheck","heightInPx","suppressMouseDown","domNode","document","createElement","className","stopPropagationForMultiLineUpwards","event","value","textarea","isMultiline","match","selectionStart","stopPropagation","stopPropagationForMultiLineDownwards","selectionEnd","length","FindWidget","_Widget","codeEditor","controller","state","contextViewProvider","keybindingService","contextKeyService","themeService","storageService","notificationService","_this","_callSuper","_cachedHeight","_revealTimeouts","_codeEditor","_controller","_state","_contextViewProvider","_keybindingService","_contextKeyService","_storageService","_notificationService","_ctrlEnterReplaceAllWarningPrompted","getBoolean","_isVisible","_isReplaceVisible","_ignoreChangeEvent","_updateHistoryDelayer","_register","cancel","onFindReplaceStateChange","e","_onStateChanged","_buildDomNode","_updateButtons","_tryUpdateWidgetWidth","_findInput","inputBox","layout","onDidChangeConfiguration","hasChanged","getOption","change","isReplaceRevealed","updateAccessibilitySupport","supportLoop","loop","addExtraSpaceOnTop","_viewZone","_showViewZone","_removeViewZone","onDidChangeCursorSelection","_updateToggleSelectionFindButton","onDidFocusEditorWidget","_asyncToGenerator","_regeneratorRuntime","mark","_callee","globalBufferTerm","wrap","_callee$","_context","prev","next","getGlobalBufferTerm","sent","searchString","select","stop","_findInputFocused","bindTo","_findFocusTracker","trackFocus","inputElement","onDidFocus","set","_updateSearchScope","onDidBlur","_replaceInputFocused","_replaceFocusTracker","_replaceInput","addOverlayWidget","onDidChangeModel","_viewZoneId","undefined","onDidScrollChange","scrollTopChanged","_layoutViewZone","setTimeout","_inherits","key","getId","ID","getDomNode","_domNode","getPosition","preference","setValue","replaceString","isRevealed","_reveal","_hide","width","getTotalWidth","_tryUpdateHeight","isRegex","setRegex","wholeWord","setWholeWords","matchCase","setCaseSensitive","preserveCase","setPreserveCase","searchScope","_toggleSelectionFind","checked","matchesCount","matchesPosition","showRedOutline","classList","toggle","_updateMatchesCount","currentMatch","updateHistory","_delayedUpdateHistory","trigger","_updateHistory","bind","then","addToHistory","_matchesCount","style","minWidth","title","firstChild","removeChild","label","String","format","appendChild","createTextNode","_getAriaLabel","Math","max","clientWidth","ariaLabel","startLineNumber","startColumn","model","getModel","getLineCount","lineContent","getLineContent","concat","getSelection","isSelection","endLineNumber","endColumn","isChecked","enable","disable","setEnabled","_closeBtn","findInputIsNonEmpty","_prevBtn","canNavigateBack","_nextBtn","canNavigateForward","_replaceBtn","_replaceAllBtn","_toggleReplaceBtn","setExpanded","canReplace","_this2","forEach","clearTimeout","autoFindInSelection","isSelectionMultipleLine","push","add","setAttribute","validate","layoutOverlayWidget","adjustEditorScrollTop","seedSearchStringFromSelection","editorCoords","getDomNodePagePosition","startCoords","getScrolledVisiblePosition","getStartPosition","startLeft","left","startTop","top","leftOfFindWidget","getTopLeftOffset","endCoords","getEndPosition","endLeft","focusTheEditor","remove","clearMessage","focus","targetScrollTop","_this3","viewZone","changeViewZones","accessor","_getHeight","addZone","setScrollTop","getScrollTop","_this4","adjustScroll","arguments","newHeight","scrollAdjustment","layoutZone","_this5","removeZone","isConnected","layoutInfo","getLayoutInfo","editorContentWidth","contentWidth","contains","editorWidth","minimapWidth","minimap","collapsedFindWidget","reducedFindWidget","narrowFindWidget","_resized","widgetWidth","maxWidth","findInputWidth","element","totalheight","height","totalHeight","focusFindInput","focusReplaceInput","highlightFindOptions","_this6","hasModel","selections","getSelections","map","setEndPosition","getLineMaxColumn","equalsRange","filter","_onFindInputMouseDown","middleButton","_onFindInputKeyDown","equals","dispatchEvent","target","preventDefault","insertAtCursor","focusOnCaseSensitive","getValue","querySelector","_onReplaceInputKeyDown","isWindows","isNative","info","store","getVerticalSashLeft","_sash","_keybindingLabelFor","actionId","kb","lookupKeybinding","getLabel","_this7","flexibleHeight","flexibleWidth","placeholder","appendCaseSensitiveLabel","ToggleCaseSensitiveCommand","appendWholeWordsLabel","ToggleWholeWordCommand","appendRegexLabel","ToggleRegexCommand","validation","getRegex","RegExp","content","message","flexibleMaxHeight","showCommonFindToggles","showHistoryHint","inputBoxStyles","toggleStyles","onKeyDown","onDidChange","onDidOptionChange","getWholeWords","getCaseSensitive","onCaseSensitiveKeyDown","onRegexKeyDown","focusOnPreserve","onDidHeightChange","isLinux","onMouseDown","hoverDelegate","SimpleButton","PreviousMatchFindAction","icon","onTrigger","getAction","run","NextMatchFindAction","findPart","actionsContainer","ToggleSearchScopeCommand","onChange","isEmpty","CloseFindWidgetCommand","isEnabled","appendPreserveCaseLabel","TogglePreserveCaseCommand","history","getPreserveCase","onPreserveCaseKeyDown","enabled","replaceHoverDelegate","ReplaceOneAction","ReplaceAllAction","replacePart","replaceActionsContainer","role","_resizeSash","orientation","size","originalWidth","onDidStart","evt","startX","currentX","parseFloat","getComputedStyle","onDidReset","currentWidth","setFocusInputOnOptionClick","_Widget2","opts","_this8","_a","_opts","asClassName","tabIndex","onclick","onkeydown","_b","call","get","expanded","_this$_domNode$classL","_this$_domNode$classL2","apply","_toConsumableArray","asClassNameArray","_this$_domNode$classL3","_this$_domNode$classL4","theme","collector","findMatchHighlightBorder","getColor","addRule","type","findRangeHighlightBorder","hcBorder"],"sources":["/Users/yinger/Desktop/algo_evaluator_front/node_modules/monaco-editor/esm/vs/editor/contrib/find/browser/findWidget.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../../base/browser/dom.js';\nimport { alert as alertFn } from '../../../../base/browser/ui/aria/aria.js';\nimport { Toggle } from '../../../../base/browser/ui/toggle/toggle.js';\nimport { Sash } from '../../../../base/browser/ui/sash/sash.js';\nimport { Widget } from '../../../../base/browser/ui/widget.js';\nimport { Delayer } from '../../../../base/common/async.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { toDisposable } from '../../../../base/common/lifecycle.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport './findWidget.css';\nimport { Range } from '../../../common/core/range.js';\nimport { CONTEXT_FIND_INPUT_FOCUSED, CONTEXT_REPLACE_INPUT_FOCUSED, FIND_IDS, MATCHES_LIMIT } from './findModel.js';\nimport * as nls from '../../../../nls.js';\nimport { ContextScopedFindInput, ContextScopedReplaceInput } from '../../../../platform/history/browser/contextScopedHistoryWidget.js';\nimport { showHistoryKeybindingHint } from '../../../../platform/history/browser/historyWidgetKeybindingHint.js';\nimport { asCssVariable, contrastBorder, editorFindMatchHighlightBorder, editorFindRangeHighlightBorder, inputActiveOptionBackground, inputActiveOptionBorder, inputActiveOptionForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerIcon, widgetClose } from '../../../../platform/theme/common/iconRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { isHighContrast } from '../../../../platform/theme/common/theme.js';\nimport { assertIsDefined } from '../../../../base/common/types.js';\nimport { defaultInputBoxStyles, defaultToggleStyles } from '../../../../platform/theme/browser/defaultStyles.js';\nimport { setupCustomHover } from '../../../../base/browser/ui/hover/updatableHoverWidget.js';\nimport { createInstantHoverDelegate, getDefaultHoverDelegate } from '../../../../base/browser/ui/hover/hoverDelegateFactory.js';\nconst findSelectionIcon = registerIcon('find-selection', Codicon.selection, nls.localize('findSelectionIcon', 'Icon for \\'Find in Selection\\' in the editor find widget.'));\nconst findCollapsedIcon = registerIcon('find-collapsed', Codicon.chevronRight, nls.localize('findCollapsedIcon', 'Icon to indicate that the editor find widget is collapsed.'));\nconst findExpandedIcon = registerIcon('find-expanded', Codicon.chevronDown, nls.localize('findExpandedIcon', 'Icon to indicate that the editor find widget is expanded.'));\nexport const findReplaceIcon = registerIcon('find-replace', Codicon.replace, nls.localize('findReplaceIcon', 'Icon for \\'Replace\\' in the editor find widget.'));\nexport const findReplaceAllIcon = registerIcon('find-replace-all', Codicon.replaceAll, nls.localize('findReplaceAllIcon', 'Icon for \\'Replace All\\' in the editor find widget.'));\nexport const findPreviousMatchIcon = registerIcon('find-previous-match', Codicon.arrowUp, nls.localize('findPreviousMatchIcon', 'Icon for \\'Find Previous\\' in the editor find widget.'));\nexport const findNextMatchIcon = registerIcon('find-next-match', Codicon.arrowDown, nls.localize('findNextMatchIcon', 'Icon for \\'Find Next\\' in the editor find widget.'));\nconst NLS_FIND_DIALOG_LABEL = nls.localize('label.findDialog', \"Find / Replace\");\nconst NLS_FIND_INPUT_LABEL = nls.localize('label.find', \"Find\");\nconst NLS_FIND_INPUT_PLACEHOLDER = nls.localize('placeholder.find', \"Find\");\nconst NLS_PREVIOUS_MATCH_BTN_LABEL = nls.localize('label.previousMatchButton', \"Previous Match\");\nconst NLS_NEXT_MATCH_BTN_LABEL = nls.localize('label.nextMatchButton', \"Next Match\");\nconst NLS_TOGGLE_SELECTION_FIND_TITLE = nls.localize('label.toggleSelectionFind', \"Find in Selection\");\nconst NLS_CLOSE_BTN_LABEL = nls.localize('label.closeButton', \"Close\");\nconst NLS_REPLACE_INPUT_LABEL = nls.localize('label.replace', \"Replace\");\nconst NLS_REPLACE_INPUT_PLACEHOLDER = nls.localize('placeholder.replace', \"Replace\");\nconst NLS_REPLACE_BTN_LABEL = nls.localize('label.replaceButton', \"Replace\");\nconst NLS_REPLACE_ALL_BTN_LABEL = nls.localize('label.replaceAllButton', \"Replace All\");\nconst NLS_TOGGLE_REPLACE_MODE_BTN_LABEL = nls.localize('label.toggleReplaceButton', \"Toggle Replace\");\nconst NLS_MATCHES_COUNT_LIMIT_TITLE = nls.localize('title.matchesCountLimit', \"Only the first {0} results are highlighted, but all find operations work on the entire text.\", MATCHES_LIMIT);\nexport const NLS_MATCHES_LOCATION = nls.localize('label.matchesLocation', \"{0} of {1}\");\nexport const NLS_NO_RESULTS = nls.localize('label.noResults', \"No results\");\nconst FIND_WIDGET_INITIAL_WIDTH = 419;\nconst PART_WIDTH = 275;\nconst FIND_INPUT_AREA_WIDTH = PART_WIDTH - 54;\nlet MAX_MATCHES_COUNT_WIDTH = 69;\n// let FIND_ALL_CONTROLS_WIDTH = 17/** Find Input margin-left */ + (MAX_MATCHES_COUNT_WIDTH + 3 + 1) /** Match Results */ + 23 /** Button */ * 4 + 2/** sash */;\nconst FIND_INPUT_AREA_HEIGHT = 33; // The height of Find Widget when Replace Input is not visible.\nconst ctrlEnterReplaceAllWarningPromptedKey = 'ctrlEnterReplaceAll.windows.donotask';\nconst ctrlKeyMod = (platform.isMacintosh ? 256 /* KeyMod.WinCtrl */ : 2048 /* KeyMod.CtrlCmd */);\nexport class FindWidgetViewZone {\n    constructor(afterLineNumber) {\n        this.afterLineNumber = afterLineNumber;\n        this.heightInPx = FIND_INPUT_AREA_HEIGHT;\n        this.suppressMouseDown = false;\n        this.domNode = document.createElement('div');\n        this.domNode.className = 'dock-find-viewzone';\n    }\n}\nfunction stopPropagationForMultiLineUpwards(event, value, textarea) {\n    const isMultiline = !!value.match(/\\n/);\n    if (textarea && isMultiline && textarea.selectionStart > 0) {\n        event.stopPropagation();\n        return;\n    }\n}\nfunction stopPropagationForMultiLineDownwards(event, value, textarea) {\n    const isMultiline = !!value.match(/\\n/);\n    if (textarea && isMultiline && textarea.selectionEnd < textarea.value.length) {\n        event.stopPropagation();\n        return;\n    }\n}\nexport class FindWidget extends Widget {\n    constructor(codeEditor, controller, state, contextViewProvider, keybindingService, contextKeyService, themeService, storageService, notificationService) {\n        super();\n        this._cachedHeight = null;\n        this._revealTimeouts = [];\n        this._codeEditor = codeEditor;\n        this._controller = controller;\n        this._state = state;\n        this._contextViewProvider = contextViewProvider;\n        this._keybindingService = keybindingService;\n        this._contextKeyService = contextKeyService;\n        this._storageService = storageService;\n        this._notificationService = notificationService;\n        this._ctrlEnterReplaceAllWarningPrompted = !!storageService.getBoolean(ctrlEnterReplaceAllWarningPromptedKey, 0 /* StorageScope.PROFILE */);\n        this._isVisible = false;\n        this._isReplaceVisible = false;\n        this._ignoreChangeEvent = false;\n        this._updateHistoryDelayer = new Delayer(500);\n        this._register(toDisposable(() => this._updateHistoryDelayer.cancel()));\n        this._register(this._state.onFindReplaceStateChange((e) => this._onStateChanged(e)));\n        this._buildDomNode();\n        this._updateButtons();\n        this._tryUpdateWidgetWidth();\n        this._findInput.inputBox.layout();\n        this._register(this._codeEditor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(91 /* EditorOption.readOnly */)) {\n                if (this._codeEditor.getOption(91 /* EditorOption.readOnly */)) {\n                    // Hide replace part if editor becomes read only\n                    this._state.change({ isReplaceRevealed: false }, false);\n                }\n                this._updateButtons();\n            }\n            if (e.hasChanged(145 /* EditorOption.layoutInfo */)) {\n                this._tryUpdateWidgetWidth();\n            }\n            if (e.hasChanged(2 /* EditorOption.accessibilitySupport */)) {\n                this.updateAccessibilitySupport();\n            }\n            if (e.hasChanged(41 /* EditorOption.find */)) {\n                const supportLoop = this._codeEditor.getOption(41 /* EditorOption.find */).loop;\n                this._state.change({ loop: supportLoop }, false);\n                const addExtraSpaceOnTop = this._codeEditor.getOption(41 /* EditorOption.find */).addExtraSpaceOnTop;\n                if (addExtraSpaceOnTop && !this._viewZone) {\n                    this._viewZone = new FindWidgetViewZone(0);\n                    this._showViewZone();\n                }\n                if (!addExtraSpaceOnTop && this._viewZone) {\n                    this._removeViewZone();\n                }\n            }\n        }));\n        this.updateAccessibilitySupport();\n        this._register(this._codeEditor.onDidChangeCursorSelection(() => {\n            if (this._isVisible) {\n                this._updateToggleSelectionFindButton();\n            }\n        }));\n        this._register(this._codeEditor.onDidFocusEditorWidget(async () => {\n            if (this._isVisible) {\n                const globalBufferTerm = await this._controller.getGlobalBufferTerm();\n                if (globalBufferTerm && globalBufferTerm !== this._state.searchString) {\n                    this._state.change({ searchString: globalBufferTerm }, false);\n                    this._findInput.select();\n                }\n            }\n        }));\n        this._findInputFocused = CONTEXT_FIND_INPUT_FOCUSED.bindTo(contextKeyService);\n        this._findFocusTracker = this._register(dom.trackFocus(this._findInput.inputBox.inputElement));\n        this._register(this._findFocusTracker.onDidFocus(() => {\n            this._findInputFocused.set(true);\n            this._updateSearchScope();\n        }));\n        this._register(this._findFocusTracker.onDidBlur(() => {\n            this._findInputFocused.set(false);\n        }));\n        this._replaceInputFocused = CONTEXT_REPLACE_INPUT_FOCUSED.bindTo(contextKeyService);\n        this._replaceFocusTracker = this._register(dom.trackFocus(this._replaceInput.inputBox.inputElement));\n        this._register(this._replaceFocusTracker.onDidFocus(() => {\n            this._replaceInputFocused.set(true);\n            this._updateSearchScope();\n        }));\n        this._register(this._replaceFocusTracker.onDidBlur(() => {\n            this._replaceInputFocused.set(false);\n        }));\n        this._codeEditor.addOverlayWidget(this);\n        if (this._codeEditor.getOption(41 /* EditorOption.find */).addExtraSpaceOnTop) {\n            this._viewZone = new FindWidgetViewZone(0); // Put it before the first line then users can scroll beyond the first line.\n        }\n        this._register(this._codeEditor.onDidChangeModel(() => {\n            if (!this._isVisible) {\n                return;\n            }\n            this._viewZoneId = undefined;\n        }));\n        this._register(this._codeEditor.onDidScrollChange((e) => {\n            if (e.scrollTopChanged) {\n                this._layoutViewZone();\n                return;\n            }\n            // for other scroll changes, layout the viewzone in next tick to avoid ruining current rendering.\n            setTimeout(() => {\n                this._layoutViewZone();\n            }, 0);\n        }));\n    }\n    // ----- IOverlayWidget API\n    getId() {\n        return FindWidget.ID;\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    getPosition() {\n        if (this._isVisible) {\n            return {\n                preference: 0 /* OverlayWidgetPositionPreference.TOP_RIGHT_CORNER */\n            };\n        }\n        return null;\n    }\n    // ----- React to state changes\n    _onStateChanged(e) {\n        if (e.searchString) {\n            try {\n                this._ignoreChangeEvent = true;\n                this._findInput.setValue(this._state.searchString);\n            }\n            finally {\n                this._ignoreChangeEvent = false;\n            }\n            this._updateButtons();\n        }\n        if (e.replaceString) {\n            this._replaceInput.inputBox.value = this._state.replaceString;\n        }\n        if (e.isRevealed) {\n            if (this._state.isRevealed) {\n                this._reveal();\n            }\n            else {\n                this._hide(true);\n            }\n        }\n        if (e.isReplaceRevealed) {\n            if (this._state.isReplaceRevealed) {\n                if (!this._codeEditor.getOption(91 /* EditorOption.readOnly */) && !this._isReplaceVisible) {\n                    this._isReplaceVisible = true;\n                    this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n                    this._updateButtons();\n                    this._replaceInput.inputBox.layout();\n                }\n            }\n            else {\n                if (this._isReplaceVisible) {\n                    this._isReplaceVisible = false;\n                    this._updateButtons();\n                }\n            }\n        }\n        if ((e.isRevealed || e.isReplaceRevealed) && (this._state.isRevealed || this._state.isReplaceRevealed)) {\n            if (this._tryUpdateHeight()) {\n                this._showViewZone();\n            }\n        }\n        if (e.isRegex) {\n            this._findInput.setRegex(this._state.isRegex);\n        }\n        if (e.wholeWord) {\n            this._findInput.setWholeWords(this._state.wholeWord);\n        }\n        if (e.matchCase) {\n            this._findInput.setCaseSensitive(this._state.matchCase);\n        }\n        if (e.preserveCase) {\n            this._replaceInput.setPreserveCase(this._state.preserveCase);\n        }\n        if (e.searchScope) {\n            if (this._state.searchScope) {\n                this._toggleSelectionFind.checked = true;\n            }\n            else {\n                this._toggleSelectionFind.checked = false;\n            }\n            this._updateToggleSelectionFindButton();\n        }\n        if (e.searchString || e.matchesCount || e.matchesPosition) {\n            const showRedOutline = (this._state.searchString.length > 0 && this._state.matchesCount === 0);\n            this._domNode.classList.toggle('no-results', showRedOutline);\n            this._updateMatchesCount();\n            this._updateButtons();\n        }\n        if (e.searchString || e.currentMatch) {\n            this._layoutViewZone();\n        }\n        if (e.updateHistory) {\n            this._delayedUpdateHistory();\n        }\n        if (e.loop) {\n            this._updateButtons();\n        }\n    }\n    _delayedUpdateHistory() {\n        this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(undefined, onUnexpectedError);\n    }\n    _updateHistory() {\n        if (this._state.searchString) {\n            this._findInput.inputBox.addToHistory();\n        }\n        if (this._state.replaceString) {\n            this._replaceInput.inputBox.addToHistory();\n        }\n    }\n    _updateMatchesCount() {\n        this._matchesCount.style.minWidth = MAX_MATCHES_COUNT_WIDTH + 'px';\n        if (this._state.matchesCount >= MATCHES_LIMIT) {\n            this._matchesCount.title = NLS_MATCHES_COUNT_LIMIT_TITLE;\n        }\n        else {\n            this._matchesCount.title = '';\n        }\n        // remove previous content\n        if (this._matchesCount.firstChild) {\n            this._matchesCount.removeChild(this._matchesCount.firstChild);\n        }\n        let label;\n        if (this._state.matchesCount > 0) {\n            let matchesCount = String(this._state.matchesCount);\n            if (this._state.matchesCount >= MATCHES_LIMIT) {\n                matchesCount += '+';\n            }\n            let matchesPosition = String(this._state.matchesPosition);\n            if (matchesPosition === '0') {\n                matchesPosition = '?';\n            }\n            label = strings.format(NLS_MATCHES_LOCATION, matchesPosition, matchesCount);\n        }\n        else {\n            label = NLS_NO_RESULTS;\n        }\n        this._matchesCount.appendChild(document.createTextNode(label));\n        alertFn(this._getAriaLabel(label, this._state.currentMatch, this._state.searchString));\n        MAX_MATCHES_COUNT_WIDTH = Math.max(MAX_MATCHES_COUNT_WIDTH, this._matchesCount.clientWidth);\n    }\n    // ----- actions\n    _getAriaLabel(label, currentMatch, searchString) {\n        if (label === NLS_NO_RESULTS) {\n            return searchString === ''\n                ? nls.localize('ariaSearchNoResultEmpty', \"{0} found\", label)\n                : nls.localize('ariaSearchNoResult', \"{0} found for '{1}'\", label, searchString);\n        }\n        if (currentMatch) {\n            const ariaLabel = nls.localize('ariaSearchNoResultWithLineNum', \"{0} found for '{1}', at {2}\", label, searchString, currentMatch.startLineNumber + ':' + currentMatch.startColumn);\n            const model = this._codeEditor.getModel();\n            if (model && (currentMatch.startLineNumber <= model.getLineCount()) && (currentMatch.startLineNumber >= 1)) {\n                const lineContent = model.getLineContent(currentMatch.startLineNumber);\n                return `${lineContent}, ${ariaLabel}`;\n            }\n            return ariaLabel;\n        }\n        return nls.localize('ariaSearchNoResultWithLineNumNoCurrentMatch', \"{0} found for '{1}'\", label, searchString);\n    }\n    /**\n     * If 'selection find' is ON we should not disable the button (its function is to cancel 'selection find').\n     * If 'selection find' is OFF we enable the button only if there is a selection.\n     */\n    _updateToggleSelectionFindButton() {\n        const selection = this._codeEditor.getSelection();\n        const isSelection = selection ? (selection.startLineNumber !== selection.endLineNumber || selection.startColumn !== selection.endColumn) : false;\n        const isChecked = this._toggleSelectionFind.checked;\n        if (this._isVisible && (isChecked || isSelection)) {\n            this._toggleSelectionFind.enable();\n        }\n        else {\n            this._toggleSelectionFind.disable();\n        }\n    }\n    _updateButtons() {\n        this._findInput.setEnabled(this._isVisible);\n        this._replaceInput.setEnabled(this._isVisible && this._isReplaceVisible);\n        this._updateToggleSelectionFindButton();\n        this._closeBtn.setEnabled(this._isVisible);\n        const findInputIsNonEmpty = (this._state.searchString.length > 0);\n        const matchesCount = this._state.matchesCount ? true : false;\n        this._prevBtn.setEnabled(this._isVisible && findInputIsNonEmpty && matchesCount && this._state.canNavigateBack());\n        this._nextBtn.setEnabled(this._isVisible && findInputIsNonEmpty && matchesCount && this._state.canNavigateForward());\n        this._replaceBtn.setEnabled(this._isVisible && this._isReplaceVisible && findInputIsNonEmpty);\n        this._replaceAllBtn.setEnabled(this._isVisible && this._isReplaceVisible && findInputIsNonEmpty);\n        this._domNode.classList.toggle('replaceToggled', this._isReplaceVisible);\n        this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);\n        const canReplace = !this._codeEditor.getOption(91 /* EditorOption.readOnly */);\n        this._toggleReplaceBtn.setEnabled(this._isVisible && canReplace);\n    }\n    _reveal() {\n        this._revealTimeouts.forEach(e => {\n            clearTimeout(e);\n        });\n        this._revealTimeouts = [];\n        if (!this._isVisible) {\n            this._isVisible = true;\n            const selection = this._codeEditor.getSelection();\n            switch (this._codeEditor.getOption(41 /* EditorOption.find */).autoFindInSelection) {\n                case 'always':\n                    this._toggleSelectionFind.checked = true;\n                    break;\n                case 'never':\n                    this._toggleSelectionFind.checked = false;\n                    break;\n                case 'multiline': {\n                    const isSelectionMultipleLine = !!selection && selection.startLineNumber !== selection.endLineNumber;\n                    this._toggleSelectionFind.checked = isSelectionMultipleLine;\n                    break;\n                }\n                default:\n                    break;\n            }\n            this._tryUpdateWidgetWidth();\n            this._updateButtons();\n            this._revealTimeouts.push(setTimeout(() => {\n                this._domNode.classList.add('visible');\n                this._domNode.setAttribute('aria-hidden', 'false');\n            }, 0));\n            // validate query again as it's being dismissed when we hide the find widget.\n            this._revealTimeouts.push(setTimeout(() => {\n                this._findInput.validate();\n            }, 200));\n            this._codeEditor.layoutOverlayWidget(this);\n            let adjustEditorScrollTop = true;\n            if (this._codeEditor.getOption(41 /* EditorOption.find */).seedSearchStringFromSelection && selection) {\n                const domNode = this._codeEditor.getDomNode();\n                if (domNode) {\n                    const editorCoords = dom.getDomNodePagePosition(domNode);\n                    const startCoords = this._codeEditor.getScrolledVisiblePosition(selection.getStartPosition());\n                    const startLeft = editorCoords.left + (startCoords ? startCoords.left : 0);\n                    const startTop = startCoords ? startCoords.top : 0;\n                    if (this._viewZone && startTop < this._viewZone.heightInPx) {\n                        if (selection.endLineNumber > selection.startLineNumber) {\n                            adjustEditorScrollTop = false;\n                        }\n                        const leftOfFindWidget = dom.getTopLeftOffset(this._domNode).left;\n                        if (startLeft > leftOfFindWidget) {\n                            adjustEditorScrollTop = false;\n                        }\n                        const endCoords = this._codeEditor.getScrolledVisiblePosition(selection.getEndPosition());\n                        const endLeft = editorCoords.left + (endCoords ? endCoords.left : 0);\n                        if (endLeft > leftOfFindWidget) {\n                            adjustEditorScrollTop = false;\n                        }\n                    }\n                }\n            }\n            this._showViewZone(adjustEditorScrollTop);\n        }\n    }\n    _hide(focusTheEditor) {\n        this._revealTimeouts.forEach(e => {\n            clearTimeout(e);\n        });\n        this._revealTimeouts = [];\n        if (this._isVisible) {\n            this._isVisible = false;\n            this._updateButtons();\n            this._domNode.classList.remove('visible');\n            this._domNode.setAttribute('aria-hidden', 'true');\n            this._findInput.clearMessage();\n            if (focusTheEditor) {\n                this._codeEditor.focus();\n            }\n            this._codeEditor.layoutOverlayWidget(this);\n            this._removeViewZone();\n        }\n    }\n    _layoutViewZone(targetScrollTop) {\n        const addExtraSpaceOnTop = this._codeEditor.getOption(41 /* EditorOption.find */).addExtraSpaceOnTop;\n        if (!addExtraSpaceOnTop) {\n            this._removeViewZone();\n            return;\n        }\n        if (!this._isVisible) {\n            return;\n        }\n        const viewZone = this._viewZone;\n        if (this._viewZoneId !== undefined || !viewZone) {\n            return;\n        }\n        this._codeEditor.changeViewZones((accessor) => {\n            viewZone.heightInPx = this._getHeight();\n            this._viewZoneId = accessor.addZone(viewZone);\n            // scroll top adjust to make sure the editor doesn't scroll when adding viewzone at the beginning.\n            this._codeEditor.setScrollTop(targetScrollTop || this._codeEditor.getScrollTop() + viewZone.heightInPx);\n        });\n    }\n    _showViewZone(adjustScroll = true) {\n        if (!this._isVisible) {\n            return;\n        }\n        const addExtraSpaceOnTop = this._codeEditor.getOption(41 /* EditorOption.find */).addExtraSpaceOnTop;\n        if (!addExtraSpaceOnTop) {\n            return;\n        }\n        if (this._viewZone === undefined) {\n            this._viewZone = new FindWidgetViewZone(0);\n        }\n        const viewZone = this._viewZone;\n        this._codeEditor.changeViewZones((accessor) => {\n            if (this._viewZoneId !== undefined) {\n                // the view zone already exists, we need to update the height\n                const newHeight = this._getHeight();\n                if (newHeight === viewZone.heightInPx) {\n                    return;\n                }\n                const scrollAdjustment = newHeight - viewZone.heightInPx;\n                viewZone.heightInPx = newHeight;\n                accessor.layoutZone(this._viewZoneId);\n                if (adjustScroll) {\n                    this._codeEditor.setScrollTop(this._codeEditor.getScrollTop() + scrollAdjustment);\n                }\n                return;\n            }\n            else {\n                let scrollAdjustment = this._getHeight();\n                // if the editor has top padding, factor that into the zone height\n                scrollAdjustment -= this._codeEditor.getOption(84 /* EditorOption.padding */).top;\n                if (scrollAdjustment <= 0) {\n                    return;\n                }\n                viewZone.heightInPx = scrollAdjustment;\n                this._viewZoneId = accessor.addZone(viewZone);\n                if (adjustScroll) {\n                    this._codeEditor.setScrollTop(this._codeEditor.getScrollTop() + scrollAdjustment);\n                }\n            }\n        });\n    }\n    _removeViewZone() {\n        this._codeEditor.changeViewZones((accessor) => {\n            if (this._viewZoneId !== undefined) {\n                accessor.removeZone(this._viewZoneId);\n                this._viewZoneId = undefined;\n                if (this._viewZone) {\n                    this._codeEditor.setScrollTop(this._codeEditor.getScrollTop() - this._viewZone.heightInPx);\n                    this._viewZone = undefined;\n                }\n            }\n        });\n    }\n    _tryUpdateWidgetWidth() {\n        if (!this._isVisible) {\n            return;\n        }\n        if (!this._domNode.isConnected) {\n            // the widget is not in the DOM\n            return;\n        }\n        const layoutInfo = this._codeEditor.getLayoutInfo();\n        const editorContentWidth = layoutInfo.contentWidth;\n        if (editorContentWidth <= 0) {\n            // for example, diff view original editor\n            this._domNode.classList.add('hiddenEditor');\n            return;\n        }\n        else if (this._domNode.classList.contains('hiddenEditor')) {\n            this._domNode.classList.remove('hiddenEditor');\n        }\n        const editorWidth = layoutInfo.width;\n        const minimapWidth = layoutInfo.minimap.minimapWidth;\n        let collapsedFindWidget = false;\n        let reducedFindWidget = false;\n        let narrowFindWidget = false;\n        if (this._resized) {\n            const widgetWidth = dom.getTotalWidth(this._domNode);\n            if (widgetWidth > FIND_WIDGET_INITIAL_WIDTH) {\n                // as the widget is resized by users, we may need to change the max width of the widget as the editor width changes.\n                this._domNode.style.maxWidth = `${editorWidth - 28 - minimapWidth - 15}px`;\n                this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n                return;\n            }\n        }\n        if (FIND_WIDGET_INITIAL_WIDTH + 28 + minimapWidth >= editorWidth) {\n            reducedFindWidget = true;\n        }\n        if (FIND_WIDGET_INITIAL_WIDTH + 28 + minimapWidth - MAX_MATCHES_COUNT_WIDTH >= editorWidth) {\n            narrowFindWidget = true;\n        }\n        if (FIND_WIDGET_INITIAL_WIDTH + 28 + minimapWidth - MAX_MATCHES_COUNT_WIDTH >= editorWidth + 50) {\n            collapsedFindWidget = true;\n        }\n        this._domNode.classList.toggle('collapsed-find-widget', collapsedFindWidget);\n        this._domNode.classList.toggle('narrow-find-widget', narrowFindWidget);\n        this._domNode.classList.toggle('reduced-find-widget', reducedFindWidget);\n        if (!narrowFindWidget && !collapsedFindWidget) {\n            // the minimal left offset of findwidget is 15px.\n            this._domNode.style.maxWidth = `${editorWidth - 28 - minimapWidth - 15}px`;\n        }\n        this._findInput.layout({ collapsedFindWidget, narrowFindWidget, reducedFindWidget });\n        if (this._resized) {\n            const findInputWidth = this._findInput.inputBox.element.clientWidth;\n            if (findInputWidth > 0) {\n                this._replaceInput.width = findInputWidth;\n            }\n        }\n        else if (this._isReplaceVisible) {\n            this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n        }\n    }\n    _getHeight() {\n        let totalheight = 0;\n        // find input margin top\n        totalheight += 4;\n        // find input height\n        totalheight += this._findInput.inputBox.height + 2 /** input box border */;\n        if (this._isReplaceVisible) {\n            // replace input margin\n            totalheight += 4;\n            totalheight += this._replaceInput.inputBox.height + 2 /** input box border */;\n        }\n        // margin bottom\n        totalheight += 4;\n        return totalheight;\n    }\n    _tryUpdateHeight() {\n        const totalHeight = this._getHeight();\n        if (this._cachedHeight !== null && this._cachedHeight === totalHeight) {\n            return false;\n        }\n        this._cachedHeight = totalHeight;\n        this._domNode.style.height = `${totalHeight}px`;\n        return true;\n    }\n    // ----- Public\n    focusFindInput() {\n        this._findInput.select();\n        // Edge browser requires focus() in addition to select()\n        this._findInput.focus();\n    }\n    focusReplaceInput() {\n        this._replaceInput.select();\n        // Edge browser requires focus() in addition to select()\n        this._replaceInput.focus();\n    }\n    highlightFindOptions() {\n        this._findInput.highlightFindOptions();\n    }\n    _updateSearchScope() {\n        if (!this._codeEditor.hasModel()) {\n            return;\n        }\n        if (this._toggleSelectionFind.checked) {\n            const selections = this._codeEditor.getSelections();\n            selections.map(selection => {\n                if (selection.endColumn === 1 && selection.endLineNumber > selection.startLineNumber) {\n                    selection = selection.setEndPosition(selection.endLineNumber - 1, this._codeEditor.getModel().getLineMaxColumn(selection.endLineNumber - 1));\n                }\n                const currentMatch = this._state.currentMatch;\n                if (selection.startLineNumber !== selection.endLineNumber) {\n                    if (!Range.equalsRange(selection, currentMatch)) {\n                        return selection;\n                    }\n                }\n                return null;\n            }).filter(element => !!element);\n            if (selections.length) {\n                this._state.change({ searchScope: selections }, true);\n            }\n        }\n    }\n    _onFindInputMouseDown(e) {\n        // on linux, middle key does pasting.\n        if (e.middleButton) {\n            e.stopPropagation();\n        }\n    }\n    _onFindInputKeyDown(e) {\n        if (e.equals(ctrlKeyMod | 3 /* KeyCode.Enter */)) {\n            if (this._keybindingService.dispatchEvent(e, e.target)) {\n                e.preventDefault();\n                return;\n            }\n            else {\n                this._findInput.inputBox.insertAtCursor('\\n');\n                e.preventDefault();\n                return;\n            }\n        }\n        if (e.equals(2 /* KeyCode.Tab */)) {\n            if (this._isReplaceVisible) {\n                this._replaceInput.focus();\n            }\n            else {\n                this._findInput.focusOnCaseSensitive();\n            }\n            e.preventDefault();\n            return;\n        }\n        if (e.equals(2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */)) {\n            this._codeEditor.focus();\n            e.preventDefault();\n            return;\n        }\n        if (e.equals(16 /* KeyCode.UpArrow */)) {\n            return stopPropagationForMultiLineUpwards(e, this._findInput.getValue(), this._findInput.domNode.querySelector('textarea'));\n        }\n        if (e.equals(18 /* KeyCode.DownArrow */)) {\n            return stopPropagationForMultiLineDownwards(e, this._findInput.getValue(), this._findInput.domNode.querySelector('textarea'));\n        }\n    }\n    _onReplaceInputKeyDown(e) {\n        if (e.equals(ctrlKeyMod | 3 /* KeyCode.Enter */)) {\n            if (this._keybindingService.dispatchEvent(e, e.target)) {\n                e.preventDefault();\n                return;\n            }\n            else {\n                if (platform.isWindows && platform.isNative && !this._ctrlEnterReplaceAllWarningPrompted) {\n                    // this is the first time when users press Ctrl + Enter to replace all\n                    this._notificationService.info(nls.localize('ctrlEnter.keybindingChanged', 'Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.'));\n                    this._ctrlEnterReplaceAllWarningPrompted = true;\n                    this._storageService.store(ctrlEnterReplaceAllWarningPromptedKey, true, 0 /* StorageScope.PROFILE */, 0 /* StorageTarget.USER */);\n                }\n                this._replaceInput.inputBox.insertAtCursor('\\n');\n                e.preventDefault();\n                return;\n            }\n        }\n        if (e.equals(2 /* KeyCode.Tab */)) {\n            this._findInput.focusOnCaseSensitive();\n            e.preventDefault();\n            return;\n        }\n        if (e.equals(1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */)) {\n            this._findInput.focus();\n            e.preventDefault();\n            return;\n        }\n        if (e.equals(2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */)) {\n            this._codeEditor.focus();\n            e.preventDefault();\n            return;\n        }\n        if (e.equals(16 /* KeyCode.UpArrow */)) {\n            return stopPropagationForMultiLineUpwards(e, this._replaceInput.inputBox.value, this._replaceInput.inputBox.element.querySelector('textarea'));\n        }\n        if (e.equals(18 /* KeyCode.DownArrow */)) {\n            return stopPropagationForMultiLineDownwards(e, this._replaceInput.inputBox.value, this._replaceInput.inputBox.element.querySelector('textarea'));\n        }\n    }\n    // ----- sash\n    getVerticalSashLeft(_sash) {\n        return 0;\n    }\n    // ----- initialization\n    _keybindingLabelFor(actionId) {\n        const kb = this._keybindingService.lookupKeybinding(actionId);\n        if (!kb) {\n            return '';\n        }\n        return ` (${kb.getLabel()})`;\n    }\n    _buildDomNode() {\n        const flexibleHeight = true;\n        const flexibleWidth = true;\n        // Find input\n        this._findInput = this._register(new ContextScopedFindInput(null, this._contextViewProvider, {\n            width: FIND_INPUT_AREA_WIDTH,\n            label: NLS_FIND_INPUT_LABEL,\n            placeholder: NLS_FIND_INPUT_PLACEHOLDER,\n            appendCaseSensitiveLabel: this._keybindingLabelFor(FIND_IDS.ToggleCaseSensitiveCommand),\n            appendWholeWordsLabel: this._keybindingLabelFor(FIND_IDS.ToggleWholeWordCommand),\n            appendRegexLabel: this._keybindingLabelFor(FIND_IDS.ToggleRegexCommand),\n            validation: (value) => {\n                if (value.length === 0 || !this._findInput.getRegex()) {\n                    return null;\n                }\n                try {\n                    // use `g` and `u` which are also used by the TextModel search\n                    new RegExp(value, 'gu');\n                    return null;\n                }\n                catch (e) {\n                    return { content: e.message };\n                }\n            },\n            flexibleHeight,\n            flexibleWidth,\n            flexibleMaxHeight: 118,\n            showCommonFindToggles: true,\n            showHistoryHint: () => showHistoryKeybindingHint(this._keybindingService),\n            inputBoxStyles: defaultInputBoxStyles,\n            toggleStyles: defaultToggleStyles\n        }, this._contextKeyService));\n        this._findInput.setRegex(!!this._state.isRegex);\n        this._findInput.setCaseSensitive(!!this._state.matchCase);\n        this._findInput.setWholeWords(!!this._state.wholeWord);\n        this._register(this._findInput.onKeyDown((e) => this._onFindInputKeyDown(e)));\n        this._register(this._findInput.inputBox.onDidChange(() => {\n            if (this._ignoreChangeEvent) {\n                return;\n            }\n            this._state.change({ searchString: this._findInput.getValue() }, true);\n        }));\n        this._register(this._findInput.onDidOptionChange(() => {\n            this._state.change({\n                isRegex: this._findInput.getRegex(),\n                wholeWord: this._findInput.getWholeWords(),\n                matchCase: this._findInput.getCaseSensitive()\n            }, true);\n        }));\n        this._register(this._findInput.onCaseSensitiveKeyDown((e) => {\n            if (e.equals(1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */)) {\n                if (this._isReplaceVisible) {\n                    this._replaceInput.focus();\n                    e.preventDefault();\n                }\n            }\n        }));\n        this._register(this._findInput.onRegexKeyDown((e) => {\n            if (e.equals(2 /* KeyCode.Tab */)) {\n                if (this._isReplaceVisible) {\n                    this._replaceInput.focusOnPreserve();\n                    e.preventDefault();\n                }\n            }\n        }));\n        this._register(this._findInput.inputBox.onDidHeightChange((e) => {\n            if (this._tryUpdateHeight()) {\n                this._showViewZone();\n            }\n        }));\n        if (platform.isLinux) {\n            this._register(this._findInput.onMouseDown((e) => this._onFindInputMouseDown(e)));\n        }\n        this._matchesCount = document.createElement('div');\n        this._matchesCount.className = 'matchesCount';\n        this._updateMatchesCount();\n        // Create a scoped hover delegate for all find related buttons\n        const hoverDelegate = this._register(createInstantHoverDelegate());\n        // Previous button\n        this._prevBtn = this._register(new SimpleButton({\n            label: NLS_PREVIOUS_MATCH_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.PreviousMatchFindAction),\n            icon: findPreviousMatchIcon,\n            hoverDelegate,\n            onTrigger: () => {\n                assertIsDefined(this._codeEditor.getAction(FIND_IDS.PreviousMatchFindAction)).run().then(undefined, onUnexpectedError);\n            }\n        }));\n        // Next button\n        this._nextBtn = this._register(new SimpleButton({\n            label: NLS_NEXT_MATCH_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.NextMatchFindAction),\n            icon: findNextMatchIcon,\n            hoverDelegate,\n            onTrigger: () => {\n                assertIsDefined(this._codeEditor.getAction(FIND_IDS.NextMatchFindAction)).run().then(undefined, onUnexpectedError);\n            }\n        }));\n        const findPart = document.createElement('div');\n        findPart.className = 'find-part';\n        findPart.appendChild(this._findInput.domNode);\n        const actionsContainer = document.createElement('div');\n        actionsContainer.className = 'find-actions';\n        findPart.appendChild(actionsContainer);\n        actionsContainer.appendChild(this._matchesCount);\n        actionsContainer.appendChild(this._prevBtn.domNode);\n        actionsContainer.appendChild(this._nextBtn.domNode);\n        // Toggle selection button\n        this._toggleSelectionFind = this._register(new Toggle({\n            icon: findSelectionIcon,\n            title: NLS_TOGGLE_SELECTION_FIND_TITLE + this._keybindingLabelFor(FIND_IDS.ToggleSearchScopeCommand),\n            isChecked: false,\n            hoverDelegate: hoverDelegate,\n            inputActiveOptionBackground: asCssVariable(inputActiveOptionBackground),\n            inputActiveOptionBorder: asCssVariable(inputActiveOptionBorder),\n            inputActiveOptionForeground: asCssVariable(inputActiveOptionForeground),\n        }));\n        this._register(this._toggleSelectionFind.onChange(() => {\n            if (this._toggleSelectionFind.checked) {\n                if (this._codeEditor.hasModel()) {\n                    let selections = this._codeEditor.getSelections();\n                    selections = selections.map(selection => {\n                        if (selection.endColumn === 1 && selection.endLineNumber > selection.startLineNumber) {\n                            selection = selection.setEndPosition(selection.endLineNumber - 1, this._codeEditor.getModel().getLineMaxColumn(selection.endLineNumber - 1));\n                        }\n                        if (!selection.isEmpty()) {\n                            return selection;\n                        }\n                        return null;\n                    }).filter((element) => !!element);\n                    if (selections.length) {\n                        this._state.change({ searchScope: selections }, true);\n                    }\n                }\n            }\n            else {\n                this._state.change({ searchScope: null }, true);\n            }\n        }));\n        actionsContainer.appendChild(this._toggleSelectionFind.domNode);\n        // Close button\n        this._closeBtn = this._register(new SimpleButton({\n            label: NLS_CLOSE_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.CloseFindWidgetCommand),\n            icon: widgetClose,\n            hoverDelegate,\n            onTrigger: () => {\n                this._state.change({ isRevealed: false, searchScope: null }, false);\n            },\n            onKeyDown: (e) => {\n                if (e.equals(2 /* KeyCode.Tab */)) {\n                    if (this._isReplaceVisible) {\n                        if (this._replaceBtn.isEnabled()) {\n                            this._replaceBtn.focus();\n                        }\n                        else {\n                            this._codeEditor.focus();\n                        }\n                        e.preventDefault();\n                    }\n                }\n            }\n        }));\n        // Replace input\n        this._replaceInput = this._register(new ContextScopedReplaceInput(null, undefined, {\n            label: NLS_REPLACE_INPUT_LABEL,\n            placeholder: NLS_REPLACE_INPUT_PLACEHOLDER,\n            appendPreserveCaseLabel: this._keybindingLabelFor(FIND_IDS.TogglePreserveCaseCommand),\n            history: [],\n            flexibleHeight,\n            flexibleWidth,\n            flexibleMaxHeight: 118,\n            showHistoryHint: () => showHistoryKeybindingHint(this._keybindingService),\n            inputBoxStyles: defaultInputBoxStyles,\n            toggleStyles: defaultToggleStyles\n        }, this._contextKeyService, true));\n        this._replaceInput.setPreserveCase(!!this._state.preserveCase);\n        this._register(this._replaceInput.onKeyDown((e) => this._onReplaceInputKeyDown(e)));\n        this._register(this._replaceInput.inputBox.onDidChange(() => {\n            this._state.change({ replaceString: this._replaceInput.inputBox.value }, false);\n        }));\n        this._register(this._replaceInput.inputBox.onDidHeightChange((e) => {\n            if (this._isReplaceVisible && this._tryUpdateHeight()) {\n                this._showViewZone();\n            }\n        }));\n        this._register(this._replaceInput.onDidOptionChange(() => {\n            this._state.change({\n                preserveCase: this._replaceInput.getPreserveCase()\n            }, true);\n        }));\n        this._register(this._replaceInput.onPreserveCaseKeyDown((e) => {\n            if (e.equals(2 /* KeyCode.Tab */)) {\n                if (this._prevBtn.isEnabled()) {\n                    this._prevBtn.focus();\n                }\n                else if (this._nextBtn.isEnabled()) {\n                    this._nextBtn.focus();\n                }\n                else if (this._toggleSelectionFind.enabled) {\n                    this._toggleSelectionFind.focus();\n                }\n                else if (this._closeBtn.isEnabled()) {\n                    this._closeBtn.focus();\n                }\n                e.preventDefault();\n            }\n        }));\n        // Create scoped hover delegate for replace actions\n        const replaceHoverDelegate = this._register(createInstantHoverDelegate());\n        // Replace one button\n        this._replaceBtn = this._register(new SimpleButton({\n            label: NLS_REPLACE_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.ReplaceOneAction),\n            icon: findReplaceIcon,\n            hoverDelegate: replaceHoverDelegate,\n            onTrigger: () => {\n                this._controller.replace();\n            },\n            onKeyDown: (e) => {\n                if (e.equals(1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */)) {\n                    this._closeBtn.focus();\n                    e.preventDefault();\n                }\n            }\n        }));\n        // Replace all button\n        this._replaceAllBtn = this._register(new SimpleButton({\n            label: NLS_REPLACE_ALL_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.ReplaceAllAction),\n            icon: findReplaceAllIcon,\n            hoverDelegate: replaceHoverDelegate,\n            onTrigger: () => {\n                this._controller.replaceAll();\n            }\n        }));\n        const replacePart = document.createElement('div');\n        replacePart.className = 'replace-part';\n        replacePart.appendChild(this._replaceInput.domNode);\n        const replaceActionsContainer = document.createElement('div');\n        replaceActionsContainer.className = 'replace-actions';\n        replacePart.appendChild(replaceActionsContainer);\n        replaceActionsContainer.appendChild(this._replaceBtn.domNode);\n        replaceActionsContainer.appendChild(this._replaceAllBtn.domNode);\n        // Toggle replace button\n        this._toggleReplaceBtn = this._register(new SimpleButton({\n            label: NLS_TOGGLE_REPLACE_MODE_BTN_LABEL,\n            className: 'codicon toggle left',\n            onTrigger: () => {\n                this._state.change({ isReplaceRevealed: !this._isReplaceVisible }, false);\n                if (this._isReplaceVisible) {\n                    this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n                    this._replaceInput.inputBox.layout();\n                }\n                this._showViewZone();\n            }\n        }));\n        this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);\n        // Widget\n        this._domNode = document.createElement('div');\n        this._domNode.className = 'editor-widget find-widget';\n        this._domNode.setAttribute('aria-hidden', 'true');\n        this._domNode.ariaLabel = NLS_FIND_DIALOG_LABEL;\n        this._domNode.role = 'dialog';\n        // We need to set this explicitly, otherwise on IE11, the width inheritence of flex doesn't work.\n        this._domNode.style.width = `${FIND_WIDGET_INITIAL_WIDTH}px`;\n        this._domNode.appendChild(this._toggleReplaceBtn.domNode);\n        this._domNode.appendChild(findPart);\n        this._domNode.appendChild(this._closeBtn.domNode);\n        this._domNode.appendChild(replacePart);\n        this._resizeSash = this._register(new Sash(this._domNode, this, { orientation: 0 /* Orientation.VERTICAL */, size: 2 }));\n        this._resized = false;\n        let originalWidth = FIND_WIDGET_INITIAL_WIDTH;\n        this._register(this._resizeSash.onDidStart(() => {\n            originalWidth = dom.getTotalWidth(this._domNode);\n        }));\n        this._register(this._resizeSash.onDidChange((evt) => {\n            this._resized = true;\n            const width = originalWidth + evt.startX - evt.currentX;\n            if (width < FIND_WIDGET_INITIAL_WIDTH) {\n                // narrow down the find widget should be handled by CSS.\n                return;\n            }\n            const maxWidth = parseFloat(dom.getComputedStyle(this._domNode).maxWidth) || 0;\n            if (width > maxWidth) {\n                return;\n            }\n            this._domNode.style.width = `${width}px`;\n            if (this._isReplaceVisible) {\n                this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n            }\n            this._findInput.inputBox.layout();\n            this._tryUpdateHeight();\n        }));\n        this._register(this._resizeSash.onDidReset(() => {\n            // users double click on the sash\n            const currentWidth = dom.getTotalWidth(this._domNode);\n            if (currentWidth < FIND_WIDGET_INITIAL_WIDTH) {\n                // The editor is narrow and the width of the find widget is controlled fully by CSS.\n                return;\n            }\n            let width = FIND_WIDGET_INITIAL_WIDTH;\n            if (!this._resized || currentWidth === FIND_WIDGET_INITIAL_WIDTH) {\n                // 1. never resized before, double click should maximizes it\n                // 2. users resized it already but its width is the same as default\n                const layoutInfo = this._codeEditor.getLayoutInfo();\n                width = layoutInfo.width - 28 - layoutInfo.minimap.minimapWidth - 15;\n                this._resized = true;\n            }\n            else {\n                /**\n                 * no op, the find widget should be shrinked to its default size.\n                 */\n            }\n            this._domNode.style.width = `${width}px`;\n            if (this._isReplaceVisible) {\n                this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n            }\n            this._findInput.inputBox.layout();\n        }));\n    }\n    updateAccessibilitySupport() {\n        const value = this._codeEditor.getOption(2 /* EditorOption.accessibilitySupport */);\n        this._findInput.setFocusInputOnOptionClick(value !== 2 /* AccessibilitySupport.Enabled */);\n    }\n}\nFindWidget.ID = 'editor.contrib.findWidget';\nexport class SimpleButton extends Widget {\n    constructor(opts) {\n        var _a;\n        super();\n        this._opts = opts;\n        let className = 'button';\n        if (this._opts.className) {\n            className = className + ' ' + this._opts.className;\n        }\n        if (this._opts.icon) {\n            className = className + ' ' + ThemeIcon.asClassName(this._opts.icon);\n        }\n        this._domNode = document.createElement('div');\n        this._domNode.tabIndex = 0;\n        this._domNode.className = className;\n        this._domNode.setAttribute('role', 'button');\n        this._domNode.setAttribute('aria-label', this._opts.label);\n        this._register(setupCustomHover((_a = opts.hoverDelegate) !== null && _a !== void 0 ? _a : getDefaultHoverDelegate('element'), this._domNode, this._opts.label));\n        this.onclick(this._domNode, (e) => {\n            this._opts.onTrigger();\n            e.preventDefault();\n        });\n        this.onkeydown(this._domNode, (e) => {\n            var _a, _b;\n            if (e.equals(10 /* KeyCode.Space */) || e.equals(3 /* KeyCode.Enter */)) {\n                this._opts.onTrigger();\n                e.preventDefault();\n                return;\n            }\n            (_b = (_a = this._opts).onKeyDown) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n        });\n    }\n    get domNode() {\n        return this._domNode;\n    }\n    isEnabled() {\n        return (this._domNode.tabIndex >= 0);\n    }\n    focus() {\n        this._domNode.focus();\n    }\n    setEnabled(enabled) {\n        this._domNode.classList.toggle('disabled', !enabled);\n        this._domNode.setAttribute('aria-disabled', String(!enabled));\n        this._domNode.tabIndex = enabled ? 0 : -1;\n    }\n    setExpanded(expanded) {\n        this._domNode.setAttribute('aria-expanded', String(!!expanded));\n        if (expanded) {\n            this._domNode.classList.remove(...ThemeIcon.asClassNameArray(findCollapsedIcon));\n            this._domNode.classList.add(...ThemeIcon.asClassNameArray(findExpandedIcon));\n        }\n        else {\n            this._domNode.classList.remove(...ThemeIcon.asClassNameArray(findExpandedIcon));\n            this._domNode.classList.add(...ThemeIcon.asClassNameArray(findCollapsedIcon));\n        }\n    }\n}\n// theming\nregisterThemingParticipant((theme, collector) => {\n    const findMatchHighlightBorder = theme.getColor(editorFindMatchHighlightBorder);\n    if (findMatchHighlightBorder) {\n        collector.addRule(`.monaco-editor .findMatch { border: 1px ${isHighContrast(theme.type) ? 'dotted' : 'solid'} ${findMatchHighlightBorder}; box-sizing: border-box; }`);\n    }\n    const findRangeHighlightBorder = theme.getColor(editorFindRangeHighlightBorder);\n    if (findRangeHighlightBorder) {\n        collector.addRule(`.monaco-editor .findScope { border: 1px ${isHighContrast(theme.type) ? 'dashed' : 'solid'} ${findRangeHighlightBorder}; }`);\n    }\n    const hcBorder = theme.getColor(contrastBorder);\n    if (hcBorder) {\n        collector.addRule(`.monaco-editor .find-widget { border: 1px solid ${hcBorder}; }`);\n    }\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}