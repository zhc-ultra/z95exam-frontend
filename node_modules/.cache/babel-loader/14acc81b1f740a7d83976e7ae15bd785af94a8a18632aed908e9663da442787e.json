{"ast":null,"code":"import \"core-js/modules/es.array.concat.js\";\nimport { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveDynamicComponent as _resolveDynamicComponent, createBlock as _createBlock, createTextVNode as _createTextVNode, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nvar _withScopeId = function _withScopeId(n) {\n  return _pushScopeId(\"data-v-ca3f3950\"), n = n(), _popScopeId(), n;\n};\nvar _hoisted_1 = {\n  key: 0\n};\nvar _hoisted_2 = {\n  key: 1\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_a_card = _resolveComponent(\"a-card\");\n  var _component_a_form_item = _resolveComponent(\"a-form-item\");\n  var _component_a_button = _resolveComponent(\"a-button\");\n  var _component_a_form = _resolveComponent(\"a-form\");\n  var _component_a_spin = _resolveComponent(\"a-spin\");\n  return $setup.exam ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_a_card, null, {\n    \"default\": _withCtx(function () {\n      return [_createElementVNode(\"h1\", null, _toDisplayString($setup.exam.title), 1 /* TEXT */), _createElementVNode(\"p\", null, \"考试日期: \" + _toDisplayString($setup.formatDate($setup.exam.examDate)), 1 /* TEXT */), _createElementVNode(\"p\", null, \"考试时长: \" + _toDisplayString($setup.exam.examTime) + \" 分钟\", 1 /* TEXT */)];\n    }),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_a_form, {\n    model: $setup.answers,\n    layout: \"vertical\",\n    onSubmit: $setup.handleSubmit\n  }, {\n    \"default\": _withCtx(function () {\n      return [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.exam.questions, function (question, index) {\n        return _openBlock(), _createElementBlock(\"div\", {\n          key: question.id\n        }, [_createVNode(_component_a_form_item, {\n          label: \"\\u9898\\u76EE \".concat(index + 1, \": \").concat(question.title)\n        }, {\n          \"default\": _withCtx(function () {\n            return [(_openBlock(), _createBlock(_resolveDynamicComponent($setup.getQuestionComponent(question.type)), {\n              question: question,\n              modelValue: $setup.answers[question.id],\n              \"onUpdate:modelValue\": function onUpdateModelValue($event) {\n                return $setup.answers[question.id] = $event;\n              }\n            }, null, 8 /* PROPS */, [\"question\", \"modelValue\", \"onUpdate:modelValue\"]))];\n          }),\n          _: 2 /* DYNAMIC */\n        }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"label\"])]);\n      }), 128 /* KEYED_FRAGMENT */)), _createVNode(_component_a_form_item, null, {\n        \"default\": _withCtx(function () {\n          return [_createVNode(_component_a_button, {\n            type: \"primary\",\n            \"html-type\": \"submit\"\n          }, {\n            \"default\": _withCtx(function () {\n              return [_createTextVNode(\"提交\")];\n            }),\n            _: 1 /* STABLE */\n          })];\n        }),\n        _: 1 /* STABLE */\n      })];\n    }),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"model\", \"onSubmit\"])])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_createVNode(_component_a_spin, null, {\n    \"default\": _withCtx(function () {\n      return [_createTextVNode(\"加载中...\")];\n    }),\n    _: 1 /* STABLE */\n  })]));\n}","map":{"version":3,"names":["key","$setup","exam","_createElementBlock","_hoisted_1","_createVNode","_component_a_card","_withCtx","_createElementVNode","_toDisplayString","title","formatDate","examDate","examTime","_","_component_a_form","model","answers","layout","onSubmit","handleSubmit","_Fragment","_renderList","questions","question","index","id","_component_a_form_item","label","concat","_createBlock","_resolveDynamicComponent","getQuestionComponent","type","modelValue","onUpdateModelValue","$event","_component_a_button","_createTextVNode","_hoisted_2","_component_a_spin"],"sources":["/Users/yinger/Desktop/z95_exam_frontend/src/views/student/DoExam.vue"],"sourcesContent":["<template>\n  <div v-if=\"exam\">\n    <a-card>\n      <h1>{{ exam.title }}</h1>\n      <p>考试日期: {{ formatDate(exam.examDate) }}</p>\n      <p>考试时长: {{ exam.examTime }} 分钟</p>\n    </a-card>\n    <a-form :model=\"answers\" layout=\"vertical\" @submit=\"handleSubmit\">\n      <div v-for=\"(question, index) in exam.questions\" :key=\"question.id\">\n        <a-form-item :label=\"`题目 ${index + 1}: ${question.title}`\">\n          <component\n            :is=\"getQuestionComponent(question.type)\"\n            :question=\"question\"\n            v-model=\"answers[question.id]\"\n          />\n        </a-form-item>\n      </div>\n      <a-form-item>\n        <a-button type=\"primary\" html-type=\"submit\">提交</a-button>\n      </a-form-item>\n    </a-form>\n  </div>\n  <div v-else>\n    <a-spin>加载中...</a-spin>\n  </div>\n</template>\n\n<script>\nimport { ref, reactive, onMounted } from \"vue\";\nimport { useRoute } from \"vue-router\";\nimport { message } from \"@arco-design/web-vue\";\nimport SingleChoice from \"./SingleChoice.vue\";\nimport MultipleChoice from \"./MultipleChoice.vue\";\nimport TrueFalse from \"./TrueFalse.vue\";\nimport Subjective from \"./Subjective.vue\";\nimport { TeacherControllerService } from \"../../../generated\";\n\nexport default {\n  name: \"DoExam\",\n  components: {\n    SingleChoice,\n    MultipleChoice,\n    TrueFalse,\n    Subjective,\n  },\n  setup() {\n    const route = useRoute();\n    const exam = ref(null);\n    const answers = reactive({});\n\n    const queryExamByIdUsingPost = async (id) => {\n      try {\n        const id = route.params.id;\n        const response = await TeacherControllerService.queryExamByIdUsingPost(\n          id\n        );\n        if (response.code === 0) {\n          exam.value = response.data;\n          exam.value.questions.forEach((question) => {\n            answers[question.id] = question.type === 1 ? [] : \"\"; // 初始化答案，单选和判断题为空字符串，多选题为空数组\n          });\n        }\n      } catch (error) {\n        console.error(\"Failed to fetch exam data:\", error);\n      }\n    };\n\n    const handleSubmit = () => {\n      // 处理提交逻辑，这里可以将答案发送到后端\n      console.log(\"学生答案:\", answers);\n      message.success(\"提交成功\");\n    };\n\n    const getQuestionComponent = (type) => {\n      switch (type) {\n        case 0:\n          return \"SingleChoice\";\n        case 1:\n          return \"MultipleChoice\";\n        case 2:\n          return \"TrueFalse\";\n        case 3:\n        case 4:\n          return \"Subjective\";\n        default:\n          return \"div\";\n      }\n    };\n\n    onMounted(() => {\n      queryExamByIdUsingPost();\n    });\n\n    const formatDate = (dateStr) => {\n      const date = new Date(dateStr);\n      return date.toLocaleDateString();\n    };\n\n    return {\n      exam,\n      answers,\n      handleSubmit,\n      formatDate,\n      getQuestionComponent,\n    };\n  },\n};\n</script>\n\n<style scoped>\n/* 你的样式 */\n</style>\n"],"mappings":";;;;;;EAAAA,GAAA;AAAA;;EAAAA,GAAA;AAAA;;;;;;;SACaC,MAAA,CAAAC,IAAI,I,cAAfC,mBAAA,CAoBM,OArBRC,UAAA,GAEIC,YAAA,CAISC,iBAAA;IANb,WAAAC,QAAA,CAGM;MAAA,OAAyB,CAAzBC,mBAAA,CAAyB,YAAAC,gBAAA,CAAlBR,MAAA,CAAAC,IAAI,CAACQ,KAAK,kBACjBF,mBAAA,CAA4C,WAAzC,QAAM,GAAAC,gBAAA,CAAGR,MAAA,CAAAU,UAAU,CAACV,MAAA,CAAAC,IAAI,CAACU,QAAQ,mBACpCJ,mBAAA,CAAmC,WAAhC,QAAM,GAAAC,gBAAA,CAAGR,MAAA,CAAAC,IAAI,CAACW,QAAQ,IAAG,KAAG,gB;;IALrCC,CAAA;MAOIT,YAAA,CAaSU,iBAAA;IAbAC,KAAK,EAAEf,MAAA,CAAAgB,OAAO;IAAEC,MAAM,EAAC,UAAU;IAAEC,QAAM,EAAElB,MAAA,CAAAmB;;IAPxD,WAAAb,QAAA,CAQW;MAAA,OAA2C,E,kBAAhDJ,mBAAA,CAQMkB,SAAA,QAhBZC,WAAA,CAQuCrB,MAAA,CAAAC,IAAI,CAACqB,SAAS,EARrD,UAQmBC,QAAQ,EAAEC,KAAK;6BAA5BtB,mBAAA,CAQM;UAR4CH,GAAG,EAAEwB,QAAQ,CAACE;YAC9DrB,YAAA,CAMcsB,sBAAA;UANAC,KAAK,kBAAAC,MAAA,CAAQJ,KAAK,YAAAI,MAAA,CAASL,QAAQ,CAACd,KAAK;;UAT/D,WAAAH,QAAA,CAUU;YAAA,OAIE,E,cAJFuB,YAAA,CAIEC,wBAdZ,CAWiB9B,MAAA,CAAA+B,oBAAoB,CAACR,QAAQ,CAACS,IAAI;cACtCT,QAAQ,EAAEA,QAAQ;cAZ/BU,UAAA,EAaqBjC,MAAA,CAAAgB,OAAO,CAACO,QAAQ,CAACE,EAAE;cAbxC,gCAAAS,mBAAAC,MAAA;gBAAA,OAaqBnC,MAAA,CAAAgB,OAAO,CAACO,QAAQ,CAACE,EAAE,IAAAU,MAAA;cAAA;;;UAbxCtB,CAAA;;sCAiBMT,YAAA,CAEcsB,sBAAA;QAnBpB,WAAApB,QAAA,CAkBQ;UAAA,OAAyD,CAAzDF,YAAA,CAAyDgC,mBAAA;YAA/CJ,IAAI,EAAC,SAAS;YAAC,WAAS,EAAC;;YAlB3C,WAAA1B,QAAA,CAkBoD;cAAA,OAAE,CAlBtD+B,gBAAA,CAkBoD,IAAE,E;;YAlBtDxB,CAAA;;;QAAAA,CAAA;;;IAAAA,CAAA;+DAsBEX,mBAAA,CAEM,OAxBRoC,UAAA,GAuBIlC,YAAA,CAAuBmC,iBAAA;IAvB3B,WAAAjC,QAAA,CAuBY;MAAA,OAAM,CAvBlB+B,gBAAA,CAuBY,QAAM,E;;IAvBlBxB,CAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}