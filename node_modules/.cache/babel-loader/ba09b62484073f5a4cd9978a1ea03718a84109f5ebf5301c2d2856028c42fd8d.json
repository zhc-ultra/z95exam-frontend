{"ast":null,"code":"import _callSuper from \"/Users/yinger/Desktop/z95_exam_frontend/node_modules/@babel/runtime/helpers/esm/callSuper.js\";\nimport _inherits from \"/Users/yinger/Desktop/z95_exam_frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _slicedToArray from \"/Users/yinger/Desktop/z95_exam_frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _createForOfIteratorHelper from \"/Users/yinger/Desktop/z95_exam_frontend/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _classCallCheck from \"/Users/yinger/Desktop/z95_exam_frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/yinger/Desktop/z95_exam_frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _typeof from \"/Users/yinger/Desktop/z95_exam_frontend/node_modules/@babel/runtime/helpers/esm/typeof.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.object.define-property.js\";\nimport \"core-js/modules/es.object.get-own-property-descriptor.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.reflect.to-string-tag.js\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if ((typeof Reflect === \"undefined\" ? \"undefined\" : _typeof(Reflect)) === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar ContextMenuController_1;\nimport * as dom from '../../../../base/browser/dom.js';\nimport { ActionViewItem } from '../../../../base/browser/ui/actionbar/actionViewItems.js';\nimport { Separator, SubmenuAction } from '../../../../base/common/actions.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { isIOS } from '../../../../base/common/platform.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nimport { IMenuService, MenuId, SubmenuItemAction } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService, IContextViewService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IWorkspaceContextService, isStandaloneEditorWorkspace } from '../../../../platform/workspace/common/workspace.js';\nvar ContextMenuController = ContextMenuController_1 = /*#__PURE__*/function () {\n  function ContextMenuController(editor, _contextMenuService, _contextViewService, _contextKeyService, _keybindingService, _menuService, _configurationService, _workspaceContextService) {\n    var _this = this;\n    _classCallCheck(this, ContextMenuController);\n    this._contextMenuService = _contextMenuService;\n    this._contextViewService = _contextViewService;\n    this._contextKeyService = _contextKeyService;\n    this._keybindingService = _keybindingService;\n    this._menuService = _menuService;\n    this._configurationService = _configurationService;\n    this._workspaceContextService = _workspaceContextService;\n    this._toDispose = new DisposableStore();\n    this._contextMenuIsBeingShownCount = 0;\n    this._editor = editor;\n    this._toDispose.add(this._editor.onContextMenu(function (e) {\n      return _this._onContextMenu(e);\n    }));\n    this._toDispose.add(this._editor.onMouseWheel(function (e) {\n      if (_this._contextMenuIsBeingShownCount > 0) {\n        var view = _this._contextViewService.getContextViewElement();\n        var target = e.srcElement;\n        // Event triggers on shadow root host first\n        // Check if the context view is under this host before hiding it #103169\n        if (!(target.shadowRoot && dom.getShadowRoot(view) === target.shadowRoot)) {\n          _this._contextViewService.hideContextView();\n        }\n      }\n    }));\n    this._toDispose.add(this._editor.onKeyDown(function (e) {\n      if (!_this._editor.getOption(24 /* EditorOption.contextmenu */)) {\n        return; // Context menu is turned off through configuration\n      }\n      if (e.keyCode === 58 /* KeyCode.ContextMenu */) {\n        // Chrome is funny like that\n        e.preventDefault();\n        e.stopPropagation();\n        _this.showContextMenu();\n      }\n    }));\n  }\n  return _createClass(ContextMenuController, [{\n    key: \"_onContextMenu\",\n    value: function _onContextMenu(e) {\n      if (!this._editor.hasModel()) {\n        return;\n      }\n      if (!this._editor.getOption(24 /* EditorOption.contextmenu */)) {\n        this._editor.focus();\n        // Ensure the cursor is at the position of the mouse click\n        if (e.target.position && !this._editor.getSelection().containsPosition(e.target.position)) {\n          this._editor.setPosition(e.target.position);\n        }\n        return; // Context menu is turned off through configuration\n      }\n      if (e.target.type === 12 /* MouseTargetType.OVERLAY_WIDGET */) {\n        return; // allow native menu on widgets to support right click on input field for example in find\n      }\n      if (e.target.type === 6 /* MouseTargetType.CONTENT_TEXT */ && e.target.detail.injectedText) {\n        return; // allow native menu on injected text\n      }\n      e.event.preventDefault();\n      e.event.stopPropagation();\n      if (e.target.type === 11 /* MouseTargetType.SCROLLBAR */) {\n        return this._showScrollbarContextMenu(e.event);\n      }\n      if (e.target.type !== 6 /* MouseTargetType.CONTENT_TEXT */ && e.target.type !== 7 /* MouseTargetType.CONTENT_EMPTY */ && e.target.type !== 1 /* MouseTargetType.TEXTAREA */) {\n        return; // only support mouse click into text or native context menu key for now\n      }\n      // Ensure the editor gets focus if it hasn't, so the right events are being sent to other contributions\n      this._editor.focus();\n      // Ensure the cursor is at the position of the mouse click\n      if (e.target.position) {\n        var hasSelectionAtPosition = false;\n        var _iterator = _createForOfIteratorHelper(this._editor.getSelections()),\n          _step;\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var selection = _step.value;\n            if (selection.containsPosition(e.target.position)) {\n              hasSelectionAtPosition = true;\n              break;\n            }\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n        if (!hasSelectionAtPosition) {\n          this._editor.setPosition(e.target.position);\n        }\n      }\n      // Unless the user triggerd the context menu through Shift+F10, use the mouse position as menu position\n      var anchor = null;\n      if (e.target.type !== 1 /* MouseTargetType.TEXTAREA */) {\n        anchor = e.event;\n      }\n      // Show the context menu\n      this.showContextMenu(anchor);\n    }\n  }, {\n    key: \"showContextMenu\",\n    value: function showContextMenu(anchor) {\n      if (!this._editor.getOption(24 /* EditorOption.contextmenu */)) {\n        return; // Context menu is turned off through configuration\n      }\n      if (!this._editor.hasModel()) {\n        return;\n      }\n      // Find actions available for menu\n      var menuActions = this._getMenuActions(this._editor.getModel(), this._editor.isSimpleWidget ? MenuId.SimpleEditorContext : MenuId.EditorContext);\n      // Show menu if we have actions to show\n      if (menuActions.length > 0) {\n        this._doShowContextMenu(menuActions, anchor);\n      }\n    }\n  }, {\n    key: \"_getMenuActions\",\n    value: function _getMenuActions(model, menuId) {\n      var result = [];\n      // get menu groups\n      var menu = this._menuService.createMenu(menuId, this._contextKeyService);\n      var groups = menu.getActions({\n        arg: model.uri\n      });\n      menu.dispose();\n      // translate them into other actions\n      var _iterator2 = _createForOfIteratorHelper(groups),\n        _step2;\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var group = _step2.value;\n          var _group = _slicedToArray(group, 2),\n            actions = _group[1];\n          var addedItems = 0;\n          var _iterator3 = _createForOfIteratorHelper(actions),\n            _step3;\n          try {\n            for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n              var action = _step3.value;\n              if (action instanceof SubmenuItemAction) {\n                var subActions = this._getMenuActions(model, action.item.submenu);\n                if (subActions.length > 0) {\n                  result.push(new SubmenuAction(action.id, action.label, subActions));\n                  addedItems++;\n                }\n              } else {\n                result.push(action);\n                addedItems++;\n              }\n            }\n          } catch (err) {\n            _iterator3.e(err);\n          } finally {\n            _iterator3.f();\n          }\n          if (addedItems) {\n            result.push(new Separator());\n          }\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n      if (result.length) {\n        result.pop(); // remove last separator\n      }\n      return result;\n    }\n  }, {\n    key: \"_doShowContextMenu\",\n    value: function _doShowContextMenu(actions) {\n      var _this2 = this;\n      var event = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      if (!this._editor.hasModel()) {\n        return;\n      }\n      // Disable hover\n      var oldHoverSetting = this._editor.getOption(60 /* EditorOption.hover */);\n      this._editor.updateOptions({\n        hover: {\n          enabled: false\n        }\n      });\n      var anchor = event;\n      if (!anchor) {\n        // Ensure selection is visible\n        this._editor.revealPosition(this._editor.getPosition(), 1 /* ScrollType.Immediate */);\n        this._editor.render();\n        var cursorCoords = this._editor.getScrolledVisiblePosition(this._editor.getPosition());\n        // Translate to absolute editor position\n        var editorCoords = dom.getDomNodePagePosition(this._editor.getDomNode());\n        var posx = editorCoords.left + cursorCoords.left;\n        var posy = editorCoords.top + cursorCoords.top + cursorCoords.height;\n        anchor = {\n          x: posx,\n          y: posy\n        };\n      }\n      var useShadowDOM = this._editor.getOption(127 /* EditorOption.useShadowDOM */) && !isIOS; // Do not use shadow dom on IOS #122035\n      // Show menu\n      this._contextMenuIsBeingShownCount++;\n      this._contextMenuService.showContextMenu({\n        domForShadowRoot: useShadowDOM ? this._editor.getDomNode() : undefined,\n        getAnchor: function getAnchor() {\n          return anchor;\n        },\n        getActions: function getActions() {\n          return actions;\n        },\n        getActionViewItem: function getActionViewItem(action) {\n          var keybinding = _this2._keybindingFor(action);\n          if (keybinding) {\n            return new ActionViewItem(action, action, {\n              label: true,\n              keybinding: keybinding.getLabel(),\n              isMenu: true\n            });\n          }\n          var customActionViewItem = action;\n          if (typeof customActionViewItem.getActionViewItem === 'function') {\n            return customActionViewItem.getActionViewItem();\n          }\n          return new ActionViewItem(action, action, {\n            icon: true,\n            label: true,\n            isMenu: true\n          });\n        },\n        getKeyBinding: function getKeyBinding(action) {\n          return _this2._keybindingFor(action);\n        },\n        onHide: function onHide(wasCancelled) {\n          _this2._contextMenuIsBeingShownCount--;\n          _this2._editor.updateOptions({\n            hover: oldHoverSetting\n          });\n        }\n      });\n    }\n  }, {\n    key: \"_showScrollbarContextMenu\",\n    value: function _showScrollbarContextMenu(anchor) {\n      var _this3 = this;\n      if (!this._editor.hasModel()) {\n        return;\n      }\n      if (isStandaloneEditorWorkspace(this._workspaceContextService.getWorkspace())) {\n        // can't update the configuration properly in the standalone editor\n        return;\n      }\n      var minimapOptions = this._editor.getOption(73 /* EditorOption.minimap */);\n      var lastId = 0;\n      var createAction = function createAction(opts) {\n        return {\n          id: \"menu-action-\".concat(++lastId),\n          label: opts.label,\n          tooltip: '',\n          \"class\": undefined,\n          enabled: typeof opts.enabled === 'undefined' ? true : opts.enabled,\n          checked: opts.checked,\n          run: opts.run\n        };\n      };\n      var createSubmenuAction = function createSubmenuAction(label, actions) {\n        return new SubmenuAction(\"menu-action-\".concat(++lastId), label, actions, undefined);\n      };\n      var createEnumAction = function createEnumAction(label, enabled, configName, configuredValue, options) {\n        if (!enabled) {\n          return createAction({\n            label: label,\n            enabled: enabled,\n            run: function run() {}\n          });\n        }\n        var createRunner = function createRunner(value) {\n          return function () {\n            _this3._configurationService.updateValue(configName, value);\n          };\n        };\n        var actions = [];\n        var _iterator4 = _createForOfIteratorHelper(options),\n          _step4;\n        try {\n          for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n            var option = _step4.value;\n            actions.push(createAction({\n              label: option.label,\n              checked: configuredValue === option.value,\n              run: createRunner(option.value)\n            }));\n          }\n        } catch (err) {\n          _iterator4.e(err);\n        } finally {\n          _iterator4.f();\n        }\n        return createSubmenuAction(label, actions);\n      };\n      var actions = [];\n      actions.push(createAction({\n        label: nls.localize('context.minimap.minimap', \"Minimap\"),\n        checked: minimapOptions.enabled,\n        run: function run() {\n          _this3._configurationService.updateValue(\"editor.minimap.enabled\", !minimapOptions.enabled);\n        }\n      }));\n      actions.push(new Separator());\n      actions.push(createAction({\n        label: nls.localize('context.minimap.renderCharacters', \"Render Characters\"),\n        enabled: minimapOptions.enabled,\n        checked: minimapOptions.renderCharacters,\n        run: function run() {\n          _this3._configurationService.updateValue(\"editor.minimap.renderCharacters\", !minimapOptions.renderCharacters);\n        }\n      }));\n      actions.push(createEnumAction(nls.localize('context.minimap.size', \"Vertical size\"), minimapOptions.enabled, 'editor.minimap.size', minimapOptions.size, [{\n        label: nls.localize('context.minimap.size.proportional', \"Proportional\"),\n        value: 'proportional'\n      }, {\n        label: nls.localize('context.minimap.size.fill', \"Fill\"),\n        value: 'fill'\n      }, {\n        label: nls.localize('context.minimap.size.fit', \"Fit\"),\n        value: 'fit'\n      }]));\n      actions.push(createEnumAction(nls.localize('context.minimap.slider', \"Slider\"), minimapOptions.enabled, 'editor.minimap.showSlider', minimapOptions.showSlider, [{\n        label: nls.localize('context.minimap.slider.mouseover', \"Mouse Over\"),\n        value: 'mouseover'\n      }, {\n        label: nls.localize('context.minimap.slider.always', \"Always\"),\n        value: 'always'\n      }]));\n      var useShadowDOM = this._editor.getOption(127 /* EditorOption.useShadowDOM */) && !isIOS; // Do not use shadow dom on IOS #122035\n      this._contextMenuIsBeingShownCount++;\n      this._contextMenuService.showContextMenu({\n        domForShadowRoot: useShadowDOM ? this._editor.getDomNode() : undefined,\n        getAnchor: function getAnchor() {\n          return anchor;\n        },\n        getActions: function getActions() {\n          return actions;\n        },\n        onHide: function onHide(wasCancelled) {\n          _this3._contextMenuIsBeingShownCount--;\n          _this3._editor.focus();\n        }\n      });\n    }\n  }, {\n    key: \"_keybindingFor\",\n    value: function _keybindingFor(action) {\n      return this._keybindingService.lookupKeybinding(action.id);\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      if (this._contextMenuIsBeingShownCount > 0) {\n        this._contextViewService.hideContextView();\n      }\n      this._toDispose.dispose();\n    }\n  }], [{\n    key: \"get\",\n    value: function get(editor) {\n      return editor.getContribution(ContextMenuController_1.ID);\n    }\n  }]);\n}();\nContextMenuController.ID = 'editor.contrib.contextmenu';\nContextMenuController = ContextMenuController_1 = __decorate([__param(1, IContextMenuService), __param(2, IContextViewService), __param(3, IContextKeyService), __param(4, IKeybindingService), __param(5, IMenuService), __param(6, IConfigurationService), __param(7, IWorkspaceContextService)], ContextMenuController);\nexport { ContextMenuController };\nvar ShowContextMenu = /*#__PURE__*/function (_EditorAction) {\n  function ShowContextMenu() {\n    _classCallCheck(this, ShowContextMenu);\n    return _callSuper(this, ShowContextMenu, [{\n      id: 'editor.action.showContextMenu',\n      label: nls.localize('action.showContextMenu.label', \"Show Editor Context Menu\"),\n      alias: 'Show Editor Context Menu',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 1024 /* KeyMod.Shift */ | 68 /* KeyCode.F10 */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n      }\n    }]);\n  }\n  _inherits(ShowContextMenu, _EditorAction);\n  return _createClass(ShowContextMenu, [{\n    key: \"run\",\n    value: function run(accessor, editor) {\n      var _a;\n      (_a = ContextMenuController.get(editor)) === null || _a === void 0 ? void 0 : _a.showContextMenu();\n    }\n  }]);\n}(EditorAction);\nregisterEditorContribution(ContextMenuController.ID, ContextMenuController, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\nregisterEditorAction(ShowContextMenu);","map":{"version":3,"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","_typeof","decorate","i","defineProperty","__param","paramIndex","decorator","ContextMenuController_1","dom","ActionViewItem","Separator","SubmenuAction","DisposableStore","isIOS","EditorAction","registerEditorAction","registerEditorContribution","EditorContextKeys","nls","IMenuService","MenuId","SubmenuItemAction","IContextKeyService","IContextMenuService","IContextViewService","IKeybindingService","IConfigurationService","IWorkspaceContextService","isStandaloneEditorWorkspace","ContextMenuController","editor","_contextMenuService","_contextViewService","_contextKeyService","_keybindingService","_menuService","_configurationService","_workspaceContextService","_this","_classCallCheck","_toDispose","_contextMenuIsBeingShownCount","_editor","add","onContextMenu","e","_onContextMenu","onMouseWheel","view","getContextViewElement","srcElement","shadowRoot","getShadowRoot","hideContextView","onKeyDown","getOption","keyCode","preventDefault","stopPropagation","showContextMenu","_createClass","value","hasModel","focus","position","getSelection","containsPosition","setPosition","type","detail","injectedText","event","_showScrollbarContextMenu","hasSelectionAtPosition","_iterator","_createForOfIteratorHelper","getSelections","_step","s","n","done","selection","err","f","anchor","menuActions","_getMenuActions","getModel","isSimpleWidget","SimpleEditorContext","EditorContext","_doShowContextMenu","model","menuId","result","menu","createMenu","groups","getActions","arg","uri","dispose","_iterator2","_step2","group","_group","_slicedToArray","actions","addedItems","_iterator3","_step3","action","subActions","item","submenu","push","id","label","pop","_this2","undefined","oldHoverSetting","updateOptions","hover","enabled","revealPosition","getPosition","render","cursorCoords","getScrolledVisiblePosition","editorCoords","getDomNodePagePosition","getDomNode","posx","left","posy","top","height","x","y","useShadowDOM","domForShadowRoot","getAnchor","getActionViewItem","keybinding","_keybindingFor","getLabel","isMenu","customActionViewItem","icon","getKeyBinding","onHide","wasCancelled","_this3","getWorkspace","minimapOptions","lastId","createAction","opts","concat","tooltip","checked","run","createSubmenuAction","createEnumAction","configName","configuredValue","options","createRunner","updateValue","_iterator4","_step4","option","localize","renderCharacters","size","showSlider","lookupKeybinding","get","getContribution","ID","ShowContextMenu","_EditorAction","_callSuper","alias","precondition","kbOpts","kbExpr","textInputFocus","primary","weight","_inherits","accessor","_a"],"sources":["/Users/yinger/Desktop/z95_exam_frontend/node_modules/monaco-editor/esm/vs/editor/contrib/contextmenu/browser/contextmenu.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar ContextMenuController_1;\nimport * as dom from '../../../../base/browser/dom.js';\nimport { ActionViewItem } from '../../../../base/browser/ui/actionbar/actionViewItems.js';\nimport { Separator, SubmenuAction } from '../../../../base/common/actions.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { isIOS } from '../../../../base/common/platform.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nimport { IMenuService, MenuId, SubmenuItemAction } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService, IContextViewService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IWorkspaceContextService, isStandaloneEditorWorkspace } from '../../../../platform/workspace/common/workspace.js';\nlet ContextMenuController = ContextMenuController_1 = class ContextMenuController {\n    static get(editor) {\n        return editor.getContribution(ContextMenuController_1.ID);\n    }\n    constructor(editor, _contextMenuService, _contextViewService, _contextKeyService, _keybindingService, _menuService, _configurationService, _workspaceContextService) {\n        this._contextMenuService = _contextMenuService;\n        this._contextViewService = _contextViewService;\n        this._contextKeyService = _contextKeyService;\n        this._keybindingService = _keybindingService;\n        this._menuService = _menuService;\n        this._configurationService = _configurationService;\n        this._workspaceContextService = _workspaceContextService;\n        this._toDispose = new DisposableStore();\n        this._contextMenuIsBeingShownCount = 0;\n        this._editor = editor;\n        this._toDispose.add(this._editor.onContextMenu((e) => this._onContextMenu(e)));\n        this._toDispose.add(this._editor.onMouseWheel((e) => {\n            if (this._contextMenuIsBeingShownCount > 0) {\n                const view = this._contextViewService.getContextViewElement();\n                const target = e.srcElement;\n                // Event triggers on shadow root host first\n                // Check if the context view is under this host before hiding it #103169\n                if (!(target.shadowRoot && dom.getShadowRoot(view) === target.shadowRoot)) {\n                    this._contextViewService.hideContextView();\n                }\n            }\n        }));\n        this._toDispose.add(this._editor.onKeyDown((e) => {\n            if (!this._editor.getOption(24 /* EditorOption.contextmenu */)) {\n                return; // Context menu is turned off through configuration\n            }\n            if (e.keyCode === 58 /* KeyCode.ContextMenu */) {\n                // Chrome is funny like that\n                e.preventDefault();\n                e.stopPropagation();\n                this.showContextMenu();\n            }\n        }));\n    }\n    _onContextMenu(e) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        if (!this._editor.getOption(24 /* EditorOption.contextmenu */)) {\n            this._editor.focus();\n            // Ensure the cursor is at the position of the mouse click\n            if (e.target.position && !this._editor.getSelection().containsPosition(e.target.position)) {\n                this._editor.setPosition(e.target.position);\n            }\n            return; // Context menu is turned off through configuration\n        }\n        if (e.target.type === 12 /* MouseTargetType.OVERLAY_WIDGET */) {\n            return; // allow native menu on widgets to support right click on input field for example in find\n        }\n        if (e.target.type === 6 /* MouseTargetType.CONTENT_TEXT */ && e.target.detail.injectedText) {\n            return; // allow native menu on injected text\n        }\n        e.event.preventDefault();\n        e.event.stopPropagation();\n        if (e.target.type === 11 /* MouseTargetType.SCROLLBAR */) {\n            return this._showScrollbarContextMenu(e.event);\n        }\n        if (e.target.type !== 6 /* MouseTargetType.CONTENT_TEXT */ && e.target.type !== 7 /* MouseTargetType.CONTENT_EMPTY */ && e.target.type !== 1 /* MouseTargetType.TEXTAREA */) {\n            return; // only support mouse click into text or native context menu key for now\n        }\n        // Ensure the editor gets focus if it hasn't, so the right events are being sent to other contributions\n        this._editor.focus();\n        // Ensure the cursor is at the position of the mouse click\n        if (e.target.position) {\n            let hasSelectionAtPosition = false;\n            for (const selection of this._editor.getSelections()) {\n                if (selection.containsPosition(e.target.position)) {\n                    hasSelectionAtPosition = true;\n                    break;\n                }\n            }\n            if (!hasSelectionAtPosition) {\n                this._editor.setPosition(e.target.position);\n            }\n        }\n        // Unless the user triggerd the context menu through Shift+F10, use the mouse position as menu position\n        let anchor = null;\n        if (e.target.type !== 1 /* MouseTargetType.TEXTAREA */) {\n            anchor = e.event;\n        }\n        // Show the context menu\n        this.showContextMenu(anchor);\n    }\n    showContextMenu(anchor) {\n        if (!this._editor.getOption(24 /* EditorOption.contextmenu */)) {\n            return; // Context menu is turned off through configuration\n        }\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        // Find actions available for menu\n        const menuActions = this._getMenuActions(this._editor.getModel(), this._editor.isSimpleWidget ? MenuId.SimpleEditorContext : MenuId.EditorContext);\n        // Show menu if we have actions to show\n        if (menuActions.length > 0) {\n            this._doShowContextMenu(menuActions, anchor);\n        }\n    }\n    _getMenuActions(model, menuId) {\n        const result = [];\n        // get menu groups\n        const menu = this._menuService.createMenu(menuId, this._contextKeyService);\n        const groups = menu.getActions({ arg: model.uri });\n        menu.dispose();\n        // translate them into other actions\n        for (const group of groups) {\n            const [, actions] = group;\n            let addedItems = 0;\n            for (const action of actions) {\n                if (action instanceof SubmenuItemAction) {\n                    const subActions = this._getMenuActions(model, action.item.submenu);\n                    if (subActions.length > 0) {\n                        result.push(new SubmenuAction(action.id, action.label, subActions));\n                        addedItems++;\n                    }\n                }\n                else {\n                    result.push(action);\n                    addedItems++;\n                }\n            }\n            if (addedItems) {\n                result.push(new Separator());\n            }\n        }\n        if (result.length) {\n            result.pop(); // remove last separator\n        }\n        return result;\n    }\n    _doShowContextMenu(actions, event = null) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        // Disable hover\n        const oldHoverSetting = this._editor.getOption(60 /* EditorOption.hover */);\n        this._editor.updateOptions({\n            hover: {\n                enabled: false\n            }\n        });\n        let anchor = event;\n        if (!anchor) {\n            // Ensure selection is visible\n            this._editor.revealPosition(this._editor.getPosition(), 1 /* ScrollType.Immediate */);\n            this._editor.render();\n            const cursorCoords = this._editor.getScrolledVisiblePosition(this._editor.getPosition());\n            // Translate to absolute editor position\n            const editorCoords = dom.getDomNodePagePosition(this._editor.getDomNode());\n            const posx = editorCoords.left + cursorCoords.left;\n            const posy = editorCoords.top + cursorCoords.top + cursorCoords.height;\n            anchor = { x: posx, y: posy };\n        }\n        const useShadowDOM = this._editor.getOption(127 /* EditorOption.useShadowDOM */) && !isIOS; // Do not use shadow dom on IOS #122035\n        // Show menu\n        this._contextMenuIsBeingShownCount++;\n        this._contextMenuService.showContextMenu({\n            domForShadowRoot: useShadowDOM ? this._editor.getDomNode() : undefined,\n            getAnchor: () => anchor,\n            getActions: () => actions,\n            getActionViewItem: (action) => {\n                const keybinding = this._keybindingFor(action);\n                if (keybinding) {\n                    return new ActionViewItem(action, action, { label: true, keybinding: keybinding.getLabel(), isMenu: true });\n                }\n                const customActionViewItem = action;\n                if (typeof customActionViewItem.getActionViewItem === 'function') {\n                    return customActionViewItem.getActionViewItem();\n                }\n                return new ActionViewItem(action, action, { icon: true, label: true, isMenu: true });\n            },\n            getKeyBinding: (action) => {\n                return this._keybindingFor(action);\n            },\n            onHide: (wasCancelled) => {\n                this._contextMenuIsBeingShownCount--;\n                this._editor.updateOptions({\n                    hover: oldHoverSetting\n                });\n            }\n        });\n    }\n    _showScrollbarContextMenu(anchor) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        if (isStandaloneEditorWorkspace(this._workspaceContextService.getWorkspace())) {\n            // can't update the configuration properly in the standalone editor\n            return;\n        }\n        const minimapOptions = this._editor.getOption(73 /* EditorOption.minimap */);\n        let lastId = 0;\n        const createAction = (opts) => {\n            return {\n                id: `menu-action-${++lastId}`,\n                label: opts.label,\n                tooltip: '',\n                class: undefined,\n                enabled: (typeof opts.enabled === 'undefined' ? true : opts.enabled),\n                checked: opts.checked,\n                run: opts.run\n            };\n        };\n        const createSubmenuAction = (label, actions) => {\n            return new SubmenuAction(`menu-action-${++lastId}`, label, actions, undefined);\n        };\n        const createEnumAction = (label, enabled, configName, configuredValue, options) => {\n            if (!enabled) {\n                return createAction({ label, enabled, run: () => { } });\n            }\n            const createRunner = (value) => {\n                return () => {\n                    this._configurationService.updateValue(configName, value);\n                };\n            };\n            const actions = [];\n            for (const option of options) {\n                actions.push(createAction({\n                    label: option.label,\n                    checked: configuredValue === option.value,\n                    run: createRunner(option.value)\n                }));\n            }\n            return createSubmenuAction(label, actions);\n        };\n        const actions = [];\n        actions.push(createAction({\n            label: nls.localize('context.minimap.minimap', \"Minimap\"),\n            checked: minimapOptions.enabled,\n            run: () => {\n                this._configurationService.updateValue(`editor.minimap.enabled`, !minimapOptions.enabled);\n            }\n        }));\n        actions.push(new Separator());\n        actions.push(createAction({\n            label: nls.localize('context.minimap.renderCharacters', \"Render Characters\"),\n            enabled: minimapOptions.enabled,\n            checked: minimapOptions.renderCharacters,\n            run: () => {\n                this._configurationService.updateValue(`editor.minimap.renderCharacters`, !minimapOptions.renderCharacters);\n            }\n        }));\n        actions.push(createEnumAction(nls.localize('context.minimap.size', \"Vertical size\"), minimapOptions.enabled, 'editor.minimap.size', minimapOptions.size, [{\n                label: nls.localize('context.minimap.size.proportional', \"Proportional\"),\n                value: 'proportional'\n            }, {\n                label: nls.localize('context.minimap.size.fill', \"Fill\"),\n                value: 'fill'\n            }, {\n                label: nls.localize('context.minimap.size.fit', \"Fit\"),\n                value: 'fit'\n            }]));\n        actions.push(createEnumAction(nls.localize('context.minimap.slider', \"Slider\"), minimapOptions.enabled, 'editor.minimap.showSlider', minimapOptions.showSlider, [{\n                label: nls.localize('context.minimap.slider.mouseover', \"Mouse Over\"),\n                value: 'mouseover'\n            }, {\n                label: nls.localize('context.minimap.slider.always', \"Always\"),\n                value: 'always'\n            }]));\n        const useShadowDOM = this._editor.getOption(127 /* EditorOption.useShadowDOM */) && !isIOS; // Do not use shadow dom on IOS #122035\n        this._contextMenuIsBeingShownCount++;\n        this._contextMenuService.showContextMenu({\n            domForShadowRoot: useShadowDOM ? this._editor.getDomNode() : undefined,\n            getAnchor: () => anchor,\n            getActions: () => actions,\n            onHide: (wasCancelled) => {\n                this._contextMenuIsBeingShownCount--;\n                this._editor.focus();\n            }\n        });\n    }\n    _keybindingFor(action) {\n        return this._keybindingService.lookupKeybinding(action.id);\n    }\n    dispose() {\n        if (this._contextMenuIsBeingShownCount > 0) {\n            this._contextViewService.hideContextView();\n        }\n        this._toDispose.dispose();\n    }\n};\nContextMenuController.ID = 'editor.contrib.contextmenu';\nContextMenuController = ContextMenuController_1 = __decorate([\n    __param(1, IContextMenuService),\n    __param(2, IContextViewService),\n    __param(3, IContextKeyService),\n    __param(4, IKeybindingService),\n    __param(5, IMenuService),\n    __param(6, IConfigurationService),\n    __param(7, IWorkspaceContextService)\n], ContextMenuController);\nexport { ContextMenuController };\nclass ShowContextMenu extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.showContextMenu',\n            label: nls.localize('action.showContextMenu.label', \"Show Editor Context Menu\"),\n            alias: 'Show Editor Context Menu',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 1024 /* KeyMod.Shift */ | 68 /* KeyCode.F10 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        var _a;\n        (_a = ContextMenuController.get(editor)) === null || _a === void 0 ? void 0 : _a.showContextMenu();\n    }\n}\nregisterEditorContribution(ContextMenuController.ID, ContextMenuController, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\nregisterEditorAction(ShowContextMenu);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}