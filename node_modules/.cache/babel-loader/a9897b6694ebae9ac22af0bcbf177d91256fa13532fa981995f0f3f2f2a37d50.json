{"ast":null,"code":"import _regeneratorRuntime from \"/Users/yinger/Desktop/z95_exam_frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/yinger/Desktop/z95_exam_frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _createForOfIteratorHelper from \"/Users/yinger/Desktop/z95_exam_frontend/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _classCallCheck from \"/Users/yinger/Desktop/z95_exam_frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/yinger/Desktop/z95_exam_frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _callSuper from \"/Users/yinger/Desktop/z95_exam_frontend/node_modules/@babel/runtime/helpers/esm/callSuper.js\";\nimport _inherits from \"/Users/yinger/Desktop/z95_exam_frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _typeof from \"/Users/yinger/Desktop/z95_exam_frontend/node_modules/@babel/runtime/helpers/esm/typeof.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.find-index.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.array.index-of.js\";\nimport \"core-js/modules/es.array.join.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.object.define-property.js\";\nimport \"core-js/modules/es.object.get-own-property-descriptor.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.reflect.to-string-tag.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if ((typeof Reflect === \"undefined\" ? \"undefined\" : _typeof(Reflect)) === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport { addDisposableListener, addStandardDisposableListener, reset } from '../../../../../base/browser/dom.js';\nimport { createTrustedTypesPolicy } from '../../../../../base/browser/trustedTypes.js';\nimport { ActionBar } from '../../../../../base/browser/ui/actionbar/actionbar.js';\nimport { DomScrollableElement } from '../../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { Action } from '../../../../../base/common/actions.js';\nimport { forEachAdjacent, groupAdjacentBy } from '../../../../../base/common/arrays.js';\nimport { Codicon } from '../../../../../base/common/codicons.js';\nimport { Disposable, toDisposable } from '../../../../../base/common/lifecycle.js';\nimport { autorun, autorunWithStore, derived, derivedWithStore, observableValue, subtransaction, transaction } from '../../../../../base/common/observable.js';\nimport { ThemeIcon } from '../../../../../base/common/themables.js';\nimport { applyFontInfo } from '../../../config/domFontInfo.js';\nimport { applyStyle } from '../utils.js';\nimport { EditorFontLigatures } from '../../../../common/config/editorOptions.js';\nimport { LineRange } from '../../../../common/core/lineRange.js';\nimport { OffsetRange } from '../../../../common/core/offsetRange.js';\nimport { Position } from '../../../../common/core/position.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { LineRangeMapping } from '../../../../common/diff/rangeMapping.js';\nimport { ILanguageService } from '../../../../common/languages/language.js';\nimport { LineTokens } from '../../../../common/tokens/lineTokens.js';\nimport { RenderLineInput, renderViewLine2 } from '../../../../common/viewLayout/viewLineRenderer.js';\nimport { ViewLineRenderingData } from '../../../../common/viewModel.js';\nimport { localize } from '../../../../../nls.js';\nimport { AccessibilitySignal, IAccessibilitySignalService } from '../../../../../platform/accessibilitySignal/browser/accessibilitySignalService.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { registerIcon } from '../../../../../platform/theme/common/iconRegistry.js';\nimport './accessibleDiffViewer.css';\nvar accessibleDiffViewerInsertIcon = registerIcon('diff-review-insert', Codicon.add, localize('accessibleDiffViewerInsertIcon', 'Icon for \\'Insert\\' in accessible diff viewer.'));\nvar accessibleDiffViewerRemoveIcon = registerIcon('diff-review-remove', Codicon.remove, localize('accessibleDiffViewerRemoveIcon', 'Icon for \\'Remove\\' in accessible diff viewer.'));\nvar accessibleDiffViewerCloseIcon = registerIcon('diff-review-close', Codicon.close, localize('accessibleDiffViewerCloseIcon', 'Icon for \\'Close\\' in accessible diff viewer.'));\nvar AccessibleDiffViewer = /*#__PURE__*/function (_Disposable) {\n  function AccessibleDiffViewer(_parentNode, _visible, _setVisible, _canClose, _width, _height, _diffs, _models, _instantiationService) {\n    var _this;\n    _classCallCheck(this, AccessibleDiffViewer);\n    _this = _callSuper(this, AccessibleDiffViewer);\n    _this._parentNode = _parentNode;\n    _this._visible = _visible;\n    _this._setVisible = _setVisible;\n    _this._canClose = _canClose;\n    _this._width = _width;\n    _this._height = _height;\n    _this._diffs = _diffs;\n    _this._models = _models;\n    _this._instantiationService = _instantiationService;\n    _this._state = derivedWithStore(_this, function (reader, store) {\n      var visible = _this._visible.read(reader);\n      _this._parentNode.style.visibility = visible ? 'visible' : 'hidden';\n      if (!visible) {\n        return null;\n      }\n      var model = store.add(_this._instantiationService.createInstance(ViewModel, _this._diffs, _this._models, _this._setVisible, _this._canClose));\n      var view = store.add(_this._instantiationService.createInstance(View, _this._parentNode, model, _this._width, _this._height, _this._models));\n      return {\n        model: model,\n        view: view\n      };\n    }).recomputeInitiallyAndOnChange(_this._store);\n    return _this;\n  }\n  _inherits(AccessibleDiffViewer, _Disposable);\n  return _createClass(AccessibleDiffViewer, [{\n    key: \"next\",\n    value: function next() {\n      var _this2 = this;\n      transaction(function (tx) {\n        var isVisible = _this2._visible.get();\n        _this2._setVisible(true, tx);\n        if (isVisible) {\n          _this2._state.get().model.nextGroup(tx);\n        }\n      });\n    }\n  }, {\n    key: \"prev\",\n    value: function prev() {\n      var _this3 = this;\n      transaction(function (tx) {\n        _this3._setVisible(true, tx);\n        _this3._state.get().model.previousGroup(tx);\n      });\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      var _this4 = this;\n      transaction(function (tx) {\n        _this4._setVisible(false, tx);\n      });\n    }\n  }]);\n}(Disposable);\nAccessibleDiffViewer._ttPolicy = createTrustedTypesPolicy('diffReview', {\n  createHTML: function createHTML(value) {\n    return value;\n  }\n});\nAccessibleDiffViewer = __decorate([__param(8, IInstantiationService)], AccessibleDiffViewer);\nexport { AccessibleDiffViewer };\nvar ViewModel = /*#__PURE__*/function (_Disposable2) {\n  function ViewModel(_diffs, _models, _setVisible, canClose, _accessibilitySignalService) {\n    var _this5;\n    _classCallCheck(this, ViewModel);\n    _this5 = _callSuper(this, ViewModel);\n    _this5._diffs = _diffs;\n    _this5._models = _models;\n    _this5._setVisible = _setVisible;\n    _this5.canClose = canClose;\n    _this5._accessibilitySignalService = _accessibilitySignalService;\n    _this5._groups = observableValue(_this5, []);\n    _this5._currentGroupIdx = observableValue(_this5, 0);\n    _this5._currentElementIdx = observableValue(_this5, 0);\n    _this5.groups = _this5._groups;\n    _this5.currentGroup = _this5._currentGroupIdx.map(function (idx, r) {\n      return _this5._groups.read(r)[idx];\n    });\n    _this5.currentGroupIndex = _this5._currentGroupIdx;\n    _this5.currentElement = _this5._currentElementIdx.map(function (idx, r) {\n      var _a;\n      return (_a = _this5.currentGroup.read(r)) === null || _a === void 0 ? void 0 : _a.lines[idx];\n    });\n    _this5._register(autorun(function (reader) {\n      /** @description update groups */\n      var diffs = _this5._diffs.read(reader);\n      if (!diffs) {\n        _this5._groups.set([], undefined);\n        return;\n      }\n      var groups = computeViewElementGroups(diffs, _this5._models.getOriginalModel().getLineCount(), _this5._models.getModifiedModel().getLineCount());\n      transaction(function (tx) {\n        var p = _this5._models.getModifiedPosition();\n        if (p) {\n          var nextGroup = groups.findIndex(function (g) {\n            return (p === null || p === void 0 ? void 0 : p.lineNumber) < g.range.modified.endLineNumberExclusive;\n          });\n          if (nextGroup !== -1) {\n            _this5._currentGroupIdx.set(nextGroup, tx);\n          }\n        }\n        _this5._groups.set(groups, tx);\n      });\n    }));\n    _this5._register(autorun(function (reader) {\n      /** @description play audio-cue for diff */\n      var currentViewItem = _this5.currentElement.read(reader);\n      if ((currentViewItem === null || currentViewItem === void 0 ? void 0 : currentViewItem.type) === LineType.Deleted) {\n        _this5._accessibilitySignalService.playSignal(AccessibilitySignal.diffLineDeleted, {\n          source: 'accessibleDiffViewer.currentElementChanged'\n        });\n      } else if ((currentViewItem === null || currentViewItem === void 0 ? void 0 : currentViewItem.type) === LineType.Added) {\n        _this5._accessibilitySignalService.playSignal(AccessibilitySignal.diffLineInserted, {\n          source: 'accessibleDiffViewer.currentElementChanged'\n        });\n      }\n    }));\n    _this5._register(autorun(function (reader) {\n      var _a;\n      /** @description select lines in editor */\n      // This ensures editor commands (like revert/stage) work\n      var currentViewItem = _this5.currentElement.read(reader);\n      if (currentViewItem && currentViewItem.type !== LineType.Header) {\n        var lineNumber = (_a = currentViewItem.modifiedLineNumber) !== null && _a !== void 0 ? _a : currentViewItem.diff.modified.startLineNumber;\n        _this5._models.modifiedSetSelection(Range.fromPositions(new Position(lineNumber, 1)));\n      }\n    }));\n    return _this5;\n  }\n  _inherits(ViewModel, _Disposable2);\n  return _createClass(ViewModel, [{\n    key: \"_goToGroupDelta\",\n    value: function _goToGroupDelta(delta, tx) {\n      var _this6 = this;\n      var groups = this.groups.get();\n      if (!groups || groups.length <= 1) {\n        return;\n      }\n      subtransaction(tx, function (tx) {\n        _this6._currentGroupIdx.set(OffsetRange.ofLength(groups.length).clipCyclic(_this6._currentGroupIdx.get() + delta), tx);\n        _this6._currentElementIdx.set(0, tx);\n      });\n    }\n  }, {\n    key: \"nextGroup\",\n    value: function nextGroup(tx) {\n      this._goToGroupDelta(1, tx);\n    }\n  }, {\n    key: \"previousGroup\",\n    value: function previousGroup(tx) {\n      this._goToGroupDelta(-1, tx);\n    }\n  }, {\n    key: \"_goToLineDelta\",\n    value: function _goToLineDelta(delta) {\n      var _this7 = this;\n      var group = this.currentGroup.get();\n      if (!group || group.lines.length <= 1) {\n        return;\n      }\n      transaction(function (tx) {\n        _this7._currentElementIdx.set(OffsetRange.ofLength(group.lines.length).clip(_this7._currentElementIdx.get() + delta), tx);\n      });\n    }\n  }, {\n    key: \"goToNextLine\",\n    value: function goToNextLine() {\n      this._goToLineDelta(1);\n    }\n  }, {\n    key: \"goToPreviousLine\",\n    value: function goToPreviousLine() {\n      this._goToLineDelta(-1);\n    }\n  }, {\n    key: \"goToLine\",\n    value: function goToLine(line) {\n      var _this8 = this;\n      var group = this.currentGroup.get();\n      if (!group) {\n        return;\n      }\n      var idx = group.lines.indexOf(line);\n      if (idx === -1) {\n        return;\n      }\n      transaction(function (tx) {\n        _this8._currentElementIdx.set(idx, tx);\n      });\n    }\n  }, {\n    key: \"revealCurrentElementInEditor\",\n    value: function revealCurrentElementInEditor() {\n      if (!this.canClose.get()) {\n        return;\n      }\n      this._setVisible(false, undefined);\n      var curElem = this.currentElement.get();\n      if (curElem) {\n        if (curElem.type === LineType.Deleted) {\n          this._models.originalReveal(Range.fromPositions(new Position(curElem.originalLineNumber, 1)));\n        } else {\n          this._models.modifiedReveal(curElem.type !== LineType.Header ? Range.fromPositions(new Position(curElem.modifiedLineNumber, 1)) : undefined);\n        }\n      }\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      if (!this.canClose.get()) {\n        return;\n      }\n      this._setVisible(false, undefined);\n      this._models.modifiedFocus();\n    }\n  }]);\n}(Disposable);\nViewModel = __decorate([__param(4, IAccessibilitySignalService)], ViewModel);\nvar viewElementGroupLineMargin = 3;\nfunction computeViewElementGroups(diffs, originalLineCount, modifiedLineCount) {\n  var result = [];\n  var _iterator = _createForOfIteratorHelper(groupAdjacentBy(diffs, function (a, b) {\n      return b.modified.startLineNumber - a.modified.endLineNumberExclusive < 2 * viewElementGroupLineMargin;\n    })),\n    _step;\n  try {\n    var _loop = function _loop() {\n      var g = _step.value;\n      var viewElements = [];\n      viewElements.push(new HeaderViewElement());\n      var origFullRange = new LineRange(Math.max(1, g[0].original.startLineNumber - viewElementGroupLineMargin), Math.min(g[g.length - 1].original.endLineNumberExclusive + viewElementGroupLineMargin, originalLineCount + 1));\n      var modifiedFullRange = new LineRange(Math.max(1, g[0].modified.startLineNumber - viewElementGroupLineMargin), Math.min(g[g.length - 1].modified.endLineNumberExclusive + viewElementGroupLineMargin, modifiedLineCount + 1));\n      forEachAdjacent(g, function (a, b) {\n        var origRange = new LineRange(a ? a.original.endLineNumberExclusive : origFullRange.startLineNumber, b ? b.original.startLineNumber : origFullRange.endLineNumberExclusive);\n        var modifiedRange = new LineRange(a ? a.modified.endLineNumberExclusive : modifiedFullRange.startLineNumber, b ? b.modified.startLineNumber : modifiedFullRange.endLineNumberExclusive);\n        origRange.forEach(function (origLineNumber) {\n          viewElements.push(new UnchangedLineViewElement(origLineNumber, modifiedRange.startLineNumber + (origLineNumber - origRange.startLineNumber)));\n        });\n        if (b) {\n          b.original.forEach(function (origLineNumber) {\n            viewElements.push(new DeletedLineViewElement(b, origLineNumber));\n          });\n          b.modified.forEach(function (modifiedLineNumber) {\n            viewElements.push(new AddedLineViewElement(b, modifiedLineNumber));\n          });\n        }\n      });\n      var modifiedRange = g[0].modified.join(g[g.length - 1].modified);\n      var originalRange = g[0].original.join(g[g.length - 1].original);\n      result.push(new ViewElementGroup(new LineRangeMapping(modifiedRange, originalRange), viewElements));\n    };\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      _loop();\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n  return result;\n}\nvar LineType;\n(function (LineType) {\n  LineType[LineType[\"Header\"] = 0] = \"Header\";\n  LineType[LineType[\"Unchanged\"] = 1] = \"Unchanged\";\n  LineType[LineType[\"Deleted\"] = 2] = \"Deleted\";\n  LineType[LineType[\"Added\"] = 3] = \"Added\";\n})(LineType || (LineType = {}));\nvar ViewElementGroup = /*#__PURE__*/_createClass(function ViewElementGroup(range, lines) {\n  _classCallCheck(this, ViewElementGroup);\n  this.range = range;\n  this.lines = lines;\n});\nvar HeaderViewElement = /*#__PURE__*/_createClass(function HeaderViewElement() {\n  _classCallCheck(this, HeaderViewElement);\n  this.type = LineType.Header;\n});\nvar DeletedLineViewElement = /*#__PURE__*/_createClass(function DeletedLineViewElement(diff, originalLineNumber) {\n  _classCallCheck(this, DeletedLineViewElement);\n  this.diff = diff;\n  this.originalLineNumber = originalLineNumber;\n  this.type = LineType.Deleted;\n  this.modifiedLineNumber = undefined;\n});\nvar AddedLineViewElement = /*#__PURE__*/_createClass(function AddedLineViewElement(diff, modifiedLineNumber) {\n  _classCallCheck(this, AddedLineViewElement);\n  this.diff = diff;\n  this.modifiedLineNumber = modifiedLineNumber;\n  this.type = LineType.Added;\n  this.originalLineNumber = undefined;\n});\nvar UnchangedLineViewElement = /*#__PURE__*/_createClass(function UnchangedLineViewElement(originalLineNumber, modifiedLineNumber) {\n  _classCallCheck(this, UnchangedLineViewElement);\n  this.originalLineNumber = originalLineNumber;\n  this.modifiedLineNumber = modifiedLineNumber;\n  this.type = LineType.Unchanged;\n});\nvar View = /*#__PURE__*/function (_Disposable3) {\n  function View(_element, _model, _width, _height, _models, _languageService) {\n    var _this9;\n    _classCallCheck(this, View);\n    _this9 = _callSuper(this, View);\n    _this9._element = _element;\n    _this9._model = _model;\n    _this9._width = _width;\n    _this9._height = _height;\n    _this9._models = _models;\n    _this9._languageService = _languageService;\n    _this9.domNode = _this9._element;\n    _this9.domNode.className = 'monaco-component diff-review monaco-editor-background';\n    var actionBarContainer = document.createElement('div');\n    actionBarContainer.className = 'diff-review-actions';\n    _this9._actionBar = _this9._register(new ActionBar(actionBarContainer));\n    _this9._register(autorun(function (reader) {\n      /** @description update actions */\n      _this9._actionBar.clear();\n      if (_this9._model.canClose.read(reader)) {\n        _this9._actionBar.push(new Action('diffreview.close', localize('label.close', \"Close\"), 'close-diff-review ' + ThemeIcon.asClassName(accessibleDiffViewerCloseIcon), true, /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n          return _regeneratorRuntime().wrap(function _callee$(_context) {\n            while (1) switch (_context.prev = _context.next) {\n              case 0:\n                return _context.abrupt(\"return\", _model.close());\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }, _callee);\n        }))), {\n          label: false,\n          icon: true\n        });\n      }\n    }));\n    _this9._content = document.createElement('div');\n    _this9._content.className = 'diff-review-content';\n    _this9._content.setAttribute('role', 'code');\n    _this9._scrollbar = _this9._register(new DomScrollableElement(_this9._content, {}));\n    reset(_this9.domNode, _this9._scrollbar.getDomNode(), actionBarContainer);\n    _this9._register(autorun(function (r) {\n      _this9._height.read(r);\n      _this9._width.read(r);\n      _this9._scrollbar.scanDomNode();\n    }));\n    _this9._register(toDisposable(function () {\n      reset(_this9.domNode);\n    }));\n    _this9._register(applyStyle(_this9.domNode, {\n      width: _this9._width,\n      height: _this9._height\n    }));\n    _this9._register(applyStyle(_this9._content, {\n      width: _this9._width,\n      height: _this9._height\n    }));\n    _this9._register(autorunWithStore(function (reader, store) {\n      /** @description render */\n      _this9._model.currentGroup.read(reader);\n      _this9._render(store);\n    }));\n    // TODO@hediet use commands\n    _this9._register(addStandardDisposableListener(_this9.domNode, 'keydown', function (e) {\n      if (e.equals(18 /* KeyCode.DownArrow */) || e.equals(2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */) || e.equals(512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */)) {\n        e.preventDefault();\n        _this9._model.goToNextLine();\n      }\n      if (e.equals(16 /* KeyCode.UpArrow */) || e.equals(2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */) || e.equals(512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */)) {\n        e.preventDefault();\n        _this9._model.goToPreviousLine();\n      }\n      if (e.equals(9 /* KeyCode.Escape */) || e.equals(2048 /* KeyMod.CtrlCmd */ | 9 /* KeyCode.Escape */) || e.equals(512 /* KeyMod.Alt */ | 9 /* KeyCode.Escape */) || e.equals(1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */)) {\n        e.preventDefault();\n        _this9._model.close();\n      }\n      if (e.equals(10 /* KeyCode.Space */) || e.equals(3 /* KeyCode.Enter */)) {\n        e.preventDefault();\n        _this9._model.revealCurrentElementInEditor();\n      }\n    }));\n    return _this9;\n  }\n  _inherits(View, _Disposable3);\n  return _createClass(View, [{\n    key: \"_render\",\n    value: function _render(store) {\n      var _this10 = this;\n      var originalOptions = this._models.getOriginalOptions();\n      var modifiedOptions = this._models.getModifiedOptions();\n      var container = document.createElement('div');\n      container.className = 'diff-review-table';\n      container.setAttribute('role', 'list');\n      container.setAttribute('aria-label', localize('ariaLabel', 'Accessible Diff Viewer. Use arrow up and down to navigate.'));\n      applyFontInfo(container, modifiedOptions.get(50 /* EditorOption.fontInfo */));\n      reset(this._content, container);\n      var originalModel = this._models.getOriginalModel();\n      var modifiedModel = this._models.getModifiedModel();\n      if (!originalModel || !modifiedModel) {\n        return;\n      }\n      var originalModelOpts = originalModel.getOptions();\n      var modifiedModelOpts = modifiedModel.getOptions();\n      var lineHeight = modifiedOptions.get(67 /* EditorOption.lineHeight */);\n      var group = this._model.currentGroup.get();\n      var _iterator2 = _createForOfIteratorHelper((group === null || group === void 0 ? void 0 : group.lines) || []),\n        _step2;\n      try {\n        var _loop2 = function _loop2() {\n          var viewItem = _step2.value;\n          if (!group) {\n            return 1; // break\n          }\n          var row;\n          if (viewItem.type === LineType.Header) {\n            var header = document.createElement('div');\n            header.className = 'diff-review-row';\n            header.setAttribute('role', 'listitem');\n            var r = group.range;\n            var diffIndex = _this10._model.currentGroupIndex.get();\n            var diffsLength = _this10._model.groups.get().length;\n            var getAriaLines = function getAriaLines(lines) {\n              return lines === 0 ? localize('no_lines_changed', \"no lines changed\") : lines === 1 ? localize('one_line_changed', \"1 line changed\") : localize('more_lines_changed', \"{0} lines changed\", lines);\n            };\n            var originalChangedLinesCntAria = getAriaLines(r.original.length);\n            var modifiedChangedLinesCntAria = getAriaLines(r.modified.length);\n            header.setAttribute('aria-label', localize({\n              key: 'header',\n              comment: ['This is the ARIA label for a git diff header.', 'A git diff header looks like this: @@ -154,12 +159,39 @@.', 'That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.', 'Variables 0 and 1 refer to the diff index out of total number of diffs.', 'Variables 2 and 4 will be numbers (a line number).', 'Variables 3 and 5 will be \"no lines changed\", \"1 line changed\" or \"X lines changed\", localized separately.']\n            }, \"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}\", diffIndex + 1, diffsLength, r.original.startLineNumber, originalChangedLinesCntAria, r.modified.startLineNumber, modifiedChangedLinesCntAria));\n            var cell = document.createElement('div');\n            cell.className = 'diff-review-cell diff-review-summary';\n            // e.g.: `1/10: @@ -504,7 +517,7 @@`\n            cell.appendChild(document.createTextNode(\"\".concat(diffIndex + 1, \"/\").concat(diffsLength, \": @@ -\").concat(r.original.startLineNumber, \",\").concat(r.original.length, \" +\").concat(r.modified.startLineNumber, \",\").concat(r.modified.length, \" @@\")));\n            header.appendChild(cell);\n            row = header;\n          } else {\n            row = _this10._createRow(viewItem, lineHeight, _this10._width.get(), originalOptions, originalModel, originalModelOpts, modifiedOptions, modifiedModel, modifiedModelOpts);\n          }\n          container.appendChild(row);\n          var isSelectedObs = derived(function (reader) {\n            return /** @description isSelected */_this10._model.currentElement.read(reader) === viewItem;\n          });\n          store.add(autorun(function (reader) {\n            /** @description update tab index */\n            var isSelected = isSelectedObs.read(reader);\n            row.tabIndex = isSelected ? 0 : -1;\n            if (isSelected) {\n              row.focus();\n            }\n          }));\n          store.add(addDisposableListener(row, 'focus', function () {\n            _this10._model.goToLine(viewItem);\n          }));\n        };\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          if (_loop2()) break;\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n      this._scrollbar.scanDomNode();\n    }\n  }, {\n    key: \"_createRow\",\n    value: function _createRow(item, lineHeight, width, originalOptions, originalModel, originalModelOpts, modifiedOptions, modifiedModel, modifiedModelOpts) {\n      var originalLayoutInfo = originalOptions.get(145 /* EditorOption.layoutInfo */);\n      var originalLineNumbersWidth = originalLayoutInfo.glyphMarginWidth + originalLayoutInfo.lineNumbersWidth;\n      var modifiedLayoutInfo = modifiedOptions.get(145 /* EditorOption.layoutInfo */);\n      var modifiedLineNumbersWidth = 10 + modifiedLayoutInfo.glyphMarginWidth + modifiedLayoutInfo.lineNumbersWidth;\n      var rowClassName = 'diff-review-row';\n      var lineNumbersExtraClassName = '';\n      var spacerClassName = 'diff-review-spacer';\n      var spacerIcon = null;\n      switch (item.type) {\n        case LineType.Added:\n          rowClassName = 'diff-review-row line-insert';\n          lineNumbersExtraClassName = ' char-insert';\n          spacerIcon = accessibleDiffViewerInsertIcon;\n          break;\n        case LineType.Deleted:\n          rowClassName = 'diff-review-row line-delete';\n          lineNumbersExtraClassName = ' char-delete';\n          spacerIcon = accessibleDiffViewerRemoveIcon;\n          break;\n      }\n      var row = document.createElement('div');\n      row.style.minWidth = width + 'px';\n      row.className = rowClassName;\n      row.setAttribute('role', 'listitem');\n      row.ariaLevel = '';\n      var cell = document.createElement('div');\n      cell.className = 'diff-review-cell';\n      cell.style.height = \"\".concat(lineHeight, \"px\");\n      row.appendChild(cell);\n      var originalLineNumber = document.createElement('span');\n      originalLineNumber.style.width = originalLineNumbersWidth + 'px';\n      originalLineNumber.style.minWidth = originalLineNumbersWidth + 'px';\n      originalLineNumber.className = 'diff-review-line-number' + lineNumbersExtraClassName;\n      if (item.originalLineNumber !== undefined) {\n        originalLineNumber.appendChild(document.createTextNode(String(item.originalLineNumber)));\n      } else {\n        originalLineNumber.innerText = \"\\xA0\";\n      }\n      cell.appendChild(originalLineNumber);\n      var modifiedLineNumber = document.createElement('span');\n      modifiedLineNumber.style.width = modifiedLineNumbersWidth + 'px';\n      modifiedLineNumber.style.minWidth = modifiedLineNumbersWidth + 'px';\n      modifiedLineNumber.style.paddingRight = '10px';\n      modifiedLineNumber.className = 'diff-review-line-number' + lineNumbersExtraClassName;\n      if (item.modifiedLineNumber !== undefined) {\n        modifiedLineNumber.appendChild(document.createTextNode(String(item.modifiedLineNumber)));\n      } else {\n        modifiedLineNumber.innerText = \"\\xA0\";\n      }\n      cell.appendChild(modifiedLineNumber);\n      var spacer = document.createElement('span');\n      spacer.className = spacerClassName;\n      if (spacerIcon) {\n        var spacerCodicon = document.createElement('span');\n        spacerCodicon.className = ThemeIcon.asClassName(spacerIcon);\n        spacerCodicon.innerText = \"\\xA0\\xA0\";\n        spacer.appendChild(spacerCodicon);\n      } else {\n        spacer.innerText = \"\\xA0\\xA0\";\n      }\n      cell.appendChild(spacer);\n      var lineContent;\n      if (item.modifiedLineNumber !== undefined) {\n        var html = this._getLineHtml(modifiedModel, modifiedOptions, modifiedModelOpts.tabSize, item.modifiedLineNumber, this._languageService.languageIdCodec);\n        if (AccessibleDiffViewer._ttPolicy) {\n          html = AccessibleDiffViewer._ttPolicy.createHTML(html);\n        }\n        cell.insertAdjacentHTML('beforeend', html);\n        lineContent = modifiedModel.getLineContent(item.modifiedLineNumber);\n      } else {\n        var _html = this._getLineHtml(originalModel, originalOptions, originalModelOpts.tabSize, item.originalLineNumber, this._languageService.languageIdCodec);\n        if (AccessibleDiffViewer._ttPolicy) {\n          _html = AccessibleDiffViewer._ttPolicy.createHTML(_html);\n        }\n        cell.insertAdjacentHTML('beforeend', _html);\n        lineContent = originalModel.getLineContent(item.originalLineNumber);\n      }\n      if (lineContent.length === 0) {\n        lineContent = localize('blankLine', \"blank\");\n      }\n      var ariaLabel = '';\n      switch (item.type) {\n        case LineType.Unchanged:\n          if (item.originalLineNumber === item.modifiedLineNumber) {\n            ariaLabel = localize({\n              key: 'unchangedLine',\n              comment: ['The placeholders are contents of the line and should not be translated.']\n            }, \"{0} unchanged line {1}\", lineContent, item.originalLineNumber);\n          } else {\n            ariaLabel = localize('equalLine', \"{0} original line {1} modified line {2}\", lineContent, item.originalLineNumber, item.modifiedLineNumber);\n          }\n          break;\n        case LineType.Added:\n          ariaLabel = localize('insertLine', \"+ {0} modified line {1}\", lineContent, item.modifiedLineNumber);\n          break;\n        case LineType.Deleted:\n          ariaLabel = localize('deleteLine', \"- {0} original line {1}\", lineContent, item.originalLineNumber);\n          break;\n      }\n      row.setAttribute('aria-label', ariaLabel);\n      return row;\n    }\n  }, {\n    key: \"_getLineHtml\",\n    value: function _getLineHtml(model, options, tabSize, lineNumber, languageIdCodec) {\n      var lineContent = model.getLineContent(lineNumber);\n      var fontInfo = options.get(50 /* EditorOption.fontInfo */);\n      var lineTokens = LineTokens.createEmpty(lineContent, languageIdCodec);\n      var isBasicASCII = ViewLineRenderingData.isBasicASCII(lineContent, model.mightContainNonBasicASCII());\n      var containsRTL = ViewLineRenderingData.containsRTL(lineContent, isBasicASCII, model.mightContainRTL());\n      var r = renderViewLine2(new RenderLineInput(fontInfo.isMonospace && !options.get(33 /* EditorOption.disableMonospaceOptimizations */), fontInfo.canUseHalfwidthRightwardsArrow, lineContent, false, isBasicASCII, containsRTL, 0, lineTokens, [], tabSize, 0, fontInfo.spaceWidth, fontInfo.middotWidth, fontInfo.wsmiddotWidth, options.get(117 /* EditorOption.stopRenderingLineAfter */), options.get(99 /* EditorOption.renderWhitespace */), options.get(94 /* EditorOption.renderControlCharacters */), options.get(51 /* EditorOption.fontLigatures */) !== EditorFontLigatures.OFF, null));\n      return r.html;\n    }\n  }]);\n}(Disposable);\nView = __decorate([__param(5, ILanguageService)], View);\nexport var AccessibleDiffViewerModelFromEditors = /*#__PURE__*/function () {\n  function AccessibleDiffViewerModelFromEditors(editors) {\n    _classCallCheck(this, AccessibleDiffViewerModelFromEditors);\n    this.editors = editors;\n  }\n  return _createClass(AccessibleDiffViewerModelFromEditors, [{\n    key: \"getOriginalModel\",\n    value: function getOriginalModel() {\n      return this.editors.original.getModel();\n    }\n  }, {\n    key: \"getOriginalOptions\",\n    value: function getOriginalOptions() {\n      return this.editors.original.getOptions();\n    }\n  }, {\n    key: \"originalReveal\",\n    value: function originalReveal(range) {\n      this.editors.original.revealRange(range);\n      this.editors.original.setSelection(range);\n      this.editors.original.focus();\n    }\n  }, {\n    key: \"getModifiedModel\",\n    value: function getModifiedModel() {\n      return this.editors.modified.getModel();\n    }\n  }, {\n    key: \"getModifiedOptions\",\n    value: function getModifiedOptions() {\n      return this.editors.modified.getOptions();\n    }\n  }, {\n    key: \"modifiedReveal\",\n    value: function modifiedReveal(range) {\n      if (range) {\n        this.editors.modified.revealRange(range);\n        this.editors.modified.setSelection(range);\n      }\n      this.editors.modified.focus();\n    }\n  }, {\n    key: \"modifiedSetSelection\",\n    value: function modifiedSetSelection(range) {\n      this.editors.modified.setSelection(range);\n    }\n  }, {\n    key: \"modifiedFocus\",\n    value: function modifiedFocus() {\n      this.editors.modified.focus();\n    }\n  }, {\n    key: \"getModifiedPosition\",\n    value: function getModifiedPosition() {\n      var _a;\n      return (_a = this.editors.modified.getPosition()) !== null && _a !== void 0 ? _a : undefined;\n    }\n  }]);\n}();","map":{"version":3,"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","_typeof","decorate","i","defineProperty","__param","paramIndex","decorator","addDisposableListener","addStandardDisposableListener","reset","createTrustedTypesPolicy","ActionBar","DomScrollableElement","Action","forEachAdjacent","groupAdjacentBy","Codicon","Disposable","toDisposable","autorun","autorunWithStore","derived","derivedWithStore","observableValue","subtransaction","transaction","ThemeIcon","applyFontInfo","applyStyle","EditorFontLigatures","LineRange","OffsetRange","Position","Range","LineRangeMapping","ILanguageService","LineTokens","RenderLineInput","renderViewLine2","ViewLineRenderingData","localize","AccessibilitySignal","IAccessibilitySignalService","IInstantiationService","registerIcon","accessibleDiffViewerInsertIcon","add","accessibleDiffViewerRemoveIcon","remove","accessibleDiffViewerCloseIcon","close","AccessibleDiffViewer","_Disposable","_parentNode","_visible","_setVisible","_canClose","_width","_height","_diffs","_models","_instantiationService","_this","_classCallCheck","_callSuper","_state","reader","store","visible","read","style","visibility","model","createInstance","ViewModel","view","View","recomputeInitiallyAndOnChange","_store","_inherits","_createClass","value","next","_this2","tx","isVisible","get","nextGroup","prev","_this3","previousGroup","_this4","_ttPolicy","createHTML","_Disposable2","canClose","_accessibilitySignalService","_this5","_groups","_currentGroupIdx","_currentElementIdx","groups","currentGroup","map","idx","currentGroupIndex","currentElement","_a","lines","_register","diffs","set","undefined","computeViewElementGroups","getOriginalModel","getLineCount","getModifiedModel","p","getModifiedPosition","findIndex","g","lineNumber","range","modified","endLineNumberExclusive","currentViewItem","type","LineType","Deleted","playSignal","diffLineDeleted","source","Added","diffLineInserted","Header","modifiedLineNumber","diff","startLineNumber","modifiedSetSelection","fromPositions","_goToGroupDelta","delta","_this6","ofLength","clipCyclic","_goToLineDelta","_this7","group","clip","goToNextLine","goToPreviousLine","goToLine","line","_this8","indexOf","revealCurrentElementInEditor","curElem","originalReveal","originalLineNumber","modifiedReveal","modifiedFocus","viewElementGroupLineMargin","originalLineCount","modifiedLineCount","result","_iterator","_createForOfIteratorHelper","a","b","_step","_loop","viewElements","push","HeaderViewElement","origFullRange","Math","max","original","min","modifiedFullRange","origRange","modifiedRange","forEach","origLineNumber","UnchangedLineViewElement","DeletedLineViewElement","AddedLineViewElement","join","originalRange","ViewElementGroup","s","n","done","err","e","f","Unchanged","_Disposable3","_element","_model","_languageService","_this9","domNode","className","actionBarContainer","document","createElement","_actionBar","clear","asClassName","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","abrupt","stop","label","icon","_content","setAttribute","_scrollbar","getDomNode","scanDomNode","width","height","_render","equals","preventDefault","_this10","originalOptions","getOriginalOptions","modifiedOptions","getModifiedOptions","container","originalModel","modifiedModel","originalModelOpts","getOptions","modifiedModelOpts","lineHeight","_iterator2","_step2","_loop2","viewItem","row","header","diffIndex","diffsLength","getAriaLines","originalChangedLinesCntAria","modifiedChangedLinesCntAria","comment","cell","appendChild","createTextNode","concat","_createRow","isSelectedObs","isSelected","tabIndex","focus","item","originalLayoutInfo","originalLineNumbersWidth","glyphMarginWidth","lineNumbersWidth","modifiedLayoutInfo","modifiedLineNumbersWidth","rowClassName","lineNumbersExtraClassName","spacerClassName","spacerIcon","minWidth","ariaLevel","String","innerText","paddingRight","spacer","spacerCodicon","lineContent","html","_getLineHtml","tabSize","languageIdCodec","insertAdjacentHTML","getLineContent","ariaLabel","options","fontInfo","lineTokens","createEmpty","isBasicASCII","mightContainNonBasicASCII","containsRTL","mightContainRTL","isMonospace","canUseHalfwidthRightwardsArrow","spaceWidth","middotWidth","wsmiddotWidth","OFF","AccessibleDiffViewerModelFromEditors","editors","getModel","revealRange","setSelection","getPosition"],"sources":["/Users/yinger/Desktop/z95_exam_frontend/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/components/accessibleDiffViewer.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { addDisposableListener, addStandardDisposableListener, reset } from '../../../../../base/browser/dom.js';\nimport { createTrustedTypesPolicy } from '../../../../../base/browser/trustedTypes.js';\nimport { ActionBar } from '../../../../../base/browser/ui/actionbar/actionbar.js';\nimport { DomScrollableElement } from '../../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { Action } from '../../../../../base/common/actions.js';\nimport { forEachAdjacent, groupAdjacentBy } from '../../../../../base/common/arrays.js';\nimport { Codicon } from '../../../../../base/common/codicons.js';\nimport { Disposable, toDisposable } from '../../../../../base/common/lifecycle.js';\nimport { autorun, autorunWithStore, derived, derivedWithStore, observableValue, subtransaction, transaction } from '../../../../../base/common/observable.js';\nimport { ThemeIcon } from '../../../../../base/common/themables.js';\nimport { applyFontInfo } from '../../../config/domFontInfo.js';\nimport { applyStyle } from '../utils.js';\nimport { EditorFontLigatures } from '../../../../common/config/editorOptions.js';\nimport { LineRange } from '../../../../common/core/lineRange.js';\nimport { OffsetRange } from '../../../../common/core/offsetRange.js';\nimport { Position } from '../../../../common/core/position.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { LineRangeMapping } from '../../../../common/diff/rangeMapping.js';\nimport { ILanguageService } from '../../../../common/languages/language.js';\nimport { LineTokens } from '../../../../common/tokens/lineTokens.js';\nimport { RenderLineInput, renderViewLine2 } from '../../../../common/viewLayout/viewLineRenderer.js';\nimport { ViewLineRenderingData } from '../../../../common/viewModel.js';\nimport { localize } from '../../../../../nls.js';\nimport { AccessibilitySignal, IAccessibilitySignalService } from '../../../../../platform/accessibilitySignal/browser/accessibilitySignalService.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { registerIcon } from '../../../../../platform/theme/common/iconRegistry.js';\nimport './accessibleDiffViewer.css';\nconst accessibleDiffViewerInsertIcon = registerIcon('diff-review-insert', Codicon.add, localize('accessibleDiffViewerInsertIcon', 'Icon for \\'Insert\\' in accessible diff viewer.'));\nconst accessibleDiffViewerRemoveIcon = registerIcon('diff-review-remove', Codicon.remove, localize('accessibleDiffViewerRemoveIcon', 'Icon for \\'Remove\\' in accessible diff viewer.'));\nconst accessibleDiffViewerCloseIcon = registerIcon('diff-review-close', Codicon.close, localize('accessibleDiffViewerCloseIcon', 'Icon for \\'Close\\' in accessible diff viewer.'));\nlet AccessibleDiffViewer = class AccessibleDiffViewer extends Disposable {\n    constructor(_parentNode, _visible, _setVisible, _canClose, _width, _height, _diffs, _models, _instantiationService) {\n        super();\n        this._parentNode = _parentNode;\n        this._visible = _visible;\n        this._setVisible = _setVisible;\n        this._canClose = _canClose;\n        this._width = _width;\n        this._height = _height;\n        this._diffs = _diffs;\n        this._models = _models;\n        this._instantiationService = _instantiationService;\n        this._state = derivedWithStore(this, (reader, store) => {\n            const visible = this._visible.read(reader);\n            this._parentNode.style.visibility = visible ? 'visible' : 'hidden';\n            if (!visible) {\n                return null;\n            }\n            const model = store.add(this._instantiationService.createInstance(ViewModel, this._diffs, this._models, this._setVisible, this._canClose));\n            const view = store.add(this._instantiationService.createInstance(View, this._parentNode, model, this._width, this._height, this._models));\n            return { model, view, };\n        }).recomputeInitiallyAndOnChange(this._store);\n    }\n    next() {\n        transaction(tx => {\n            const isVisible = this._visible.get();\n            this._setVisible(true, tx);\n            if (isVisible) {\n                this._state.get().model.nextGroup(tx);\n            }\n        });\n    }\n    prev() {\n        transaction(tx => {\n            this._setVisible(true, tx);\n            this._state.get().model.previousGroup(tx);\n        });\n    }\n    close() {\n        transaction(tx => {\n            this._setVisible(false, tx);\n        });\n    }\n};\nAccessibleDiffViewer._ttPolicy = createTrustedTypesPolicy('diffReview', { createHTML: value => value });\nAccessibleDiffViewer = __decorate([\n    __param(8, IInstantiationService)\n], AccessibleDiffViewer);\nexport { AccessibleDiffViewer };\nlet ViewModel = class ViewModel extends Disposable {\n    constructor(_diffs, _models, _setVisible, canClose, _accessibilitySignalService) {\n        super();\n        this._diffs = _diffs;\n        this._models = _models;\n        this._setVisible = _setVisible;\n        this.canClose = canClose;\n        this._accessibilitySignalService = _accessibilitySignalService;\n        this._groups = observableValue(this, []);\n        this._currentGroupIdx = observableValue(this, 0);\n        this._currentElementIdx = observableValue(this, 0);\n        this.groups = this._groups;\n        this.currentGroup = this._currentGroupIdx.map((idx, r) => this._groups.read(r)[idx]);\n        this.currentGroupIndex = this._currentGroupIdx;\n        this.currentElement = this._currentElementIdx.map((idx, r) => { var _a; return (_a = this.currentGroup.read(r)) === null || _a === void 0 ? void 0 : _a.lines[idx]; });\n        this._register(autorun(reader => {\n            /** @description update groups */\n            const diffs = this._diffs.read(reader);\n            if (!diffs) {\n                this._groups.set([], undefined);\n                return;\n            }\n            const groups = computeViewElementGroups(diffs, this._models.getOriginalModel().getLineCount(), this._models.getModifiedModel().getLineCount());\n            transaction(tx => {\n                const p = this._models.getModifiedPosition();\n                if (p) {\n                    const nextGroup = groups.findIndex(g => (p === null || p === void 0 ? void 0 : p.lineNumber) < g.range.modified.endLineNumberExclusive);\n                    if (nextGroup !== -1) {\n                        this._currentGroupIdx.set(nextGroup, tx);\n                    }\n                }\n                this._groups.set(groups, tx);\n            });\n        }));\n        this._register(autorun(reader => {\n            /** @description play audio-cue for diff */\n            const currentViewItem = this.currentElement.read(reader);\n            if ((currentViewItem === null || currentViewItem === void 0 ? void 0 : currentViewItem.type) === LineType.Deleted) {\n                this._accessibilitySignalService.playSignal(AccessibilitySignal.diffLineDeleted, { source: 'accessibleDiffViewer.currentElementChanged' });\n            }\n            else if ((currentViewItem === null || currentViewItem === void 0 ? void 0 : currentViewItem.type) === LineType.Added) {\n                this._accessibilitySignalService.playSignal(AccessibilitySignal.diffLineInserted, { source: 'accessibleDiffViewer.currentElementChanged' });\n            }\n        }));\n        this._register(autorun(reader => {\n            var _a;\n            /** @description select lines in editor */\n            // This ensures editor commands (like revert/stage) work\n            const currentViewItem = this.currentElement.read(reader);\n            if (currentViewItem && currentViewItem.type !== LineType.Header) {\n                const lineNumber = (_a = currentViewItem.modifiedLineNumber) !== null && _a !== void 0 ? _a : currentViewItem.diff.modified.startLineNumber;\n                this._models.modifiedSetSelection(Range.fromPositions(new Position(lineNumber, 1)));\n            }\n        }));\n    }\n    _goToGroupDelta(delta, tx) {\n        const groups = this.groups.get();\n        if (!groups || groups.length <= 1) {\n            return;\n        }\n        subtransaction(tx, tx => {\n            this._currentGroupIdx.set(OffsetRange.ofLength(groups.length).clipCyclic(this._currentGroupIdx.get() + delta), tx);\n            this._currentElementIdx.set(0, tx);\n        });\n    }\n    nextGroup(tx) { this._goToGroupDelta(1, tx); }\n    previousGroup(tx) { this._goToGroupDelta(-1, tx); }\n    _goToLineDelta(delta) {\n        const group = this.currentGroup.get();\n        if (!group || group.lines.length <= 1) {\n            return;\n        }\n        transaction(tx => {\n            this._currentElementIdx.set(OffsetRange.ofLength(group.lines.length).clip(this._currentElementIdx.get() + delta), tx);\n        });\n    }\n    goToNextLine() { this._goToLineDelta(1); }\n    goToPreviousLine() { this._goToLineDelta(-1); }\n    goToLine(line) {\n        const group = this.currentGroup.get();\n        if (!group) {\n            return;\n        }\n        const idx = group.lines.indexOf(line);\n        if (idx === -1) {\n            return;\n        }\n        transaction(tx => {\n            this._currentElementIdx.set(idx, tx);\n        });\n    }\n    revealCurrentElementInEditor() {\n        if (!this.canClose.get()) {\n            return;\n        }\n        this._setVisible(false, undefined);\n        const curElem = this.currentElement.get();\n        if (curElem) {\n            if (curElem.type === LineType.Deleted) {\n                this._models.originalReveal(Range.fromPositions(new Position(curElem.originalLineNumber, 1)));\n            }\n            else {\n                this._models.modifiedReveal(curElem.type !== LineType.Header\n                    ? Range.fromPositions(new Position(curElem.modifiedLineNumber, 1))\n                    : undefined);\n            }\n        }\n    }\n    close() {\n        if (!this.canClose.get()) {\n            return;\n        }\n        this._setVisible(false, undefined);\n        this._models.modifiedFocus();\n    }\n};\nViewModel = __decorate([\n    __param(4, IAccessibilitySignalService)\n], ViewModel);\nconst viewElementGroupLineMargin = 3;\nfunction computeViewElementGroups(diffs, originalLineCount, modifiedLineCount) {\n    const result = [];\n    for (const g of groupAdjacentBy(diffs, (a, b) => (b.modified.startLineNumber - a.modified.endLineNumberExclusive < 2 * viewElementGroupLineMargin))) {\n        const viewElements = [];\n        viewElements.push(new HeaderViewElement());\n        const origFullRange = new LineRange(Math.max(1, g[0].original.startLineNumber - viewElementGroupLineMargin), Math.min(g[g.length - 1].original.endLineNumberExclusive + viewElementGroupLineMargin, originalLineCount + 1));\n        const modifiedFullRange = new LineRange(Math.max(1, g[0].modified.startLineNumber - viewElementGroupLineMargin), Math.min(g[g.length - 1].modified.endLineNumberExclusive + viewElementGroupLineMargin, modifiedLineCount + 1));\n        forEachAdjacent(g, (a, b) => {\n            const origRange = new LineRange(a ? a.original.endLineNumberExclusive : origFullRange.startLineNumber, b ? b.original.startLineNumber : origFullRange.endLineNumberExclusive);\n            const modifiedRange = new LineRange(a ? a.modified.endLineNumberExclusive : modifiedFullRange.startLineNumber, b ? b.modified.startLineNumber : modifiedFullRange.endLineNumberExclusive);\n            origRange.forEach(origLineNumber => {\n                viewElements.push(new UnchangedLineViewElement(origLineNumber, modifiedRange.startLineNumber + (origLineNumber - origRange.startLineNumber)));\n            });\n            if (b) {\n                b.original.forEach(origLineNumber => {\n                    viewElements.push(new DeletedLineViewElement(b, origLineNumber));\n                });\n                b.modified.forEach(modifiedLineNumber => {\n                    viewElements.push(new AddedLineViewElement(b, modifiedLineNumber));\n                });\n            }\n        });\n        const modifiedRange = g[0].modified.join(g[g.length - 1].modified);\n        const originalRange = g[0].original.join(g[g.length - 1].original);\n        result.push(new ViewElementGroup(new LineRangeMapping(modifiedRange, originalRange), viewElements));\n    }\n    return result;\n}\nvar LineType;\n(function (LineType) {\n    LineType[LineType[\"Header\"] = 0] = \"Header\";\n    LineType[LineType[\"Unchanged\"] = 1] = \"Unchanged\";\n    LineType[LineType[\"Deleted\"] = 2] = \"Deleted\";\n    LineType[LineType[\"Added\"] = 3] = \"Added\";\n})(LineType || (LineType = {}));\nclass ViewElementGroup {\n    constructor(range, lines) {\n        this.range = range;\n        this.lines = lines;\n    }\n}\nclass HeaderViewElement {\n    constructor() {\n        this.type = LineType.Header;\n    }\n}\nclass DeletedLineViewElement {\n    constructor(diff, originalLineNumber) {\n        this.diff = diff;\n        this.originalLineNumber = originalLineNumber;\n        this.type = LineType.Deleted;\n        this.modifiedLineNumber = undefined;\n    }\n}\nclass AddedLineViewElement {\n    constructor(diff, modifiedLineNumber) {\n        this.diff = diff;\n        this.modifiedLineNumber = modifiedLineNumber;\n        this.type = LineType.Added;\n        this.originalLineNumber = undefined;\n    }\n}\nclass UnchangedLineViewElement {\n    constructor(originalLineNumber, modifiedLineNumber) {\n        this.originalLineNumber = originalLineNumber;\n        this.modifiedLineNumber = modifiedLineNumber;\n        this.type = LineType.Unchanged;\n    }\n}\nlet View = class View extends Disposable {\n    constructor(_element, _model, _width, _height, _models, _languageService) {\n        super();\n        this._element = _element;\n        this._model = _model;\n        this._width = _width;\n        this._height = _height;\n        this._models = _models;\n        this._languageService = _languageService;\n        this.domNode = this._element;\n        this.domNode.className = 'monaco-component diff-review monaco-editor-background';\n        const actionBarContainer = document.createElement('div');\n        actionBarContainer.className = 'diff-review-actions';\n        this._actionBar = this._register(new ActionBar(actionBarContainer));\n        this._register(autorun(reader => {\n            /** @description update actions */\n            this._actionBar.clear();\n            if (this._model.canClose.read(reader)) {\n                this._actionBar.push(new Action('diffreview.close', localize('label.close', \"Close\"), 'close-diff-review ' + ThemeIcon.asClassName(accessibleDiffViewerCloseIcon), true, async () => _model.close()), { label: false, icon: true });\n            }\n        }));\n        this._content = document.createElement('div');\n        this._content.className = 'diff-review-content';\n        this._content.setAttribute('role', 'code');\n        this._scrollbar = this._register(new DomScrollableElement(this._content, {}));\n        reset(this.domNode, this._scrollbar.getDomNode(), actionBarContainer);\n        this._register(autorun(r => {\n            this._height.read(r);\n            this._width.read(r);\n            this._scrollbar.scanDomNode();\n        }));\n        this._register(toDisposable(() => { reset(this.domNode); }));\n        this._register(applyStyle(this.domNode, { width: this._width, height: this._height }));\n        this._register(applyStyle(this._content, { width: this._width, height: this._height }));\n        this._register(autorunWithStore((reader, store) => {\n            /** @description render */\n            this._model.currentGroup.read(reader);\n            this._render(store);\n        }));\n        // TODO@hediet use commands\n        this._register(addStandardDisposableListener(this.domNode, 'keydown', (e) => {\n            if (e.equals(18 /* KeyCode.DownArrow */)\n                || e.equals(2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */)\n                || e.equals(512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */)) {\n                e.preventDefault();\n                this._model.goToNextLine();\n            }\n            if (e.equals(16 /* KeyCode.UpArrow */)\n                || e.equals(2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */)\n                || e.equals(512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */)) {\n                e.preventDefault();\n                this._model.goToPreviousLine();\n            }\n            if (e.equals(9 /* KeyCode.Escape */)\n                || e.equals(2048 /* KeyMod.CtrlCmd */ | 9 /* KeyCode.Escape */)\n                || e.equals(512 /* KeyMod.Alt */ | 9 /* KeyCode.Escape */)\n                || e.equals(1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */)) {\n                e.preventDefault();\n                this._model.close();\n            }\n            if (e.equals(10 /* KeyCode.Space */)\n                || e.equals(3 /* KeyCode.Enter */)) {\n                e.preventDefault();\n                this._model.revealCurrentElementInEditor();\n            }\n        }));\n    }\n    _render(store) {\n        const originalOptions = this._models.getOriginalOptions();\n        const modifiedOptions = this._models.getModifiedOptions();\n        const container = document.createElement('div');\n        container.className = 'diff-review-table';\n        container.setAttribute('role', 'list');\n        container.setAttribute('aria-label', localize('ariaLabel', 'Accessible Diff Viewer. Use arrow up and down to navigate.'));\n        applyFontInfo(container, modifiedOptions.get(50 /* EditorOption.fontInfo */));\n        reset(this._content, container);\n        const originalModel = this._models.getOriginalModel();\n        const modifiedModel = this._models.getModifiedModel();\n        if (!originalModel || !modifiedModel) {\n            return;\n        }\n        const originalModelOpts = originalModel.getOptions();\n        const modifiedModelOpts = modifiedModel.getOptions();\n        const lineHeight = modifiedOptions.get(67 /* EditorOption.lineHeight */);\n        const group = this._model.currentGroup.get();\n        for (const viewItem of (group === null || group === void 0 ? void 0 : group.lines) || []) {\n            if (!group) {\n                break;\n            }\n            let row;\n            if (viewItem.type === LineType.Header) {\n                const header = document.createElement('div');\n                header.className = 'diff-review-row';\n                header.setAttribute('role', 'listitem');\n                const r = group.range;\n                const diffIndex = this._model.currentGroupIndex.get();\n                const diffsLength = this._model.groups.get().length;\n                const getAriaLines = (lines) => lines === 0 ? localize('no_lines_changed', \"no lines changed\")\n                    : lines === 1 ? localize('one_line_changed', \"1 line changed\")\n                        : localize('more_lines_changed', \"{0} lines changed\", lines);\n                const originalChangedLinesCntAria = getAriaLines(r.original.length);\n                const modifiedChangedLinesCntAria = getAriaLines(r.modified.length);\n                header.setAttribute('aria-label', localize({\n                    key: 'header',\n                    comment: [\n                        'This is the ARIA label for a git diff header.',\n                        'A git diff header looks like this: @@ -154,12 +159,39 @@.',\n                        'That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.',\n                        'Variables 0 and 1 refer to the diff index out of total number of diffs.',\n                        'Variables 2 and 4 will be numbers (a line number).',\n                        'Variables 3 and 5 will be \"no lines changed\", \"1 line changed\" or \"X lines changed\", localized separately.'\n                    ]\n                }, \"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}\", (diffIndex + 1), diffsLength, r.original.startLineNumber, originalChangedLinesCntAria, r.modified.startLineNumber, modifiedChangedLinesCntAria));\n                const cell = document.createElement('div');\n                cell.className = 'diff-review-cell diff-review-summary';\n                // e.g.: `1/10: @@ -504,7 +517,7 @@`\n                cell.appendChild(document.createTextNode(`${diffIndex + 1}/${diffsLength}: @@ -${r.original.startLineNumber},${r.original.length} +${r.modified.startLineNumber},${r.modified.length} @@`));\n                header.appendChild(cell);\n                row = header;\n            }\n            else {\n                row = this._createRow(viewItem, lineHeight, this._width.get(), originalOptions, originalModel, originalModelOpts, modifiedOptions, modifiedModel, modifiedModelOpts);\n            }\n            container.appendChild(row);\n            const isSelectedObs = derived(reader => /** @description isSelected */ this._model.currentElement.read(reader) === viewItem);\n            store.add(autorun(reader => {\n                /** @description update tab index */\n                const isSelected = isSelectedObs.read(reader);\n                row.tabIndex = isSelected ? 0 : -1;\n                if (isSelected) {\n                    row.focus();\n                }\n            }));\n            store.add(addDisposableListener(row, 'focus', () => {\n                this._model.goToLine(viewItem);\n            }));\n        }\n        this._scrollbar.scanDomNode();\n    }\n    _createRow(item, lineHeight, width, originalOptions, originalModel, originalModelOpts, modifiedOptions, modifiedModel, modifiedModelOpts) {\n        const originalLayoutInfo = originalOptions.get(145 /* EditorOption.layoutInfo */);\n        const originalLineNumbersWidth = originalLayoutInfo.glyphMarginWidth + originalLayoutInfo.lineNumbersWidth;\n        const modifiedLayoutInfo = modifiedOptions.get(145 /* EditorOption.layoutInfo */);\n        const modifiedLineNumbersWidth = 10 + modifiedLayoutInfo.glyphMarginWidth + modifiedLayoutInfo.lineNumbersWidth;\n        let rowClassName = 'diff-review-row';\n        let lineNumbersExtraClassName = '';\n        const spacerClassName = 'diff-review-spacer';\n        let spacerIcon = null;\n        switch (item.type) {\n            case LineType.Added:\n                rowClassName = 'diff-review-row line-insert';\n                lineNumbersExtraClassName = ' char-insert';\n                spacerIcon = accessibleDiffViewerInsertIcon;\n                break;\n            case LineType.Deleted:\n                rowClassName = 'diff-review-row line-delete';\n                lineNumbersExtraClassName = ' char-delete';\n                spacerIcon = accessibleDiffViewerRemoveIcon;\n                break;\n        }\n        const row = document.createElement('div');\n        row.style.minWidth = width + 'px';\n        row.className = rowClassName;\n        row.setAttribute('role', 'listitem');\n        row.ariaLevel = '';\n        const cell = document.createElement('div');\n        cell.className = 'diff-review-cell';\n        cell.style.height = `${lineHeight}px`;\n        row.appendChild(cell);\n        const originalLineNumber = document.createElement('span');\n        originalLineNumber.style.width = (originalLineNumbersWidth + 'px');\n        originalLineNumber.style.minWidth = (originalLineNumbersWidth + 'px');\n        originalLineNumber.className = 'diff-review-line-number' + lineNumbersExtraClassName;\n        if (item.originalLineNumber !== undefined) {\n            originalLineNumber.appendChild(document.createTextNode(String(item.originalLineNumber)));\n        }\n        else {\n            originalLineNumber.innerText = '\\u00a0';\n        }\n        cell.appendChild(originalLineNumber);\n        const modifiedLineNumber = document.createElement('span');\n        modifiedLineNumber.style.width = (modifiedLineNumbersWidth + 'px');\n        modifiedLineNumber.style.minWidth = (modifiedLineNumbersWidth + 'px');\n        modifiedLineNumber.style.paddingRight = '10px';\n        modifiedLineNumber.className = 'diff-review-line-number' + lineNumbersExtraClassName;\n        if (item.modifiedLineNumber !== undefined) {\n            modifiedLineNumber.appendChild(document.createTextNode(String(item.modifiedLineNumber)));\n        }\n        else {\n            modifiedLineNumber.innerText = '\\u00a0';\n        }\n        cell.appendChild(modifiedLineNumber);\n        const spacer = document.createElement('span');\n        spacer.className = spacerClassName;\n        if (spacerIcon) {\n            const spacerCodicon = document.createElement('span');\n            spacerCodicon.className = ThemeIcon.asClassName(spacerIcon);\n            spacerCodicon.innerText = '\\u00a0\\u00a0';\n            spacer.appendChild(spacerCodicon);\n        }\n        else {\n            spacer.innerText = '\\u00a0\\u00a0';\n        }\n        cell.appendChild(spacer);\n        let lineContent;\n        if (item.modifiedLineNumber !== undefined) {\n            let html = this._getLineHtml(modifiedModel, modifiedOptions, modifiedModelOpts.tabSize, item.modifiedLineNumber, this._languageService.languageIdCodec);\n            if (AccessibleDiffViewer._ttPolicy) {\n                html = AccessibleDiffViewer._ttPolicy.createHTML(html);\n            }\n            cell.insertAdjacentHTML('beforeend', html);\n            lineContent = modifiedModel.getLineContent(item.modifiedLineNumber);\n        }\n        else {\n            let html = this._getLineHtml(originalModel, originalOptions, originalModelOpts.tabSize, item.originalLineNumber, this._languageService.languageIdCodec);\n            if (AccessibleDiffViewer._ttPolicy) {\n                html = AccessibleDiffViewer._ttPolicy.createHTML(html);\n            }\n            cell.insertAdjacentHTML('beforeend', html);\n            lineContent = originalModel.getLineContent(item.originalLineNumber);\n        }\n        if (lineContent.length === 0) {\n            lineContent = localize('blankLine', \"blank\");\n        }\n        let ariaLabel = '';\n        switch (item.type) {\n            case LineType.Unchanged:\n                if (item.originalLineNumber === item.modifiedLineNumber) {\n                    ariaLabel = localize({ key: 'unchangedLine', comment: ['The placeholders are contents of the line and should not be translated.'] }, \"{0} unchanged line {1}\", lineContent, item.originalLineNumber);\n                }\n                else {\n                    ariaLabel = localize('equalLine', \"{0} original line {1} modified line {2}\", lineContent, item.originalLineNumber, item.modifiedLineNumber);\n                }\n                break;\n            case LineType.Added:\n                ariaLabel = localize('insertLine', \"+ {0} modified line {1}\", lineContent, item.modifiedLineNumber);\n                break;\n            case LineType.Deleted:\n                ariaLabel = localize('deleteLine', \"- {0} original line {1}\", lineContent, item.originalLineNumber);\n                break;\n        }\n        row.setAttribute('aria-label', ariaLabel);\n        return row;\n    }\n    _getLineHtml(model, options, tabSize, lineNumber, languageIdCodec) {\n        const lineContent = model.getLineContent(lineNumber);\n        const fontInfo = options.get(50 /* EditorOption.fontInfo */);\n        const lineTokens = LineTokens.createEmpty(lineContent, languageIdCodec);\n        const isBasicASCII = ViewLineRenderingData.isBasicASCII(lineContent, model.mightContainNonBasicASCII());\n        const containsRTL = ViewLineRenderingData.containsRTL(lineContent, isBasicASCII, model.mightContainRTL());\n        const r = renderViewLine2(new RenderLineInput((fontInfo.isMonospace && !options.get(33 /* EditorOption.disableMonospaceOptimizations */)), fontInfo.canUseHalfwidthRightwardsArrow, lineContent, false, isBasicASCII, containsRTL, 0, lineTokens, [], tabSize, 0, fontInfo.spaceWidth, fontInfo.middotWidth, fontInfo.wsmiddotWidth, options.get(117 /* EditorOption.stopRenderingLineAfter */), options.get(99 /* EditorOption.renderWhitespace */), options.get(94 /* EditorOption.renderControlCharacters */), options.get(51 /* EditorOption.fontLigatures */) !== EditorFontLigatures.OFF, null));\n        return r.html;\n    }\n};\nView = __decorate([\n    __param(5, ILanguageService)\n], View);\nexport class AccessibleDiffViewerModelFromEditors {\n    constructor(editors) {\n        this.editors = editors;\n    }\n    getOriginalModel() {\n        return this.editors.original.getModel();\n    }\n    getOriginalOptions() {\n        return this.editors.original.getOptions();\n    }\n    originalReveal(range) {\n        this.editors.original.revealRange(range);\n        this.editors.original.setSelection(range);\n        this.editors.original.focus();\n    }\n    getModifiedModel() {\n        return this.editors.modified.getModel();\n    }\n    getModifiedOptions() {\n        return this.editors.modified.getOptions();\n    }\n    modifiedReveal(range) {\n        if (range) {\n            this.editors.modified.revealRange(range);\n            this.editors.modified.setSelection(range);\n        }\n        this.editors.modified.focus();\n    }\n    modifiedSetSelection(range) {\n        this.editors.modified.setSelection(range);\n    }\n    modifiedFocus() {\n        this.editors.modified.focus();\n    }\n    getModifiedPosition() {\n        var _a;\n        return (_a = this.editors.modified.getPosition()) !== null && _a !== void 0 ? _a : undefined;\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}