{"ast":null,"code":"import _get from \"/Users/yinger/Desktop/algo_evaluator_front/node_modules/@babel/runtime/helpers/esm/get.js\";\nimport _getPrototypeOf from \"/Users/yinger/Desktop/algo_evaluator_front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _createForOfIteratorHelper from \"/Users/yinger/Desktop/algo_evaluator_front/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _toConsumableArray from \"/Users/yinger/Desktop/algo_evaluator_front/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _typeof from \"/Users/yinger/Desktop/algo_evaluator_front/node_modules/@babel/runtime/helpers/esm/typeof.js\";\nimport _slicedToArray from \"/Users/yinger/Desktop/algo_evaluator_front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _classCallCheck from \"/Users/yinger/Desktop/algo_evaluator_front/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/yinger/Desktop/algo_evaluator_front/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _callSuper from \"/Users/yinger/Desktop/algo_evaluator_front/node_modules/@babel/runtime/helpers/esm/callSuper.js\";\nimport _inherits from \"/Users/yinger/Desktop/algo_evaluator_front/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.some.js\";\nimport \"core-js/modules/es.date.now.js\";\nimport \"core-js/modules/es.map.js\";\nimport \"core-js/modules/es.object.entries.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.object.values.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { findLast } from '../../../../base/common/arraysFind.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { isHotReloadEnabled, registerHotReloadHandler } from '../../../../base/common/hotReload.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, autorunHandleChanges, autorunOpts, autorunWithStore, observableSignalFromEvent, observableValue, transaction } from '../../../../base/common/observable.js';\nimport { ElementSizeObserver } from '../../config/elementSizeObserver.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { TextLength } from '../../../common/core/textLength.js';\nexport function joinCombine(arr1, arr2, keySelector, combine) {\n  if (arr1.length === 0) {\n    return arr2;\n  }\n  if (arr2.length === 0) {\n    return arr1;\n  }\n  var result = [];\n  var i = 0;\n  var j = 0;\n  while (i < arr1.length && j < arr2.length) {\n    var val1 = arr1[i];\n    var val2 = arr2[j];\n    var key1 = keySelector(val1);\n    var key2 = keySelector(val2);\n    if (key1 < key2) {\n      result.push(val1);\n      i++;\n    } else if (key1 > key2) {\n      result.push(val2);\n      j++;\n    } else {\n      result.push(combine(val1, val2));\n      i++;\n      j++;\n    }\n  }\n  while (i < arr1.length) {\n    result.push(arr1[i]);\n    i++;\n  }\n  while (j < arr2.length) {\n    result.push(arr2[j]);\n    j++;\n  }\n  return result;\n}\n// TODO make utility\nexport function applyObservableDecorations(editor, decorations) {\n  var d = new DisposableStore();\n  var decorationsCollection = editor.createDecorationsCollection();\n  d.add(autorunOpts({\n    debugName: function debugName() {\n      return \"Apply decorations from \".concat(decorations.debugName);\n    }\n  }, function (reader) {\n    var d = decorations.read(reader);\n    decorationsCollection.set(d);\n  }));\n  d.add({\n    dispose: function dispose() {\n      decorationsCollection.clear();\n    }\n  });\n  return d;\n}\nexport function appendRemoveOnDispose(parent, child) {\n  parent.appendChild(child);\n  return toDisposable(function () {\n    parent.removeChild(child);\n  });\n}\nexport function prependRemoveOnDispose(parent, child) {\n  parent.prepend(child);\n  return toDisposable(function () {\n    parent.removeChild(child);\n  });\n}\nexport var ObservableElementSizeObserver = /*#__PURE__*/function (_Disposable) {\n  function ObservableElementSizeObserver(element, dimension) {\n    var _this;\n    _classCallCheck(this, ObservableElementSizeObserver);\n    _this = _callSuper(this, ObservableElementSizeObserver);\n    _this.elementSizeObserver = _this._register(new ElementSizeObserver(element, dimension));\n    _this._width = observableValue(_this, _this.elementSizeObserver.getWidth());\n    _this._height = observableValue(_this, _this.elementSizeObserver.getHeight());\n    _this._register(_this.elementSizeObserver.onDidChange(function (e) {\n      return transaction(function (tx) {\n        /** @description Set width/height from elementSizeObserver */\n        _this._width.set(_this.elementSizeObserver.getWidth(), tx);\n        _this._height.set(_this.elementSizeObserver.getHeight(), tx);\n      });\n    }));\n    return _this;\n  }\n  _inherits(ObservableElementSizeObserver, _Disposable);\n  return _createClass(ObservableElementSizeObserver, [{\n    key: \"width\",\n    get: function get() {\n      return this._width;\n    }\n  }, {\n    key: \"height\",\n    get: function get() {\n      return this._height;\n    }\n  }, {\n    key: \"observe\",\n    value: function observe(dimension) {\n      this.elementSizeObserver.observe(dimension);\n    }\n  }, {\n    key: \"setAutomaticLayout\",\n    value: function setAutomaticLayout(automaticLayout) {\n      if (automaticLayout) {\n        this.elementSizeObserver.startObserving();\n      } else {\n        this.elementSizeObserver.stopObserving();\n      }\n    }\n  }]);\n}(Disposable);\nexport function animatedObservable(targetWindow, base, store) {\n  var targetVal = base.get();\n  var startVal = targetVal;\n  var curVal = targetVal;\n  var result = observableValue('animatedValue', targetVal);\n  var animationStartMs = -1;\n  var durationMs = 300;\n  var animationFrame = undefined;\n  store.add(autorunHandleChanges({\n    createEmptyChangeSummary: function createEmptyChangeSummary() {\n      return {\n        animate: false\n      };\n    },\n    handleChange: function handleChange(ctx, s) {\n      if (ctx.didChange(base)) {\n        s.animate = s.animate || ctx.change;\n      }\n      return true;\n    }\n  }, function (reader, s) {\n    /** @description update value */\n    if (animationFrame !== undefined) {\n      targetWindow.cancelAnimationFrame(animationFrame);\n      animationFrame = undefined;\n    }\n    startVal = curVal;\n    targetVal = base.read(reader);\n    animationStartMs = Date.now() - (s.animate ? 0 : durationMs);\n    update();\n  }));\n  function update() {\n    var passedMs = Date.now() - animationStartMs;\n    curVal = Math.floor(easeOutExpo(passedMs, startVal, targetVal - startVal, durationMs));\n    if (passedMs < durationMs) {\n      animationFrame = targetWindow.requestAnimationFrame(update);\n    } else {\n      curVal = targetVal;\n    }\n    result.set(curVal, undefined);\n  }\n  return result;\n}\nfunction easeOutExpo(t, b, c, d) {\n  return t === d ? b + c : c * (-Math.pow(2, -10 * t / d) + 1) + b;\n}\nexport var ViewZoneOverlayWidget = /*#__PURE__*/function (_Disposable2) {\n  function ViewZoneOverlayWidget(editor, viewZone, htmlElement) {\n    var _this2;\n    _classCallCheck(this, ViewZoneOverlayWidget);\n    _this2 = _callSuper(this, ViewZoneOverlayWidget);\n    _this2._register(new ManagedOverlayWidget(editor, htmlElement));\n    _this2._register(applyStyle(htmlElement, {\n      height: viewZone.actualHeight,\n      top: viewZone.actualTop\n    }));\n    return _this2;\n  }\n  _inherits(ViewZoneOverlayWidget, _Disposable2);\n  return _createClass(ViewZoneOverlayWidget);\n}(Disposable);\nexport var PlaceholderViewZone = /*#__PURE__*/function () {\n  function PlaceholderViewZone(_afterLineNumber, heightInPx) {\n    var _this3 = this;\n    _classCallCheck(this, PlaceholderViewZone);\n    this._afterLineNumber = _afterLineNumber;\n    this.heightInPx = heightInPx;\n    this.domNode = document.createElement('div');\n    this._actualTop = observableValue(this, undefined);\n    this._actualHeight = observableValue(this, undefined);\n    this.actualTop = this._actualTop;\n    this.actualHeight = this._actualHeight;\n    this.showInHiddenAreas = true;\n    this.onChange = this._afterLineNumber;\n    this.onDomNodeTop = function (top) {\n      _this3._actualTop.set(top, undefined);\n    };\n    this.onComputedHeight = function (height) {\n      _this3._actualHeight.set(height, undefined);\n    };\n  }\n  return _createClass(PlaceholderViewZone, [{\n    key: \"afterLineNumber\",\n    get: function get() {\n      return this._afterLineNumber.get();\n    }\n  }]);\n}();\nexport var ManagedOverlayWidget = /*#__PURE__*/function () {\n  function ManagedOverlayWidget(_editor, _domElement) {\n    var _this4 = this;\n    _classCallCheck(this, ManagedOverlayWidget);\n    this._editor = _editor;\n    this._domElement = _domElement;\n    this._overlayWidgetId = \"managedOverlayWidget-\".concat(ManagedOverlayWidget._counter++);\n    this._overlayWidget = {\n      getId: function getId() {\n        return _this4._overlayWidgetId;\n      },\n      getDomNode: function getDomNode() {\n        return _this4._domElement;\n      },\n      getPosition: function getPosition() {\n        return null;\n      }\n    };\n    this._editor.addOverlayWidget(this._overlayWidget);\n  }\n  return _createClass(ManagedOverlayWidget, [{\n    key: \"dispose\",\n    value: function dispose() {\n      this._editor.removeOverlayWidget(this._overlayWidget);\n    }\n  }]);\n}();\nManagedOverlayWidget._counter = 0;\nexport function applyStyle(domNode, style) {\n  return autorun(function (reader) {\n    /** @description applyStyle */\n    for (var _i = 0, _Object$entries = Object.entries(style); _i < _Object$entries.length; _i++) {\n      var _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2),\n        key = _Object$entries$_i[0],\n        val = _Object$entries$_i[1];\n      if (val && _typeof(val) === 'object' && 'read' in val) {\n        val = val.read(reader);\n      }\n      if (typeof val === 'number') {\n        val = \"\".concat(val, \"px\");\n      }\n      key = key.replace(/[A-Z]/g, function (m) {\n        return '-' + m.toLowerCase();\n      });\n      domNode.style[key] = val;\n    }\n  });\n}\nexport function readHotReloadableExport(value, reader) {\n  observeHotReloadableExports([value], reader);\n  return value;\n}\nexport function observeHotReloadableExports(values, reader) {\n  if (isHotReloadEnabled()) {\n    var o = observableSignalFromEvent('reload', function (event) {\n      return registerHotReloadHandler(function (_ref) {\n        var oldExports = _ref.oldExports;\n        if (!_toConsumableArray(Object.values(oldExports)).some(function (v) {\n          return values.includes(v);\n        })) {\n          return undefined;\n        }\n        return function (_newExports) {\n          event(undefined);\n          return true;\n        };\n      });\n    });\n    o.read(reader);\n  }\n}\nexport function applyViewZones(editor, viewZones, setIsUpdating, zoneIds) {\n  var store = new DisposableStore();\n  var lastViewZoneIds = [];\n  store.add(autorunWithStore(function (reader, store) {\n    /** @description applyViewZones */\n    var curViewZones = viewZones.read(reader);\n    var viewZonIdsPerViewZone = new Map();\n    var viewZoneIdPerOnChangeObservable = new Map();\n    // Add/remove view zones\n    if (setIsUpdating) {\n      setIsUpdating(true);\n    }\n    editor.changeViewZones(function (a) {\n      for (var _i2 = 0, _lastViewZoneIds = lastViewZoneIds; _i2 < _lastViewZoneIds.length; _i2++) {\n        var id = _lastViewZoneIds[_i2];\n        a.removeZone(id);\n        zoneIds === null || zoneIds === void 0 ? void 0 : zoneIds[\"delete\"](id);\n      }\n      lastViewZoneIds.length = 0;\n      var _iterator = _createForOfIteratorHelper(curViewZones),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var z = _step.value;\n          var _id = a.addZone(z);\n          if (z.setZoneId) {\n            z.setZoneId(_id);\n          }\n          lastViewZoneIds.push(_id);\n          zoneIds === null || zoneIds === void 0 ? void 0 : zoneIds.add(_id);\n          viewZonIdsPerViewZone.set(z, _id);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    });\n    if (setIsUpdating) {\n      setIsUpdating(false);\n    }\n    // Layout zone on change\n    store.add(autorunHandleChanges({\n      createEmptyChangeSummary: function createEmptyChangeSummary() {\n        return {\n          zoneIds: []\n        };\n      },\n      handleChange: function handleChange(context, changeSummary) {\n        var id = viewZoneIdPerOnChangeObservable.get(context.changedObservable);\n        if (id !== undefined) {\n          changeSummary.zoneIds.push(id);\n        }\n        return true;\n      }\n    }, function (reader, changeSummary) {\n      /** @description layoutZone on change */\n      var _iterator2 = _createForOfIteratorHelper(curViewZones),\n        _step2;\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var vz = _step2.value;\n          if (vz.onChange) {\n            viewZoneIdPerOnChangeObservable.set(vz.onChange, viewZonIdsPerViewZone.get(vz));\n            vz.onChange.read(reader);\n          }\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n      if (setIsUpdating) {\n        setIsUpdating(true);\n      }\n      editor.changeViewZones(function (a) {\n        var _iterator3 = _createForOfIteratorHelper(changeSummary.zoneIds),\n          _step3;\n        try {\n          for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n            var id = _step3.value;\n            a.layoutZone(id);\n          }\n        } catch (err) {\n          _iterator3.e(err);\n        } finally {\n          _iterator3.f();\n        }\n      });\n      if (setIsUpdating) {\n        setIsUpdating(false);\n      }\n    }));\n  }));\n  store.add({\n    dispose: function dispose() {\n      if (setIsUpdating) {\n        setIsUpdating(true);\n      }\n      editor.changeViewZones(function (a) {\n        for (var _i3 = 0, _lastViewZoneIds2 = lastViewZoneIds; _i3 < _lastViewZoneIds2.length; _i3++) {\n          var id = _lastViewZoneIds2[_i3];\n          a.removeZone(id);\n        }\n      });\n      zoneIds === null || zoneIds === void 0 ? void 0 : zoneIds.clear();\n      if (setIsUpdating) {\n        setIsUpdating(false);\n      }\n    }\n  });\n  return store;\n}\nexport var DisposableCancellationTokenSource = /*#__PURE__*/function (_CancellationTokenSou) {\n  function DisposableCancellationTokenSource() {\n    _classCallCheck(this, DisposableCancellationTokenSource);\n    return _callSuper(this, DisposableCancellationTokenSource, arguments);\n  }\n  _inherits(DisposableCancellationTokenSource, _CancellationTokenSou);\n  return _createClass(DisposableCancellationTokenSource, [{\n    key: \"dispose\",\n    value: function dispose() {\n      _get(_getPrototypeOf(DisposableCancellationTokenSource.prototype), \"dispose\", this).call(this, true);\n    }\n  }]);\n}(CancellationTokenSource);\nexport function translatePosition(posInOriginal, mappings) {\n  var mapping = findLast(mappings, function (m) {\n    return m.original.startLineNumber <= posInOriginal.lineNumber;\n  });\n  if (!mapping) {\n    // No changes before the position\n    return Range.fromPositions(posInOriginal);\n  }\n  if (mapping.original.endLineNumberExclusive <= posInOriginal.lineNumber) {\n    var newLineNumber = posInOriginal.lineNumber - mapping.original.endLineNumberExclusive + mapping.modified.endLineNumberExclusive;\n    return Range.fromPositions(new Position(newLineNumber, posInOriginal.column));\n  }\n  if (!mapping.innerChanges) {\n    // Only for legacy algorithm\n    return Range.fromPositions(new Position(mapping.modified.startLineNumber, 1));\n  }\n  var innerMapping = findLast(mapping.innerChanges, function (m) {\n    return m.originalRange.getStartPosition().isBeforeOrEqual(posInOriginal);\n  });\n  if (!innerMapping) {\n    var _newLineNumber = posInOriginal.lineNumber - mapping.original.startLineNumber + mapping.modified.startLineNumber;\n    return Range.fromPositions(new Position(_newLineNumber, posInOriginal.column));\n  }\n  if (innerMapping.originalRange.containsPosition(posInOriginal)) {\n    return innerMapping.modifiedRange;\n  } else {\n    var l = lengthBetweenPositions(innerMapping.originalRange.getEndPosition(), posInOriginal);\n    return Range.fromPositions(l.addToPosition(innerMapping.modifiedRange.getEndPosition()));\n  }\n}\nfunction lengthBetweenPositions(position1, position2) {\n  if (position1.lineNumber === position2.lineNumber) {\n    return new TextLength(0, position2.column - position1.column);\n  } else {\n    return new TextLength(position2.lineNumber - position1.lineNumber, position2.column - 1);\n  }\n}\nexport function bindContextKey(key, service, computeValue) {\n  var boundKey = key.bindTo(service);\n  return autorunOpts({\n    debugName: function debugName() {\n      return \"Set Context Key \\\"\".concat(key.key, \"\\\"\");\n    }\n  }, function (reader) {\n    boundKey.set(computeValue(reader));\n  });\n}\nexport function filterWithPrevious(arr, filter) {\n  var prev;\n  return arr.filter(function (cur) {\n    var result = filter(cur, prev);\n    prev = cur;\n    return result;\n  });\n}","map":{"version":3,"names":["findLast","CancellationTokenSource","isHotReloadEnabled","registerHotReloadHandler","Disposable","DisposableStore","toDisposable","autorun","autorunHandleChanges","autorunOpts","autorunWithStore","observableSignalFromEvent","observableValue","transaction","ElementSizeObserver","Position","Range","TextLength","joinCombine","arr1","arr2","keySelector","combine","length","result","i","j","val1","val2","key1","key2","push","applyObservableDecorations","editor","decorations","d","decorationsCollection","createDecorationsCollection","add","debugName","concat","reader","read","set","dispose","clear","appendRemoveOnDispose","parent","child","appendChild","removeChild","prependRemoveOnDispose","prepend","ObservableElementSizeObserver","_Disposable","element","dimension","_this","_classCallCheck","_callSuper","elementSizeObserver","_register","_width","getWidth","_height","getHeight","onDidChange","e","tx","_inherits","_createClass","key","get","value","observe","setAutomaticLayout","automaticLayout","startObserving","stopObserving","animatedObservable","targetWindow","base","store","targetVal","startVal","curVal","animationStartMs","durationMs","animationFrame","undefined","createEmptyChangeSummary","animate","handleChange","ctx","s","didChange","change","cancelAnimationFrame","Date","now","update","passedMs","Math","floor","easeOutExpo","requestAnimationFrame","t","b","c","pow","ViewZoneOverlayWidget","_Disposable2","viewZone","htmlElement","_this2","ManagedOverlayWidget","applyStyle","height","actualHeight","top","actualTop","PlaceholderViewZone","_afterLineNumber","heightInPx","_this3","domNode","document","createElement","_actualTop","_actualHeight","showInHiddenAreas","onChange","onDomNodeTop","onComputedHeight","_editor","_domElement","_this4","_overlayWidgetId","_counter","_overlayWidget","getId","getDomNode","getPosition","addOverlayWidget","removeOverlayWidget","style","_i","_Object$entries","Object","entries","_Object$entries$_i","_slicedToArray","val","_typeof","replace","m","toLowerCase","readHotReloadableExport","observeHotReloadableExports","values","o","event","_ref","oldExports","_toConsumableArray","some","v","includes","_newExports","applyViewZones","viewZones","setIsUpdating","zoneIds","lastViewZoneIds","curViewZones","viewZonIdsPerViewZone","Map","viewZoneIdPerOnChangeObservable","changeViewZones","a","_i2","_lastViewZoneIds","id","removeZone","_iterator","_createForOfIteratorHelper","_step","n","done","z","addZone","setZoneId","err","f","context","changeSummary","changedObservable","_iterator2","_step2","vz","_iterator3","_step3","layoutZone","_i3","_lastViewZoneIds2","DisposableCancellationTokenSource","_CancellationTokenSou","arguments","_get","_getPrototypeOf","prototype","call","translatePosition","posInOriginal","mappings","mapping","original","startLineNumber","lineNumber","fromPositions","endLineNumberExclusive","newLineNumber","modified","column","innerChanges","innerMapping","originalRange","getStartPosition","isBeforeOrEqual","containsPosition","modifiedRange","l","lengthBetweenPositions","getEndPosition","addToPosition","position1","position2","bindContextKey","service","computeValue","boundKey","bindTo","filterWithPrevious","arr","filter","prev","cur"],"sources":["/Users/yinger/Desktop/algo_evaluator_front/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/utils.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { findLast } from '../../../../base/common/arraysFind.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { isHotReloadEnabled, registerHotReloadHandler } from '../../../../base/common/hotReload.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, autorunHandleChanges, autorunOpts, autorunWithStore, observableSignalFromEvent, observableValue, transaction } from '../../../../base/common/observable.js';\nimport { ElementSizeObserver } from '../../config/elementSizeObserver.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { TextLength } from '../../../common/core/textLength.js';\nexport function joinCombine(arr1, arr2, keySelector, combine) {\n    if (arr1.length === 0) {\n        return arr2;\n    }\n    if (arr2.length === 0) {\n        return arr1;\n    }\n    const result = [];\n    let i = 0;\n    let j = 0;\n    while (i < arr1.length && j < arr2.length) {\n        const val1 = arr1[i];\n        const val2 = arr2[j];\n        const key1 = keySelector(val1);\n        const key2 = keySelector(val2);\n        if (key1 < key2) {\n            result.push(val1);\n            i++;\n        }\n        else if (key1 > key2) {\n            result.push(val2);\n            j++;\n        }\n        else {\n            result.push(combine(val1, val2));\n            i++;\n            j++;\n        }\n    }\n    while (i < arr1.length) {\n        result.push(arr1[i]);\n        i++;\n    }\n    while (j < arr2.length) {\n        result.push(arr2[j]);\n        j++;\n    }\n    return result;\n}\n// TODO make utility\nexport function applyObservableDecorations(editor, decorations) {\n    const d = new DisposableStore();\n    const decorationsCollection = editor.createDecorationsCollection();\n    d.add(autorunOpts({ debugName: () => `Apply decorations from ${decorations.debugName}` }, reader => {\n        const d = decorations.read(reader);\n        decorationsCollection.set(d);\n    }));\n    d.add({\n        dispose: () => {\n            decorationsCollection.clear();\n        }\n    });\n    return d;\n}\nexport function appendRemoveOnDispose(parent, child) {\n    parent.appendChild(child);\n    return toDisposable(() => {\n        parent.removeChild(child);\n    });\n}\nexport function prependRemoveOnDispose(parent, child) {\n    parent.prepend(child);\n    return toDisposable(() => {\n        parent.removeChild(child);\n    });\n}\nexport class ObservableElementSizeObserver extends Disposable {\n    get width() { return this._width; }\n    get height() { return this._height; }\n    constructor(element, dimension) {\n        super();\n        this.elementSizeObserver = this._register(new ElementSizeObserver(element, dimension));\n        this._width = observableValue(this, this.elementSizeObserver.getWidth());\n        this._height = observableValue(this, this.elementSizeObserver.getHeight());\n        this._register(this.elementSizeObserver.onDidChange(e => transaction(tx => {\n            /** @description Set width/height from elementSizeObserver */\n            this._width.set(this.elementSizeObserver.getWidth(), tx);\n            this._height.set(this.elementSizeObserver.getHeight(), tx);\n        })));\n    }\n    observe(dimension) {\n        this.elementSizeObserver.observe(dimension);\n    }\n    setAutomaticLayout(automaticLayout) {\n        if (automaticLayout) {\n            this.elementSizeObserver.startObserving();\n        }\n        else {\n            this.elementSizeObserver.stopObserving();\n        }\n    }\n}\nexport function animatedObservable(targetWindow, base, store) {\n    let targetVal = base.get();\n    let startVal = targetVal;\n    let curVal = targetVal;\n    const result = observableValue('animatedValue', targetVal);\n    let animationStartMs = -1;\n    const durationMs = 300;\n    let animationFrame = undefined;\n    store.add(autorunHandleChanges({\n        createEmptyChangeSummary: () => ({ animate: false }),\n        handleChange: (ctx, s) => {\n            if (ctx.didChange(base)) {\n                s.animate = s.animate || ctx.change;\n            }\n            return true;\n        }\n    }, (reader, s) => {\n        /** @description update value */\n        if (animationFrame !== undefined) {\n            targetWindow.cancelAnimationFrame(animationFrame);\n            animationFrame = undefined;\n        }\n        startVal = curVal;\n        targetVal = base.read(reader);\n        animationStartMs = Date.now() - (s.animate ? 0 : durationMs);\n        update();\n    }));\n    function update() {\n        const passedMs = Date.now() - animationStartMs;\n        curVal = Math.floor(easeOutExpo(passedMs, startVal, targetVal - startVal, durationMs));\n        if (passedMs < durationMs) {\n            animationFrame = targetWindow.requestAnimationFrame(update);\n        }\n        else {\n            curVal = targetVal;\n        }\n        result.set(curVal, undefined);\n    }\n    return result;\n}\nfunction easeOutExpo(t, b, c, d) {\n    return t === d ? b + c : c * (-Math.pow(2, -10 * t / d) + 1) + b;\n}\nexport class ViewZoneOverlayWidget extends Disposable {\n    constructor(editor, viewZone, htmlElement) {\n        super();\n        this._register(new ManagedOverlayWidget(editor, htmlElement));\n        this._register(applyStyle(htmlElement, {\n            height: viewZone.actualHeight,\n            top: viewZone.actualTop,\n        }));\n    }\n}\nexport class PlaceholderViewZone {\n    get afterLineNumber() { return this._afterLineNumber.get(); }\n    constructor(_afterLineNumber, heightInPx) {\n        this._afterLineNumber = _afterLineNumber;\n        this.heightInPx = heightInPx;\n        this.domNode = document.createElement('div');\n        this._actualTop = observableValue(this, undefined);\n        this._actualHeight = observableValue(this, undefined);\n        this.actualTop = this._actualTop;\n        this.actualHeight = this._actualHeight;\n        this.showInHiddenAreas = true;\n        this.onChange = this._afterLineNumber;\n        this.onDomNodeTop = (top) => {\n            this._actualTop.set(top, undefined);\n        };\n        this.onComputedHeight = (height) => {\n            this._actualHeight.set(height, undefined);\n        };\n    }\n}\nexport class ManagedOverlayWidget {\n    constructor(_editor, _domElement) {\n        this._editor = _editor;\n        this._domElement = _domElement;\n        this._overlayWidgetId = `managedOverlayWidget-${ManagedOverlayWidget._counter++}`;\n        this._overlayWidget = {\n            getId: () => this._overlayWidgetId,\n            getDomNode: () => this._domElement,\n            getPosition: () => null\n        };\n        this._editor.addOverlayWidget(this._overlayWidget);\n    }\n    dispose() {\n        this._editor.removeOverlayWidget(this._overlayWidget);\n    }\n}\nManagedOverlayWidget._counter = 0;\nexport function applyStyle(domNode, style) {\n    return autorun(reader => {\n        /** @description applyStyle */\n        for (let [key, val] of Object.entries(style)) {\n            if (val && typeof val === 'object' && 'read' in val) {\n                val = val.read(reader);\n            }\n            if (typeof val === 'number') {\n                val = `${val}px`;\n            }\n            key = key.replace(/[A-Z]/g, m => '-' + m.toLowerCase());\n            domNode.style[key] = val;\n        }\n    });\n}\nexport function readHotReloadableExport(value, reader) {\n    observeHotReloadableExports([value], reader);\n    return value;\n}\nexport function observeHotReloadableExports(values, reader) {\n    if (isHotReloadEnabled()) {\n        const o = observableSignalFromEvent('reload', event => registerHotReloadHandler(({ oldExports }) => {\n            if (![...Object.values(oldExports)].some(v => values.includes(v))) {\n                return undefined;\n            }\n            return (_newExports) => {\n                event(undefined);\n                return true;\n            };\n        }));\n        o.read(reader);\n    }\n}\nexport function applyViewZones(editor, viewZones, setIsUpdating, zoneIds) {\n    const store = new DisposableStore();\n    const lastViewZoneIds = [];\n    store.add(autorunWithStore((reader, store) => {\n        /** @description applyViewZones */\n        const curViewZones = viewZones.read(reader);\n        const viewZonIdsPerViewZone = new Map();\n        const viewZoneIdPerOnChangeObservable = new Map();\n        // Add/remove view zones\n        if (setIsUpdating) {\n            setIsUpdating(true);\n        }\n        editor.changeViewZones(a => {\n            for (const id of lastViewZoneIds) {\n                a.removeZone(id);\n                zoneIds === null || zoneIds === void 0 ? void 0 : zoneIds.delete(id);\n            }\n            lastViewZoneIds.length = 0;\n            for (const z of curViewZones) {\n                const id = a.addZone(z);\n                if (z.setZoneId) {\n                    z.setZoneId(id);\n                }\n                lastViewZoneIds.push(id);\n                zoneIds === null || zoneIds === void 0 ? void 0 : zoneIds.add(id);\n                viewZonIdsPerViewZone.set(z, id);\n            }\n        });\n        if (setIsUpdating) {\n            setIsUpdating(false);\n        }\n        // Layout zone on change\n        store.add(autorunHandleChanges({\n            createEmptyChangeSummary() {\n                return { zoneIds: [] };\n            },\n            handleChange(context, changeSummary) {\n                const id = viewZoneIdPerOnChangeObservable.get(context.changedObservable);\n                if (id !== undefined) {\n                    changeSummary.zoneIds.push(id);\n                }\n                return true;\n            },\n        }, (reader, changeSummary) => {\n            /** @description layoutZone on change */\n            for (const vz of curViewZones) {\n                if (vz.onChange) {\n                    viewZoneIdPerOnChangeObservable.set(vz.onChange, viewZonIdsPerViewZone.get(vz));\n                    vz.onChange.read(reader);\n                }\n            }\n            if (setIsUpdating) {\n                setIsUpdating(true);\n            }\n            editor.changeViewZones(a => { for (const id of changeSummary.zoneIds) {\n                a.layoutZone(id);\n            } });\n            if (setIsUpdating) {\n                setIsUpdating(false);\n            }\n        }));\n    }));\n    store.add({\n        dispose() {\n            if (setIsUpdating) {\n                setIsUpdating(true);\n            }\n            editor.changeViewZones(a => { for (const id of lastViewZoneIds) {\n                a.removeZone(id);\n            } });\n            zoneIds === null || zoneIds === void 0 ? void 0 : zoneIds.clear();\n            if (setIsUpdating) {\n                setIsUpdating(false);\n            }\n        }\n    });\n    return store;\n}\nexport class DisposableCancellationTokenSource extends CancellationTokenSource {\n    dispose() {\n        super.dispose(true);\n    }\n}\nexport function translatePosition(posInOriginal, mappings) {\n    const mapping = findLast(mappings, m => m.original.startLineNumber <= posInOriginal.lineNumber);\n    if (!mapping) {\n        // No changes before the position\n        return Range.fromPositions(posInOriginal);\n    }\n    if (mapping.original.endLineNumberExclusive <= posInOriginal.lineNumber) {\n        const newLineNumber = posInOriginal.lineNumber - mapping.original.endLineNumberExclusive + mapping.modified.endLineNumberExclusive;\n        return Range.fromPositions(new Position(newLineNumber, posInOriginal.column));\n    }\n    if (!mapping.innerChanges) {\n        // Only for legacy algorithm\n        return Range.fromPositions(new Position(mapping.modified.startLineNumber, 1));\n    }\n    const innerMapping = findLast(mapping.innerChanges, m => m.originalRange.getStartPosition().isBeforeOrEqual(posInOriginal));\n    if (!innerMapping) {\n        const newLineNumber = posInOriginal.lineNumber - mapping.original.startLineNumber + mapping.modified.startLineNumber;\n        return Range.fromPositions(new Position(newLineNumber, posInOriginal.column));\n    }\n    if (innerMapping.originalRange.containsPosition(posInOriginal)) {\n        return innerMapping.modifiedRange;\n    }\n    else {\n        const l = lengthBetweenPositions(innerMapping.originalRange.getEndPosition(), posInOriginal);\n        return Range.fromPositions(l.addToPosition(innerMapping.modifiedRange.getEndPosition()));\n    }\n}\nfunction lengthBetweenPositions(position1, position2) {\n    if (position1.lineNumber === position2.lineNumber) {\n        return new TextLength(0, position2.column - position1.column);\n    }\n    else {\n        return new TextLength(position2.lineNumber - position1.lineNumber, position2.column - 1);\n    }\n}\nexport function bindContextKey(key, service, computeValue) {\n    const boundKey = key.bindTo(service);\n    return autorunOpts({ debugName: () => `Set Context Key \"${key.key}\"` }, reader => {\n        boundKey.set(computeValue(reader));\n    });\n}\nexport function filterWithPrevious(arr, filter) {\n    let prev;\n    return arr.filter(cur => {\n        const result = filter(cur, prev);\n        prev = cur;\n        return result;\n    });\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}