{"ast":null,"code":"import _createForOfIteratorHelper from \"/Users/yinger/Desktop/z95_exam_frontend/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _regeneratorRuntime from \"/Users/yinger/Desktop/z95_exam_frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/yinger/Desktop/z95_exam_frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"/Users/yinger/Desktop/z95_exam_frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _classCallCheck from \"/Users/yinger/Desktop/z95_exam_frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/yinger/Desktop/z95_exam_frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _typeof from \"/Users/yinger/Desktop/z95_exam_frontend/node_modules/@babel/runtime/helpers/esm/typeof.js\";\nimport \"core-js/modules/es.object.define-property.js\";\nimport \"core-js/modules/es.object.get-own-property-descriptor.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.reflect.to-string-tag.js\";\nimport \"core-js/modules/es.regexp.constructor.js\";\nimport \"core-js/modules/es.regexp.dot-all.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.regexp.sticky.js\";\nimport \"core-js/modules/es.regexp.to-string.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport \"core-js/modules/es.string.trim.js\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if ((typeof Reflect === \"undefined\" ? \"undefined\" : _typeof(Reflect)) === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nvar GotoDefinitionAtPositionEditorContribution_1;\nimport { createCancelablePromise } from '../../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../../base/common/errors.js';\nimport { MarkdownString } from '../../../../../base/common/htmlContent.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport './goToDefinitionAtPosition.css';\nimport { EditorState } from '../../../editorState/browser/editorState.js';\nimport { registerEditorContribution } from '../../../../browser/editorExtensions.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { ILanguageService } from '../../../../common/languages/language.js';\nimport { ITextModelService } from '../../../../common/services/resolverService.js';\nimport { ClickLinkGesture } from './clickLinkGesture.js';\nimport { PeekContext } from '../../../peekView/browser/peekView.js';\nimport * as nls from '../../../../../nls.js';\nimport { IContextKeyService } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { DefinitionAction } from '../goToCommands.js';\nimport { getDefinitionsAtPosition } from '../goToSymbol.js';\nimport { ILanguageFeaturesService } from '../../../../common/services/languageFeatures.js';\nimport { ModelDecorationInjectedTextOptions } from '../../../../common/model/textModel.js';\nvar GotoDefinitionAtPositionEditorContribution = GotoDefinitionAtPositionEditorContribution_1 = /*#__PURE__*/function () {\n  function GotoDefinitionAtPositionEditorContribution(editor, textModelResolverService, languageService, languageFeaturesService) {\n    var _this = this;\n    _classCallCheck(this, GotoDefinitionAtPositionEditorContribution);\n    this.textModelResolverService = textModelResolverService;\n    this.languageService = languageService;\n    this.languageFeaturesService = languageFeaturesService;\n    this.toUnhook = new DisposableStore();\n    this.toUnhookForKeyboard = new DisposableStore();\n    this.currentWordAtPosition = null;\n    this.previousPromise = null;\n    this.editor = editor;\n    this.linkDecorations = this.editor.createDecorationsCollection();\n    var linkGesture = new ClickLinkGesture(editor);\n    this.toUnhook.add(linkGesture);\n    this.toUnhook.add(linkGesture.onMouseMoveOrRelevantKeyDown(function (_ref) {\n      var _ref2 = _slicedToArray(_ref, 2),\n        mouseEvent = _ref2[0],\n        keyboardEvent = _ref2[1];\n      _this.startFindDefinitionFromMouse(mouseEvent, keyboardEvent !== null && keyboardEvent !== void 0 ? keyboardEvent : undefined);\n    }));\n    this.toUnhook.add(linkGesture.onExecute(function (mouseEvent) {\n      if (_this.isEnabled(mouseEvent)) {\n        _this.gotoDefinition(mouseEvent.target.position, mouseEvent.hasSideBySideModifier)[\"catch\"](function (error) {\n          onUnexpectedError(error);\n        })[\"finally\"](function () {\n          _this.removeLinkDecorations();\n        });\n      }\n    }));\n    this.toUnhook.add(linkGesture.onCancel(function () {\n      _this.removeLinkDecorations();\n      _this.currentWordAtPosition = null;\n    }));\n  }\n  return _createClass(GotoDefinitionAtPositionEditorContribution, [{\n    key: \"startFindDefinitionFromCursor\",\n    value: function () {\n      var _startFindDefinitionFromCursor = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(position) {\n        var _this2 = this;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return this.startFindDefinition(position);\n            case 2:\n              // Add listeners for editor cursor move and key down events\n              // Dismiss the \"extended\" editor decorations when the user hides\n              // the hover widget. There is no event for the widget itself so these\n              // serve as a best effort. After removing the link decorations, the hover\n              // widget is clean and will only show declarations per next request.\n              this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition(function () {\n                _this2.currentWordAtPosition = null;\n                _this2.removeLinkDecorations();\n                _this2.toUnhookForKeyboard.clear();\n              }));\n              this.toUnhookForKeyboard.add(this.editor.onKeyDown(function (e) {\n                if (e) {\n                  _this2.currentWordAtPosition = null;\n                  _this2.removeLinkDecorations();\n                  _this2.toUnhookForKeyboard.clear();\n                }\n              }));\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function startFindDefinitionFromCursor(_x) {\n        return _startFindDefinitionFromCursor.apply(this, arguments);\n      }\n      return startFindDefinitionFromCursor;\n    }()\n  }, {\n    key: \"startFindDefinitionFromMouse\",\n    value: function startFindDefinitionFromMouse(mouseEvent, withKey) {\n      // check if we are active and on a content widget\n      if (mouseEvent.target.type === 9 /* MouseTargetType.CONTENT_WIDGET */ && this.linkDecorations.length > 0) {\n        return;\n      }\n      if (!this.editor.hasModel() || !this.isEnabled(mouseEvent, withKey)) {\n        this.currentWordAtPosition = null;\n        this.removeLinkDecorations();\n        return;\n      }\n      var position = mouseEvent.target.position;\n      this.startFindDefinition(position);\n    }\n  }, {\n    key: \"startFindDefinition\",\n    value: function () {\n      var _startFindDefinition = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(position) {\n        var _this3 = this;\n        var _a, word, state, results, linkRange, combinedRange, _iterator, _step, originSelectionRange, result;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              // Dispose listeners for updating decorations when using keyboard to show definition hover\n              this.toUnhookForKeyboard.clear();\n              // Find word at mouse position\n              word = position ? (_a = this.editor.getModel()) === null || _a === void 0 ? void 0 : _a.getWordAtPosition(position) : null;\n              if (word) {\n                _context2.next = 6;\n                break;\n              }\n              this.currentWordAtPosition = null;\n              this.removeLinkDecorations();\n              return _context2.abrupt(\"return\");\n            case 6:\n              if (!(this.currentWordAtPosition && this.currentWordAtPosition.startColumn === word.startColumn && this.currentWordAtPosition.endColumn === word.endColumn && this.currentWordAtPosition.word === word.word)) {\n                _context2.next = 8;\n                break;\n              }\n              return _context2.abrupt(\"return\");\n            case 8:\n              this.currentWordAtPosition = word;\n              // Find definition and decorate word if found\n              state = new EditorState(this.editor, 4 /* CodeEditorStateFlag.Position */ | 1 /* CodeEditorStateFlag.Value */ | 2 /* CodeEditorStateFlag.Selection */ | 8 /* CodeEditorStateFlag.Scroll */);\n              if (this.previousPromise) {\n                this.previousPromise.cancel();\n                this.previousPromise = null;\n              }\n              this.previousPromise = createCancelablePromise(function (token) {\n                return _this3.findDefinition(position, token);\n              });\n              _context2.prev = 12;\n              _context2.next = 15;\n              return this.previousPromise;\n            case 15:\n              results = _context2.sent;\n              _context2.next = 22;\n              break;\n            case 18:\n              _context2.prev = 18;\n              _context2.t0 = _context2[\"catch\"](12);\n              onUnexpectedError(_context2.t0);\n              return _context2.abrupt(\"return\");\n            case 22:\n              if (!(!results || !results.length || !state.validate(this.editor))) {\n                _context2.next = 25;\n                break;\n              }\n              this.removeLinkDecorations();\n              return _context2.abrupt(\"return\");\n            case 25:\n              linkRange = results[0].originSelectionRange ? Range.lift(results[0].originSelectionRange) : new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn); // Multiple results\n              if (!(results.length > 1)) {\n                _context2.next = 33;\n                break;\n              }\n              combinedRange = linkRange;\n              _iterator = _createForOfIteratorHelper(results);\n              try {\n                for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                  originSelectionRange = _step.value.originSelectionRange;\n                  if (originSelectionRange) {\n                    combinedRange = Range.plusRange(combinedRange, originSelectionRange);\n                  }\n                }\n              } catch (err) {\n                _iterator.e(err);\n              } finally {\n                _iterator.f();\n              }\n              this.addDecoration(combinedRange, new MarkdownString().appendText(nls.localize('multipleResults', \"Click to show {0} definitions.\", results.length)));\n              _context2.next = 37;\n              break;\n            case 33:\n              // Single result\n              result = results[0];\n              if (result.uri) {\n                _context2.next = 36;\n                break;\n              }\n              return _context2.abrupt(\"return\");\n            case 36:\n              this.textModelResolverService.createModelReference(result.uri).then(function (ref) {\n                if (!ref.object || !ref.object.textEditorModel) {\n                  ref.dispose();\n                  return;\n                }\n                var textEditorModel = ref.object.textEditorModel;\n                var startLineNumber = result.range.startLineNumber;\n                if (startLineNumber < 1 || startLineNumber > textEditorModel.getLineCount()) {\n                  // invalid range\n                  ref.dispose();\n                  return;\n                }\n                var previewValue = _this3.getPreviewValue(textEditorModel, startLineNumber, result);\n                var languageId = _this3.languageService.guessLanguageIdByFilepathOrFirstLine(textEditorModel.uri);\n                _this3.addDecoration(linkRange, previewValue ? new MarkdownString().appendCodeblock(languageId ? languageId : '', previewValue) : undefined);\n                ref.dispose();\n              });\n            case 37:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, this, [[12, 18]]);\n      }));\n      function startFindDefinition(_x2) {\n        return _startFindDefinition.apply(this, arguments);\n      }\n      return startFindDefinition;\n    }()\n  }, {\n    key: \"getPreviewValue\",\n    value: function getPreviewValue(textEditorModel, startLineNumber, result) {\n      var rangeToUse = result.range;\n      var numberOfLinesInRange = rangeToUse.endLineNumber - rangeToUse.startLineNumber;\n      if (numberOfLinesInRange >= GotoDefinitionAtPositionEditorContribution_1.MAX_SOURCE_PREVIEW_LINES) {\n        rangeToUse = this.getPreviewRangeBasedOnIndentation(textEditorModel, startLineNumber);\n      }\n      var previewValue = this.stripIndentationFromPreviewRange(textEditorModel, startLineNumber, rangeToUse);\n      return previewValue;\n    }\n  }, {\n    key: \"stripIndentationFromPreviewRange\",\n    value: function stripIndentationFromPreviewRange(textEditorModel, startLineNumber, previewRange) {\n      var startIndent = textEditorModel.getLineFirstNonWhitespaceColumn(startLineNumber);\n      var minIndent = startIndent;\n      for (var endLineNumber = startLineNumber + 1; endLineNumber < previewRange.endLineNumber; endLineNumber++) {\n        var endIndent = textEditorModel.getLineFirstNonWhitespaceColumn(endLineNumber);\n        minIndent = Math.min(minIndent, endIndent);\n      }\n      var previewValue = textEditorModel.getValueInRange(previewRange).replace(new RegExp(\"^\\\\s{\".concat(minIndent - 1, \"}\"), 'gm'), '').trim();\n      return previewValue;\n    }\n  }, {\n    key: \"getPreviewRangeBasedOnIndentation\",\n    value: function getPreviewRangeBasedOnIndentation(textEditorModel, startLineNumber) {\n      var startIndent = textEditorModel.getLineFirstNonWhitespaceColumn(startLineNumber);\n      var maxLineNumber = Math.min(textEditorModel.getLineCount(), startLineNumber + GotoDefinitionAtPositionEditorContribution_1.MAX_SOURCE_PREVIEW_LINES);\n      var endLineNumber = startLineNumber + 1;\n      for (; endLineNumber < maxLineNumber; endLineNumber++) {\n        var endIndent = textEditorModel.getLineFirstNonWhitespaceColumn(endLineNumber);\n        if (startIndent === endIndent) {\n          break;\n        }\n      }\n      return new Range(startLineNumber, 1, endLineNumber + 1, 1);\n    }\n  }, {\n    key: \"addDecoration\",\n    value: function addDecoration(range, hoverMessage) {\n      var newDecorations = {\n        range: range,\n        options: {\n          description: 'goto-definition-link',\n          inlineClassName: 'goto-definition-link',\n          hoverMessage: hoverMessage\n        }\n      };\n      this.linkDecorations.set([newDecorations]);\n    }\n  }, {\n    key: \"removeLinkDecorations\",\n    value: function removeLinkDecorations() {\n      this.linkDecorations.clear();\n    }\n  }, {\n    key: \"isEnabled\",\n    value: function isEnabled(mouseEvent, withKey) {\n      var _a;\n      return this.editor.hasModel() && mouseEvent.isLeftClick && mouseEvent.isNoneOrSingleMouseDown && mouseEvent.target.type === 6 /* MouseTargetType.CONTENT_TEXT */ && !(((_a = mouseEvent.target.detail.injectedText) === null || _a === void 0 ? void 0 : _a.options) instanceof ModelDecorationInjectedTextOptions) && (mouseEvent.hasTriggerModifier || (withKey ? withKey.keyCodeIsTriggerKey : false)) && this.languageFeaturesService.definitionProvider.has(this.editor.getModel());\n    }\n  }, {\n    key: \"findDefinition\",\n    value: function findDefinition(position, token) {\n      var model = this.editor.getModel();\n      if (!model) {\n        return Promise.resolve(null);\n      }\n      return getDefinitionsAtPosition(this.languageFeaturesService.definitionProvider, model, position, token);\n    }\n  }, {\n    key: \"gotoDefinition\",\n    value: function gotoDefinition(position, openToSide) {\n      var _this4 = this;\n      this.editor.setPosition(position);\n      return this.editor.invokeWithinContext(function (accessor) {\n        var canPeek = !openToSide && _this4.editor.getOption(88 /* EditorOption.definitionLinkOpensInPeek */) && !_this4.isInPeekEditor(accessor);\n        var action = new DefinitionAction({\n          openToSide: openToSide,\n          openInPeek: canPeek,\n          muteMessage: true\n        }, {\n          title: {\n            value: '',\n            original: ''\n          },\n          id: '',\n          precondition: undefined\n        });\n        return action.run(accessor);\n      });\n    }\n  }, {\n    key: \"isInPeekEditor\",\n    value: function isInPeekEditor(accessor) {\n      var contextKeyService = accessor.get(IContextKeyService);\n      return PeekContext.inPeekEditor.getValue(contextKeyService);\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      this.toUnhook.dispose();\n      this.toUnhookForKeyboard.dispose();\n    }\n  }], [{\n    key: \"get\",\n    value: function get(editor) {\n      return editor.getContribution(GotoDefinitionAtPositionEditorContribution_1.ID);\n    }\n  }]);\n}();\nGotoDefinitionAtPositionEditorContribution.ID = 'editor.contrib.gotodefinitionatposition';\nGotoDefinitionAtPositionEditorContribution.MAX_SOURCE_PREVIEW_LINES = 8;\nGotoDefinitionAtPositionEditorContribution = GotoDefinitionAtPositionEditorContribution_1 = __decorate([__param(1, ITextModelService), __param(2, ILanguageService), __param(3, ILanguageFeaturesService)], GotoDefinitionAtPositionEditorContribution);\nexport { GotoDefinitionAtPositionEditorContribution };\nregisterEditorContribution(GotoDefinitionAtPositionEditorContribution.ID, GotoDefinitionAtPositionEditorContribution, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);","map":{"version":3,"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","_typeof","decorate","i","defineProperty","__param","paramIndex","decorator","GotoDefinitionAtPositionEditorContribution_1","createCancelablePromise","onUnexpectedError","MarkdownString","DisposableStore","EditorState","registerEditorContribution","Range","ILanguageService","ITextModelService","ClickLinkGesture","PeekContext","nls","IContextKeyService","DefinitionAction","getDefinitionsAtPosition","ILanguageFeaturesService","ModelDecorationInjectedTextOptions","GotoDefinitionAtPositionEditorContribution","editor","textModelResolverService","languageService","languageFeaturesService","_this","_classCallCheck","toUnhook","toUnhookForKeyboard","currentWordAtPosition","previousPromise","linkDecorations","createDecorationsCollection","linkGesture","add","onMouseMoveOrRelevantKeyDown","_ref","_ref2","_slicedToArray","mouseEvent","keyboardEvent","startFindDefinitionFromMouse","undefined","onExecute","isEnabled","gotoDefinition","position","hasSideBySideModifier","error","removeLinkDecorations","onCancel","_createClass","value","_startFindDefinitionFromCursor","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_this2","wrap","_callee$","_context","prev","next","startFindDefinition","onDidChangeCursorPosition","clear","onKeyDown","e","stop","startFindDefinitionFromCursor","_x","apply","withKey","type","hasModel","_startFindDefinition","_callee2","_this3","_a","word","state","results","linkRange","combinedRange","_iterator","_step","originSelectionRange","result","_callee2$","_context2","getModel","getWordAtPosition","abrupt","startColumn","endColumn","cancel","token","findDefinition","sent","t0","validate","lift","lineNumber","_createForOfIteratorHelper","s","n","done","plusRange","err","f","addDecoration","appendText","localize","uri","createModelReference","then","ref","object","textEditorModel","dispose","startLineNumber","range","getLineCount","previewValue","getPreviewValue","languageId","guessLanguageIdByFilepathOrFirstLine","appendCodeblock","_x2","rangeToUse","numberOfLinesInRange","endLineNumber","MAX_SOURCE_PREVIEW_LINES","getPreviewRangeBasedOnIndentation","stripIndentationFromPreviewRange","previewRange","startIndent","getLineFirstNonWhitespaceColumn","minIndent","endIndent","Math","min","getValueInRange","replace","RegExp","concat","trim","maxLineNumber","hoverMessage","newDecorations","options","description","inlineClassName","set","isLeftClick","isNoneOrSingleMouseDown","detail","injectedText","hasTriggerModifier","keyCodeIsTriggerKey","definitionProvider","has","model","Promise","resolve","openToSide","_this4","setPosition","invokeWithinContext","accessor","canPeek","getOption","isInPeekEditor","action","openInPeek","muteMessage","title","original","id","precondition","run","contextKeyService","get","inPeekEditor","getValue","getContribution","ID"],"sources":["/Users/yinger/Desktop/z95_exam_frontend/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/link/goToDefinitionAtPosition.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar GotoDefinitionAtPositionEditorContribution_1;\nimport { createCancelablePromise } from '../../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../../base/common/errors.js';\nimport { MarkdownString } from '../../../../../base/common/htmlContent.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport './goToDefinitionAtPosition.css';\nimport { EditorState } from '../../../editorState/browser/editorState.js';\nimport { registerEditorContribution } from '../../../../browser/editorExtensions.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { ILanguageService } from '../../../../common/languages/language.js';\nimport { ITextModelService } from '../../../../common/services/resolverService.js';\nimport { ClickLinkGesture } from './clickLinkGesture.js';\nimport { PeekContext } from '../../../peekView/browser/peekView.js';\nimport * as nls from '../../../../../nls.js';\nimport { IContextKeyService } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { DefinitionAction } from '../goToCommands.js';\nimport { getDefinitionsAtPosition } from '../goToSymbol.js';\nimport { ILanguageFeaturesService } from '../../../../common/services/languageFeatures.js';\nimport { ModelDecorationInjectedTextOptions } from '../../../../common/model/textModel.js';\nlet GotoDefinitionAtPositionEditorContribution = GotoDefinitionAtPositionEditorContribution_1 = class GotoDefinitionAtPositionEditorContribution {\n    constructor(editor, textModelResolverService, languageService, languageFeaturesService) {\n        this.textModelResolverService = textModelResolverService;\n        this.languageService = languageService;\n        this.languageFeaturesService = languageFeaturesService;\n        this.toUnhook = new DisposableStore();\n        this.toUnhookForKeyboard = new DisposableStore();\n        this.currentWordAtPosition = null;\n        this.previousPromise = null;\n        this.editor = editor;\n        this.linkDecorations = this.editor.createDecorationsCollection();\n        const linkGesture = new ClickLinkGesture(editor);\n        this.toUnhook.add(linkGesture);\n        this.toUnhook.add(linkGesture.onMouseMoveOrRelevantKeyDown(([mouseEvent, keyboardEvent]) => {\n            this.startFindDefinitionFromMouse(mouseEvent, keyboardEvent !== null && keyboardEvent !== void 0 ? keyboardEvent : undefined);\n        }));\n        this.toUnhook.add(linkGesture.onExecute((mouseEvent) => {\n            if (this.isEnabled(mouseEvent)) {\n                this.gotoDefinition(mouseEvent.target.position, mouseEvent.hasSideBySideModifier)\n                    .catch((error) => {\n                    onUnexpectedError(error);\n                })\n                    .finally(() => {\n                    this.removeLinkDecorations();\n                });\n            }\n        }));\n        this.toUnhook.add(linkGesture.onCancel(() => {\n            this.removeLinkDecorations();\n            this.currentWordAtPosition = null;\n        }));\n    }\n    static get(editor) {\n        return editor.getContribution(GotoDefinitionAtPositionEditorContribution_1.ID);\n    }\n    async startFindDefinitionFromCursor(position) {\n        // For issue: https://github.com/microsoft/vscode/issues/46257\n        // equivalent to mouse move with meta/ctrl key\n        // First find the definition and add decorations\n        // to the editor to be shown with the content hover widget\n        await this.startFindDefinition(position);\n        // Add listeners for editor cursor move and key down events\n        // Dismiss the \"extended\" editor decorations when the user hides\n        // the hover widget. There is no event for the widget itself so these\n        // serve as a best effort. After removing the link decorations, the hover\n        // widget is clean and will only show declarations per next request.\n        this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition(() => {\n            this.currentWordAtPosition = null;\n            this.removeLinkDecorations();\n            this.toUnhookForKeyboard.clear();\n        }));\n        this.toUnhookForKeyboard.add(this.editor.onKeyDown((e) => {\n            if (e) {\n                this.currentWordAtPosition = null;\n                this.removeLinkDecorations();\n                this.toUnhookForKeyboard.clear();\n            }\n        }));\n    }\n    startFindDefinitionFromMouse(mouseEvent, withKey) {\n        // check if we are active and on a content widget\n        if (mouseEvent.target.type === 9 /* MouseTargetType.CONTENT_WIDGET */ && this.linkDecorations.length > 0) {\n            return;\n        }\n        if (!this.editor.hasModel() || !this.isEnabled(mouseEvent, withKey)) {\n            this.currentWordAtPosition = null;\n            this.removeLinkDecorations();\n            return;\n        }\n        const position = mouseEvent.target.position;\n        this.startFindDefinition(position);\n    }\n    async startFindDefinition(position) {\n        var _a;\n        // Dispose listeners for updating decorations when using keyboard to show definition hover\n        this.toUnhookForKeyboard.clear();\n        // Find word at mouse position\n        const word = position ? (_a = this.editor.getModel()) === null || _a === void 0 ? void 0 : _a.getWordAtPosition(position) : null;\n        if (!word) {\n            this.currentWordAtPosition = null;\n            this.removeLinkDecorations();\n            return;\n        }\n        // Return early if word at position is still the same\n        if (this.currentWordAtPosition && this.currentWordAtPosition.startColumn === word.startColumn && this.currentWordAtPosition.endColumn === word.endColumn && this.currentWordAtPosition.word === word.word) {\n            return;\n        }\n        this.currentWordAtPosition = word;\n        // Find definition and decorate word if found\n        const state = new EditorState(this.editor, 4 /* CodeEditorStateFlag.Position */ | 1 /* CodeEditorStateFlag.Value */ | 2 /* CodeEditorStateFlag.Selection */ | 8 /* CodeEditorStateFlag.Scroll */);\n        if (this.previousPromise) {\n            this.previousPromise.cancel();\n            this.previousPromise = null;\n        }\n        this.previousPromise = createCancelablePromise(token => this.findDefinition(position, token));\n        let results;\n        try {\n            results = await this.previousPromise;\n        }\n        catch (error) {\n            onUnexpectedError(error);\n            return;\n        }\n        if (!results || !results.length || !state.validate(this.editor)) {\n            this.removeLinkDecorations();\n            return;\n        }\n        const linkRange = results[0].originSelectionRange\n            ? Range.lift(results[0].originSelectionRange)\n            : new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn);\n        // Multiple results\n        if (results.length > 1) {\n            let combinedRange = linkRange;\n            for (const { originSelectionRange } of results) {\n                if (originSelectionRange) {\n                    combinedRange = Range.plusRange(combinedRange, originSelectionRange);\n                }\n            }\n            this.addDecoration(combinedRange, new MarkdownString().appendText(nls.localize('multipleResults', \"Click to show {0} definitions.\", results.length)));\n        }\n        else {\n            // Single result\n            const result = results[0];\n            if (!result.uri) {\n                return;\n            }\n            this.textModelResolverService.createModelReference(result.uri).then(ref => {\n                if (!ref.object || !ref.object.textEditorModel) {\n                    ref.dispose();\n                    return;\n                }\n                const { object: { textEditorModel } } = ref;\n                const { startLineNumber } = result.range;\n                if (startLineNumber < 1 || startLineNumber > textEditorModel.getLineCount()) {\n                    // invalid range\n                    ref.dispose();\n                    return;\n                }\n                const previewValue = this.getPreviewValue(textEditorModel, startLineNumber, result);\n                const languageId = this.languageService.guessLanguageIdByFilepathOrFirstLine(textEditorModel.uri);\n                this.addDecoration(linkRange, previewValue ? new MarkdownString().appendCodeblock(languageId ? languageId : '', previewValue) : undefined);\n                ref.dispose();\n            });\n        }\n    }\n    getPreviewValue(textEditorModel, startLineNumber, result) {\n        let rangeToUse = result.range;\n        const numberOfLinesInRange = rangeToUse.endLineNumber - rangeToUse.startLineNumber;\n        if (numberOfLinesInRange >= GotoDefinitionAtPositionEditorContribution_1.MAX_SOURCE_PREVIEW_LINES) {\n            rangeToUse = this.getPreviewRangeBasedOnIndentation(textEditorModel, startLineNumber);\n        }\n        const previewValue = this.stripIndentationFromPreviewRange(textEditorModel, startLineNumber, rangeToUse);\n        return previewValue;\n    }\n    stripIndentationFromPreviewRange(textEditorModel, startLineNumber, previewRange) {\n        const startIndent = textEditorModel.getLineFirstNonWhitespaceColumn(startLineNumber);\n        let minIndent = startIndent;\n        for (let endLineNumber = startLineNumber + 1; endLineNumber < previewRange.endLineNumber; endLineNumber++) {\n            const endIndent = textEditorModel.getLineFirstNonWhitespaceColumn(endLineNumber);\n            minIndent = Math.min(minIndent, endIndent);\n        }\n        const previewValue = textEditorModel.getValueInRange(previewRange).replace(new RegExp(`^\\\\s{${minIndent - 1}}`, 'gm'), '').trim();\n        return previewValue;\n    }\n    getPreviewRangeBasedOnIndentation(textEditorModel, startLineNumber) {\n        const startIndent = textEditorModel.getLineFirstNonWhitespaceColumn(startLineNumber);\n        const maxLineNumber = Math.min(textEditorModel.getLineCount(), startLineNumber + GotoDefinitionAtPositionEditorContribution_1.MAX_SOURCE_PREVIEW_LINES);\n        let endLineNumber = startLineNumber + 1;\n        for (; endLineNumber < maxLineNumber; endLineNumber++) {\n            const endIndent = textEditorModel.getLineFirstNonWhitespaceColumn(endLineNumber);\n            if (startIndent === endIndent) {\n                break;\n            }\n        }\n        return new Range(startLineNumber, 1, endLineNumber + 1, 1);\n    }\n    addDecoration(range, hoverMessage) {\n        const newDecorations = {\n            range: range,\n            options: {\n                description: 'goto-definition-link',\n                inlineClassName: 'goto-definition-link',\n                hoverMessage\n            }\n        };\n        this.linkDecorations.set([newDecorations]);\n    }\n    removeLinkDecorations() {\n        this.linkDecorations.clear();\n    }\n    isEnabled(mouseEvent, withKey) {\n        var _a;\n        return this.editor.hasModel()\n            && mouseEvent.isLeftClick\n            && mouseEvent.isNoneOrSingleMouseDown\n            && mouseEvent.target.type === 6 /* MouseTargetType.CONTENT_TEXT */\n            && !(((_a = mouseEvent.target.detail.injectedText) === null || _a === void 0 ? void 0 : _a.options) instanceof ModelDecorationInjectedTextOptions)\n            && (mouseEvent.hasTriggerModifier || (withKey ? withKey.keyCodeIsTriggerKey : false))\n            && this.languageFeaturesService.definitionProvider.has(this.editor.getModel());\n    }\n    findDefinition(position, token) {\n        const model = this.editor.getModel();\n        if (!model) {\n            return Promise.resolve(null);\n        }\n        return getDefinitionsAtPosition(this.languageFeaturesService.definitionProvider, model, position, token);\n    }\n    gotoDefinition(position, openToSide) {\n        this.editor.setPosition(position);\n        return this.editor.invokeWithinContext((accessor) => {\n            const canPeek = !openToSide && this.editor.getOption(88 /* EditorOption.definitionLinkOpensInPeek */) && !this.isInPeekEditor(accessor);\n            const action = new DefinitionAction({ openToSide, openInPeek: canPeek, muteMessage: true }, { title: { value: '', original: '' }, id: '', precondition: undefined });\n            return action.run(accessor);\n        });\n    }\n    isInPeekEditor(accessor) {\n        const contextKeyService = accessor.get(IContextKeyService);\n        return PeekContext.inPeekEditor.getValue(contextKeyService);\n    }\n    dispose() {\n        this.toUnhook.dispose();\n        this.toUnhookForKeyboard.dispose();\n    }\n};\nGotoDefinitionAtPositionEditorContribution.ID = 'editor.contrib.gotodefinitionatposition';\nGotoDefinitionAtPositionEditorContribution.MAX_SOURCE_PREVIEW_LINES = 8;\nGotoDefinitionAtPositionEditorContribution = GotoDefinitionAtPositionEditorContribution_1 = __decorate([\n    __param(1, ITextModelService),\n    __param(2, ILanguageService),\n    __param(3, ILanguageFeaturesService)\n], GotoDefinitionAtPositionEditorContribution);\nexport { GotoDefinitionAtPositionEditorContribution };\nregisterEditorContribution(GotoDefinitionAtPositionEditorContribution.ID, GotoDefinitionAtPositionEditorContribution, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}