{"ast":null,"code":"import _regeneratorRuntime from \"/Users/yinger/Desktop/z95_exam_frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/yinger/Desktop/z95_exam_frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _createForOfIteratorHelper from \"/Users/yinger/Desktop/z95_exam_frontend/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _classCallCheck from \"/Users/yinger/Desktop/z95_exam_frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/yinger/Desktop/z95_exam_frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _callSuper from \"/Users/yinger/Desktop/z95_exam_frontend/node_modules/@babel/runtime/helpers/esm/callSuper.js\";\nimport _inherits from \"/Users/yinger/Desktop/z95_exam_frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _typeof from \"/Users/yinger/Desktop/z95_exam_frontend/node_modules/@babel/runtime/helpers/esm/typeof.js\";\nimport \"core-js/modules/es.error.to-string.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport \"core-js/modules/es.object.define-property.js\";\nimport \"core-js/modules/es.object.get-own-property-descriptor.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.reflect.to-string-tag.js\";\nimport \"core-js/modules/es.regexp.to-string.js\";\nimport \"core-js/modules/es.set.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/esnext.set.difference.v2.js\";\nimport \"core-js/modules/esnext.set.intersection.v2.js\";\nimport \"core-js/modules/esnext.set.is-disjoint-from.v2.js\";\nimport \"core-js/modules/esnext.set.is-subset-of.v2.js\";\nimport \"core-js/modules/esnext.set.is-superset-of.v2.js\";\nimport \"core-js/modules/esnext.set.symmetric-difference.v2.js\";\nimport \"core-js/modules/esnext.set.union.v2.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if ((typeof Reflect === \"undefined\" ? \"undefined\" : _typeof(Reflect)) === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $, getWindow, h } from '../../../../base/browser/dom.js';\nimport { findLast } from '../../../../base/common/arraysFind.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { toDisposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, autorunWithStore, derived, observableFromEvent, observableValue, recomputeInitiallyAndOnChange, subtransaction, transaction } from '../../../../base/common/observable.js';\nimport { derivedDisposable } from '../../../../base/common/observableInternal/derived.js';\nimport './style.css';\nimport { EditorExtensionsRegistry } from '../../editorExtensions.js';\nimport { ICodeEditorService } from '../../services/codeEditorService.js';\nimport { StableEditorScrollState } from '../../stableEditorScroll.js';\nimport { CodeEditorWidget } from '../codeEditor/codeEditorWidget.js';\nimport { AccessibleDiffViewer, AccessibleDiffViewerModelFromEditors } from './components/accessibleDiffViewer.js';\nimport { DiffEditorDecorations } from './components/diffEditorDecorations.js';\nimport { DiffEditorSash } from './components/diffEditorSash.js';\nimport { DiffEditorViewZones } from './components/diffEditorViewZones/diffEditorViewZones.js';\nimport { HideUnchangedRegionsFeature } from './features/hideUnchangedRegionsFeature.js';\nimport { MovedBlocksLinesFeature } from './features/movedBlocksLinesFeature.js';\nimport { OverviewRulerFeature } from './features/overviewRulerFeature.js';\nimport { RevertButtonsFeature } from './features/revertButtonsFeature.js';\nimport { ObservableElementSizeObserver, applyStyle, applyViewZones, bindContextKey, readHotReloadableExport, translatePosition } from './utils.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorType } from '../../../common/editorCommon.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { AccessibilitySignal, IAccessibilitySignalService } from '../../../../platform/accessibilitySignal/browser/accessibilitySignalService.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ServiceCollection } from '../../../../platform/instantiation/common/serviceCollection.js';\nimport { IEditorProgressService } from '../../../../platform/progress/common/progress.js';\nimport { DiffEditorEditors } from './components/diffEditorEditors.js';\nimport { DelegatingEditor } from './delegatingEditorImpl.js';\nimport { DiffEditorOptions } from './diffEditorOptions.js';\nimport { DiffEditorViewModel } from './diffEditorViewModel.js';\nimport { DiffEditorGutter } from './features/gutterFeature.js';\nvar DiffEditorWidget = /*#__PURE__*/function (_DelegatingEditor) {\n  function DiffEditorWidget(_domElement, options, codeEditorWidgetOptions, _parentContextKeyService, _parentInstantiationService, codeEditorService, _accessibilitySignalService, _editorProgressService) {\n    var _this;\n    _classCallCheck(this, DiffEditorWidget);\n    var _a;\n    _this = _callSuper(this, DiffEditorWidget);\n    _this._domElement = _domElement;\n    _this._parentContextKeyService = _parentContextKeyService;\n    _this._parentInstantiationService = _parentInstantiationService;\n    _this._accessibilitySignalService = _accessibilitySignalService;\n    _this._editorProgressService = _editorProgressService;\n    _this.elements = h('div.monaco-diff-editor.side-by-side', {\n      style: {\n        position: 'relative',\n        height: '100%'\n      }\n    }, [h('div.noModificationsOverlay@overlay', {\n      style: {\n        position: 'absolute',\n        height: '100%',\n        visibility: 'hidden'\n      }\n    }, [$('span', {}, 'No Changes')]), h('div.editor.original@original', {\n      style: {\n        position: 'absolute',\n        height: '100%'\n      }\n    }), h('div.editor.modified@modified', {\n      style: {\n        position: 'absolute',\n        height: '100%'\n      }\n    }), h('div.accessibleDiffViewer@accessibleDiffViewer', {\n      style: {\n        position: 'absolute',\n        height: '100%'\n      }\n    })]);\n    _this._diffModel = observableValue(_this, undefined);\n    _this._shouldDisposeDiffModel = false;\n    _this.onDidChangeModel = Event.fromObservableLight(_this._diffModel);\n    _this._contextKeyService = _this._register(_this._parentContextKeyService.createScoped(_this._domElement));\n    _this._instantiationService = _this._parentInstantiationService.createChild(new ServiceCollection([IContextKeyService, _this._contextKeyService]));\n    _this._boundarySashes = observableValue(_this, undefined);\n    _this._accessibleDiffViewerShouldBeVisible = observableValue(_this, false);\n    _this._accessibleDiffViewerVisible = derived(_this, function (reader) {\n      return _this._options.onlyShowAccessibleDiffViewer.read(reader) ? true : _this._accessibleDiffViewerShouldBeVisible.read(reader);\n    });\n    _this._movedBlocksLinesPart = observableValue(_this, undefined);\n    _this._layoutInfo = derived(_this, function (reader) {\n      var _a, _b, _c, _d, _e;\n      var fullWidth = _this._rootSizeObserver.width.read(reader);\n      var fullHeight = _this._rootSizeObserver.height.read(reader);\n      var sash = _this._sash.read(reader);\n      var gutter = _this._gutter.read(reader);\n      var gutterWidth = (_a = gutter === null || gutter === void 0 ? void 0 : gutter.width.read(reader)) !== null && _a !== void 0 ? _a : 0;\n      var overviewRulerPartWidth = (_c = (_b = _this._overviewRulerPart.read(reader)) === null || _b === void 0 ? void 0 : _b.width) !== null && _c !== void 0 ? _c : 0;\n      var originalLeft, originalWidth, modifiedLeft, modifiedWidth, gutterLeft;\n      var sideBySide = !!sash;\n      if (sideBySide) {\n        var sashLeft = sash.sashLeft.read(reader);\n        var movedBlocksLinesWidth = (_e = (_d = _this._movedBlocksLinesPart.read(reader)) === null || _d === void 0 ? void 0 : _d.width.read(reader)) !== null && _e !== void 0 ? _e : 0;\n        originalLeft = 0;\n        originalWidth = sashLeft - gutterWidth - movedBlocksLinesWidth;\n        gutterLeft = sashLeft - gutterWidth;\n        modifiedLeft = sashLeft;\n        modifiedWidth = fullWidth - modifiedLeft - overviewRulerPartWidth;\n      } else {\n        gutterLeft = 0;\n        originalLeft = gutterWidth;\n        originalWidth = Math.max(5, _this._editors.original.getLayoutInfo().decorationsLeft);\n        modifiedLeft = gutterWidth + originalWidth;\n        modifiedWidth = fullWidth - modifiedLeft - overviewRulerPartWidth;\n      }\n      _this.elements.original.style.left = originalLeft + 'px';\n      _this.elements.original.style.width = originalWidth + 'px';\n      _this._editors.original.layout({\n        width: originalWidth,\n        height: fullHeight\n      }, true);\n      gutter === null || gutter === void 0 ? void 0 : gutter.layout(gutterLeft);\n      _this.elements.modified.style.left = modifiedLeft + 'px';\n      _this.elements.modified.style.width = modifiedWidth + 'px';\n      _this._editors.modified.layout({\n        width: modifiedWidth,\n        height: fullHeight\n      }, true);\n      return {\n        modifiedEditor: _this._editors.modified.getLayoutInfo(),\n        originalEditor: _this._editors.original.getLayoutInfo()\n      };\n    });\n    _this._diffValue = _this._diffModel.map(function (m, r) {\n      return m === null || m === void 0 ? void 0 : m.diff.read(r);\n    });\n    _this.onDidUpdateDiff = Event.fromObservableLight(_this._diffValue);\n    codeEditorService.willCreateDiffEditor();\n    _this._contextKeyService.createKey('isInDiffEditor', true);\n    _this._domElement.appendChild(_this.elements.root);\n    _this._register(toDisposable(function () {\n      return _this._domElement.removeChild(_this.elements.root);\n    }));\n    _this._rootSizeObserver = _this._register(new ObservableElementSizeObserver(_this.elements.root, options.dimension));\n    _this._rootSizeObserver.setAutomaticLayout((_a = options.automaticLayout) !== null && _a !== void 0 ? _a : false);\n    _this._options = _this._instantiationService.createInstance(DiffEditorOptions, options);\n    _this._register(autorun(function (reader) {\n      _this._options.setWidth(_this._rootSizeObserver.width.read(reader));\n    }));\n    _this._contextKeyService.createKey(EditorContextKeys.isEmbeddedDiffEditor.key, false);\n    _this._register(bindContextKey(EditorContextKeys.isEmbeddedDiffEditor, _this._contextKeyService, function (reader) {\n      return _this._options.isInEmbeddedEditor.read(reader);\n    }));\n    _this._register(bindContextKey(EditorContextKeys.comparingMovedCode, _this._contextKeyService, function (reader) {\n      var _a;\n      return !!((_a = _this._diffModel.read(reader)) === null || _a === void 0 ? void 0 : _a.movedTextToCompare.read(reader));\n    }));\n    _this._register(bindContextKey(EditorContextKeys.diffEditorRenderSideBySideInlineBreakpointReached, _this._contextKeyService, function (reader) {\n      return _this._options.couldShowInlineViewBecauseOfSize.read(reader);\n    }));\n    _this._register(bindContextKey(EditorContextKeys.diffEditorInlineMode, _this._contextKeyService, function (reader) {\n      return !_this._options.renderSideBySide.read(reader);\n    }));\n    _this._register(bindContextKey(EditorContextKeys.hasChanges, _this._contextKeyService, function (reader) {\n      var _a, _b, _c;\n      return ((_c = (_b = (_a = _this._diffModel.read(reader)) === null || _a === void 0 ? void 0 : _a.diff.read(reader)) === null || _b === void 0 ? void 0 : _b.mappings.length) !== null && _c !== void 0 ? _c : 0) > 0;\n    }));\n    _this._editors = _this._register(_this._instantiationService.createInstance(DiffEditorEditors, _this.elements.original, _this.elements.modified, _this._options, codeEditorWidgetOptions, function (i, c, o, o2) {\n      return _this._createInnerEditor(i, c, o, o2);\n    }));\n    _this._register(bindContextKey(EditorContextKeys.diffEditorOriginalWritable, _this._contextKeyService, function (reader) {\n      return _this._options.originalEditable.read(reader);\n    }));\n    _this._register(bindContextKey(EditorContextKeys.diffEditorModifiedWritable, _this._contextKeyService, function (reader) {\n      return !_this._options.readOnly.read(reader);\n    }));\n    _this._register(bindContextKey(EditorContextKeys.diffEditorOriginalUri, _this._contextKeyService, function (reader) {\n      var _a, _b;\n      return (_b = (_a = _this._diffModel.read(reader)) === null || _a === void 0 ? void 0 : _a.model.original.uri.toString()) !== null && _b !== void 0 ? _b : '';\n    }));\n    _this._register(bindContextKey(EditorContextKeys.diffEditorModifiedUri, _this._contextKeyService, function (reader) {\n      var _a, _b;\n      return (_b = (_a = _this._diffModel.read(reader)) === null || _a === void 0 ? void 0 : _a.model.modified.uri.toString()) !== null && _b !== void 0 ? _b : '';\n    }));\n    _this._overviewRulerPart = derivedDisposable(_this, function (reader) {\n      return !_this._options.renderOverviewRuler.read(reader) ? undefined : _this._instantiationService.createInstance(readHotReloadableExport(OverviewRulerFeature, reader), _this._editors, _this.elements.root, _this._diffModel, _this._rootSizeObserver.width, _this._rootSizeObserver.height, _this._layoutInfo.map(function (i) {\n        return i.modifiedEditor;\n      }));\n    }).recomputeInitiallyAndOnChange(_this._store);\n    _this._sash = derivedDisposable(_this, function (reader) {\n      var showSash = _this._options.renderSideBySide.read(reader);\n      _this.elements.root.classList.toggle('side-by-side', showSash);\n      return !showSash ? undefined : new DiffEditorSash(_this._options, _this.elements.root, {\n        height: _this._rootSizeObserver.height,\n        width: _this._rootSizeObserver.width.map(function (w, reader) {\n          var _a, _b;\n          return w - ((_b = (_a = _this._overviewRulerPart.read(reader)) === null || _a === void 0 ? void 0 : _a.width) !== null && _b !== void 0 ? _b : 0);\n        })\n      }, _this._boundarySashes);\n    }).recomputeInitiallyAndOnChange(_this._store);\n    var unchangedRangesFeature = derivedDisposable(_this, function (reader) {\n      return /** @description UnchangedRangesFeature */_this._instantiationService.createInstance(readHotReloadableExport(HideUnchangedRegionsFeature, reader), _this._editors, _this._diffModel, _this._options);\n    }).recomputeInitiallyAndOnChange(_this._store);\n    derivedDisposable(_this, function (reader) {\n      return /** @description DiffEditorDecorations */_this._instantiationService.createInstance(readHotReloadableExport(DiffEditorDecorations, reader), _this._editors, _this._diffModel, _this._options, _this);\n    }).recomputeInitiallyAndOnChange(_this._store);\n    var origViewZoneIdsToIgnore = new Set();\n    var modViewZoneIdsToIgnore = new Set();\n    var isUpdatingViewZones = false;\n    var viewZoneManager = derivedDisposable(_this, function (reader) {\n      return /** @description ViewZoneManager */_this._instantiationService.createInstance(readHotReloadableExport(DiffEditorViewZones, reader), getWindow(_this._domElement), _this._editors, _this._diffModel, _this._options, _this, function () {\n        return isUpdatingViewZones || unchangedRangesFeature.get().isUpdatingHiddenAreas;\n      }, origViewZoneIdsToIgnore, modViewZoneIdsToIgnore);\n    }).recomputeInitiallyAndOnChange(_this._store);\n    var originalViewZones = derived(_this, function (reader) {\n      var orig = viewZoneManager.read(reader).viewZones.read(reader).orig;\n      var orig2 = unchangedRangesFeature.read(reader).viewZones.read(reader).origViewZones;\n      return orig.concat(orig2);\n    });\n    var modifiedViewZones = derived(_this, function (reader) {\n      var mod = viewZoneManager.read(reader).viewZones.read(reader).mod;\n      var mod2 = unchangedRangesFeature.read(reader).viewZones.read(reader).modViewZones;\n      return mod.concat(mod2);\n    });\n    _this._register(applyViewZones(_this._editors.original, originalViewZones, function (isUpdatingOrigViewZones) {\n      isUpdatingViewZones = isUpdatingOrigViewZones;\n    }, origViewZoneIdsToIgnore));\n    var scrollState;\n    _this._register(applyViewZones(_this._editors.modified, modifiedViewZones, function (isUpdatingModViewZones) {\n      isUpdatingViewZones = isUpdatingModViewZones;\n      if (isUpdatingViewZones) {\n        scrollState = StableEditorScrollState.capture(_this._editors.modified);\n      } else {\n        scrollState === null || scrollState === void 0 ? void 0 : scrollState.restore(_this._editors.modified);\n        scrollState = undefined;\n      }\n    }, modViewZoneIdsToIgnore));\n    _this._accessibleDiffViewer = derivedDisposable(_this, function (reader) {\n      return _this._instantiationService.createInstance(readHotReloadableExport(AccessibleDiffViewer, reader), _this.elements.accessibleDiffViewer, _this._accessibleDiffViewerVisible, function (visible, tx) {\n        return _this._accessibleDiffViewerShouldBeVisible.set(visible, tx);\n      }, _this._options.onlyShowAccessibleDiffViewer.map(function (v) {\n        return !v;\n      }), _this._rootSizeObserver.width, _this._rootSizeObserver.height, _this._diffModel.map(function (m, r) {\n        var _a;\n        return (_a = m === null || m === void 0 ? void 0 : m.diff.read(r)) === null || _a === void 0 ? void 0 : _a.mappings.map(function (m) {\n          return m.lineRangeMapping;\n        });\n      }), new AccessibleDiffViewerModelFromEditors(_this._editors));\n    }).recomputeInitiallyAndOnChange(_this._store);\n    var visibility = _this._accessibleDiffViewerVisible.map(function (v) {\n      return v ? 'hidden' : 'visible';\n    });\n    _this._register(applyStyle(_this.elements.modified, {\n      visibility: visibility\n    }));\n    _this._register(applyStyle(_this.elements.original, {\n      visibility: visibility\n    }));\n    _this._createDiffEditorContributions();\n    codeEditorService.addDiffEditor(_this);\n    _this._gutter = derivedDisposable(_this, function (reader) {\n      return _this._options.shouldRenderGutterMenu.read(reader) ? _this._instantiationService.createInstance(readHotReloadableExport(DiffEditorGutter, reader), _this.elements.root, _this._diffModel, _this._editors) : undefined;\n    });\n    _this._register(recomputeInitiallyAndOnChange(_this._layoutInfo));\n    derivedDisposable(_this, function (reader) {\n      return /** @description MovedBlocksLinesPart */new (readHotReloadableExport(MovedBlocksLinesFeature, reader))(_this.elements.root, _this._diffModel, _this._layoutInfo.map(function (i) {\n        return i.originalEditor;\n      }), _this._layoutInfo.map(function (i) {\n        return i.modifiedEditor;\n      }), _this._editors);\n    }).recomputeInitiallyAndOnChange(_this._store, function (value) {\n      // This is to break the layout info <-> moved blocks lines part dependency cycle.\n      _this._movedBlocksLinesPart.set(value, undefined);\n    });\n    _this._register(applyStyle(_this.elements.overlay, {\n      width: _this._layoutInfo.map(function (i, r) {\n        return i.originalEditor.width + (_this._options.renderSideBySide.read(r) ? 0 : i.modifiedEditor.width);\n      }),\n      visibility: derived(function (reader) /** @description visibility */{\n        var _a, _b;\n        return _this._options.hideUnchangedRegions.read(reader) && ((_b = (_a = _this._diffModel.read(reader)) === null || _a === void 0 ? void 0 : _a.diff.read(reader)) === null || _b === void 0 ? void 0 : _b.mappings.length) === 0 ? 'visible' : 'hidden';\n      })\n    }));\n    _this._register(Event.runAndSubscribe(_this._editors.modified.onDidChangeCursorPosition, function (e) {\n      return _this._handleCursorPositionChange(e, true);\n    }));\n    _this._register(Event.runAndSubscribe(_this._editors.original.onDidChangeCursorPosition, function (e) {\n      return _this._handleCursorPositionChange(e, false);\n    }));\n    var isInitializingDiff = _this._diffModel.map(_this, function (m, reader) {\n      /** @isInitializingDiff isDiffUpToDate */\n      if (!m) {\n        return undefined;\n      }\n      return m.diff.read(reader) === undefined && !m.isDiffUpToDate.read(reader);\n    });\n    _this._register(autorunWithStore(function (reader, store) {\n      /** @description DiffEditorWidgetHelper.ShowProgress */\n      if (isInitializingDiff.read(reader) === true) {\n        var r = _this._editorProgressService.show(true, 1000);\n        store.add(toDisposable(function () {\n          return r.done();\n        }));\n      }\n    }));\n    _this._register(toDisposable(function () {\n      var _a;\n      if (_this._shouldDisposeDiffModel) {\n        (_a = _this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.dispose();\n      }\n    }));\n    _this._register(autorunWithStore(function (reader, store) {\n      store.add(new (readHotReloadableExport(RevertButtonsFeature, reader))(_this._editors, _this._diffModel, _this._options, _this));\n    }));\n    return _this;\n  }\n  _inherits(DiffEditorWidget, _DelegatingEditor);\n  return _createClass(DiffEditorWidget, [{\n    key: \"onDidContentSizeChange\",\n    get: function get() {\n      return this._editors.onDidContentSizeChange;\n    }\n  }, {\n    key: \"_createInnerEditor\",\n    value: function _createInnerEditor(instantiationService, container, options, editorWidgetOptions) {\n      var editor = instantiationService.createInstance(CodeEditorWidget, container, options, editorWidgetOptions);\n      return editor;\n    }\n  }, {\n    key: \"_createDiffEditorContributions\",\n    value: function _createDiffEditorContributions() {\n      var contributions = EditorExtensionsRegistry.getDiffEditorContributions();\n      var _iterator = _createForOfIteratorHelper(contributions),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var desc = _step.value;\n          try {\n            this._register(this._instantiationService.createInstance(desc.ctor, this));\n          } catch (err) {\n            onUnexpectedError(err);\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n  }, {\n    key: \"_targetEditor\",\n    get: function get() {\n      return this._editors.modified;\n    }\n  }, {\n    key: \"getEditorType\",\n    value: function getEditorType() {\n      return EditorType.IDiffEditor;\n    }\n  }, {\n    key: \"layout\",\n    value: function layout(dimension) {\n      this._rootSizeObserver.observe(dimension);\n    }\n  }, {\n    key: \"hasTextFocus\",\n    value: function hasTextFocus() {\n      return this._editors.original.hasTextFocus() || this._editors.modified.hasTextFocus();\n    }\n  }, {\n    key: \"saveViewState\",\n    value: function saveViewState() {\n      var _a;\n      var originalViewState = this._editors.original.saveViewState();\n      var modifiedViewState = this._editors.modified.saveViewState();\n      return {\n        original: originalViewState,\n        modified: modifiedViewState,\n        modelState: (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.serializeState()\n      };\n    }\n  }, {\n    key: \"restoreViewState\",\n    value: function restoreViewState(s) {\n      var _a;\n      if (s && s.original && s.modified) {\n        var diffEditorState = s;\n        this._editors.original.restoreViewState(diffEditorState.original);\n        this._editors.modified.restoreViewState(diffEditorState.modified);\n        if (diffEditorState.modelState) {\n          (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.restoreSerializedState(diffEditorState.modelState);\n        }\n      }\n    }\n  }, {\n    key: \"handleInitialized\",\n    value: function handleInitialized() {\n      this._editors.original.handleInitialized();\n      this._editors.modified.handleInitialized();\n    }\n  }, {\n    key: \"createViewModel\",\n    value: function createViewModel(model) {\n      return this._instantiationService.createInstance(DiffEditorViewModel, model, this._options);\n    }\n  }, {\n    key: \"getModel\",\n    value: function getModel() {\n      var _a, _b;\n      return (_b = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.model) !== null && _b !== void 0 ? _b : null;\n    }\n  }, {\n    key: \"setModel\",\n    value: function setModel(model, tx) {\n      var _this2 = this;\n      if (!model && this._diffModel.get()) {\n        // Transitioning from a model to no-model\n        this._accessibleDiffViewer.get().close();\n      }\n      var vm = model ? 'model' in model ? {\n        model: model,\n        shouldDispose: false\n      } : {\n        model: this.createViewModel(model),\n        shouldDispose: true\n      } : undefined;\n      if (this._diffModel.get() !== (vm === null || vm === void 0 ? void 0 : vm.model)) {\n        subtransaction(tx, function (tx) {\n          var _a;\n          /** @description DiffEditorWidget.setModel */\n          observableFromEvent.batchEventsGlobally(tx, function () {\n            _this2._editors.original.setModel(vm ? vm.model.model.original : null);\n            _this2._editors.modified.setModel(vm ? vm.model.model.modified : null);\n          });\n          var prevValue = _this2._diffModel.get();\n          var shouldDispose = _this2._shouldDisposeDiffModel;\n          _this2._shouldDisposeDiffModel = (_a = vm === null || vm === void 0 ? void 0 : vm.shouldDispose) !== null && _a !== void 0 ? _a : false;\n          _this2._diffModel.set(vm === null || vm === void 0 ? void 0 : vm.model, tx);\n          if (shouldDispose) {\n            prevValue === null || prevValue === void 0 ? void 0 : prevValue.dispose();\n          }\n        });\n      }\n    }\n    /**\n     * @param changedOptions Only has values for top-level options that have actually changed.\n     */\n  }, {\n    key: \"updateOptions\",\n    value: function updateOptions(changedOptions) {\n      this._options.updateOptions(changedOptions);\n    }\n  }, {\n    key: \"getContainerDomNode\",\n    value: function getContainerDomNode() {\n      return this._domElement;\n    }\n  }, {\n    key: \"getOriginalEditor\",\n    value: function getOriginalEditor() {\n      return this._editors.original;\n    }\n  }, {\n    key: \"getModifiedEditor\",\n    value: function getModifiedEditor() {\n      return this._editors.modified;\n    }\n    /**\n     * @deprecated Use `this.getDiffComputationResult().changes2` instead.\n     */\n  }, {\n    key: \"getLineChanges\",\n    value: function getLineChanges() {\n      var _a;\n      var diffState = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.diff.get();\n      if (!diffState) {\n        return null;\n      }\n      return toLineChanges(diffState);\n    }\n  }, {\n    key: \"revert\",\n    value: function revert(diff) {\n      var model = this._diffModel.get();\n      if (!model || !model.isDiffUpToDate.get()) {\n        return;\n      }\n      this._editors.modified.executeEdits('diffEditor', [{\n        range: diff.modified.toExclusiveRange(),\n        text: model.model.original.getValueInRange(diff.original.toExclusiveRange())\n      }]);\n    }\n  }, {\n    key: \"revertRangeMappings\",\n    value: function revertRangeMappings(diffs) {\n      var model = this._diffModel.get();\n      if (!model || !model.isDiffUpToDate.get()) {\n        return;\n      }\n      var changes = diffs.map(function (c) {\n        return {\n          range: c.modifiedRange,\n          text: model.model.original.getValueInRange(c.originalRange)\n        };\n      });\n      this._editors.modified.executeEdits('diffEditor', changes);\n    }\n  }, {\n    key: \"_goTo\",\n    value: function _goTo(diff) {\n      this._editors.modified.setPosition(new Position(diff.lineRangeMapping.modified.startLineNumber, 1));\n      this._editors.modified.revealRangeInCenter(diff.lineRangeMapping.modified.toExclusiveRange());\n    }\n  }, {\n    key: \"goToDiff\",\n    value: function goToDiff(target) {\n      var _a, _b, _c, _d;\n      var diffs = (_b = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.diff.get()) === null || _b === void 0 ? void 0 : _b.mappings;\n      if (!diffs || diffs.length === 0) {\n        return;\n      }\n      var curLineNumber = this._editors.modified.getPosition().lineNumber;\n      var diff;\n      if (target === 'next') {\n        diff = (_c = diffs.find(function (d) {\n          return d.lineRangeMapping.modified.startLineNumber > curLineNumber;\n        })) !== null && _c !== void 0 ? _c : diffs[0];\n      } else {\n        diff = (_d = findLast(diffs, function (d) {\n          return d.lineRangeMapping.modified.startLineNumber < curLineNumber;\n        })) !== null && _d !== void 0 ? _d : diffs[diffs.length - 1];\n      }\n      this._goTo(diff);\n      if (diff.lineRangeMapping.modified.isEmpty) {\n        this._accessibilitySignalService.playSignal(AccessibilitySignal.diffLineDeleted, {\n          source: 'diffEditor.goToDiff'\n        });\n      } else if (diff.lineRangeMapping.original.isEmpty) {\n        this._accessibilitySignalService.playSignal(AccessibilitySignal.diffLineInserted, {\n          source: 'diffEditor.goToDiff'\n        });\n      } else if (diff) {\n        this._accessibilitySignalService.playSignal(AccessibilitySignal.diffLineModified, {\n          source: 'diffEditor.goToDiff'\n        });\n      }\n    }\n  }, {\n    key: \"revealFirstDiff\",\n    value: function revealFirstDiff() {\n      var _this3 = this;\n      var diffModel = this._diffModel.get();\n      if (!diffModel) {\n        return;\n      }\n      // wait for the diff computation to finish\n      this.waitForDiff().then(function () {\n        var _a;\n        var diffs = (_a = diffModel.diff.get()) === null || _a === void 0 ? void 0 : _a.mappings;\n        if (!diffs || diffs.length === 0) {\n          return;\n        }\n        _this3._goTo(diffs[0]);\n      });\n    }\n  }, {\n    key: \"accessibleDiffViewerNext\",\n    value: function accessibleDiffViewerNext() {\n      this._accessibleDiffViewer.get().next();\n    }\n  }, {\n    key: \"accessibleDiffViewerPrev\",\n    value: function accessibleDiffViewerPrev() {\n      this._accessibleDiffViewer.get().prev();\n    }\n  }, {\n    key: \"waitForDiff\",\n    value: function () {\n      var _waitForDiff = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var diffModel;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              diffModel = this._diffModel.get();\n              if (diffModel) {\n                _context.next = 3;\n                break;\n              }\n              return _context.abrupt(\"return\");\n            case 3:\n              _context.next = 5;\n              return diffModel.waitForDiff();\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function waitForDiff() {\n        return _waitForDiff.apply(this, arguments);\n      }\n      return waitForDiff;\n    }()\n  }, {\n    key: \"mapToOtherSide\",\n    value: function mapToOtherSide() {\n      var _a, _b;\n      var isModifiedFocus = this._editors.modified.hasWidgetFocus();\n      var source = isModifiedFocus ? this._editors.modified : this._editors.original;\n      var destination = isModifiedFocus ? this._editors.original : this._editors.modified;\n      var destinationSelection;\n      var sourceSelection = source.getSelection();\n      if (sourceSelection) {\n        var mappings = (_b = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.diff.get()) === null || _b === void 0 ? void 0 : _b.mappings.map(function (m) {\n          return isModifiedFocus ? m.lineRangeMapping.flip() : m.lineRangeMapping;\n        });\n        if (mappings) {\n          var newRange1 = translatePosition(sourceSelection.getStartPosition(), mappings);\n          var newRange2 = translatePosition(sourceSelection.getEndPosition(), mappings);\n          destinationSelection = Range.plusRange(newRange1, newRange2);\n        }\n      }\n      return {\n        destination: destination,\n        destinationSelection: destinationSelection\n      };\n    }\n  }, {\n    key: \"switchSide\",\n    value: function switchSide() {\n      var _this$mapToOtherSide = this.mapToOtherSide(),\n        destination = _this$mapToOtherSide.destination,\n        destinationSelection = _this$mapToOtherSide.destinationSelection;\n      destination.focus();\n      if (destinationSelection) {\n        destination.setSelection(destinationSelection);\n      }\n    }\n  }, {\n    key: \"exitCompareMove\",\n    value: function exitCompareMove() {\n      var model = this._diffModel.get();\n      if (!model) {\n        return;\n      }\n      model.movedTextToCompare.set(undefined, undefined);\n    }\n  }, {\n    key: \"collapseAllUnchangedRegions\",\n    value: function collapseAllUnchangedRegions() {\n      var _a;\n      var unchangedRegions = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.unchangedRegions.get();\n      if (!unchangedRegions) {\n        return;\n      }\n      transaction(function (tx) {\n        var _iterator2 = _createForOfIteratorHelper(unchangedRegions),\n          _step2;\n        try {\n          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n            var region = _step2.value;\n            region.collapseAll(tx);\n          }\n        } catch (err) {\n          _iterator2.e(err);\n        } finally {\n          _iterator2.f();\n        }\n      });\n    }\n  }, {\n    key: \"showAllUnchangedRegions\",\n    value: function showAllUnchangedRegions() {\n      var _a;\n      var unchangedRegions = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.unchangedRegions.get();\n      if (!unchangedRegions) {\n        return;\n      }\n      transaction(function (tx) {\n        var _iterator3 = _createForOfIteratorHelper(unchangedRegions),\n          _step3;\n        try {\n          for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n            var region = _step3.value;\n            region.showAll(tx);\n          }\n        } catch (err) {\n          _iterator3.e(err);\n        } finally {\n          _iterator3.f();\n        }\n      });\n    }\n  }, {\n    key: \"_handleCursorPositionChange\",\n    value: function _handleCursorPositionChange(e, isModifiedEditor) {\n      var _a, _b;\n      if ((e === null || e === void 0 ? void 0 : e.reason) === 3 /* CursorChangeReason.Explicit */) {\n        var diff = (_b = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.diff.get()) === null || _b === void 0 ? void 0 : _b.mappings.find(function (m) {\n          return isModifiedEditor ? m.lineRangeMapping.modified.contains(e.position.lineNumber) : m.lineRangeMapping.original.contains(e.position.lineNumber);\n        });\n        if (diff === null || diff === void 0 ? void 0 : diff.lineRangeMapping.modified.isEmpty) {\n          this._accessibilitySignalService.playSignal(AccessibilitySignal.diffLineDeleted, {\n            source: 'diffEditor.cursorPositionChanged'\n          });\n        } else if (diff === null || diff === void 0 ? void 0 : diff.lineRangeMapping.original.isEmpty) {\n          this._accessibilitySignalService.playSignal(AccessibilitySignal.diffLineInserted, {\n            source: 'diffEditor.cursorPositionChanged'\n          });\n        } else if (diff) {\n          this._accessibilitySignalService.playSignal(AccessibilitySignal.diffLineModified, {\n            source: 'diffEditor.cursorPositionChanged'\n          });\n        }\n      }\n    }\n  }]);\n}(DelegatingEditor);\nDiffEditorWidget = __decorate([__param(3, IContextKeyService), __param(4, IInstantiationService), __param(5, ICodeEditorService), __param(6, IAccessibilitySignalService), __param(7, IEditorProgressService)], DiffEditorWidget);\nexport { DiffEditorWidget };\nfunction toLineChanges(state) {\n  return state.mappings.map(function (x) {\n    var m = x.lineRangeMapping;\n    var originalStartLineNumber;\n    var originalEndLineNumber;\n    var modifiedStartLineNumber;\n    var modifiedEndLineNumber;\n    var innerChanges = m.innerChanges;\n    if (m.original.isEmpty) {\n      // Insertion\n      originalStartLineNumber = m.original.startLineNumber - 1;\n      originalEndLineNumber = 0;\n      innerChanges = undefined;\n    } else {\n      originalStartLineNumber = m.original.startLineNumber;\n      originalEndLineNumber = m.original.endLineNumberExclusive - 1;\n    }\n    if (m.modified.isEmpty) {\n      // Deletion\n      modifiedStartLineNumber = m.modified.startLineNumber - 1;\n      modifiedEndLineNumber = 0;\n      innerChanges = undefined;\n    } else {\n      modifiedStartLineNumber = m.modified.startLineNumber;\n      modifiedEndLineNumber = m.modified.endLineNumberExclusive - 1;\n    }\n    return {\n      originalStartLineNumber: originalStartLineNumber,\n      originalEndLineNumber: originalEndLineNumber,\n      modifiedStartLineNumber: modifiedStartLineNumber,\n      modifiedEndLineNumber: modifiedEndLineNumber,\n      charChanges: innerChanges === null || innerChanges === void 0 ? void 0 : innerChanges.map(function (m) {\n        return {\n          originalStartLineNumber: m.originalRange.startLineNumber,\n          originalStartColumn: m.originalRange.startColumn,\n          originalEndLineNumber: m.originalRange.endLineNumber,\n          originalEndColumn: m.originalRange.endColumn,\n          modifiedStartLineNumber: m.modifiedRange.startLineNumber,\n          modifiedStartColumn: m.modifiedRange.startColumn,\n          modifiedEndLineNumber: m.modifiedRange.endLineNumber,\n          modifiedEndColumn: m.modifiedRange.endColumn\n        };\n      })\n    };\n  });\n}","map":{"version":3,"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","_typeof","decorate","i","defineProperty","__param","paramIndex","decorator","$","getWindow","h","findLast","onUnexpectedError","Event","toDisposable","autorun","autorunWithStore","derived","observableFromEvent","observableValue","recomputeInitiallyAndOnChange","subtransaction","transaction","derivedDisposable","EditorExtensionsRegistry","ICodeEditorService","StableEditorScrollState","CodeEditorWidget","AccessibleDiffViewer","AccessibleDiffViewerModelFromEditors","DiffEditorDecorations","DiffEditorSash","DiffEditorViewZones","HideUnchangedRegionsFeature","MovedBlocksLinesFeature","OverviewRulerFeature","RevertButtonsFeature","ObservableElementSizeObserver","applyStyle","applyViewZones","bindContextKey","readHotReloadableExport","translatePosition","Position","Range","EditorType","EditorContextKeys","AccessibilitySignal","IAccessibilitySignalService","IContextKeyService","IInstantiationService","ServiceCollection","IEditorProgressService","DiffEditorEditors","DelegatingEditor","DiffEditorOptions","DiffEditorViewModel","DiffEditorGutter","DiffEditorWidget","_DelegatingEditor","_domElement","options","codeEditorWidgetOptions","_parentContextKeyService","_parentInstantiationService","codeEditorService","_accessibilitySignalService","_editorProgressService","_this","_classCallCheck","_a","_callSuper","elements","style","position","height","visibility","_diffModel","undefined","_shouldDisposeDiffModel","onDidChangeModel","fromObservableLight","_contextKeyService","_register","createScoped","_instantiationService","createChild","_boundarySashes","_accessibleDiffViewerShouldBeVisible","_accessibleDiffViewerVisible","reader","_options","onlyShowAccessibleDiffViewer","read","_movedBlocksLinesPart","_layoutInfo","_b","_c","_d","_e","fullWidth","_rootSizeObserver","width","fullHeight","sash","_sash","gutter","_gutter","gutterWidth","overviewRulerPartWidth","_overviewRulerPart","originalLeft","originalWidth","modifiedLeft","modifiedWidth","gutterLeft","sideBySide","sashLeft","movedBlocksLinesWidth","Math","max","_editors","original","getLayoutInfo","decorationsLeft","left","layout","modified","modifiedEditor","originalEditor","_diffValue","map","m","diff","onDidUpdateDiff","willCreateDiffEditor","createKey","appendChild","root","removeChild","dimension","setAutomaticLayout","automaticLayout","createInstance","setWidth","isEmbeddedDiffEditor","isInEmbeddedEditor","comparingMovedCode","movedTextToCompare","diffEditorRenderSideBySideInlineBreakpointReached","couldShowInlineViewBecauseOfSize","diffEditorInlineMode","renderSideBySide","hasChanges","mappings","o","o2","_createInnerEditor","diffEditorOriginalWritable","originalEditable","diffEditorModifiedWritable","readOnly","diffEditorOriginalUri","model","uri","toString","diffEditorModifiedUri","renderOverviewRuler","_store","showSash","classList","toggle","w","unchangedRangesFeature","origViewZoneIdsToIgnore","Set","modViewZoneIdsToIgnore","isUpdatingViewZones","viewZoneManager","get","isUpdatingHiddenAreas","originalViewZones","orig","viewZones","orig2","origViewZones","concat","modifiedViewZones","mod","mod2","modViewZones","isUpdatingOrigViewZones","scrollState","isUpdatingModViewZones","capture","restore","_accessibleDiffViewer","accessibleDiffViewer","visible","tx","set","v","lineRangeMapping","_createDiffEditorContributions","addDiffEditor","shouldRenderGutterMenu","value","overlay","hideUnchangedRegions","runAndSubscribe","onDidChangeCursorPosition","e","_handleCursorPositionChange","isInitializingDiff","isDiffUpToDate","store","show","add","done","dispose","_inherits","_createClass","onDidContentSizeChange","instantiationService","container","editorWidgetOptions","editor","contributions","getDiffEditorContributions","_iterator","_createForOfIteratorHelper","_step","s","n","ctor","err","f","getEditorType","IDiffEditor","observe","hasTextFocus","saveViewState","originalViewState","modifiedViewState","modelState","serializeState","restoreViewState","diffEditorState","restoreSerializedState","handleInitialized","createViewModel","getModel","setModel","_this2","close","vm","shouldDispose","batchEventsGlobally","prevValue","updateOptions","changedOptions","getContainerDomNode","getOriginalEditor","getModifiedEditor","getLineChanges","diffState","toLineChanges","revert","executeEdits","range","toExclusiveRange","text","getValueInRange","revertRangeMappings","diffs","changes","modifiedRange","originalRange","_goTo","setPosition","startLineNumber","revealRangeInCenter","goToDiff","curLineNumber","getPosition","lineNumber","find","isEmpty","playSignal","diffLineDeleted","source","diffLineInserted","diffLineModified","revealFirstDiff","_this3","diffModel","waitForDiff","then","accessibleDiffViewerNext","next","accessibleDiffViewerPrev","prev","_waitForDiff","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","abrupt","stop","apply","mapToOtherSide","isModifiedFocus","hasWidgetFocus","destination","destinationSelection","sourceSelection","getSelection","flip","newRange1","getStartPosition","newRange2","getEndPosition","plusRange","switchSide","_this$mapToOtherSide","focus","setSelection","exitCompareMove","collapseAllUnchangedRegions","unchangedRegions","_iterator2","_step2","region","collapseAll","showAllUnchangedRegions","_iterator3","_step3","showAll","isModifiedEditor","reason","contains","state","x","originalStartLineNumber","originalEndLineNumber","modifiedStartLineNumber","modifiedEndLineNumber","innerChanges","endLineNumberExclusive","charChanges","originalStartColumn","startColumn","endLineNumber","originalEndColumn","endColumn","modifiedStartColumn","modifiedEndColumn"],"sources":["/Users/yinger/Desktop/z95_exam_frontend/node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/diffEditorWidget.js"],"sourcesContent":["var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $, getWindow, h } from '../../../../base/browser/dom.js';\nimport { findLast } from '../../../../base/common/arraysFind.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { toDisposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, autorunWithStore, derived, observableFromEvent, observableValue, recomputeInitiallyAndOnChange, subtransaction, transaction } from '../../../../base/common/observable.js';\nimport { derivedDisposable } from '../../../../base/common/observableInternal/derived.js';\nimport './style.css';\nimport { EditorExtensionsRegistry } from '../../editorExtensions.js';\nimport { ICodeEditorService } from '../../services/codeEditorService.js';\nimport { StableEditorScrollState } from '../../stableEditorScroll.js';\nimport { CodeEditorWidget } from '../codeEditor/codeEditorWidget.js';\nimport { AccessibleDiffViewer, AccessibleDiffViewerModelFromEditors } from './components/accessibleDiffViewer.js';\nimport { DiffEditorDecorations } from './components/diffEditorDecorations.js';\nimport { DiffEditorSash } from './components/diffEditorSash.js';\nimport { DiffEditorViewZones } from './components/diffEditorViewZones/diffEditorViewZones.js';\nimport { HideUnchangedRegionsFeature } from './features/hideUnchangedRegionsFeature.js';\nimport { MovedBlocksLinesFeature } from './features/movedBlocksLinesFeature.js';\nimport { OverviewRulerFeature } from './features/overviewRulerFeature.js';\nimport { RevertButtonsFeature } from './features/revertButtonsFeature.js';\nimport { ObservableElementSizeObserver, applyStyle, applyViewZones, bindContextKey, readHotReloadableExport, translatePosition } from './utils.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorType } from '../../../common/editorCommon.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { AccessibilitySignal, IAccessibilitySignalService } from '../../../../platform/accessibilitySignal/browser/accessibilitySignalService.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ServiceCollection } from '../../../../platform/instantiation/common/serviceCollection.js';\nimport { IEditorProgressService } from '../../../../platform/progress/common/progress.js';\nimport { DiffEditorEditors } from './components/diffEditorEditors.js';\nimport { DelegatingEditor } from './delegatingEditorImpl.js';\nimport { DiffEditorOptions } from './diffEditorOptions.js';\nimport { DiffEditorViewModel } from './diffEditorViewModel.js';\nimport { DiffEditorGutter } from './features/gutterFeature.js';\nlet DiffEditorWidget = class DiffEditorWidget extends DelegatingEditor {\n    get onDidContentSizeChange() { return this._editors.onDidContentSizeChange; }\n    constructor(_domElement, options, codeEditorWidgetOptions, _parentContextKeyService, _parentInstantiationService, codeEditorService, _accessibilitySignalService, _editorProgressService) {\n        var _a;\n        super();\n        this._domElement = _domElement;\n        this._parentContextKeyService = _parentContextKeyService;\n        this._parentInstantiationService = _parentInstantiationService;\n        this._accessibilitySignalService = _accessibilitySignalService;\n        this._editorProgressService = _editorProgressService;\n        this.elements = h('div.monaco-diff-editor.side-by-side', { style: { position: 'relative', height: '100%' } }, [\n            h('div.noModificationsOverlay@overlay', { style: { position: 'absolute', height: '100%', visibility: 'hidden', } }, [$('span', {}, 'No Changes')]),\n            h('div.editor.original@original', { style: { position: 'absolute', height: '100%', } }),\n            h('div.editor.modified@modified', { style: { position: 'absolute', height: '100%', } }),\n            h('div.accessibleDiffViewer@accessibleDiffViewer', { style: { position: 'absolute', height: '100%' } }),\n        ]);\n        this._diffModel = observableValue(this, undefined);\n        this._shouldDisposeDiffModel = false;\n        this.onDidChangeModel = Event.fromObservableLight(this._diffModel);\n        this._contextKeyService = this._register(this._parentContextKeyService.createScoped(this._domElement));\n        this._instantiationService = this._parentInstantiationService.createChild(new ServiceCollection([IContextKeyService, this._contextKeyService]));\n        this._boundarySashes = observableValue(this, undefined);\n        this._accessibleDiffViewerShouldBeVisible = observableValue(this, false);\n        this._accessibleDiffViewerVisible = derived(this, reader => this._options.onlyShowAccessibleDiffViewer.read(reader)\n            ? true\n            : this._accessibleDiffViewerShouldBeVisible.read(reader));\n        this._movedBlocksLinesPart = observableValue(this, undefined);\n        this._layoutInfo = derived(this, reader => {\n            var _a, _b, _c, _d, _e;\n            const fullWidth = this._rootSizeObserver.width.read(reader);\n            const fullHeight = this._rootSizeObserver.height.read(reader);\n            const sash = this._sash.read(reader);\n            const gutter = this._gutter.read(reader);\n            const gutterWidth = (_a = gutter === null || gutter === void 0 ? void 0 : gutter.width.read(reader)) !== null && _a !== void 0 ? _a : 0;\n            const overviewRulerPartWidth = (_c = (_b = this._overviewRulerPart.read(reader)) === null || _b === void 0 ? void 0 : _b.width) !== null && _c !== void 0 ? _c : 0;\n            let originalLeft, originalWidth, modifiedLeft, modifiedWidth, gutterLeft;\n            const sideBySide = !!sash;\n            if (sideBySide) {\n                const sashLeft = sash.sashLeft.read(reader);\n                const movedBlocksLinesWidth = (_e = (_d = this._movedBlocksLinesPart.read(reader)) === null || _d === void 0 ? void 0 : _d.width.read(reader)) !== null && _e !== void 0 ? _e : 0;\n                originalLeft = 0;\n                originalWidth = sashLeft - gutterWidth - movedBlocksLinesWidth;\n                gutterLeft = sashLeft - gutterWidth;\n                modifiedLeft = sashLeft;\n                modifiedWidth = fullWidth - modifiedLeft - overviewRulerPartWidth;\n            }\n            else {\n                gutterLeft = 0;\n                originalLeft = gutterWidth;\n                originalWidth = Math.max(5, this._editors.original.getLayoutInfo().decorationsLeft);\n                modifiedLeft = gutterWidth + originalWidth;\n                modifiedWidth = fullWidth - modifiedLeft - overviewRulerPartWidth;\n            }\n            this.elements.original.style.left = originalLeft + 'px';\n            this.elements.original.style.width = originalWidth + 'px';\n            this._editors.original.layout({ width: originalWidth, height: fullHeight }, true);\n            gutter === null || gutter === void 0 ? void 0 : gutter.layout(gutterLeft);\n            this.elements.modified.style.left = modifiedLeft + 'px';\n            this.elements.modified.style.width = modifiedWidth + 'px';\n            this._editors.modified.layout({ width: modifiedWidth, height: fullHeight }, true);\n            return {\n                modifiedEditor: this._editors.modified.getLayoutInfo(),\n                originalEditor: this._editors.original.getLayoutInfo(),\n            };\n        });\n        this._diffValue = this._diffModel.map((m, r) => m === null || m === void 0 ? void 0 : m.diff.read(r));\n        this.onDidUpdateDiff = Event.fromObservableLight(this._diffValue);\n        codeEditorService.willCreateDiffEditor();\n        this._contextKeyService.createKey('isInDiffEditor', true);\n        this._domElement.appendChild(this.elements.root);\n        this._register(toDisposable(() => this._domElement.removeChild(this.elements.root)));\n        this._rootSizeObserver = this._register(new ObservableElementSizeObserver(this.elements.root, options.dimension));\n        this._rootSizeObserver.setAutomaticLayout((_a = options.automaticLayout) !== null && _a !== void 0 ? _a : false);\n        this._options = this._instantiationService.createInstance(DiffEditorOptions, options);\n        this._register(autorun(reader => {\n            this._options.setWidth(this._rootSizeObserver.width.read(reader));\n        }));\n        this._contextKeyService.createKey(EditorContextKeys.isEmbeddedDiffEditor.key, false);\n        this._register(bindContextKey(EditorContextKeys.isEmbeddedDiffEditor, this._contextKeyService, reader => this._options.isInEmbeddedEditor.read(reader)));\n        this._register(bindContextKey(EditorContextKeys.comparingMovedCode, this._contextKeyService, reader => { var _a; return !!((_a = this._diffModel.read(reader)) === null || _a === void 0 ? void 0 : _a.movedTextToCompare.read(reader)); }));\n        this._register(bindContextKey(EditorContextKeys.diffEditorRenderSideBySideInlineBreakpointReached, this._contextKeyService, reader => this._options.couldShowInlineViewBecauseOfSize.read(reader)));\n        this._register(bindContextKey(EditorContextKeys.diffEditorInlineMode, this._contextKeyService, reader => !this._options.renderSideBySide.read(reader)));\n        this._register(bindContextKey(EditorContextKeys.hasChanges, this._contextKeyService, reader => { var _a, _b, _c; return ((_c = (_b = (_a = this._diffModel.read(reader)) === null || _a === void 0 ? void 0 : _a.diff.read(reader)) === null || _b === void 0 ? void 0 : _b.mappings.length) !== null && _c !== void 0 ? _c : 0) > 0; }));\n        this._editors = this._register(this._instantiationService.createInstance(DiffEditorEditors, this.elements.original, this.elements.modified, this._options, codeEditorWidgetOptions, (i, c, o, o2) => this._createInnerEditor(i, c, o, o2)));\n        this._register(bindContextKey(EditorContextKeys.diffEditorOriginalWritable, this._contextKeyService, reader => this._options.originalEditable.read(reader)));\n        this._register(bindContextKey(EditorContextKeys.diffEditorModifiedWritable, this._contextKeyService, reader => !this._options.readOnly.read(reader)));\n        this._register(bindContextKey(EditorContextKeys.diffEditorOriginalUri, this._contextKeyService, reader => { var _a, _b; return (_b = (_a = this._diffModel.read(reader)) === null || _a === void 0 ? void 0 : _a.model.original.uri.toString()) !== null && _b !== void 0 ? _b : ''; }));\n        this._register(bindContextKey(EditorContextKeys.diffEditorModifiedUri, this._contextKeyService, reader => { var _a, _b; return (_b = (_a = this._diffModel.read(reader)) === null || _a === void 0 ? void 0 : _a.model.modified.uri.toString()) !== null && _b !== void 0 ? _b : ''; }));\n        this._overviewRulerPart = derivedDisposable(this, reader => !this._options.renderOverviewRuler.read(reader)\n            ? undefined\n            : this._instantiationService.createInstance(readHotReloadableExport(OverviewRulerFeature, reader), this._editors, this.elements.root, this._diffModel, this._rootSizeObserver.width, this._rootSizeObserver.height, this._layoutInfo.map(i => i.modifiedEditor))).recomputeInitiallyAndOnChange(this._store);\n        this._sash = derivedDisposable(this, reader => {\n            const showSash = this._options.renderSideBySide.read(reader);\n            this.elements.root.classList.toggle('side-by-side', showSash);\n            return !showSash ? undefined : new DiffEditorSash(this._options, this.elements.root, {\n                height: this._rootSizeObserver.height,\n                width: this._rootSizeObserver.width.map((w, reader) => { var _a, _b; return w - ((_b = (_a = this._overviewRulerPart.read(reader)) === null || _a === void 0 ? void 0 : _a.width) !== null && _b !== void 0 ? _b : 0); }),\n            }, this._boundarySashes);\n        }).recomputeInitiallyAndOnChange(this._store);\n        const unchangedRangesFeature = derivedDisposable(this, reader => /** @description UnchangedRangesFeature */ this._instantiationService.createInstance(readHotReloadableExport(HideUnchangedRegionsFeature, reader), this._editors, this._diffModel, this._options)).recomputeInitiallyAndOnChange(this._store);\n        derivedDisposable(this, reader => /** @description DiffEditorDecorations */ this._instantiationService.createInstance(readHotReloadableExport(DiffEditorDecorations, reader), this._editors, this._diffModel, this._options, this)).recomputeInitiallyAndOnChange(this._store);\n        const origViewZoneIdsToIgnore = new Set();\n        const modViewZoneIdsToIgnore = new Set();\n        let isUpdatingViewZones = false;\n        const viewZoneManager = derivedDisposable(this, reader => /** @description ViewZoneManager */ this._instantiationService.createInstance(readHotReloadableExport(DiffEditorViewZones, reader), getWindow(this._domElement), this._editors, this._diffModel, this._options, this, () => isUpdatingViewZones || unchangedRangesFeature.get().isUpdatingHiddenAreas, origViewZoneIdsToIgnore, modViewZoneIdsToIgnore)).recomputeInitiallyAndOnChange(this._store);\n        const originalViewZones = derived(this, (reader) => {\n            const orig = viewZoneManager.read(reader).viewZones.read(reader).orig;\n            const orig2 = unchangedRangesFeature.read(reader).viewZones.read(reader).origViewZones;\n            return orig.concat(orig2);\n        });\n        const modifiedViewZones = derived(this, (reader) => {\n            const mod = viewZoneManager.read(reader).viewZones.read(reader).mod;\n            const mod2 = unchangedRangesFeature.read(reader).viewZones.read(reader).modViewZones;\n            return mod.concat(mod2);\n        });\n        this._register(applyViewZones(this._editors.original, originalViewZones, isUpdatingOrigViewZones => {\n            isUpdatingViewZones = isUpdatingOrigViewZones;\n        }, origViewZoneIdsToIgnore));\n        let scrollState;\n        this._register(applyViewZones(this._editors.modified, modifiedViewZones, isUpdatingModViewZones => {\n            isUpdatingViewZones = isUpdatingModViewZones;\n            if (isUpdatingViewZones) {\n                scrollState = StableEditorScrollState.capture(this._editors.modified);\n            }\n            else {\n                scrollState === null || scrollState === void 0 ? void 0 : scrollState.restore(this._editors.modified);\n                scrollState = undefined;\n            }\n        }, modViewZoneIdsToIgnore));\n        this._accessibleDiffViewer = derivedDisposable(this, reader => this._instantiationService.createInstance(readHotReloadableExport(AccessibleDiffViewer, reader), this.elements.accessibleDiffViewer, this._accessibleDiffViewerVisible, (visible, tx) => this._accessibleDiffViewerShouldBeVisible.set(visible, tx), this._options.onlyShowAccessibleDiffViewer.map(v => !v), this._rootSizeObserver.width, this._rootSizeObserver.height, this._diffModel.map((m, r) => { var _a; return (_a = m === null || m === void 0 ? void 0 : m.diff.read(r)) === null || _a === void 0 ? void 0 : _a.mappings.map(m => m.lineRangeMapping); }), new AccessibleDiffViewerModelFromEditors(this._editors))).recomputeInitiallyAndOnChange(this._store);\n        const visibility = this._accessibleDiffViewerVisible.map(v => v ? 'hidden' : 'visible');\n        this._register(applyStyle(this.elements.modified, { visibility }));\n        this._register(applyStyle(this.elements.original, { visibility }));\n        this._createDiffEditorContributions();\n        codeEditorService.addDiffEditor(this);\n        this._gutter = derivedDisposable(this, reader => {\n            return this._options.shouldRenderGutterMenu.read(reader)\n                ? this._instantiationService.createInstance(readHotReloadableExport(DiffEditorGutter, reader), this.elements.root, this._diffModel, this._editors)\n                : undefined;\n        });\n        this._register(recomputeInitiallyAndOnChange(this._layoutInfo));\n        derivedDisposable(this, reader => /** @description MovedBlocksLinesPart */ new (readHotReloadableExport(MovedBlocksLinesFeature, reader))(this.elements.root, this._diffModel, this._layoutInfo.map(i => i.originalEditor), this._layoutInfo.map(i => i.modifiedEditor), this._editors)).recomputeInitiallyAndOnChange(this._store, value => {\n            // This is to break the layout info <-> moved blocks lines part dependency cycle.\n            this._movedBlocksLinesPart.set(value, undefined);\n        });\n        this._register(applyStyle(this.elements.overlay, {\n            width: this._layoutInfo.map((i, r) => i.originalEditor.width + (this._options.renderSideBySide.read(r) ? 0 : i.modifiedEditor.width)),\n            visibility: derived(reader => /** @description visibility */ {\n                var _a, _b;\n                return (this._options.hideUnchangedRegions.read(reader) && ((_b = (_a = this._diffModel.read(reader)) === null || _a === void 0 ? void 0 : _a.diff.read(reader)) === null || _b === void 0 ? void 0 : _b.mappings.length) === 0)\n                    ? 'visible' : 'hidden';\n            }),\n        }));\n        this._register(Event.runAndSubscribe(this._editors.modified.onDidChangeCursorPosition, e => this._handleCursorPositionChange(e, true)));\n        this._register(Event.runAndSubscribe(this._editors.original.onDidChangeCursorPosition, e => this._handleCursorPositionChange(e, false)));\n        const isInitializingDiff = this._diffModel.map(this, (m, reader) => {\n            /** @isInitializingDiff isDiffUpToDate */\n            if (!m) {\n                return undefined;\n            }\n            return m.diff.read(reader) === undefined && !m.isDiffUpToDate.read(reader);\n        });\n        this._register(autorunWithStore((reader, store) => {\n            /** @description DiffEditorWidgetHelper.ShowProgress */\n            if (isInitializingDiff.read(reader) === true) {\n                const r = this._editorProgressService.show(true, 1000);\n                store.add(toDisposable(() => r.done()));\n            }\n        }));\n        this._register(toDisposable(() => {\n            var _a;\n            if (this._shouldDisposeDiffModel) {\n                (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.dispose();\n            }\n        }));\n        this._register(autorunWithStore((reader, store) => {\n            store.add(new (readHotReloadableExport(RevertButtonsFeature, reader))(this._editors, this._diffModel, this._options, this));\n        }));\n    }\n    _createInnerEditor(instantiationService, container, options, editorWidgetOptions) {\n        const editor = instantiationService.createInstance(CodeEditorWidget, container, options, editorWidgetOptions);\n        return editor;\n    }\n    _createDiffEditorContributions() {\n        const contributions = EditorExtensionsRegistry.getDiffEditorContributions();\n        for (const desc of contributions) {\n            try {\n                this._register(this._instantiationService.createInstance(desc.ctor, this));\n            }\n            catch (err) {\n                onUnexpectedError(err);\n            }\n        }\n    }\n    get _targetEditor() { return this._editors.modified; }\n    getEditorType() { return EditorType.IDiffEditor; }\n    layout(dimension) {\n        this._rootSizeObserver.observe(dimension);\n    }\n    hasTextFocus() { return this._editors.original.hasTextFocus() || this._editors.modified.hasTextFocus(); }\n    saveViewState() {\n        var _a;\n        const originalViewState = this._editors.original.saveViewState();\n        const modifiedViewState = this._editors.modified.saveViewState();\n        return {\n            original: originalViewState,\n            modified: modifiedViewState,\n            modelState: (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.serializeState(),\n        };\n    }\n    restoreViewState(s) {\n        var _a;\n        if (s && s.original && s.modified) {\n            const diffEditorState = s;\n            this._editors.original.restoreViewState(diffEditorState.original);\n            this._editors.modified.restoreViewState(diffEditorState.modified);\n            if (diffEditorState.modelState) {\n                (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.restoreSerializedState(diffEditorState.modelState);\n            }\n        }\n    }\n    handleInitialized() {\n        this._editors.original.handleInitialized();\n        this._editors.modified.handleInitialized();\n    }\n    createViewModel(model) {\n        return this._instantiationService.createInstance(DiffEditorViewModel, model, this._options);\n    }\n    getModel() { var _a, _b; return (_b = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.model) !== null && _b !== void 0 ? _b : null; }\n    setModel(model, tx) {\n        if (!model && this._diffModel.get()) {\n            // Transitioning from a model to no-model\n            this._accessibleDiffViewer.get().close();\n        }\n        const vm = model ? ('model' in model) ? { model, shouldDispose: false } : { model: this.createViewModel(model), shouldDispose: true } : undefined;\n        if (this._diffModel.get() !== (vm === null || vm === void 0 ? void 0 : vm.model)) {\n            subtransaction(tx, tx => {\n                var _a;\n                /** @description DiffEditorWidget.setModel */\n                observableFromEvent.batchEventsGlobally(tx, () => {\n                    this._editors.original.setModel(vm ? vm.model.model.original : null);\n                    this._editors.modified.setModel(vm ? vm.model.model.modified : null);\n                });\n                const prevValue = this._diffModel.get();\n                const shouldDispose = this._shouldDisposeDiffModel;\n                this._shouldDisposeDiffModel = (_a = vm === null || vm === void 0 ? void 0 : vm.shouldDispose) !== null && _a !== void 0 ? _a : false;\n                this._diffModel.set(vm === null || vm === void 0 ? void 0 : vm.model, tx);\n                if (shouldDispose) {\n                    prevValue === null || prevValue === void 0 ? void 0 : prevValue.dispose();\n                }\n            });\n        }\n    }\n    /**\n     * @param changedOptions Only has values for top-level options that have actually changed.\n     */\n    updateOptions(changedOptions) {\n        this._options.updateOptions(changedOptions);\n    }\n    getContainerDomNode() { return this._domElement; }\n    getOriginalEditor() { return this._editors.original; }\n    getModifiedEditor() { return this._editors.modified; }\n    /**\n     * @deprecated Use `this.getDiffComputationResult().changes2` instead.\n     */\n    getLineChanges() {\n        var _a;\n        const diffState = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.diff.get();\n        if (!diffState) {\n            return null;\n        }\n        return toLineChanges(diffState);\n    }\n    revert(diff) {\n        const model = this._diffModel.get();\n        if (!model || !model.isDiffUpToDate.get()) {\n            return;\n        }\n        this._editors.modified.executeEdits('diffEditor', [\n            {\n                range: diff.modified.toExclusiveRange(),\n                text: model.model.original.getValueInRange(diff.original.toExclusiveRange())\n            }\n        ]);\n    }\n    revertRangeMappings(diffs) {\n        const model = this._diffModel.get();\n        if (!model || !model.isDiffUpToDate.get()) {\n            return;\n        }\n        const changes = diffs.map(c => ({\n            range: c.modifiedRange,\n            text: model.model.original.getValueInRange(c.originalRange)\n        }));\n        this._editors.modified.executeEdits('diffEditor', changes);\n    }\n    _goTo(diff) {\n        this._editors.modified.setPosition(new Position(diff.lineRangeMapping.modified.startLineNumber, 1));\n        this._editors.modified.revealRangeInCenter(diff.lineRangeMapping.modified.toExclusiveRange());\n    }\n    goToDiff(target) {\n        var _a, _b, _c, _d;\n        const diffs = (_b = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.diff.get()) === null || _b === void 0 ? void 0 : _b.mappings;\n        if (!diffs || diffs.length === 0) {\n            return;\n        }\n        const curLineNumber = this._editors.modified.getPosition().lineNumber;\n        let diff;\n        if (target === 'next') {\n            diff = (_c = diffs.find(d => d.lineRangeMapping.modified.startLineNumber > curLineNumber)) !== null && _c !== void 0 ? _c : diffs[0];\n        }\n        else {\n            diff = (_d = findLast(diffs, d => d.lineRangeMapping.modified.startLineNumber < curLineNumber)) !== null && _d !== void 0 ? _d : diffs[diffs.length - 1];\n        }\n        this._goTo(diff);\n        if (diff.lineRangeMapping.modified.isEmpty) {\n            this._accessibilitySignalService.playSignal(AccessibilitySignal.diffLineDeleted, { source: 'diffEditor.goToDiff' });\n        }\n        else if (diff.lineRangeMapping.original.isEmpty) {\n            this._accessibilitySignalService.playSignal(AccessibilitySignal.diffLineInserted, { source: 'diffEditor.goToDiff' });\n        }\n        else if (diff) {\n            this._accessibilitySignalService.playSignal(AccessibilitySignal.diffLineModified, { source: 'diffEditor.goToDiff' });\n        }\n    }\n    revealFirstDiff() {\n        const diffModel = this._diffModel.get();\n        if (!diffModel) {\n            return;\n        }\n        // wait for the diff computation to finish\n        this.waitForDiff().then(() => {\n            var _a;\n            const diffs = (_a = diffModel.diff.get()) === null || _a === void 0 ? void 0 : _a.mappings;\n            if (!diffs || diffs.length === 0) {\n                return;\n            }\n            this._goTo(diffs[0]);\n        });\n    }\n    accessibleDiffViewerNext() { this._accessibleDiffViewer.get().next(); }\n    accessibleDiffViewerPrev() { this._accessibleDiffViewer.get().prev(); }\n    async waitForDiff() {\n        const diffModel = this._diffModel.get();\n        if (!diffModel) {\n            return;\n        }\n        await diffModel.waitForDiff();\n    }\n    mapToOtherSide() {\n        var _a, _b;\n        const isModifiedFocus = this._editors.modified.hasWidgetFocus();\n        const source = isModifiedFocus ? this._editors.modified : this._editors.original;\n        const destination = isModifiedFocus ? this._editors.original : this._editors.modified;\n        let destinationSelection;\n        const sourceSelection = source.getSelection();\n        if (sourceSelection) {\n            const mappings = (_b = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.diff.get()) === null || _b === void 0 ? void 0 : _b.mappings.map(m => isModifiedFocus ? m.lineRangeMapping.flip() : m.lineRangeMapping);\n            if (mappings) {\n                const newRange1 = translatePosition(sourceSelection.getStartPosition(), mappings);\n                const newRange2 = translatePosition(sourceSelection.getEndPosition(), mappings);\n                destinationSelection = Range.plusRange(newRange1, newRange2);\n            }\n        }\n        return { destination, destinationSelection };\n    }\n    switchSide() {\n        const { destination, destinationSelection } = this.mapToOtherSide();\n        destination.focus();\n        if (destinationSelection) {\n            destination.setSelection(destinationSelection);\n        }\n    }\n    exitCompareMove() {\n        const model = this._diffModel.get();\n        if (!model) {\n            return;\n        }\n        model.movedTextToCompare.set(undefined, undefined);\n    }\n    collapseAllUnchangedRegions() {\n        var _a;\n        const unchangedRegions = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.unchangedRegions.get();\n        if (!unchangedRegions) {\n            return;\n        }\n        transaction(tx => {\n            for (const region of unchangedRegions) {\n                region.collapseAll(tx);\n            }\n        });\n    }\n    showAllUnchangedRegions() {\n        var _a;\n        const unchangedRegions = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.unchangedRegions.get();\n        if (!unchangedRegions) {\n            return;\n        }\n        transaction(tx => {\n            for (const region of unchangedRegions) {\n                region.showAll(tx);\n            }\n        });\n    }\n    _handleCursorPositionChange(e, isModifiedEditor) {\n        var _a, _b;\n        if ((e === null || e === void 0 ? void 0 : e.reason) === 3 /* CursorChangeReason.Explicit */) {\n            const diff = (_b = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.diff.get()) === null || _b === void 0 ? void 0 : _b.mappings.find(m => isModifiedEditor ? m.lineRangeMapping.modified.contains(e.position.lineNumber) : m.lineRangeMapping.original.contains(e.position.lineNumber));\n            if (diff === null || diff === void 0 ? void 0 : diff.lineRangeMapping.modified.isEmpty) {\n                this._accessibilitySignalService.playSignal(AccessibilitySignal.diffLineDeleted, { source: 'diffEditor.cursorPositionChanged' });\n            }\n            else if (diff === null || diff === void 0 ? void 0 : diff.lineRangeMapping.original.isEmpty) {\n                this._accessibilitySignalService.playSignal(AccessibilitySignal.diffLineInserted, { source: 'diffEditor.cursorPositionChanged' });\n            }\n            else if (diff) {\n                this._accessibilitySignalService.playSignal(AccessibilitySignal.diffLineModified, { source: 'diffEditor.cursorPositionChanged' });\n            }\n        }\n    }\n};\nDiffEditorWidget = __decorate([\n    __param(3, IContextKeyService),\n    __param(4, IInstantiationService),\n    __param(5, ICodeEditorService),\n    __param(6, IAccessibilitySignalService),\n    __param(7, IEditorProgressService)\n], DiffEditorWidget);\nexport { DiffEditorWidget };\nfunction toLineChanges(state) {\n    return state.mappings.map(x => {\n        const m = x.lineRangeMapping;\n        let originalStartLineNumber;\n        let originalEndLineNumber;\n        let modifiedStartLineNumber;\n        let modifiedEndLineNumber;\n        let innerChanges = m.innerChanges;\n        if (m.original.isEmpty) {\n            // Insertion\n            originalStartLineNumber = m.original.startLineNumber - 1;\n            originalEndLineNumber = 0;\n            innerChanges = undefined;\n        }\n        else {\n            originalStartLineNumber = m.original.startLineNumber;\n            originalEndLineNumber = m.original.endLineNumberExclusive - 1;\n        }\n        if (m.modified.isEmpty) {\n            // Deletion\n            modifiedStartLineNumber = m.modified.startLineNumber - 1;\n            modifiedEndLineNumber = 0;\n            innerChanges = undefined;\n        }\n        else {\n            modifiedStartLineNumber = m.modified.startLineNumber;\n            modifiedEndLineNumber = m.modified.endLineNumberExclusive - 1;\n        }\n        return {\n            originalStartLineNumber,\n            originalEndLineNumber,\n            modifiedStartLineNumber,\n            modifiedEndLineNumber,\n            charChanges: innerChanges === null || innerChanges === void 0 ? void 0 : innerChanges.map(m => ({\n                originalStartLineNumber: m.originalRange.startLineNumber,\n                originalStartColumn: m.originalRange.startColumn,\n                originalEndLineNumber: m.originalRange.endLineNumber,\n                originalEndColumn: m.originalRange.endColumn,\n                modifiedStartLineNumber: m.modifiedRange.startLineNumber,\n                modifiedStartColumn: m.modifiedRange.startColumn,\n                modifiedEndLineNumber: m.modifiedRange.endLineNumber,\n                modifiedEndColumn: m.modifiedRange.endColumn,\n            }))\n        };\n    });\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}