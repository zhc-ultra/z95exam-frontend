{"ast":null,"code":"import _slicedToArray from \"/Users/yinger/Desktop/algo_evaluator_front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _toConsumableArray from \"/Users/yinger/Desktop/algo_evaluator_front/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _createForOfIteratorHelper from \"/Users/yinger/Desktop/algo_evaluator_front/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.some.js\";\nimport \"core-js/modules/es.map.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.object.define-properties.js\";\nimport \"core-js/modules/es.object.define-property.js\";\nimport \"core-js/modules/es.object.get-own-property-descriptors.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/es.string.repeat.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = function __defNormalProp(obj, key, value) {\n  return key in obj ? __defProp(obj, key, {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: value\n  }) : obj[key] = value;\n};\nvar __spreadValues = function __spreadValues(a, b) {\n  for (var prop in b || (b = {})) if (__hasOwnProp.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols) {\n    var _iterator = _createForOfIteratorHelper(__getOwnPropSymbols(b)),\n      _step;\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var prop = _step.value;\n        if (__propIsEnum.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  }\n  return a;\n};\nvar __spreadProps = function __spreadProps(a, b) {\n  return __defProps(a, __getOwnPropDescs(b));\n};\nimport { defineComponent, toRefs, shallowRef, ref, computed, onMounted, watch, createVNode, mergeProps } from \"vue\";\nimport { getPrefixCls } from \"../_utils/global-config.js\";\nimport { useMutationObserver } from \"./hooks/use-mutation-observer.js\";\nimport { useTheme } from \"./hooks/use-theme.js\";\nimport { canvasToGray, styleToString } from \"./utils/index.js\";\nimport { isArray } from \"../_utils/is.js\";\nvar _Watermark = defineComponent({\n  name: \"Watermark\",\n  props: {\n    content: {\n      type: [String, Array]\n    },\n    image: {\n      type: String\n    },\n    width: {\n      type: Number\n    },\n    height: {\n      type: Number\n    },\n    gap: {\n      type: Array,\n      \"default\": function _default() {\n        return [90, 90];\n      }\n    },\n    offset: {\n      type: Array\n    },\n    rotate: {\n      type: Number,\n      \"default\": -22\n    },\n    font: {\n      type: Object\n    },\n    zIndex: {\n      type: Number,\n      \"default\": 6\n    },\n    alpha: {\n      type: Number,\n      \"default\": 1\n    },\n    antiTamper: {\n      type: Boolean,\n      \"default\": true\n    },\n    grayscale: {\n      type: Boolean,\n      \"default\": false\n    },\n    repeat: {\n      type: Boolean,\n      \"default\": true\n    },\n    staggered: {\n      type: Boolean,\n      \"default\": true\n    }\n  },\n  setup: function setup(props, _ref) {\n    var slots = _ref.slots,\n      attrs = _ref.attrs;\n    var _toRefs = toRefs(props),\n      width = _toRefs.width,\n      height = _toRefs.height,\n      image = _toRefs.image,\n      rotate = _toRefs.rotate,\n      alpha = _toRefs.alpha,\n      repeat = _toRefs.repeat,\n      grayscale = _toRefs.grayscale;\n    var prefixCls = getPrefixCls(\"watermark\");\n    var ratio = window.devicePixelRatio || 1;\n    var containerRef = shallowRef();\n    var watermarkMap = ref(new Map());\n    var fontSize = computed(function () {\n      var _a, _b;\n      return (_b = (_a = props.font) == null ? void 0 : _a.fontSize) != null ? _b : 16;\n    });\n    var fontWeight = computed(function () {\n      var _a, _b;\n      return (_b = (_a = props.font) == null ? void 0 : _a.fontWeight) != null ? _b : \"normal\";\n    });\n    var fontStyle = computed(function () {\n      var _a, _b;\n      return (_b = (_a = props.font) == null ? void 0 : _a.fontStyle) != null ? _b : \"normal\";\n    });\n    var fontFamily = computed(function () {\n      var _a, _b;\n      return (_b = (_a = props.font) == null ? void 0 : _a.fontFamily) != null ? _b : \"sans-serif\";\n    });\n    var textAlign = computed(function () {\n      var _a, _b;\n      return (_b = (_a = props.font) == null ? void 0 : _a.textAlign) != null ? _b : \"center\";\n    });\n    var contents = computed(function () {\n      return isArray(props.content) ? props.content : [props.content];\n    });\n    var color = computed(function () {\n      var _a, _b;\n      return (_b = (_a = props.font) == null ? void 0 : _a.color) != null ? _b : theme.value === \"dark\" ? \"rgba(255, 255, 255, 0.15)\" : \"rgba(0, 0, 0, 0.15)\";\n    });\n    var gapX = computed(function () {\n      var _a, _b;\n      return (_b = (_a = props.gap) == null ? void 0 : _a[0]) != null ? _b : 90;\n    });\n    var gapY = computed(function () {\n      var _a, _b;\n      return (_b = (_a = props.gap) == null ? void 0 : _a[1]) != null ? _b : 90;\n    });\n    var gapXCenter = computed(function () {\n      return gapX.value / 2;\n    });\n    var gapYCenter = computed(function () {\n      return gapY.value / 2;\n    });\n    var offsetLeft = computed(function () {\n      var _a, _b;\n      return (_b = (_a = props.offset) == null ? void 0 : _a[0]) != null ? _b : gapXCenter.value;\n    });\n    var offsetTop = computed(function () {\n      var _a, _b;\n      return (_b = (_a = props.offset) == null ? void 0 : _a[1]) != null ? _b : gapYCenter.value;\n    });\n    var markStyle = computed(function () {\n      var _a;\n      var left = offsetLeft.value - gapXCenter.value;\n      var top = offsetTop.value - gapYCenter.value;\n      return {\n        position: \"absolute\",\n        left: left > 0 ? \"\".concat(left, \"px\") : 0,\n        top: top > 0 ? \"\".concat(top, \"px\") : 0,\n        width: left > 0 ? \"calc(100% - \".concat(left, \"px)\") : \"100%\",\n        height: top > 0 ? \"calc(100% - \".concat(top, \"px)\") : \"100%\",\n        pointerEvents: \"none\",\n        backgroundRepeat: props.repeat ? \"repeat\" : \"no-repeat\",\n        backgroundPosition: \"\".concat(left > 0 ? 0 : left, \"px \").concat(top > 0 ? 0 : top, \"px\"),\n        zIndex: (_a = props.zIndex) != null ? _a : 6\n      };\n    });\n    var isStaggered = computed(function () {\n      return props.repeat && props.staggered;\n    });\n    var appendWatermark = function appendWatermark(base64, width2) {\n      var _a;\n      if (containerRef.value) {\n        var watermarkEle = watermarkMap.value.get(containerRef.value);\n        if (watermarkEle) {\n          if (containerRef.value.contains(watermarkEle)) {\n            containerRef.value.removeChild(watermarkEle);\n          }\n          watermarkMap.value[\"delete\"](containerRef.value);\n        }\n        var newWatermarkEle = document.createElement(\"div\");\n        newWatermarkEle.setAttribute(\"style\", styleToString(__spreadProps(__spreadValues({}, markStyle.value), {\n          backgroundImage: \"url('\".concat(base64, \"')\"),\n          backgroundSize: \"\".concat(width2, \"px\")\n        })));\n        (_a = containerRef.value) == null ? void 0 : _a.append(newWatermarkEle);\n        watermarkMap.value.set(containerRef.value, newWatermarkEle);\n      }\n    };\n    var getMarkSize = function getMarkSize(ctx) {\n      var _a, _b;\n      var defaultWidth = 120;\n      var defaultHeight = 28;\n      if (!image.value && ctx.measureText) {\n        ctx.font = \"\".concat(fontSize.value, \"px \").concat(fontFamily.value);\n        var widths = contents.value.map(function (item) {\n          return ctx.measureText(item).width;\n        });\n        defaultWidth = Math.ceil(Math.max.apply(Math, _toConsumableArray(widths)));\n        defaultHeight = fontSize.value * contents.value.length + (contents.value.length - 1) * 3;\n      }\n      return [(_a = width.value) != null ? _a : defaultWidth, (_b = height.value) != null ? _b : defaultHeight];\n    };\n    var renderWatermark = function renderWatermark() {\n      var _a;\n      var canvas = document.createElement(\"canvas\");\n      var ctx = canvas.getContext(\"2d\");\n      if (!ctx) return;\n      var _getMarkSize = getMarkSize(ctx),\n        _getMarkSize2 = _slicedToArray(_getMarkSize, 2),\n        markWidth = _getMarkSize2[0],\n        markheight = _getMarkSize2[1];\n      var realMarkWidth = markWidth * ratio;\n      var realMarkHeight = markheight * ratio;\n      var canvasWidth = (gapX.value + markWidth) * ratio;\n      var canvasHeight = (gapY.value + markheight) * ratio;\n      var drawX = gapX.value / 2 * ratio;\n      var drawY = gapY.value / 2 * ratio;\n      var rotateX = canvasWidth / 2;\n      var rotateY = canvasHeight / 2;\n      var baseSize = isStaggered.value ? 2 : 1;\n      var fillWidth = (gapX.value + markWidth) * baseSize;\n      canvas.width = canvasWidth * baseSize;\n      canvas.height = canvasHeight * baseSize;\n      ctx.globalAlpha = alpha.value;\n      ctx.save();\n      ctx.translate(rotateX, rotateY);\n      ctx.rotate(Math.PI / 180 * rotate.value);\n      ctx.translate(-rotateX, -rotateY);\n      var drawImage = function drawImage() {\n        ctx.restore();\n        if (isStaggered.value) {\n          ctx.drawImage(canvas, 0, 0, canvasWidth, canvasHeight, canvasWidth, canvasHeight, canvasWidth, canvasHeight);\n        }\n        grayscale.value && canvasToGray(canvas);\n        appendWatermark(canvas.toDataURL(), fillWidth);\n      };\n      if (image.value) {\n        var img = new Image();\n        img.onload = function () {\n          ctx.drawImage(img, drawX, drawY, realMarkWidth, realMarkHeight);\n          drawImage();\n        };\n        img.crossOrigin = \"anonymous\";\n        img.referrerPolicy = \"no-referrer\";\n        img.src = image.value;\n      } else {\n        var mergedFontSize = Number(fontSize.value) * ratio;\n        ctx.font = \"\".concat(fontStyle.value, \" normal \").concat(fontWeight.value, \" \").concat(mergedFontSize, \"px/\").concat(markheight, \"px \").concat(fontFamily.value);\n        ctx.fillStyle = color.value;\n        ctx.textAlign = textAlign.value;\n        ctx.textBaseline = \"top\";\n        ctx.translate(realMarkWidth / 2, 0);\n        (_a = contents.value) == null ? void 0 : _a.forEach(function (item, index) {\n          ctx.fillText(item != null ? item : \"\", drawX, drawY + index * (mergedFontSize + 3 * ratio));\n        });\n        drawImage();\n      }\n    };\n    var isWatermarkEle = function isWatermarkEle(ele) {\n      return Array.from(watermarkMap.value.values()).includes(ele);\n    };\n    var handleMutations = function handleMutations(mutations) {\n      if (!props.antiTamper) return;\n      var _iterator2 = _createForOfIteratorHelper(mutations),\n        _step2;\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var mutation = _step2.value;\n          var isRemoved = Array.from(mutation.removedNodes).some(function (node) {\n            return isWatermarkEle(node);\n          });\n          var isModified = mutation.type === \"attributes\" && isWatermarkEle(mutation.target);\n          if (isRemoved || isModified) {\n            renderWatermark();\n            break;\n          }\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n    };\n    var _useTheme = useTheme(renderWatermark),\n      theme = _useTheme.theme;\n    onMounted(function () {\n      renderWatermark();\n      useMutationObserver(containerRef.value, handleMutations, {\n        attributes: true,\n        childList: true,\n        characterData: true,\n        subtree: true\n      });\n    });\n    watch(props, renderWatermark, {\n      deep: true,\n      flush: \"post\"\n    });\n    return function () {\n      var _a;\n      return createVNode(\"div\", mergeProps({\n        \"ref\": containerRef,\n        \"class\": prefixCls,\n        \"style\": {\n          position: \"relative\",\n          overflow: \"hidden\"\n        }\n      }, attrs), [(_a = slots[\"default\"]) == null ? void 0 : _a.call(slots)]);\n    };\n  }\n});\nexport { _Watermark as default };","map":{"version":3,"names":["__defProp","Object","defineProperty","__defProps","defineProperties","__getOwnPropDescs","getOwnPropertyDescriptors","__getOwnPropSymbols","getOwnPropertySymbols","__hasOwnProp","prototype","hasOwnProperty","__propIsEnum","propertyIsEnumerable","__defNormalProp","obj","key","value","enumerable","configurable","writable","__spreadValues","a","b","prop","call","_iterator","_createForOfIteratorHelper","_step","s","n","done","err","e","f","__spreadProps","defineComponent","toRefs","shallowRef","ref","computed","onMounted","watch","createVNode","mergeProps","getPrefixCls","useMutationObserver","useTheme","canvasToGray","styleToString","isArray","_Watermark","name","props","content","type","String","Array","image","width","Number","height","gap","_default","offset","rotate","font","zIndex","alpha","antiTamper","Boolean","grayscale","repeat","staggered","setup","_ref","slots","attrs","_toRefs","prefixCls","ratio","window","devicePixelRatio","containerRef","watermarkMap","Map","fontSize","_a","_b","fontWeight","fontStyle","fontFamily","textAlign","contents","color","theme","gapX","gapY","gapXCenter","gapYCenter","offsetLeft","offsetTop","markStyle","left","top","position","concat","pointerEvents","backgroundRepeat","backgroundPosition","isStaggered","appendWatermark","base64","width2","watermarkEle","get","contains","removeChild","newWatermarkEle","document","createElement","setAttribute","backgroundImage","backgroundSize","append","set","getMarkSize","ctx","defaultWidth","defaultHeight","measureText","widths","map","item","Math","ceil","max","apply","_toConsumableArray","length","renderWatermark","canvas","getContext","_getMarkSize","_getMarkSize2","_slicedToArray","markWidth","markheight","realMarkWidth","realMarkHeight","canvasWidth","canvasHeight","drawX","drawY","rotateX","rotateY","baseSize","fillWidth","globalAlpha","save","translate","PI","drawImage","restore","toDataURL","img","Image","onload","crossOrigin","referrerPolicy","src","mergedFontSize","fillStyle","textBaseline","forEach","index","fillText","isWatermarkEle","ele","from","values","includes","handleMutations","mutations","_iterator2","_step2","mutation","isRemoved","removedNodes","some","node","isModified","target","_useTheme","attributes","childList","characterData","subtree","deep","flush","overflow","default"],"sources":["/Users/yinger/Desktop/algo_evaluator_front/node_modules/@arco-design/web-vue/es/watermark/watermark.js"],"sourcesContent":["var __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nimport { defineComponent, toRefs, shallowRef, ref, computed, onMounted, watch, createVNode, mergeProps } from \"vue\";\nimport { getPrefixCls } from \"../_utils/global-config.js\";\nimport { useMutationObserver } from \"./hooks/use-mutation-observer.js\";\nimport { useTheme } from \"./hooks/use-theme.js\";\nimport { canvasToGray, styleToString } from \"./utils/index.js\";\nimport { isArray } from \"../_utils/is.js\";\nvar _Watermark = defineComponent({\n  name: \"Watermark\",\n  props: {\n    content: {\n      type: [String, Array]\n    },\n    image: {\n      type: String\n    },\n    width: {\n      type: Number\n    },\n    height: {\n      type: Number\n    },\n    gap: {\n      type: Array,\n      default: () => [90, 90]\n    },\n    offset: {\n      type: Array\n    },\n    rotate: {\n      type: Number,\n      default: -22\n    },\n    font: {\n      type: Object\n    },\n    zIndex: {\n      type: Number,\n      default: 6\n    },\n    alpha: {\n      type: Number,\n      default: 1\n    },\n    antiTamper: {\n      type: Boolean,\n      default: true\n    },\n    grayscale: {\n      type: Boolean,\n      default: false\n    },\n    repeat: {\n      type: Boolean,\n      default: true\n    },\n    staggered: {\n      type: Boolean,\n      default: true\n    }\n  },\n  setup(props, {\n    slots,\n    attrs\n  }) {\n    const {\n      width,\n      height,\n      image,\n      rotate,\n      alpha,\n      repeat,\n      grayscale\n    } = toRefs(props);\n    const prefixCls = getPrefixCls(\"watermark\");\n    const ratio = window.devicePixelRatio || 1;\n    const containerRef = shallowRef();\n    const watermarkMap = ref(new Map());\n    const fontSize = computed(() => {\n      var _a, _b;\n      return (_b = (_a = props.font) == null ? void 0 : _a.fontSize) != null ? _b : 16;\n    });\n    const fontWeight = computed(() => {\n      var _a, _b;\n      return (_b = (_a = props.font) == null ? void 0 : _a.fontWeight) != null ? _b : \"normal\";\n    });\n    const fontStyle = computed(() => {\n      var _a, _b;\n      return (_b = (_a = props.font) == null ? void 0 : _a.fontStyle) != null ? _b : \"normal\";\n    });\n    const fontFamily = computed(() => {\n      var _a, _b;\n      return (_b = (_a = props.font) == null ? void 0 : _a.fontFamily) != null ? _b : \"sans-serif\";\n    });\n    const textAlign = computed(() => {\n      var _a, _b;\n      return (_b = (_a = props.font) == null ? void 0 : _a.textAlign) != null ? _b : \"center\";\n    });\n    const contents = computed(() => isArray(props.content) ? props.content : [props.content]);\n    const color = computed(() => {\n      var _a, _b;\n      return (_b = (_a = props.font) == null ? void 0 : _a.color) != null ? _b : theme.value === \"dark\" ? \"rgba(255, 255, 255, 0.15)\" : \"rgba(0, 0, 0, 0.15)\";\n    });\n    const gapX = computed(() => {\n      var _a, _b;\n      return (_b = (_a = props.gap) == null ? void 0 : _a[0]) != null ? _b : 90;\n    });\n    const gapY = computed(() => {\n      var _a, _b;\n      return (_b = (_a = props.gap) == null ? void 0 : _a[1]) != null ? _b : 90;\n    });\n    const gapXCenter = computed(() => gapX.value / 2);\n    const gapYCenter = computed(() => gapY.value / 2);\n    const offsetLeft = computed(() => {\n      var _a, _b;\n      return (_b = (_a = props.offset) == null ? void 0 : _a[0]) != null ? _b : gapXCenter.value;\n    });\n    const offsetTop = computed(() => {\n      var _a, _b;\n      return (_b = (_a = props.offset) == null ? void 0 : _a[1]) != null ? _b : gapYCenter.value;\n    });\n    const markStyle = computed(() => {\n      var _a;\n      const left = offsetLeft.value - gapXCenter.value;\n      const top = offsetTop.value - gapYCenter.value;\n      return {\n        position: \"absolute\",\n        left: left > 0 ? `${left}px` : 0,\n        top: top > 0 ? `${top}px` : 0,\n        width: left > 0 ? `calc(100% - ${left}px)` : \"100%\",\n        height: top > 0 ? `calc(100% - ${top}px)` : \"100%\",\n        pointerEvents: \"none\",\n        backgroundRepeat: props.repeat ? \"repeat\" : \"no-repeat\",\n        backgroundPosition: `${left > 0 ? 0 : left}px ${top > 0 ? 0 : top}px`,\n        zIndex: (_a = props.zIndex) != null ? _a : 6\n      };\n    });\n    const isStaggered = computed(() => props.repeat && props.staggered);\n    const appendWatermark = (base64, width2) => {\n      var _a;\n      if (containerRef.value) {\n        const watermarkEle = watermarkMap.value.get(containerRef.value);\n        if (watermarkEle) {\n          if (containerRef.value.contains(watermarkEle)) {\n            containerRef.value.removeChild(watermarkEle);\n          }\n          watermarkMap.value.delete(containerRef.value);\n        }\n        const newWatermarkEle = document.createElement(\"div\");\n        newWatermarkEle.setAttribute(\"style\", styleToString(__spreadProps(__spreadValues({}, markStyle.value), {\n          backgroundImage: `url('${base64}')`,\n          backgroundSize: `${width2}px`\n        })));\n        (_a = containerRef.value) == null ? void 0 : _a.append(newWatermarkEle);\n        watermarkMap.value.set(containerRef.value, newWatermarkEle);\n      }\n    };\n    const getMarkSize = (ctx) => {\n      var _a, _b;\n      let defaultWidth = 120;\n      let defaultHeight = 28;\n      if (!image.value && ctx.measureText) {\n        ctx.font = `${fontSize.value}px ${fontFamily.value}`;\n        const widths = contents.value.map((item) => ctx.measureText(item).width);\n        defaultWidth = Math.ceil(Math.max(...widths));\n        defaultHeight = fontSize.value * contents.value.length + (contents.value.length - 1) * 3;\n      }\n      return [(_a = width.value) != null ? _a : defaultWidth, (_b = height.value) != null ? _b : defaultHeight];\n    };\n    const renderWatermark = () => {\n      var _a;\n      const canvas = document.createElement(\"canvas\");\n      const ctx = canvas.getContext(\"2d\");\n      if (!ctx)\n        return;\n      const [markWidth, markheight] = getMarkSize(ctx);\n      const realMarkWidth = markWidth * ratio;\n      const realMarkHeight = markheight * ratio;\n      const canvasWidth = (gapX.value + markWidth) * ratio;\n      const canvasHeight = (gapY.value + markheight) * ratio;\n      const drawX = gapX.value / 2 * ratio;\n      const drawY = gapY.value / 2 * ratio;\n      const rotateX = canvasWidth / 2;\n      const rotateY = canvasHeight / 2;\n      const baseSize = isStaggered.value ? 2 : 1;\n      const fillWidth = (gapX.value + markWidth) * baseSize;\n      canvas.width = canvasWidth * baseSize;\n      canvas.height = canvasHeight * baseSize;\n      ctx.globalAlpha = alpha.value;\n      ctx.save();\n      ctx.translate(rotateX, rotateY);\n      ctx.rotate(Math.PI / 180 * rotate.value);\n      ctx.translate(-rotateX, -rotateY);\n      const drawImage = () => {\n        ctx.restore();\n        if (isStaggered.value) {\n          ctx.drawImage(canvas, 0, 0, canvasWidth, canvasHeight, canvasWidth, canvasHeight, canvasWidth, canvasHeight);\n        }\n        grayscale.value && canvasToGray(canvas);\n        appendWatermark(canvas.toDataURL(), fillWidth);\n      };\n      if (image.value) {\n        const img = new Image();\n        img.onload = () => {\n          ctx.drawImage(img, drawX, drawY, realMarkWidth, realMarkHeight);\n          drawImage();\n        };\n        img.crossOrigin = \"anonymous\";\n        img.referrerPolicy = \"no-referrer\";\n        img.src = image.value;\n      } else {\n        const mergedFontSize = Number(fontSize.value) * ratio;\n        ctx.font = `${fontStyle.value} normal ${fontWeight.value} ${mergedFontSize}px/${markheight}px ${fontFamily.value}`;\n        ctx.fillStyle = color.value;\n        ctx.textAlign = textAlign.value;\n        ctx.textBaseline = \"top\";\n        ctx.translate(realMarkWidth / 2, 0);\n        (_a = contents.value) == null ? void 0 : _a.forEach((item, index) => {\n          ctx.fillText(item != null ? item : \"\", drawX, drawY + index * (mergedFontSize + 3 * ratio));\n        });\n        drawImage();\n      }\n    };\n    const isWatermarkEle = (ele) => Array.from(watermarkMap.value.values()).includes(ele);\n    const handleMutations = (mutations) => {\n      if (!props.antiTamper)\n        return;\n      for (const mutation of mutations) {\n        const isRemoved = Array.from(mutation.removedNodes).some((node) => isWatermarkEle(node));\n        const isModified = mutation.type === \"attributes\" && isWatermarkEle(mutation.target);\n        if (isRemoved || isModified) {\n          renderWatermark();\n          break;\n        }\n      }\n    };\n    const {\n      theme\n    } = useTheme(renderWatermark);\n    onMounted(() => {\n      renderWatermark();\n      useMutationObserver(containerRef.value, handleMutations, {\n        attributes: true,\n        childList: true,\n        characterData: true,\n        subtree: true\n      });\n    });\n    watch(props, renderWatermark, {\n      deep: true,\n      flush: \"post\"\n    });\n    return () => {\n      var _a;\n      return createVNode(\"div\", mergeProps({\n        \"ref\": containerRef,\n        \"class\": prefixCls,\n        \"style\": {\n          position: \"relative\",\n          overflow: \"hidden\"\n        }\n      }, attrs), [(_a = slots.default) == null ? void 0 : _a.call(slots)]);\n    };\n  }\n});\nexport { _Watermark as default };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}